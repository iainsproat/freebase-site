
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
(function(c){c.extend({tablesorter:new function(){function a(d,a){b(d+","+((new Date).getTime()-a.getTime())+"ms")}function b(d){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(d):alert(d)}function m(d,a){var h="";if(0!=d.tBodies.length){var e=d.tBodies[0].rows;if(e[0])for(var f=[],J=e[0].cells.length,i=0;i<J;i++){var g=!1;c.metadata&&c(a[i]).metadata()&&c(a[i]).metadata().sorter?g=q(c(a[i]).metadata().sorter):d.config.headers[i]&&d.config.headers[i].sorter&&(g=q(d.config.headers[i].sorter));
if(!g)a:{for(var g=d,j=e,l=-1,m=i,r=p.length,o=!1,s=!1,v=!0;""==s&&v;)l++,j[l]?(o=j[l].cells[m],s=c.trim(z(g.config,o)),g.config.debug&&b("Checking if value was empty on row:"+l)):v=!1;for(j=1;j<r;j++)if(p[j].is(s,g,o)){g=p[j];break a}g=p[0]}d.config.debug&&(h+="column:"+i+" parser:"+g.id+"\n");f.push(g)}d.config.debug&&b(h);return f}}function q(d){for(var a=p.length,c=0;c<a;c++)if(p[c].id.toLowerCase()==d.toLowerCase())return p[c];return!1}function r(d){var n;d.config.debug&&(n=new Date);for(var h=
d.tBodies[0]&&d.tBodies[0].rows.length||0,e=d.tBodies[0].rows[0]&&d.tBodies[0].rows[0].cells.length||0,f=d.config.parsers,b={row:[],normalized:[]},i=0;i<h;++i){var g=c(d.tBodies[0].rows[i]),j=[];if(g.hasClass(d.config.cssChildRow))b.row[b.row.length-1]=b.row[b.row.length-1].add(g);else{b.row.push(g);for(var l=0;l<e;++l)j.push(f[l].format(z(d.config,g[0].cells[l]),d,g[0].cells[l]));j.push(b.normalized.length);b.normalized.push(j)}}d.config.debug&&a("Building cache for "+h+" rows:",n);return b}function z(d,
a){var h="";if(!a)return"";d.supportsTextContent||(d.supportsTextContent=a.textContent||!1);return h="simple"==d.textExtraction?d.supportsTextContent?a.textContent:a.childNodes[0]&&a.childNodes[0].hasChildNodes()?a.childNodes[0].innerHTML:a.innerHTML:"function"==typeof d.textExtraction?d.textExtraction(a):c(a).text()}function A(d,n){var h;d.config.debug&&(h=new Date);for(var e=n.row,f=n.normalized,b=f.length,i=f[0].length-1,g=c(d.tBodies[0]),j=[],l=0;l<b;l++){var k=f[l][i];j.push(e[k]);if(!d.config.appender)for(var m=
e[k].length,o=0;o<m;o++)g[0].appendChild(e[k][o])}d.config.appender&&d.config.appender(d,j);j=null;d.config.debug&&a("Rebuilt table:",h);B(d);setTimeout(function(){c(d).trigger("sortEnd")},0)}function D(a,c){return a.config.headers[c]&&a.config.headers[c].lockedOrder?a.config.headers[c].lockedOrder:!1}function B(a){for(var c=a.config.widgets,h=c.length,e=0;e<h;e++)E(c[e]).format(a)}function E(a){for(var c=u.length,h=0;h<c;h++)if(u[h].id.toLowerCase()==a.toLowerCase())return u[h]}function F(a,b,h,
e){b.removeClass(e[0]).removeClass(e[1]);var f=[];b.each(function(){this.sortDisabled||(f[this.column]=c(this))});a=h.length;for(b=0;b<a;b++)f[h[b][0]].addClass(e[h[b][1]])}function G(c,b,h){var e,f;c.config.debug&&(e=new Date);var k="var sortWrapper = function(a,b) {",i=b.length;for(f=0;f<i;f++)var g=b[f][0],j=b[f][1],g="text"==c.config.parsers[g].type?0==j?w("text","asc",g):w("text","desc",g):0==j?w("numeric","asc",g):w("numeric","desc",g),l="e"+f,k=k+("var "+l+" = "+g),k=k+("if("+l+") { return "+
l+"; } "),k=k+"else { ";f=h.normalized[0].length-1;k+="return a["+f+"]-b["+f+"];";for(f=0;f<i;f++)k+="}; ";k+="return 0; }; ";c.config.debug&&a("Evaling expression:"+k,new Date);eval(k);h.normalized.sort(sortWrapper);c.config.debug&&a("Sorting on "+b.toString()+" and dir "+j+" time:",e);return h}function w(a,c,b){var e="a["+b+"]",b="b["+b+"]";if("text"==a&&"asc"==c)return"("+e+" == "+b+" ? 0 : ("+e+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+b+") ? -1 : 1 )));";
if("text"==a&&"desc"==c)return"("+e+" == "+b+" ? 0 : ("+e+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+b+" < "+e+") ? -1 : 1 )));";if("numeric"==a&&"asc"==c)return"("+e+" === null && "+b+" === null) ? 0 :("+e+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+b+"));";if("numeric"==a&&"desc"==c)return"("+e+" === null && "+b+" === null) ? 0 :("+e+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+
b+" - "+e+"));"}var p=[],u=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=a;this.construct=
function(d){return this.each(function(){if(this.tHead&&this.tBodies){var n,h,e;this.config={};e=c.extend(this.config,c.tablesorter.defaults,d);n=c(this);c.data(this,"tablesorter",e);var f=this,p;f.config.debug&&(p=new Date);for(var i=[],g={},j=f.getElementsByTagName("THEAD")[0].getElementsByTagName("TR"),l=0;l<j.length;l++)for(var q=j[l].cells,u=0;u<q.length;u++){var o=q[u],s=o.parentNode.rowIndex,v=s+"-"+o.cellIndex,w=o.rowSpan||1,o=o.colSpan||1,y;"undefined"==typeof i[s]&&(i[s]=[]);var t;for(t=
0;t<i[s].length+1;t++)if("undefined"==typeof i[s][t]){y=t;break}g[v]=y;for(t=s;t<s+w;t++){"undefined"==typeof i[t]&&(i[t]=[]);for(var v=i[t],C=y;C<y+o;C++)v[C]="x"}}var x=c(f.config.selectorHeaders,f).each(function(a){this.column=g[this.parentNode.rowIndex+"-"+this.cellIndex];this.count=this.order="Number"!=typeof f.config.sortInitialOrder?"desc"==f.config.sortInitialOrder.toLowerCase()?1:0:1==f.config.sortInitialOrder?1:0;if(c.metadata&&!1===c(this).metadata().sorter||f.config.headers[a]&&!1===f.config.headers[a].sorter)this.sortDisabled=
!0;D(f,a)&&(this.order=this.lockedOrder=D(f,a));if(!this.sortDisabled){var b=c(this).addClass(f.config.cssHeader);f.config.onRenderHeader&&f.config.onRenderHeader.apply(b)}f.config.headerList[a]=this});f.config.debug&&(a("Built headers:",p),b(x));this.config.parsers=m(this,x);h=r(this);var H=[e.cssDesc,e.cssAsc];if(this.config.widthFixed){var I=c("<colgroup>");c("tr:first td",this.tBodies[0]).each(function(){I.append(c("<col>").css("width",c(this).width()))});c(this).prepend(I)}x.click(function(a){var b=
n[0].tBodies[0]&&n[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&b>0){n.trigger("sortStart");c(this);b=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(a[e.sortMultiSortKey]){a:{for(var a=e.sortList,d=a.length,f=0;f<d;f++)if(a[f][0]==b){a=true;break a}a=false}if(a)for(a=0;a<e.sortList.length;a++){d=e.sortList[a];f=e.headerList[d[0]];if(d[0]==b){f.count=d[1];f.count++;d[1]=f.count%2}}else e.sortList.push([b,this.order])}else{e.sortList=[];if(e.sortForce!=
null){d=e.sortForce;for(a=0;a<d.length;a++)d[a][0]!=b&&e.sortList.push(d[a])}e.sortList.push([b,this.order])}setTimeout(function(){F(n[0],x,e.sortList,H);A(n[0],G(n[0],e.sortList,h))},1);return false}}).mousedown(function(){if(e.cancelSelection){this.onselectstart=function(){return false};return false}});n.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=m(a,x);h=r(a)},1)}).bind("updateCell",function(a,c){var b=this.config,d=[c.parentNode.rowIndex-1,c.cellIndex];h.normalized[d[0]][d[1]]=
b.parsers[d[1]].format(z(b,c),c)}).bind("sorton",function(a,b){c(this).trigger("sortStart");e.sortList=b;for(var d=e.sortList,f=this.config,k=d.length,g=0;g<k;g++){var i=d[g],j=f.headerList[i[0]];j.count=i[1];j.count++}F(this,x,d,H);A(this,G(this,d,h))}).bind("appendCache",function(){A(this,h)}).bind("applyWidgetId",function(a,c){E(c).format(this)}).bind("applyWidgets",function(){B(this)});c.metadata&&(c(this).metadata()&&c(this).metadata().sortlist)&&(e.sortList=c(this).metadata().sortlist);0<e.sortList.length&&
n.trigger("sorton",[e.sortList]);B(this)}})};this.addParser=function(a){for(var c=p.length,b=!0,e=0;e<c;e++)p[e].id.toLowerCase()==a.id.toLowerCase()&&(b=!1);b&&p.push(a)};this.addWidget=function(a){u.push(a)};this.formatFloat=function(a){a=parseFloat(a);return isNaN(a)?0:a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(a){return/^[-+]?\d*$/.test(c.trim(a.replace(/[,.']/g,"")))};this.clearTableBody=function(a){c.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(a.tBodies[0]):
a.tBodies[0].innerHTML=""}}});c.fn.extend({tablesorter:c.tablesorter.construct});var b=c.tablesorter;b.addParser({id:"text",is:function(){return!0},format:function(a){return c.trim(a.toLocaleLowerCase())},type:"text"});b.addParser({id:"digit",is:function(a,b){return c.tablesorter.isDigit(a,b.config)},format:function(a){return c.tablesorter.formatFloat(a)},type:"numeric"});b.addParser({id:"currency",is:function(a){return/^[\u00a3$\u20ac?.]/.test(a)},format:function(a){return c.tablesorter.formatFloat(a.replace(RegExp(/[\u00a3$\u20ac]/g),
""))},type:"numeric"});b.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){for(var a=a.split("."),b="",m=a.length,q=0;q<m;q++)var r=a[q],b=2==r.length?b+("0"+r):b+r;return c.tablesorter.formatFloat(b)},type:"numeric"});b.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},format:function(a){return jQuery.trim(a.replace(RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});b.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},
format:function(a){return c.tablesorter.formatFloat(""!=a?(new Date(a.replace(RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});b.addParser({id:"percent",is:function(a){return/\%$/.test(c.trim(a))},format:function(a){return c.tablesorter.formatFloat(a.replace(RegExp(/%/g),""))},type:"numeric"});b.addParser({id:"usLongDate",is:function(a){return a.match(RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return c.tablesorter.formatFloat((new Date(a)).getTime())},
type:"numeric"});b.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,b){var m=b.config,a=a.replace(/\-/g,"/");if("us"==m.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if("uk"==m.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if("dd/mm/yy"==m.dateFormat||"dd-mm-yy"==m.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return c.tablesorter.formatFloat((new Date(a)).getTime())},
type:"numeric"});b.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return c.tablesorter.formatFloat((new Date("2000/01/01 "+a)).getTime())},type:"numeric"});b.addParser({id:"metadata",is:function(){return!1},format:function(a,b,m){a=b.config;a=!a.parserMetadataName?"sortValue":a.parserMetadataName;return c(m).metadata()[a]},type:"numeric"});b.addWidget({id:"zebra",format:function(a){var b;a.config.debug&&(b=new Date);
var m,q=-1,r;c("tr:visible",a.tBodies[0]).each(function(){m=c(this);m.hasClass(a.config.cssChildRow)||q++;r=0==q%2;m.removeClass(a.config.widgetZebra.css[r?0:1]).addClass(a.config.widgetZebra.css[r?1:0])});a.config.debug&&c.tablesorter.benchmark("Applying Zebra widget",b)}})})(jQuery);
(function(c){c(function(){c.tablesorter&&(c("<div>"),c.tablesorter.defaults.cssAsc="column-header-asc",c.tablesorter.defaults.cssDesc="column-header-desc",c.tablesorter.defaults.cssHeader="column-header",c.tablesorter.addParser({id:"datetime",is:function(){return!1},format:function(b,a,k){return c("[datetime]:first",k).attr("datetime")},type:"text"}),c.tablesorter.addParser({id:"ignoreCase",is:function(){return!1},format:function(b){return b.toLowerCase()},type:"text"}),c.tablesorter.addParser({id:"string",
is:function(){return!1},format:function(b){return b},type:"text"}),c.tablesorter.addParser({id:"number",is:function(){return!1},format:function(b,a,k){b=c(".number:first",k).attr("data-value");null==b&&(b=Number.MIN_VALUE);return b},type:"numeric"}),c(".table-sortable").each(function(){c(this).tablesorter()}))})})(jQuery);
(function(c,b){var a={init:function(){c("#create-domain").click(function(b){a.create_domain_begin(b);return!1})},create_domain_begin:function(a){b.get_script(b.h.static_url("user-edit.mf.js"),function(){b.schema.create_domain_begin(a)})}};c(a.init)})(jQuery,window.freebase);
