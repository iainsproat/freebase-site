
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
(function(c){c.extend({tablesorter:new (function(){function a(b,d){r(b+","+((new Date).getTime()-d.getTime())+"ms")}function r(b){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(b):alert(b)}function j(b,d){if(b.config.debug)var f="";var l=b.tBodies[0].rows;if(b.tBodies[0].rows[0]){var e=[];l=l[0].cells;for(var q=l.length,g=0;g<q;g++){var m=false;if(c.metadata&&c(d[g]).metadata()&&c(d[g]).metadata().sorter)m=u(c(d[g]).metadata().sorter);else if(b.config.headers[g]&&b.config.headers[g].sorter)m=
u(b.config.headers[g].sorter);if(!m)a:{m=l[g];for(var n=s.length,o=1;o<n;o++)if(s[o].is(c.trim(v(b.config,m)),b,m)){m=s[o];break a}m=s[0]}if(b.config.debug)f+="column:"+g+" parser:"+m.id+"\n";e.push(m)}}b.config.debug&&r(f);return e}function u(b){for(var d=s.length,f=0;f<d;f++)if(s[f].id.toLowerCase()==b.toLowerCase())return s[f];return false}function w(b){if(b.config.debug)var d=new Date;for(var f=b.tBodies[0]&&b.tBodies[0].rows.length||0,l=b.tBodies[0].rows[0]&&b.tBodies[0].rows[0].cells.length||
0,e=b.config.parsers,q={row:[],normalized:[]},g=0;g<f;++g){var m=b.tBodies[0].rows[g],n=[];q.row.push(c(m));for(var o=0;o<l;++o)n.push(e[o].format(v(b.config,m.cells[o]),b,m.cells[o]));n.push(g);q.normalized.push(n)}b.config.debug&&a("Building cache for "+f+" rows:",d);return q}function v(b,d){if(!d)return"";var f="";return f=b.textExtraction=="simple"?d.childNodes[0]&&d.childNodes[0].hasChildNodes()?d.childNodes[0].innerHTML:d.innerHTML:typeof b.textExtraction=="function"?b.textExtraction(d):c(d).text()}
function z(b,d){if(b.config.debug)var f=new Date;for(var l=d.row,e=d.normalized,q=e.length,g=e[0].length-1,m=c(b.tBodies[0]),n=[],o=0;o<q;o++){n.push(l[e[o][g]]);if(!b.config.appender)for(var E=l[e[o][g]],D=E.length,C=0;C<D;C++)m[0].appendChild(E[C])}b.config.appender&&b.config.appender(b,n);n=null;b.config.debug&&a("Rebuilt table:",f);A(b);setTimeout(function(){c(b).trigger("sortEnd")},0)}function B(b){if(b.config.debug)var d=new Date;for(var f=[],l=0;l<b.tHead.rows.length;l++)f[l]=0;$tableHeaders=
c("thead th",b);$tableHeaders.each(function(e){this.count=0;this.column=e;var q=b.config.sortInitialOrder;this.order=i=typeof q!="Number"?q.toLowerCase()=="desc"?1:0:q==1?q:0;if(!(q=c.metadata&&c(this).metadata().sorter===false?true:false))q=b.config.headers[e]&&b.config.headers[e].sorter===false?true:false;if(q)this.sortDisabled=true;this.sortDisabled||c(this).addClass(b.config.cssHeader);b.config.headerList[e]=this});if(b.config.debug){a("Built headers:",d);r($tableHeaders)}return $tableHeaders}
function A(b){for(var d=b.config.widgets,f=d.length,l=0;l<f;l++)y(d[l]).format(b)}function y(b){for(var d=x.length,f=0;f<d;f++)if(x[f].id.toLowerCase()==b.toLowerCase())return x[f]}function t(b,d){for(var f=d.length,l=0;l<f;l++)if(d[l][0]==b)return true;return false}function h(b,d,f,l){d.removeClass(l[0]).removeClass(l[1]);var e=[];d.each(function(){this.sortDisabled||(e[this.column]=c(this))});b=f.length;for(d=0;d<b;d++)e[f[d][0]].addClass(l[f[d][1]])}function k(b){if(b.config.widthFixed){var d=
c("<colgroup>");c("tr:first td",b.tBodies[0]).each(function(){d.append(c("<col>").css("width",c(this).width()))});c(b).prepend(d)}}function F(b,d,f){if(b.config.debug)var l=new Date;for(var e="var sortWrapper = function(a,b) {",q=d.length,g=0;g<q;g++){var m=d[g][0],n=d[g][1],o="e"+g;e+="var "+o+" = "+(b.config.parsers[m].type=="text"?n==0?"sortText":"sortTextDesc":n==0?"sortNumeric":"sortNumericDesc")+"(a["+m+"],b["+m+"]); ";e+="if("+o+") { return "+o+"; } ";e+="else { "}g=f.normalized[0].length-
1;e+="return a["+g+"]-b["+g+"];";for(g=0;g<q;g++)e+="}; ";e+="return 0; ";e+="}; ";eval(e);f.normalized.sort(sortWrapper);b.config.debug&&a("Sorting on "+d.toString()+" and dir "+n+" time:",l);return f}var s=[],x=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,
sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:false};this.benchmark=a;this.construct=function(b){return this.each(function(){if(this.tHead&&this.tBodies){var d,f,l,e;this.config={};e=c.extend(this.config,c.tablesorter.defaults,b);d=c(this);f=B(this);this.config.parsers=j(this,f);l=w(this);var q=[e.cssDesc,e.cssAsc];k(this);f.click(function(g){d.trigger("sortStart");var m=d[0].tBodies[0]&&d[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&m>0){c(this);m=this.column;this.order=this.count++%
2;if(g[e.sortMultiSortKey])if(t(m,e.sortList))for(g=0;g<e.sortList.length;g++){var n=e.sortList[g],o=e.headerList[n[0]];if(n[0]==m){o.count=n[1];o.count++;n[1]=o.count%2}}else e.sortList.push([m,this.order]);else{e.sortList=[];if(e.sortForce!=null){n=e.sortForce;for(g=0;g<n.length;g++)n[g][0]!=m&&e.sortList.push(n[g])}e.sortList.push([m,this.order])}setTimeout(function(){h(d[0],f,e.sortList,q);z(d[0],F(d[0],e.sortList,l))},1);return false}}).mousedown(function(){if(e.cancelSelection){this.onselectstart=
function(){return false};return false}});d.bind("update",function(){this.config.parsers=j(this,f);l=w(this)}).bind("sorton",function(g,m){c(this).trigger("sortStart");e.sortList=m;for(var n=e.sortList,o=this.config,E=n.length,D=0;D<E;D++){var C=n[D],G=o.headerList[C[0]];G.count=C[1];G.count++}h(this,f,n,q);z(this,F(this,n,l))}).bind("appendCache",function(){z(this,l)}).bind("applyWidgetId",function(g,m){y(m).format(this)}).bind("applyWidgets",function(){A(this)});if(c.metadata&&c(this).metadata()&&
c(this).metadata().sortlist)e.sortList=c(this).metadata().sortlist;e.sortList.length>0&&d.trigger("sorton",[e.sortList]);A(this)}})};this.addParser=function(b){for(var d=s.length,f=true,l=0;l<d;l++)if(s[l].id.toLowerCase()==b.id.toLowerCase())f=false;f&&s.push(b)};this.addWidget=function(b){x.push(b)};this.formatFloat=function(b){b=parseFloat(b);return isNaN(b)?0:b};this.formatInt=function(b){b=parseInt(b);return isNaN(b)?0:b};this.isDigit=function(b,d){var f="\\"+d.decimal;return RegExp("/(^[+]?0("+
f+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+f+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+f+"0+$)/").test(c.trim(b))};this.clearTableBody=function(b){if(c.browser.msie)(function(){for(;this.firstChild;)this.removeChild(this.firstChild)}).apply(b.tBodies[0]);else b.tBodies[0].innerHTML=""}})});c.fn.extend({tablesorter:c.tablesorter.construct});var p=c.tablesorter;p.addParser({id:"text",is:function(){return true},format:function(a){return c.trim(a.toLowerCase())},type:"text"});p.addParser({id:"digit",
is:function(a,r){return c.tablesorter.isDigit(a,r.config)},format:function(a){return c.tablesorter.formatFloat(a)},type:"numeric"});p.addParser({id:"currency",is:function(a){return/^[\u00c3\u201a\u00c2\u00a3$\u00c3\u00a2\u00e2\u20ac\u0161\u00c2\u00ac?.]/.test(a)},format:function(a){return c.tablesorter.formatFloat(a.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"});p.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){a=a.split(".");
for(var r="",j=a.length,u=0;u<j;u++){var w=a[u];r+=w.length==2?"0"+w:w}return c.tablesorter.formatFloat(r)},type:"numeric"});p.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},format:function(a){return jQuery.trim(a.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});p.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(a){return c.tablesorter.formatFloat(a!=""?(new Date(a.replace(new RegExp(/-/g),"/"))).getTime():
"0")},type:"numeric"});p.addParser({id:"percent",is:function(a){return/\%$/.test(c.trim(a))},format:function(a){return c.tablesorter.formatFloat(a.replace(new RegExp(/%/g),""))},type:"numeric"});p.addParser({id:"usLongDate",is:function(a){return a.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return c.tablesorter.formatFloat((new Date(a)).getTime())},type:"numeric"});p.addParser({id:"shortDate",
is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,r){var j=r.config;a=a.replace(/\-/g,"/");if(j.dateFormat=="us")a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if(j.dateFormat=="uk")a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if(j.dateFormat=="dd/mm/yy"||j.dateFormat=="dd-mm-yy")a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return c.tablesorter.formatFloat((new Date(a)).getTime())},type:"numeric"});
p.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return c.tablesorter.formatFloat((new Date("2000/01/01 "+a)).getTime())},type:"numeric"});p.addParser({id:"metadata",is:function(){return false},format:function(a,r,j){a=r.config;a=!a.parserMetadataName?"sortValue":a.parserMetadataName;return c(j).metadata()[a]},type:"numeric"});p.addWidget({id:"zebra",format:function(a){if(a.config.debug)var r=new Date;c("tr:visible",
a.tBodies[0]).filter(":even").removeClass(a.config.widgetZebra.css[1]).addClass(a.config.widgetZebra.css[0]).end().filter(":odd").removeClass(a.config.widgetZebra.css[0]).addClass(a.config.widgetZebra.css[1]);a.config.debug&&c.tablesorter.benchmark("Applying Zebra widget",r)}})})(jQuery);
(function(c){c(function(){if(c.tablesorter){var p=c("<div>");c.tablesorter.defaults.cssAsc="column-header-asc";c.tablesorter.defaults.cssDesc="column-header-desc";c.tablesorter.defaults.cssHeader="column-header";c.tablesorter.addParser({id:"datetime",is:function(){return false},format:function(a){p.html(a);return p.find("time:first").attr("datetime")},type:"text"});c.tablesorter.addParser({id:"ignoreCase",is:function(){return false},format:function(a){p.html(a);return p.text().toLowerCase()},type:"text"});
c.tablesorter.addParser({id:"string",is:function(){return false},format:function(a){p.html(a);return p.text()},type:"text"});c.tablesorter.addParser({id:"number",is:function(){return false},format:function(a){p.html(a);a=p.find(".number:first").attr("data-value");if(a==null)return Number.MAX_VALUE;return a},type:"numeric"});c(".table-sortable").each(function(){c(this).tablesorter()})}})})(jQuery);
(function(c){jQuery&&jQuery(window).trigger("acre.template.register",{pkgid:"//54a.data.www.tags.svn.freebase-site.googlecode.dev/user.mjt",source:{def:function(){var p=function(){var a=this.tpackage,r=this.exports,j=a._template_fragments,u=a.runtime.new_markuplist(),w=0;u[w++]=j[0];var v=this.exports.c={},z=c.require("lib/helper/helpers.sjs");c.require("lib/template/imagecomponents");var B=c.require("lib/i18n/i18n.sjs"),A=c.require("lib/i18n/components.mjt"),y=B.gettext;u[w++]=j[1];var t=function(){return a.runtime.new_markuplist()};
t=a.runtime.tfunc_factory("head()",t,a,undefined,false);r.head=t;t.source_microdata=null;u[w++]=j[2];t=function(){var h=a.runtime.new_markuplist(),k=0;h[k++]=j[3];if(v.owned_domains&&v.owned_domains.length){h[k++]=j[4];h[k++]=y("Create new");h[k++]=j[5];h[k++]=z.template_sprintf(y("%s owns %s domains"),B.display_name(v.object),A.number(v.owned_domains.length));h[k++]=j[6];h[k++]=y("Name");h[k++]=j[7];h[k++]=y("Since");h[k++]=j[8];a.runtime.foreach(this,v.owned_domains,function(F,s){for(var x=1;x;){h[k++]=
j[9];h[k++]=a.runtime.make_attr_safe(z.fb_url(s.id),true);h[k++]=j[10];h[k++]=B.display_name(s);h[k++]=j[11];h[k++]=A.datetime(s["/type/domain/owners"].member.link.timestamp,[["class","published"]],"d");h[k++]=j[12];x--}return x?a.runtime._break_token:a.runtime._continue_token});h[k++]=j[13]}h[k++]=j[14];if(v.watched_domains&&v.watched_domains.length){h[k++]=j[15];h[k++]=z.template_sprintf(y("%s is watching %s domains"),B.display_name(v.object),A.number(v.watched_domains.length));h[k++]=j[16];h[k++]=
y("Name");h[k++]=j[17];h[k++]=y("Since");h[k++]=j[18];a.runtime.foreach(this,v.watched_domains,function(F,s){for(var x=1;x;){h[k++]=j[19];h[k++]=a.runtime.make_attr_safe(z.fb_url(s.id),true);h[k++]=j[20];h[k++]=B.display_name(s);h[k++]=j[21];h[k++]=A.datetime(s["!/freebase/user_profile/favorite_domains"].link.timestamp,[["class","published"]],"d");h[k++]=j[22];x--}return x?a.runtime._break_token:a.runtime._continue_token});h[k++]=j[23]}h[k++]=j[24];return h};t=a.runtime.tfunc_factory("page_content()",
t,a,undefined,false);r.page_content=t;t.source_microdata=null;u[w++]=j[25];t=function(){var h=a.runtime.new_markuplist(),k=0;h[k++]=j[26];return h};t=a.runtime.tfunc_factory("footer_script()",t,a,undefined,false);r.footer_script=t;t.source_microdata=null;u[w++]=j[27];return u};p.source_microdata=null;return p}(),info:{file:"//54a.data.www.tags.svn.freebase-site.googlecode.dev/user.mjt",stringtable:["","","","",'\n    <div class="table-header">\n      <div class="button-group edit">\n        <a class="button primary" href="#" id="create-domain">',
'</a>\n      </div>\n      <h2 class="table-title">','</h2>\n    </div>\n    <table cellspacing="0" class="table table-sortable">\n      <thead>\n        <tr>\n          <th class="column-header first {sorter: \'ignoreCase\'}" scope="column"><span class="sort-icon">','</span></th>\n          <th class="column-header {sorter: \'datetime\'}" scope="column"><span class="sort-icon">',"</span></th>\n        </tr>\n      </thead>\n      <tbody>",'\n        <tr>\n          <th class="row-header odd first">\n            <a href="',
'">',"</a>\n          </th>\n          <td>\n            ","\n          </td>\n        </tr>","\n      </tbody>\n    </table>","",'\n    <h2 class="table-title">','</h2>\n    <table cellspacing="0" class="table table-sortable">\n      <thead>\n        <tr>\n          <th class="column-header first {sorter: \'ignoreCase\'}" scope="column"><span class="sort-icon">','</span></th>\n          <th class="column-header {sorter: \'datetime\'}" scope="column"><span class="sort-icon">',"</span></th>\n        </tr>\n      </thead>\n      <tbody>",
'\n        <tr>\n          <th class="row-header odd first">\n            <a href="','">',"</a>\n          </th>\n          <td>\n            ","\n          </td>\n        </tr>","\n      </tbody>\n    </table>","","",'\n  <script src="/static/54a.data.www.tags.svn.freebase-site.googlecode.dev/user.mf.js"><\/script>',""],debug_locs:[1,1,1,1,1,1,6,6,7,8,9,10,11,12,13,15,15,15,15,15,15,15,15,15,17,17,17,17,20,20,23,23,23,23,23,25,25,25,25,30,30,30,30,30,30,30,31,31,31,35,35,35,35,35,35,35,37,37,37,
37,37,37,37,40,40,40,40,40,42,42,42,42,42,42,42,45,45,45,45,48,48,49,49,49,53,53,53,53,53,53,54,54,54,58,58,58,58,58,58,58,60,60,60,60,60,60,60,63,63,63,63,63,65,65,65,65,65,65,65,68,68,68,68,69,69,69,69,69,69,71,71,71,71,73,73,73,73,73,73,73,74,74,74,74],output_mode:"html"}}})})(window.freebase.acre,window.freebase.h);
