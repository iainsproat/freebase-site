
/*
 * Copyright 2010, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*
 
 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE 
*/
(function(e){function b(o,q,l){var r=this,f=o.add(this),g=o.find(l.tabs),s=q.jquery?q:o.children(q),d;g.length||(g=o.children());s.length||(s=o.parent().find(q));s.length||(s=e(q));e.extend(this,{click:function(c,n){var h=g.eq(c);if(typeof c=="string"&&c.replace("#","")){h=g.filter("[href*="+c.replace("#","")+"]");c=Math.max(g.index(h),0)}if(l.rotate){var i=g.length-1;if(c<0)return r.click(i,n);if(c>i)return r.click(0,n)}if(!h.length){if(d>=0)return r;c=l.initialIndex;h=g.eq(c)}if(c===d)return r;
n=n||e.Event();n.type="onBeforeClick";f.trigger(n,[c]);if(!n.isDefaultPrevented()){j[l.effect].call(r,c,function(){n.type="onClick";f.trigger(n,[c])});d=c;g.removeClass(l.current);h.addClass(l.current);return r}},getConf:function(){return l},getTabs:function(){return g},getPanes:function(){return s},getCurrentPane:function(){return s.eq(d)},getCurrentTab:function(){return g.eq(d)},getIndex:function(){return d},next:function(){return r.click(d+1)},prev:function(){return r.click(d-1)},destroy:function(){g.unbind(l.event).removeClass(l.current);
s.find("a[href^=#]").unbind("click.T");return r}});e.each("onBeforeClick,onClick".split(","),function(c,n){e.isFunction(l[n])&&e(r).bind(n,l[n]);r[n]=function(h){e(r).bind(n,h);return r}});if(l.history&&e.fn.history){e.tools.history.init(g);l.event="history"}g.each(function(c){e(this).bind(l.event,function(n){r.click(c,n);return n.preventDefault()})});s.find("a[href^=#]").bind("click.T",function(c){r.click(e(this).attr("href"),c)});if(location.hash)r.click(location.hash);else if(l.initialIndex===
0||l.initialIndex>0)r.click(l.initialIndex)}e.tools=e.tools||{version:"@VERSION"};e.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:false,history:false},addEffect:function(o,q){j[o]=q}};var j={"default":function(o,q){this.getPanes().hide().eq(o).show();q.call()},fade:function(o,q){var l=this.getConf(),r=l.fadeOutSpeed,f=this.getPanes();r?f.fadeOut(r):f.hide();f.eq(o).fadeIn(l.fadeInSpeed,q)},slide:function(o,q){this.getPanes().slideUp(200);
this.getPanes().eq(o).slideDown(400,q)},ajax:function(o,q){this.getPanes().eq(0).load(this.getTabs().eq(o).attr("href"),q)}},a;e.tools.tabs.addEffect("horizontal",function(o,q){a||(a=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){e(this).hide()});this.getPanes().eq(o).animate({width:a},function(){e(this).show();q.call()})});e.fn.tabs=function(o,q){var l=this.data("tabs");if(l){l.destroy();this.removeData("tabs")}if(e.isFunction(q))q={onBeforeClick:q};q=e.extend({},
e.tools.tabs.conf,q);this.each(function(){l=new b(e(this),o,q);e(this).data("tabs",l)});return q.api?l:this}})(jQuery);
(function(e){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(b){var j=
this.options;if(this.helper||j.disabled||e(b.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(b);if(!this.handle)return false;return true},_mouseStart:function(b){var j=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(e.ui.ddmanager)e.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt);j.containment&&this._setContainment();if(this._trigger("start",b)===false){this._clear();return false}this._cacheHelperProportions();
e.ui.ddmanager&&!j.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,b);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);return true},_mouseDrag:function(b,j){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!j){var a=this._uiHash();if(this._trigger("drag",b,a)===false){this._mouseUp({});return false}this.position=a.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";e.ui.ddmanager&&e.ui.ddmanager.drag(this,b);return false},_mouseStop:function(b){var j=false;if(e.ui.ddmanager&&!this.options.dropBehaviour)j=e.ui.ddmanager.drop(this,b);if(this.dropped){j=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert=="invalid"&&!j||this.options.revert=="valid"&&j||this.options.revert===true||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,
j)){var a=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){a._trigger("stop",b)!==false&&a._clear()})}else this._trigger("stop",b)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var j=!this.options.handle||!e(this.options.handle,this.element).length?true:false;e(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
b.target)j=true});return j},_createHelper:function(b){var j=this.options;b=e.isFunction(j.helper)?e(j.helper.apply(this.element[0],[b])):j.helper=="clone"?this.element.clone():this.element;b.parents("body").length||b.appendTo(j.appendTo=="parent"?this.element[0].parentNode:j.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string")b=b.split(" ");if(e.isArray(b))b={left:+b[0],top:+b[1]||
0};if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],
this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if(b.containment==
"parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&
b.containment.constructor!=Array){var j=e(b.containment)[0];if(j){b=e(b.containment).offset();var a=e(j).css("overflow")!="hidden";this.containment=[b.left+(parseInt(e(j).css("borderLeftWidth"),10)||0)+(parseInt(e(j).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(e(j).css("borderTopWidth"),10)||0)+(parseInt(e(j).css("paddingTop"),10)||0)-this.margins.top,b.left+(a?Math.max(j.scrollWidth,j.offsetWidth):j.offsetWidth)-(parseInt(e(j).css("borderLeftWidth"),10)||0)-(parseInt(e(j).css("paddingRight"),
10)||0)-this.helperProportions.width-this.margins.left,b.top+(a?Math.max(j.scrollHeight,j.offsetHeight):j.offsetHeight)-(parseInt(e(j).css("borderTopWidth"),10)||0)-(parseInt(e(j).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(b.containment.constructor==Array)this.containment=b.containment},_convertPositionTo:function(b,j){if(!j)j=this.position;var a=b=="absolute"?1:-1,o=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,q=/(html|body)/i.test(o[0].tagName);return{top:j.top+this.offset.relative.top*a+this.offset.parent.top*a-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():q?0:o.scrollTop())*a),left:j.left+this.offset.relative.left*a+this.offset.parent.left*a-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():
q?0:o.scrollLeft())*a)}},_generatePosition:function(b){var j=this.options,a=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=/(html|body)/i.test(a[0].tagName),q=b.pageX,l=b.pageY;if(this.originalPosition){if(this.containment){if(b.pageX-this.offset.click.left<this.containment[0])q=this.containment[0]+this.offset.click.left;if(b.pageY-this.offset.click.top<this.containment[1])l=this.containment[1]+
this.offset.click.top;if(b.pageX-this.offset.click.left>this.containment[2])q=this.containment[2]+this.offset.click.left;if(b.pageY-this.offset.click.top>this.containment[3])l=this.containment[3]+this.offset.click.top}if(j.grid){l=this.originalPageY+Math.round((l-this.originalPageY)/j.grid[1])*j.grid[1];l=this.containment?!(l-this.offset.click.top<this.containment[1]||l-this.offset.click.top>this.containment[3])?l:!(l-this.offset.click.top<this.containment[1])?l-j.grid[1]:l+j.grid[1]:l;q=this.originalPageX+
Math.round((q-this.originalPageX)/j.grid[0])*j.grid[0];q=this.containment?!(q-this.offset.click.left<this.containment[0]||q-this.offset.click.left>this.containment[2])?q:!(q-this.offset.click.left<this.containment[0])?q-j.grid[0]:q+j.grid[0]:q}}return{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:a.scrollTop()),left:q-this.offset.click.left-
this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:a.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(b,j,a){a=a||this._uiHash();e.ui.plugin.call(this,b,[j,a]);if(b=="drag")this.positionAbs=
this._convertPositionTo("absolute");return e.Widget.prototype._trigger.call(this,b,j,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.extend(e.ui.draggable,{version:"1.8.4"});e.ui.plugin.add("draggable","connectToSortable",{start:function(b,j){var a=e(this).data("draggable"),o=a.options,q=e.extend({},j,{item:a.element});a.sortables=[];e(o.connectToSortable).each(function(){var l=e.data(this,"sortable");
if(l&&!l.options.disabled){a.sortables.push({instance:l,shouldRevert:l.options.revert});l._refreshItems();l._trigger("activate",b,q)}})},stop:function(b,j){var a=e(this).data("draggable"),o=e.extend({},j,{item:a.element});e.each(a.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;a.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(b);this.instance.options.helper=this.instance.options._helper;
a.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",b,o)}})},drag:function(b,j){var a=e(this).data("draggable"),o=this;e.each(a.sortables,function(){this.instance.positionAbs=a.positionAbs;this.instance.helperProportions=a.helperProportions;this.instance.offset.click=a.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=
1;this.instance.currentItem=e(o).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return j.helper[0]};b.target=this.instance.currentItem[0];this.instance._mouseCapture(b,true);this.instance._mouseStart(b,true,true);this.instance.offset.click.top=a.offset.click.top;this.instance.offset.click.left=a.offset.click.left;this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left;
this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top;a._trigger("toSortable",b);a.dropped=this.instance.element;a.currentItem=a.element;this.instance.fromOutside=a}this.instance.currentItem&&this.instance._mouseDrag(b)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",b,this.instance._uiHash(this.instance));this.instance._mouseStop(b,true);this.instance.options.helper=
this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();a._trigger("fromSortable",b);a.dropped=false}})}});e.ui.plugin.add("draggable","cursor",{start:function(){var b=e("body"),j=e(this).data("draggable").options;if(b.css("cursor"))j._cursor=b.css("cursor");b.css("cursor",j.cursor)},stop:function(){var b=e(this).data("draggable").options;b._cursor&&e("body").css("cursor",b._cursor)}});e.ui.plugin.add("draggable","iframeFix",{start:function(){var b=
e(this).data("draggable").options;e(b.iframeFix===true?"iframe":b.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(e(this).offset()).appendTo("body")})},stop:function(){e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});e.ui.plugin.add("draggable","opacity",{start:function(b,j){var a=e(j.helper),
o=e(this).data("draggable").options;if(a.css("opacity"))o._opacity=a.css("opacity");a.css("opacity",o.opacity)},stop:function(b,j){var a=e(this).data("draggable").options;a._opacity&&e(j.helper).css("opacity",a._opacity)}});e.ui.plugin.add("draggable","scroll",{start:function(){var b=e(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML")b.overflowOffset=b.scrollParent.offset()},drag:function(b){var j=e(this).data("draggable"),a=j.options,o=false;if(j.scrollParent[0]!=
document&&j.scrollParent[0].tagName!="HTML"){if(!a.axis||a.axis!="x")if(j.overflowOffset.top+j.scrollParent[0].offsetHeight-b.pageY<a.scrollSensitivity)j.scrollParent[0].scrollTop=o=j.scrollParent[0].scrollTop+a.scrollSpeed;else if(b.pageY-j.overflowOffset.top<a.scrollSensitivity)j.scrollParent[0].scrollTop=o=j.scrollParent[0].scrollTop-a.scrollSpeed;if(!a.axis||a.axis!="y")if(j.overflowOffset.left+j.scrollParent[0].offsetWidth-b.pageX<a.scrollSensitivity)j.scrollParent[0].scrollLeft=o=j.scrollParent[0].scrollLeft+
a.scrollSpeed;else if(b.pageX-j.overflowOffset.left<a.scrollSensitivity)j.scrollParent[0].scrollLeft=o=j.scrollParent[0].scrollLeft-a.scrollSpeed}else{if(!a.axis||a.axis!="x")if(b.pageY-e(document).scrollTop()<a.scrollSensitivity)o=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed);else if(e(window).height()-(b.pageY-e(document).scrollTop())<a.scrollSensitivity)o=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed);if(!a.axis||a.axis!="y")if(b.pageX-e(document).scrollLeft()<a.scrollSensitivity)o=
e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed);else if(e(window).width()-(b.pageX-e(document).scrollLeft())<a.scrollSensitivity)o=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed)}o!==false&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(j,b)}});e.ui.plugin.add("draggable","snap",{start:function(){var b=e(this).data("draggable"),j=b.options;b.snapElements=[];e(j.snap.constructor!=String?j.snap.items||":data(draggable)":j.snap).each(function(){var a=e(this),
o=a.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),top:o.top,left:o.left})})},drag:function(b,j){for(var a=e(this).data("draggable"),o=a.options,q=o.snapTolerance,l=j.offset.left,r=l+a.helperProportions.width,f=j.offset.top,g=f+a.helperProportions.height,s=a.snapElements.length-1;s>=0;s--){var d=a.snapElements[s].left,c=d+a.snapElements[s].width,n=a.snapElements[s].top,h=n+a.snapElements[s].height;if(d-q<l&&l<c+q&&n-q<f&&f<h+q||d-q<l&&l<c+q&&
n-q<g&&g<h+q||d-q<r&&r<c+q&&n-q<f&&f<h+q||d-q<r&&r<c+q&&n-q<g&&g<h+q){if(o.snapMode!="inner"){var i=Math.abs(n-g)<=q,m=Math.abs(h-f)<=q,p=Math.abs(d-r)<=q,t=Math.abs(c-l)<=q;if(i)j.position.top=a._convertPositionTo("relative",{top:n-a.helperProportions.height,left:0}).top-a.margins.top;if(m)j.position.top=a._convertPositionTo("relative",{top:h,left:0}).top-a.margins.top;if(p)j.position.left=a._convertPositionTo("relative",{top:0,left:d-a.helperProportions.width}).left-a.margins.left;if(t)j.position.left=
a._convertPositionTo("relative",{top:0,left:c}).left-a.margins.left}var u=i||m||p||t;if(o.snapMode!="outer"){i=Math.abs(n-f)<=q;m=Math.abs(h-g)<=q;p=Math.abs(d-l)<=q;t=Math.abs(c-r)<=q;if(i)j.position.top=a._convertPositionTo("relative",{top:n,left:0}).top-a.margins.top;if(m)j.position.top=a._convertPositionTo("relative",{top:h-a.helperProportions.height,left:0}).top-a.margins.top;if(p)j.position.left=a._convertPositionTo("relative",{top:0,left:d}).left-a.margins.left;if(t)j.position.left=a._convertPositionTo("relative",
{top:0,left:c-a.helperProportions.width}).left-a.margins.left}if(!a.snapElements[s].snapping&&(i||m||p||t||u))a.options.snap.snap&&a.options.snap.snap.call(a.element,b,e.extend(a._uiHash(),{snapItem:a.snapElements[s].item}));a.snapElements[s].snapping=i||m||p||t||u}else{a.snapElements[s].snapping&&a.options.snap.release&&a.options.snap.release.call(a.element,b,e.extend(a._uiHash(),{snapItem:a.snapElements[s].item}));a.snapElements[s].snapping=false}}}});e.ui.plugin.add("draggable","stack",{start:function(){var b=
e(this).data("draggable").options;b=e.makeArray(e(b.stack)).sort(function(a,o){return(parseInt(e(a).css("zIndex"),10)||0)-(parseInt(e(o).css("zIndex"),10)||0)});if(b.length){var j=parseInt(b[0].style.zIndex)||0;e(b).each(function(a){this.style.zIndex=j+a});this[0].style.zIndex=j+b.length}}});e.ui.plugin.add("draggable","zIndex",{start:function(b,j){var a=e(j.helper),o=e(this).data("draggable").options;if(a.css("zIndex"))o._zIndex=a.css("zIndex");a.css("zIndex",o.zIndex)},stop:function(b,j){var a=
e(this).data("draggable").options;a._zIndex&&e(j.helper).css("zIndex",a._zIndex)}})})(jQuery);
shortcut={all_shortcuts:{},add:function(e,b,j){var a={type:"keydown",propagate:false,disable_in_input:false,target:document,keycode:false};if(j)for(var o in a){if(typeof j[o]=="undefined")j[o]=a[o]}else j=a;a=j.target;if(typeof j.target=="string")a=document.getElementById(j.target);e=e.toLowerCase();o=function(q){q=q||window.event;if(j.disable_in_input){var l;if(q.target)l=q.target;else if(q.srcElement)l=q.srcElement;if(l.nodeType==3)l=l.parentNode;if(l.tagName=="INPUT"||l.tagName=="TEXTAREA")return}if(q.keyCode)code=
q.keyCode;else if(q.which)code=q.which;l=String.fromCharCode(code).toLowerCase();if(code==188)l=",";if(code==190)l=".";var r=e.split("-"),f=0,g={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},s={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,
home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},d={shift:{wanted:false,pressed:false},ctrl:{wanted:false,pressed:false},alt:{wanted:false,pressed:false},meta:{wanted:false,pressed:false}};if(q.ctrlKey)d.ctrl.pressed=true;if(q.shiftKey)d.shift.pressed=true;if(q.altKey)d.alt.pressed=true;if(q.metaKey)d.meta.pressed=true;for(var c=0;k=r[c],c<r.length;c++)if(k==
"ctrl"||k=="control"){f++;d.ctrl.wanted=true}else if(k=="shift"){f++;d.shift.wanted=true}else if(k=="alt"){f++;d.alt.wanted=true}else if(k=="meta"){f++;d.meta.wanted=true}else if(k.length>1)s[k]==code&&f++;else if(j.keycode)j.keycode==code&&f++;else if(l==k)f++;else if(g[l]&&q.shiftKey){l=g[l];l==k&&f++}if(f==r.length&&d.ctrl.pressed==d.ctrl.wanted&&d.shift.pressed==d.shift.wanted&&d.alt.pressed==d.alt.wanted&&d.meta.pressed==d.meta.wanted){b(q);if(!j.propagate){q.cancelBubble=true;q.returnValue=
false;if(q.stopPropagation){q.stopPropagation();q.preventDefault()}return false}}};this.all_shortcuts[e]={callback:o,target:a,event:j.type};if(a.addEventListener)a.addEventListener(j.type,o,false);else if(a.attachEvent)a.attachEvent("on"+j.type,o);else a["on"+j.type]=o},remove:function(e){e=e.toLowerCase();var b=this.all_shortcuts[e];delete this.all_shortcuts[e];if(b){e=b.event;var j=b.target;b=b.callback;if(j.detachEvent)j.detachEvent("on"+e,b);else if(j.removeEventListener)j.removeEventListener(e,
b,false);else j["on"+e]=false}}};var assert={};assert.critical=function(e,b){if(!e){if(typeof mjt!=="undefined"&&mjt.error)mjt.error("Internal Error: "+b);else typeof console!=="undefined"&&console.error&&console.error("Internal Error: "+b);if(!document.getElementById("error-dialog")){var j="";j+='<div style="font-weight:bold;">Internal Error</div>';j+=b;assert.error_dialog(j)}}};
assert.error_dialog=function(e){var b=document.createElement("div");b.style.cssText="position: absolute; top: 30px; left: 50%; width: 350px; margin: 0 0 0 -175px; padding: 15px; background-color: #fce2db; border: 1px solid #f3c5ac; color: #676767; font-size: 12px; z-index: 100;";b.innerHTML='<div id="error-dialog" style="float:right; color: #1170a3; margin: -10px -5px 0 0; cursor: pointer;" onclick="document.body.removeChild(this.parentNode);">x</div>'+e;document.body.appendChild(b)};
var unicode={};unicode.escape_char=function(e){e=e.charCodeAt(0).toString(16).toUpperCase();if(e.length===1)return"\\u000"+e;if(e.length===2)return"\\u00"+e;if(e.length===3)return"\\u0"+e;if(e.length===4)return"\\u"+e;return null};unicode.escape_str=function(e){return e.replace(/[^\u0020-\u007F]/g,unicode.escape_char)};
(function(){var e={expires:30},b={};$.extend({localStore:function(j,a,o){var q=document.location.hostname,l=document.location.protocol;if(typeof a!=="undefined"){var r=JSON.stringify(a);if(!o&&window.globalStorage)if(a===null)delete window.globalStorage[q][l+j];else window.globalStorage[q][l+j]=r;else if(!o&&window.localStorage&&window.localStorage.setItem)a===null?window.localStorage.removeItem(l+j):window.localStorage.setItem(l+j,r);else if(o!==false)a===null?$.cookie(j,null,e):$.cookie(j,r,e);
else if(a===null)delete b[j];else b[j]=r;return a}else{if(!o&&window.globalStorage){if(window.globalStorage[q][l+j])a=window.globalStorage[q][l+j].value}else a=!o&&window.localStorage?window.localStorage.getItem(l+j):o!==false?$.cookie(j):b[j];if(a!=""&&a!==null&&a!==undefined)return JSON.parse(a,null)}return null}})})();
var zen=function(){function e(f,g){if(!f||!f.length)return"";var s=f.shift().split("+"),d=s.length-1,c=e(f,g+1);return s.map(function(n,h){var i=h===d?c:"";r.newTag();var m=n.replace(j,r.tag).replace(a,r.id).replace(o,r.className).replace(q,r.attr).replace(l,r.mult);if(m.length&&!b.length)b=m;return r.html(i,g)}).join("\n")}var b="",j=/^[\w:]+/,a=/^\#[:\w\$]+/,o=/^(\.[\w\$]+)+/,q=/^\[.+\]/,l=/^\*\d+/,r=function(){var f=function(s){return(new Array(s+1)).join("  ")},g;return{newTag:function(){return g=
{tagName:"div"}},tag:function(s){g.tagName=s;return""},id:function(s){g.id=s.slice(1);return""},className:function(s){g.className=s.slice(1).replace(/\./g," ");return""},attr:function(s){g.attrs=s.slice(1,-1);return""},mult:function(s){g.multiplier=parseInt(s.slice(1),10);return""},html:function(s,d){for(var c="<"+g.tagName+(g.id?' id="'+g.id+'"':"")+(g.className?' class="'+g.className+'"':"")+(g.attrs?" "+g.attrs:"")+">"+(s?"\n"+s+"\n"+f(d):"")+"</"+g.tagName+">",n=[],h=0,i=g.multiplier||1;h<i;h++)n[h]=
c.replace(/\$/g,h+1);return f(d)+n.join("\n"+f(d))}}}();return{convert:function(f,g){b="";var s=f.split("|"),d=s[0].split(">");s=s[1];d=e(d,g||0);if(s)if(s==="e")d=d.replace(/</g,"&lt;").replace(/>/g,"&gt;");else b="Unknown filter "+s;if(/^[\.\#\[\*]$/.test(b))b="";return{out:d,error:b}}}}();
function FreebaseStore(e,b){this._url=e||fb.acre.freebase.service_url;this._site_url=fb.acre.freebase.site_host;this._acre_server=b||fb.acre.host.name+(fb.acre.host.port===80?"":":"+fb.acre.host.port);this._handlers=[];this._user=null;return this}
(function(){var e=fb.acre.appeditor.service_path,b=mjt.define_task(mjt.freebase.FreebaseJsonPTask,[{name:"service"},{name:"args"}]);b.prototype.request=function(){return this.service_request(e+this.service,this.args)};b.prototype.response=function(l){return this.ready(l.result)};var j=mjt.define_task(mjt.freebase.FreebaseXhrTask,[{name:"service"},{name:"args"}]);j.prototype.request=function(){var l=e+this.service;if(this.args)l+="?"+mjt.formencode(this.args);return this.xhr_request("GET",l)};var a=
mjt.define_task(mjt.freebase.FreebaseXhrTask,[{name:"service"},{name:"args"}]);a.prototype.request=function(){return this.xhr_form_post(e+this.service,this.args)};var o=mjt.define_task(null,[{name:"service"},{name:"form"},{name:"args"}]);o.prototype.dynamic_iframe=function(l){var r=document.createElement("iframe");if(typeof l==="string"){r.id=l;r.name=l}r.style.display="none";r.className="mjt_dynamic";return r};o.prototype.request=function(){function l(){var c=f.contentWindow||f.contentDocument;if(c.document)return c.document;
return c}function r(){window.setTimeout(function(){$(f).remove()},1)}this.domid=mjt.uniqueid("mjt_iframe");var f=this.dynamic_iframe(this.domid);$("body").append(f);var g=this.form,s=this,d=window.setTimeout(function(){s.error("timeout","Upload timed out - no response from server.");r()},3E4);f.onload=function(){window.clearTimeout(d);var c=$(l(f).body).text();c=JSON.parse(c);if(c.code==="/api/status/ok"){s.result=c.result;s.ready(s.result)}else s.error(c.code,c.messages[0].message);r()};g.attr({target:this.domid,
action:mjt.form_url(e+this.service,this.args),method:"POST",enctype:"multipart/form-data"}).submit()};var q=mjt.define_task(mjt.freebase.FreebaseJsonPTask,[{name:"service_url","default":null}]);q.prototype.request=function(){this.jsonp.cache_controller={is_fresh:function(){return false}};return this.service_request("/acre/touch?_="+ +new Date)};q.prototype.response=function(){return this.ready(null)};FreebaseStore.prototype.Jsonp=b;FreebaseStore.prototype.XhrGet=j;FreebaseStore.prototype.XhrPost=
a;FreebaseStore.prototype.FileUpload=o;FreebaseStore.prototype.AppTouch=q;FreebaseStore.prototype.set_user=function(l){if(l){this._user=new AcreUser(this,l);if(l.apps)this._user_apps=l.apps;mjt.freebase.freebase_user={name:l.name,id:"/user/"+l.name}}else{this._user_apps=this._user=null;mjt.freebase.freebase_user=null}};FreebaseStore.prototype.t_init=function(){var l=this;mjt.app=new mjt.App;mjt.freebase.service_url=window.location.protocol+"//"+window.location.host;mjt.freebase.xhr_ok=true;return this.XhrGet("init_store").onready(function(r){l._acre_server=
r.host.name+(r.host.port===80?"":":"+r.host.port);l._handlers=r.acre_handlers;l._version=r.version;l.set_user(r.user)}).enqueue()};FreebaseStore.prototype.destroy=function(){};b=mjt.define_task(null,[{name:"store"}]);b.prototype.request=function(){this.url=window.location.protocol+"//appeditor-services.site.freebase.dev."+this.store.get_acre_host()+"/check_thirdparty_cookies";var l=this;this.jsonp=mjt.JsonP();this.jsonp.set_timeout().jsonp_request_form(this.url,null,"callback").onready(function(r){r.result===
"success"?l.ready():l.error()}).onerror("error",l)};FreebaseStore.prototype.TestCookies=b;FreebaseStore.prototype.get_acre_version=function(){return this._version};FreebaseStore.prototype.get_user=function(){return this._user};FreebaseStore.prototype.get_user_apps=function(l){if(l){for(var r=0;r<this._user_apps.length;r++)if(this._user_apps[r].appid==l)return this._user_apps[r].appid;return null}else return this._user_apps};FreebaseStore.prototype.set_user_apps=function(l){this._user_apps=l};FreebaseStore.prototype.t_refresh_user_apps=
function(){var l=this;l.XhrGet("list_user_apps").enqueue().onready(function(r){l._user_apps=r})};FreebaseStore.prototype.get_url=function(){return this._url};FreebaseStore.prototype.get_service_path=function(){return e};FreebaseStore.prototype.get_name=function(){var l=this._name?this._name:"???";if(l==="OTG")l="";return l};FreebaseStore.prototype.get_acre_handlers=function(){return this._handlers};FreebaseStore.prototype.get_supported_mime_types=function(l){assert.critical(l,"Can't list supported mimetype");
return this._handlers[l].supported_mime_types};FreebaseStore.prototype.get_acre_host=function(){return this._acre_server};FreebaseStore.prototype.get_freebase_url=function(){return this._site_url};FreebaseStore.prototype.get_user_new_app_path=function(l,r){return"//"+r+"."+l.get_name()+".user.dev"};FreebaseStore.prototype.get_user_default_app_host=function(l){return l.get_name()+".user.dev."+this.get_acre_host()};FreebaseStore.prototype.get_user_view_url=function(l){return this.get_freebase_url()+
"/view/user/"+l.get_name()};FreebaseStore.prototype.get_user_image_url=function(l){return this.get_url()+"/api/trans/image_thumb/user/"+l.get_name()+"?maxwidth=30&maxheight=30&mode=fillcrop"};FreebaseStore.prototype.validate_filename=function(l){if(!/^[A-Za-z][\-_0-9A-Za-z\.]+$/.test(l))return false;if(l in{acre:true,status:"",api:true})return false;return true};mjt.label_package("FreebaseStore")})();var AcreDoc;
(function(){AcreDoc=function(e,b,j,a){assert.critical(e,"Must specify app when creating a file");this._app=e;this._name=b&&this._app.get_store().validate_filename(b)?b:this._app.get_untitled_file_name();this._acre_handler=j.acre_handler||"mjt";this._mime_type=j.content_type||"text/plain";this._revision=j.revision||null;this._based_on=j.based_on||null;this._has_been_saved=j.has_been_saved||false;this._dom_element=document.createElement("div");this._dom_element.className="file";this._event_handlers=
{};this._initial_state=a||null;e=!this.has_been_saved();this._dirty_state={name:e,content:e,metadata:e,to_delete:false,revision:false,editor:false};this._loaded_editors={};this._current_editor=null;this._app.register_file(this);return this};AcreDoc.prototype.t_get_history=function(){var e={fileid:this.get_fileid()};return this.get_store().XhrGet("get_file_history",e).enqueue()};AcreDoc.prototype.t_get_revision=function(e){var b={fileid:this.get_fileid()};if(this.get_app().get_repository_capability("versioned")){b.revision=
e||this.get_revision();return b.revision?this.get_store().XhrGet("get_file_revision",b):mjt.Succeed({text:""})}else return this.get_store().XhrGet("get_file_revision",b)};AcreDoc.prototype.hide=function(){this._current_editor&&this._current_editor.hide();$(this._dom_element).hide()};AcreDoc.prototype.destroy=function(){for(var e in this._loaded_editors){var b=this._loaded_editors[e];b.destroy&&b.destroy()}$(this._dom_element).remove()};AcreDoc.prototype.is_writable=function(){return this.get_app().is_writable()};
AcreDoc.prototype.has_been_saved=function(){return!!this._has_been_saved};AcreDoc.prototype.is_dirty=function(e){if(e)return this._dirty_state[e];else for(var b in this._dirty_state)if(this._dirty_state[b]===true)return true;return false};AcreDoc.prototype.get_element=function(){return this._dom_element};AcreDoc.prototype.get_store=function(){return this.get_app().get_store()};AcreDoc.prototype.get_app=function(){return this._app};AcreDoc.prototype.get_name=function(){return this._name};AcreDoc.prototype.get_fileid=
function(){var e=this._old_name||this._name;return this.get_app().get_path()+"/"+e};AcreDoc.prototype.get_relative_path=function(){return this.get_name()};AcreDoc.prototype.get_revision=function(){return this._revision};AcreDoc.prototype.get_acre_handler=function(){return this._acre_handler};AcreDoc.prototype.get_mime_type=function(){return this._mime_type};AcreDoc.prototype.is_library=function(){return this._library};AcreDoc.prototype.get_based_on=function(){return this._based_on};AcreDoc.prototype.get_acre_url=
function(e){return this.get_app().get_base_url()+"/"+this.get_name()+(e?"?acre.console=1":"")};AcreDoc.prototype.set_name=function(e){if(e!==this.get_name()){if(!/^[\-_0-9A-Za-z\.]+$/.test(e))throw"File names can only contain alphanumeric characters, ., - and _";if(!/^[A-Za-z]/.test(e))throw"File names must be begin with a letter";if(!/[0-9A-Za-z]$/.test(e))throw"File names cannot end with a special character";this._old_name=this.get_name();this.get_app().unregister_file(this._old_name);this._name=
e;this.get_app().register_file(this);this.set_dirty("name")}};AcreDoc.prototype.set_acre_handler=function(e){if(e!==this._acre_handler){this._acre_handler=e;this.set_dirty("metadata");this.set_dirty("editor")}};AcreDoc.prototype.set_mime_type=function(e){if(e!==this._mime_type){this._mime_type=e;this.set_dirty("content");this.set_dirty("editor")}};AcreDoc.prototype.set_revision=function(e){if(this.is_dirty("content")||e!==this._revision){this._revision=e;this.set_dirty("revision");this.set_dirty("editor")}this.set_dirty("content",
false);this.set_dirty("to_delete",false)};AcreDoc.prototype.set_dirty=function(e,b){var j=e||"content",a=typeof b=="undefined"?true:b;if(j==="all")for(var o in this._dirty_state)this._dirty_state[o]=a;else this._dirty_state[j]=a};AcreDoc.prototype.t_save=function(e){var b=this;if(b.is_dirty("to_delete"))return b.t_delete();var j={fileid:b.get_fileid()},a=b.get_store().XhrPost("save_text_file",j);if(!b.has_been_saved()&&b.get_based_on())j.based_on=b.get_based_on().id;if(b.is_dirty("name"))j.name=b.get_name();
if(b.is_dirty("metadata")||!b.has_been_saved())j.acre_handler=b.get_acre_handler();if(!e&&b.get_revision()&&!(b.is_dirty("content")&&b.is_dirty("revision")))j.revision=b.get_revision();if(b.is_dirty("content")){e=b.get_editor_state();if(e.form)a=b.get_store().FileUpload("save_binary_file",e.form,j);else{j.text=e.text;j.content_type=b.get_mime_type()}}else if(b.is_dirty("revision"))a=b.get_store().XhrPost("set_file_revision",j);a.onready(function(o){if(o.revision)b._revision=o.revision;if(o.content_type)b._mime_type=
o.content_type;delete b._old_name;b._has_been_saved=true;b.set_dirty("all",false);b._current_editor&&typeof b._current_editor.refresh==="function"&&b._current_editor.refresh()}).onerror(function(o,q,l){if(o==="/api/status/error/file_format/unsupported_mime_type"){delete b._old_name;b._has_been_saved=true;b.set_dirty("all",false)}else mjt.warn("Save of",b.get_name(),"failed: ",o," - ",q,l)});return this.get_app().t_flush_cache().require(a).enqueue()};AcreDoc.prototype.t_delete=function(){function e(){b.get_app().unregister_file(b.get_name());
b.destroy()}var b=this,j={appid:b.get_app().get_path(),name:b.get_name()};if(!b.has_been_saved())return mjt.Succeed().enqueue().onready(e);j=b.get_store().XhrPost("delete_app_file",j).onready(e).onerror(function(a,o,q){mjt.warn("Delete of",b.get_name(),"failed: ",a," - ",o,q)});return this.get_app().t_flush_cache().require(j).enqueue()};AcreDoc.prototype.t_revert_to_saved=function(){var e=this,b={fileid:e.get_fileid()};return e.get_store().XhrGet("get_file",b).onready(function(j){e.set_name(j.name);
e.set_acre_handler(j.acre_handler);e.set_mime_type(j.content_type);e.set_revision(j.revision);e.set_dirty("all",false);e.clear_editors()}).onerror(function(j,a,o){mjt.warn("Rever of",e.get_name(),"failed: ",j," - ",a,o)}).enqueue()};AcreDoc.prototype.is_editor_loaded=function(e){var b=false;if(e)b=this._loaded_editors[e]?true:false;else for(var j in this._loaded_editors){b=true;break}return b};AcreDoc.prototype.clear_editors=function(e){function b(o){var q=j._loaded_editors[o];q.destroy&&q.destroy();
delete j._loaded_editors[o]}var j=this;if(e){if(j.get_edtior_name()===e)j._current_editor=null;b(e)}else{j._current_editor=null;for(var a in j._loaded_editors)b(a)}};AcreDoc.prototype.get_editor_name=function(){for(var e in EDITORS)if(this._current_editor&&this._current_editor instanceof EDITORS[e].editor_class)return e;return false};AcreDoc.prototype.t_editor_show=function(e,b,j){var a=this;if(a._showing_editor)return mjt.Succeed().enqueue();a._showing_editor=true;var o=null;if(j){o=j;a.set_dirty("content")}else if(a.is_dirty("revision"))o=
null;else if(a._current_editor)o=a.get_editor_state();else if(a._initial_state){o=a._initial_state;a._initial_state=null}if(a.is_dirty("editor")){a.clear_editors();a.set_dirty("editor",false)}j=EDITORS[e].editor_class;a._current_editor&&!(a._current_editor instanceof j)&&a._current_editor.hide();if(typeof a._loaded_editors[e]!=="undefined"){a._current_editor=a._loaded_editors[e];a.is_dirty("content")&&o&&a.set_editor_state(o);a._current_editor.show(b);a._showing_editor=false;return mjt.Succeed().enqueue()}return j.t_load(a,
o).onready(function(q){a._loaded_editors[e]=q;a._current_editor=a._loaded_editors[e];a._current_editor.show(b);a._showing_editor=false}).onerror(function(q,l,r){mjt.warn("Loading of",a.get_name(),"failed: ",q," - ",l,r)}).enqueue()};AcreDoc.prototype.get_editor_state=function(){var e=null;if(this._current_editor)e=this._current_editor.get_state();else if(this._initial_state)e=this._initial_state;return e};AcreDoc.prototype.set_editor_state=function(e){assert.critical(e,"Trying to set undefined editor state");
this._current_editor&&this._current_editor.set_state(e)};AcreDoc.prototype.get_editor_supported_features=function(e){if(!this.get_editor_name())return false;var b=EDITORS[this.get_editor_name()].supports;return e?!!b[e]:b};AcreDoc.prototype.register_editor_event_handlers=function(e){for(var b in e)this._event_handlers[b]=e[b]};AcreDoc.prototype.trigger_editor_event=function(e,b){if(e==="change")if(b[0]>0){this.set_dirty("content");this.set_dirty("revision",false)}else this.set_dirty("content",false);
this._event_handlers[e]&&this._event_handlers[e].apply(this,b)};AcreDoc.prototype.editor_undo=function(){this._current_editor&&this._current_editor.undo&&this._current_editor.undo()};AcreDoc.prototype.editor_redo=function(){this._current_editor&&this._current_editor.redo&&this._current_editor.redo()};AcreDoc.prototype.editor_indent=function(){this._current_editor&&this._current_editor.reindentSelection&&this._current_editor.reindentSelection()};AcreDoc.prototype.editor_goto_line=function(e){this._current_editor&&
this._current_editor.goto_line&&this._current_editor.goto_line(Number(e))}})();var AcreApp;
(function(){AcreApp=function(e,b){this._store=e;this._acre_host=e.get_acre_host();this._service_url=e.get_url();this._path=b;this._version=null;this._name="Untitled";this._release=this._listed=this._write_user=this._oauth_enabled=null;this._hosts=[];this._versions=[];this._authors={};this._files={};this._untitled_label="untitled_";this._untitled_counter=1;return this};AcreApp.prototype.t_load=function(){var e=this;return e._store.XhrGet("get_app",{appid:e._path}).onready(function(b){e._acre_host=
b.acre_host;e._remote_app=b.acre_host!==e.get_store().get_acre_host();e._repository=b.repository||{versioned:true};e._path=b.path;e._appid=b.appid;e._version=b.version;e._name=b.name||"Untitled";e._oauth_enabled=b.oauth_enabled;e._write_user=b.write_user;e._parent=b.parent;e._children=b.children;e._listed=b.listed;e._release=b.release;e._hosts=b.hosts;e._versions=b.versions;e._last_edit=null;e._initial_file=b.current_file;for(var j in b.authors){var a=b.authors[j];e._authors[a.name]=new AcreUser(e.get_store(),
a)}for(var o in b.files){b.files[o].has_been_saved=true;new AcreDoc(e,b.files[o].name,b.files[o])}e.is_writable()&&!e._write_user&&e._oauth_enabled===null&&e.t_set_oauth(true)}).enqueue()};AcreApp.prototype.t_flush_cache=function(e){var b=this.get_store().AppTouch(this.get_base_url());if(e){e=this.get_hosts();for(var j=0;j<e.length;j++)this.get_store().AppTouch("http://"+e[j].host).enqueue()}return b};AcreApp.prototype.destroy=function(){for(var e in this._files)this._files[e].destroy();for(var b in this._authors)this._authors[b].destroy()};
AcreApp.prototype.register_file=function(e){var b=(new RegExp(this._untitled_label+"(\\d+)")).exec(e.get_name());if(b&&b.length){b=parseInt(b[1],10);if(this._untitled_counter<=b)this._untitled_counter=b+1}this._files[e.get_name()]=e};AcreApp.prototype.unregister_file=function(e){delete this._files[e]};AcreApp.prototype.is_dirty=function(){var e=this.get_files();for(var b in e)if(e[b].is_dirty())return true;return false};AcreApp.prototype.get_store=function(){return this._store};AcreApp.prototype.get_repository_capability=
function(e){return!!this._repository[e]};AcreApp.prototype.get_path=function(){return this.get_acre_host()===this.get_store().get_acre_host()?this._path:this._path+"."+this._acre_host+"."};AcreApp.prototype.get_versioned_path=function(){var e=this.get_path();if(this.is_version())e=e.replace("//","//"+this._version+".");return e};AcreApp.prototype.get_name=function(){return this._path.split("//")[1].split(".").shift()};AcreApp.prototype.get_display_name=function(){return this._name};AcreApp.prototype.get_parent=
function(){return this._parent};AcreApp.prototype.get_children=function(){return this._children};AcreApp.prototype.get_released_version=function(){return this._release};AcreApp.prototype.get_versions=function(){return this._versions};AcreApp.prototype.get_patches=function(){return this._patches};AcreApp.prototype.get_hosts=function(){return this._hosts};AcreApp.prototype.get_files=function(){return this._files};AcreApp.prototype.get_file=function(e){if(e){var b=e.split("/");return b.length>1?this.get_library(b[0]).get_file(b[1]):
this._files[e]}if(this._initial_file&&this._files[this._initial_file]){e=this._files[this._initial_file];this._initial_file=null;return e}else if(this._files.index)return this._files.index;else{var j=this.get_files();for(b in j)if(e=j[b])return e}return null};AcreApp.prototype.get_untitled_file_name=function(){return this._untitled_label+this._untitled_counter};AcreApp.prototype.get_acre_host=function(){return this._acre_host};AcreApp.prototype.get_base_url=function(){return"http:"+this.get_versioned_path()+
"."+this.get_acre_host()};AcreApp.prototype.get_view_url=function(){return this._repository.url+"/apps"+this._appid};AcreApp.prototype.get_edit_url=function(){return this._repository.url+"/apps/admin"+this._appid};AcreApp.prototype.is_version=function(){return!!this._version};AcreApp.prototype.get_version_label=function(){return this._version};AcreApp.prototype.get_version_timestamp=function(e){e=e?e:this._version;for(var b=0;b<this._versions.length;b++){var j=this._versions[b];if(j.name==e)return j.as_of_time}return null};
AcreApp.prototype.t_save_all=function(){var e=mjt.Succeed();for(var b in this._files){var j=this._files[b];j.is_dirty()&&e.require(j.t_save())}return this.t_flush_cache().require(e).enqueue()};AcreApp.prototype.t_get_history=function(e){var b={appid:this.get_path()};if(e)b.limit=e;return this.get_store().XhrGet("get_app_history",b).enqueue()};AcreApp.prototype.get_last_change=function(){return this._last_edit};AcreApp.prototype.set_last_change=function(e){this._last_edit=e};AcreApp.prototype.t_set_listing=
function(e,b,j){var a=this,o={appid:a.get_path()};if(e)o.name=e;if(e)o.description=b;if(e)o.listed=j;return a.get_store().XhrPost("set_app_properties",o).onready(function(){if(e)a._display_name=e}).onerror(function(q,l,r){mjt.warn("Changing app listing of",a.get_name(),"failed: ",q," - ",l,r)}).enqueue()};AcreApp.prototype.t_move=function(e){var b=this,j={appid:b.get_path(),to_appid:e};return b.get_store().XhrPost("move_app",j).onready(function(){b._path=e;b.t_flush_cache().enqueue()}).onerror(function(a,
o,q){mjt.warn("Move of",b.get_display_name(),"failed: ",a," - ",o,q)}).enqueue()};AcreApp.prototype.t_delete=function(){var e=this,b={appid:e.get_path()};return this.get_store().XhrPost("delete_app",b).enqueue().onready(function(){e.destroy()}).onerror(function(j,a,o){mjt.warn("Failed to delete app: "+j+", "+a+", "+o)})};AcreApp.prototype.t_set_host=function(e){var b=this;e={appid:b.get_path(),host:e};return b.get_store().XhrPost("set_app_host",e).onready(function(j){b._hosts=j.hosts;if(j.listed)b._listed=
true;b.t_flush_cache(true).enqueue()}).onerror(function(j,a,o){mjt.warn("Setting release URL of",b.get_display_name(),"failed: ",j," - ",a,o)}).enqueue()};AcreApp.prototype.t_set_release=function(e){var b=this;e={appid:b.get_path(),version:e};return b.get_store().XhrPost("set_app_release",e).onready(function(j){b._hosts=j.hosts;b._versions=j.versions;b._release=j.release;b.t_flush_cache(true).enqueue()}).onerror(function(j,a,o){mjt.warn("Setting release of",b.get_display_name(),"failed: ",j," - ",
a,o)}).enqueue()};AcreApp.prototype.t_add_version=function(e,b,j){var a=this;e={appid:a.get_path(),version:e};if(b)e.timestamp=b;if(typeof j!=="undefined")e.service_url=j;return this.get_store().XhrPost("create_app_version",e).onready(function(o){a._versions=o.versions}).onerror(function(o,q,l){mjt.warn("Failed to add version: "+o+", "+q+", "+l)}).enqueue()};AcreApp.prototype.t_remove_version=function(e){var b=this;e={appid:b.get_path(),version:e};return this.get_store().XhrPost("delete_app_version",
e).onready(function(j){b._versions=j.versions}).onerror(function(j,a,o){mjt.warn("Failed to remove version: "+j+", "+a+", "+o)}).enqueue()};AcreApp.prototype.is_remote=function(){return this._remote_app};AcreApp.prototype.is_writable=function(){return this.is_author()&&!this.is_version()&&!this.is_remote()};AcreApp.prototype.is_author=function(){return this.get_store().get_user()?this.get_store().get_user().get_name()in this.get_authors():false};AcreApp.prototype.is_oauth_enabled=function(){return!!this._oauth_enabled};
AcreApp.prototype.get_authors=function(){return this._authors};AcreApp.prototype.get_write_user=function(){return this._authors[this._write_user]};AcreApp.prototype.t_add_author=function(e){var b=this,j={appid:b.get_path(),username:e};return this.get_store().XhrPost("add_app_author",j).onready(function(a){a=new AcreUser(b._store,a.authors[e]);b._authors[e]=a}).onerror(function(a,o,q){mjt.warn("Failed to add author: "+a+", "+o+", "+q)}).enqueue()};AcreApp.prototype.t_remove_author=function(e){var b=
this,j={appid:b.get_path(),username:e};return this.get_store().XhrPost("remove_app_author",j).onready(function(){delete b._authors[e]}).onerror(function(a,o,q){mjt.warn("Failed to add author: "+a+", "+o+", "+q)}).enqueue()};AcreApp.prototype.t_get_apikeys=function(){var e={appid:this.get_path()};return this.get_store().XhrPost("list_app_apikeys",e).onerror(function(b,j,a){mjt.warn("Failed to get API Keys: "+b+", "+j+", "+a)}).enqueue()};AcreApp.prototype.t_add_apikey=function(e,b,j){e={appid:this.get_path(),
name:e,token:b,secret:j};return this.get_store().XhrPost("create_app_apikey",e).onerror(function(a,o,q){mjt.warn("Failed to add api key: "+a+", "+o+", "+q)}).enqueue()};AcreApp.prototype.t_remove_apikey=function(e){e={appid:this.get_path(),name:e};return this.get_store().XhrPost("delete_app_apikey",e).onerror(function(b,j,a){mjt.warn("Failed to add api key: "+b+", "+j+", "+a)}).enqueue()};AcreApp.prototype.t_set_oauth=function(e){var b=this;if(b.is_oauth_enabled()==e)return mjt.Succeed().enqueue();
if(!(e===true||e===false))return mjt.Fail(500,"Must set oauth_enabled to true or false").enqueue();var j={appid:b.get_path(),enable:e};return b.get_store().XhrPost("set_app_oauth_enabled",j).onready(function(){b._oauth_enabled=e}).onerror(function(a,o,q){mjt.warn("Setting OAuth enabled for ",b.get_name(),"failed: ",a," - ",o,q)}).enqueue()};AcreApp.prototype.t_set_writeuser=function(e){var b=this;if(!!b.get_write_user()===e)return mjt.Succeed().enqueue();if(!(e===true||e===false))return mjt.Fail(500,
"Must set write_user to true or false (current user)").enqueue();var j={appid:b.get_path(),enable:e};return b.get_store().XhrPost("set_app_writeuser",j).onready(function(a){b._write_user=e?a.write_user:null}).onerror(function(a,o,q){mjt.warn("Setting write user for ",b.get_name(),"failed: ",a," - ",o,q)}).enqueue()}})();var AcreUser;
(function(){AcreUser=function(e,b){this._store=e;this._name=b.name||null;this._full_name=b.full_name||null;this._is_admin=b.admin;return this};AcreUser.prototype.destroy=function(){};AcreUser.prototype.get_name=function(){return this._name};AcreUser.prototype.get_full_name=function(){return this._full_name};AcreUser.prototype.is_admin=function(){return!!this._is_admin};AcreUser.prototype.get_image_url=function(){return this._store.get_user_image_url(this)};AcreUser.prototype.get_view_url=function(){return this._store.get_user_view_url(this)};
AcreUser.prototype.get_new_app_host=function(){return this._store.get_user_default_app_host(this)};AcreUser.prototype.get_new_app_path=function(e){return this._store.get_user_new_app_path(this,e)}})();var EDITORS={},ImageEditor;
(function(){ImageEditor=function(e){this.supports_mime_type_change=false;this.ui_element=document.createElement("div");if(e.cssClassName)this.ui_element.className=e.cssClassName;this.file=e.file;this.readOnly=e.readOnly;if(e.onChange)this.on_change=e.onChange};ImageEditor.t_load=function(e,b){var j=EDITORS.ImageEditor.config;j.readOnly=!e.is_writable();j.onChange=function(a,o){e.trigger_editor_event("change",[a,o])};j=new ImageEditor(j);j.file=e;$(e.get_element()).append(j.ui_element);b&&j.set_state(b);
return mjt.Succeed(j)};ImageEditor.prototype.destroy=function(){$(this.ui_element).remove()};ImageEditor.prototype.show=function(e){var b="Upload an image";this._prefs=e;$(this.ui_element).empty();this.file.set_dirty("content",false);if(this.file.has_been_saved())b="Replace this image";if(!this.readOnly){this.form_element=$('<form class="image-upload"><label for="image-browse">'+b+':</label> <input id="image-browse" type="file" name="file" size="40"></form>');$(this.form_element).change(this.on_change);
$(this.ui_element).append(this.form_element)}e=this.file.get_name();b=this.file.get_app().get_base_url();if(this.file.has_been_saved())if(this.file.get_mime_type().substr(0,6)==="image/")$('<div class="image-preview"><p>'+e+':</p><img src="'+this.file.get_acre_url()+'"/></div>').appendTo(this.ui_element);else this.file.get_revision()&&$('<a href="'+b+"/"+e+'">download file</a>').appendTo(this.ui_element);$(this.ui_element).append('<div class="image-attribution"><img src="img/freebase-cc-by-61x23.png" alt="Freebase CC-BY" width="61" height="23" /><p>All images included in Acre apps are released under <a href="http://creativecommons.org/licenses/by/3.0/">CC-BY</a>.</p></div>');
$(this.ui_element).show()};ImageEditor.prototype.refresh=ImageEditor.prototype.show;ImageEditor.prototype.hide=function(){$(this.ui_element).hide()};ImageEditor.prototype.get_state=function(){return{form:this.form_element}};ImageEditor.prototype.set_state=function(e){if(e.revision){this.file.set_revision(e.revision);this.file.set_dirty("content")}this.show()}})();EDITORS.ImageEditor={editor_class:ImageEditor,supports:{},config:{cssClassName:"Editor-view"}};
function EditorMargin(e){this._container=e;this._container.innerHTML="<div style='position: relative; left: 0; top: 0; width: 100%; height: 100%'></div>";e=[];for(var b=0;b<100;b++)e.push("<div>0</div>");this._lineMetricDiv=this._createLayer();this._lineMetricDiv.style.visibility="hidden";this._lineMetricDiv.innerHTML=e.join("");this._fontMetricDiv=this._createLayer();this._fontMetricDiv.style.visibility="hidden";this._fontMetricDiv.style.height="100em";this._lineNumberDiv=this._createLayer();this._lineNumberDiv.className=
"editor-margin-line-numbers";this._renderedLineCount=this._firstRenderedLine=0;this._currentLine=-1}
(function(){EditorMargin.get_layout_metrics=function(e,b){var j;if(e.getComputedStyle){j=e.getComputedStyle(b,null);return{paddingTop:j.getPropertyValue("padding-top"),marginTop:j.getPropertyValue("margin-top")}}else{j=b.currentStyle;return{paddingTop:j.paddingTop,marginTop:j.marginTop}}};EditorMargin.prototype={dispose:function(){},redraw:function(e,b){var j=this._lineMetricDiv.offsetHeight/100,a=this._fontMetricDiv.offsetHeight/100,o=j/a,q=null;if(b.contentHeight!==null)q=Math.floor(b.contentHeight/
j);var l=Math.floor(b.scrollY/j);j=Math.ceil((b.scrollY+b.visibleHeight)/j)-1;if(q!==null)j=Math.min(j,q-1);var r=this._firstRenderedLine+this._renderedLineCount;if(l<this._firstRenderedLine||l>=r||j>=r||q!==null&&q<j){r=j-l+1;l=Math.max(0,l-r);j=j+r;if(q!==null)j=Math.min(j,q-1);this._lineNumberDiv.style.paddingTop=o*l+"em";o=[];for(q=l;q<=j;q++)o.push("<div>"+(q+1)+"</div>");this._lineNumberDiv.innerHTML=o.join("");this._firstRenderedLine=l;this._renderedLineCount=j-l+1;this._highlightCurrentLine()}o=
function(f){try{if(f.indexOf("px")>0)return parseInt(f.replace(/px$/g,""),10);else if(f.indexOf("em")>0)return Math.round(parseFloat(f.replace(/em$/g,""),10)*a)}catch(g){}return 0};this._lineNumberDiv.style.top=-b.scrollY+o(e.paddingTop)+o(e.marginTop)+"px"},_createLayer:function(){var e=document.createElement("div");e.style.position="absolute";this._container.firstChild.appendChild(e);return e},setCurrentLine:function(e){if(e!==this._currentLine){this._unhighlightCurrentLine();this._currentLine=
e;this._highlightCurrentLine()}},_unhighlightCurrentLine:function(){if(this._currentLine!==-1){var e=this._lineNumberDiv.childNodes,b=this._currentLine-this._firstRenderedLine;if(b>=0&&b<e.length)e[b].className=""}},_highlightCurrentLine:function(){if(this._currentLine!==-1){var e=this._lineNumberDiv.childNodes,b=this._currentLine-this._firstRenderedLine;if(b>=0&&b<e.length)e[b].className="edit-margin-current-line-number"}}}})();var TextareaEditor;
(function(){TextareaEditor=function(e){var b=this;b._edit_element=document.createElement("textarea");if(e.cssClassName)b._edit_element.className=e.cssClassName;if(e.readOnly){$(b._edit_element).attr("readonly","yes").addClass("readonly");$(b._top_element).append("<div class='readonly-warning'>READ ONLY</div></div>")}if(e.on_change){b.timeout_id=null;var j=function(){b.timeout_id&&window.clearTimeout(b.timeout_id);b.timeout_id=window.setTimeout(e.on_change,300)},a=["input","drop"];$.browser.mozilla||
a.push("paste","keypress");for(var o=0;o<a.length;o++)$(b._edit_element).bind(a[o],j)}};TextareaEditor.t_load=function(e,b){var j=EDITORS.TextareaEditor.config;j.readOnly=!e.is_writable();j.on_change=function(){e.trigger_editor_event("change",[])};var a=new TextareaEditor(j);a._top_element=document.createElement("div");$(a._top_element).css({height:"100%",width:"100%"});$(e.get_element()).append(a._top_element);$(a._top_element).append(a._edit_element);a._margin_width=j.marginWidth;a._margin_element=
document.createElement("div");a._margin_element.className="edit-margin";$(a._top_element).append(a._margin_element);j=mjt.Succeed(a);if(b)a.set_state(b);else if(e.has_been_saved()){var o=e.t_get_revision().onready(function(q){a.set_state({text:q.text})});j.require(o)}return j};TextareaEditor.prototype.destroy=function(){$(this._top_element).remove()};TextareaEditor.prototype.show=function(e){var b=this;b._prefs=e;if(e.margin){if(!b.editorMargin)b.editorMargin=new EditorMargin(b._margin_element,{});
b._scroll_callback=function(){b._redraw_editor_margin()};if($.browser.msie)b._edit_element.onscroll=b._scroll_callback;else $(b._edit_element).bind("scroll",b._scroll_callback)}b._resize_callback=function(){b._on_resize()};$(window).bind("resize",b._resize_callback);b._on_resize();$(b._top_element).show()};TextareaEditor.prototype.hide=function(){$(this._top_element).hide();$(this._edit_element).unbind("scroll",this._scroll_callback);$(window).unbind("resize",this._resize_callback)};TextareaEditor.prototype.get_state=
function(){return{text:this._edit_element.value}};TextareaEditor.prototype.set_state=function(e){this._edit_element.value=e.text};TextareaEditor.prototype._on_resize=function(){if(this._prefs.margin){$(this._edit_element).css("left",this._margin_width);$(this._edit_element).width($(this._top_element).width()-this._margin_width);$(this._margin_element).width(this._margin_width);$(this._margin_element).show();this._redraw_editor_margin()}else{$(this._edit_element).css("left",0).width($(this._top_element).width());
$(this._margin_element).hide()}};TextareaEditor.prototype._redraw_editor_margin=function(){if(this._prefs.margin)try{var e=this._get_scroll_info();this.editorMargin.redraw(this._get_layout_metrics(),e)}catch(b){}};TextareaEditor.prototype._get_scroll_info=function(){return{scrollY:$(this._edit_element).scrollTop(),visibleHeight:$(this._edit_element).innerHeight(),contentHeight:null}};TextareaEditor.prototype._get_layout_metrics=function(){return EditorMargin.get_layout_metrics(window,this._edit_element)}})();
EDITORS.TextareaEditor={name:"TextArea",editor_class:TextareaEditor,supports:{hotswap:true,mimetype_change:true,margin:true},config:{cssClassName:"Editor-view",marginWidth:45}};
var QueryEditor=function(e,b,j){var a;e.innerHTML='<div style="position: relative"><div style="position: absolute;"></div><div style="position: absolute;"></div></div>';var o=e.firstChild.childNodes[0],q=e.firstChild.childNodes[1],l=this,r=function(){var f=Math.round((Math.max(100,e.offsetWidth)-20-10)/2)+"px",g=Math.max(100,e.offsetHeight);e.firstChild.style.width="100%";e.firstChild.style.height=g+"px";g=g-20;$(o).css("top","10px").css("height",g+"px");$(o).css("left","10px").css("width",f);$(q).css("right",
"10px").css("width",f).css("top","10px").css("height",g+"px");a.queryEditor.layout();a.outputPane.layout()};b.focusOnReady=true;b.onReady=function(){j.ready(l)};this.composition=a=CueCard.createComposition({queryEditorElement:o,queryEditorOptions:b,outputPaneElement:q,outputPaneOptions:{verticalPadding:2,horizontalPadding:2}});a.queryEditor._onRun=function(){this.run(true)};this.get_state=function(){return{text:a.queryEditor.content()}};this.set_state=function(f){a.queryEditor.content(f.text)};this.destroy=
function(){$(e).hide();$(e).remove()};this.show=function(f){var g=this;g._prefs=f;if(f.emql)this.composition.queryEditor._getQueryEnvelope=function(){return{extended:1}};var s=a.queryEditor._editor;setTimeout(function(){s.setLineNumbers(f.margin);s.setTextWrapping(f.softwrap);g._file.trigger_editor_event("linechange",[s.currentLine()]);if(s._last_selection){var d=s._last_selection.start,c=s._last_selection.end;s.selectLines(d.line,d.character,c.line,c.character);delete s._last_selection}},1);$(window).bind("resize",
r);$(".cuecard-queryEditor-controls-bottom").acre(fb.acre.apps.appeditor+"/templates","query_button_bar");$(g._file.get_element()).show();$(e).show();r()};this.hide=function(){$(e).hide();$(window).unbind("resize",r)};this.undo=function(){a.queryEditor._editor.editor.history.undo()};this.redo=function(){a.queryEditor._editor.editor.history.redo()};this.reindentSelection=function(){a.queryEditor._editor.editor.reindentSelection()};this.query_assist=function(){a.queryEditor.startAssistAtCursor()};this.query_run=
function(){a.queryEditor.run(this._file.is_writable())};this.query_redangle=function(){var f=a.queryEditor,g=f.getQueryModelAndContext();g.model.toInsideOutQueryJson(g.context,CueCard.UI.createBlockingContinuations(function(s,d){f.content(CueCard.jsonize(d,f.getJsonizingSettings()))}))};this.generate_template=function(){var f=this,g=ui.get_app().get_untitled_file_name(),s=a.queryEditor.getQueryModelAndContext().model.toQueryJson();CueCard.CodeGeneration.serializers["acre-template"].generateQueryCall=
function(d,c,n,h,i,m,p){c.appendIndent();c.append("<acre:script>");c.appendLineBreak();c.indent();c.appendIndent();c.append("var "+m+' = acre.require("'+f._file.get_name()+'").query');c.append(";");c.appendLineBreak();if(f._prefs.emql){c.appendIndent();c.append("var "+p+" = acre.freebase.mqlread("+m+", {extended:1});")}else{c.appendIndent();c.append("var "+p+" = acre.freebase.mqlread("+m+");")}c.appendLineBreak();c.unindent();c.appendIndent();c.append("</acre:script>");c.appendLineBreak();return p+
".result"};s=CueCard.CodeGeneration.generate(s,CueCard.CodeGeneration.serializers["acre-template"],{indentLevel:1});ui.do_file_create_new(g,{acre_handler:"mjt"},{text:'<html>\r<head>\r\r  <title>Query-Generated Template</title>\r\r  <style type="text/css" media="screen">\r    * { vertical-align: baseline; font-weight: inherit; font-family: inherit; \r        font-style: inherit; font-size: inherit; border: 0 none; outline: 0; padding: 0; margin: 0; }\r    body { margin: 15px; }\r    ul { list-style: none; }\r    li { padding: 3px; }\r    table { border-collapse: collapse; border-spacing: 0; width: 100%; }\r    th, td { border: 1px solid #ddd; vertical-align: top; padding: 6px; }\r    th { width: 20%; text-align: right; font-size: 11px; font-weight: bold; padding: 6px; color: #666; background: #f5f5f5; }\r    td { width: 80%; font-size: 12px; }\r    img { padding: 1px; border: 1px solid #ccc;}\r    ins { color: #aaa; text-decoration: none;}\r  </style>\r\r</head>\r\r<body>\r'+
s+'  \r  <!-- Freebase attribution template --\>\r  ${acre.require("/freebase/apps/attribution/templates").blanket()}\r</body>\r</html>\r'})};CodeMirror.prototype.highlight_line=function(){var f=this._file,g=this.currentLine(),s=$(this.lineNumbers);s.find(".Codemirror-current-line").removeClass("Codemirror-current-line");s.find("div").eq(g).addClass("Codemirror-current-line");f.trigger_editor_event("linechange",[g])};this.goto_line=function(f){var g=a.queryEditor._editor.editor;try{g.jumpToLine(f)}catch(s){g.selectLines(g.prevLine(g.lastLine()),
0)}}};
(function(){var e=mjt.define_task(null,[{name:"parent"},{name:"editor_config"}]);e.prototype._task_class="CreateQueryEditor";e.prototype.request=function(){return new QueryEditor(this.parent,this.editor_config,this)};QueryEditor.t_load=function(b,j){CueCard.helper=fb.acre.freebase.site_host+"/cuecard/";CueCard.freebaseServiceUrl=fb.acre.freebase.service_url+"/";CueCard.urlPrefix="/cuecard/";CueCard.apiProxy.base=fb.acre.freebase.site_host+"/cuecard/";var a=$.extend(true,{},EDITORS.QueryEditor.config);a.readOnly=
!b.is_writable();var o=document.createElement("div");$(o).css({height:"100%",width:"100%"});$(b.get_element()).hide().append(o);a.codeMirror.onChange=function(){try{var r=b._loaded_editors.QueryEditor.composition.queryEditor._editor.historySize();b.trigger_editor_event("change",[r.undo,r.redo])}catch(f){}};a.codeMirror.cursorActivity=function(){b._loaded_editors.QueryEditor.composition.queryEditor._editor.highlight_line()};var q,l=e(o,a).onready(function(r){r.composition.queryEditor._editor.setParser("JSParser");
if(j)r.set_state(j);else q&&r.set_state({text:q.result.text});r._file=r.composition.queryEditor._editor._file=b;r._top_element=o;$(">div",o).css("height","100%");$(".cuecard-queryEditor-controls-top").hide();if(a.readOnly){$(b.get_element()).addClass("readonly");$(".cuecard-queryEditor-inner",b.get_element()).append("<div class='readonly-warning'>READ ONLY</div>")}$('<a class="cuecard-permalink" href="javascript:{}">Open in Query Editor</a>').click(function(){var f="http://www.freebase.com/app/queryeditor?q="+
encodeURIComponent(r.composition.queryEditor.getUnresolvedQuery());window.open(f,"_blank")}).appendTo($(o).find(".cuecard-outputPane")[0]);b.trigger_editor_event("newframe",[r.composition.queryEditor._editor.frame])});if(!j&&b.has_been_saved()){q=b.t_get_revision();l.require(q)}return l}})();EDITORS.QueryEditor={editor_class:QueryEditor,supports:{margin:true,linenumbers:true,softwrap:true,undo:true,indent:true,inline_preview:true,emql:true},config:{codeMirror:{parserConfig:{json:true},lineNumbers:false}}};
(function(){function e(a){var o="DummyParser",q={mqlquery:"JSParser",acre_script:"JSParser",mjt:"HTMLMixedParser"},l={"text/html":"HTMLMixedParser","text/css":"CSSParser","text/javascript":"JSParser","application/json":"JSParser"},r=a.get_acre_handler();a=a.get_mime_type();if(a!=="text/plain"){if(a in l)o=l[a]}else if(r in q)o=q[r];return o}var b=mjt.define_task(null,[{name:"parent"},{name:"editor_config"}]);b.prototype._task_class="CreateCodeMirror";b.prototype.request=function(){var a=this,o=new CodeMirror(this.parent,
this.editor_config);this.editor_config.initCallback=function(){a.ready(o)};o.get_state=function(){return{text:this.editor.getCode()}};o.set_state=function(q){this.editor.importCode(q.text)}};CodeMirror.t_load=function(a,o){var q=$.extend(true,{},EDITORS.CodeMirror.config);q.readOnly=!a.is_writable();q.readOnly&&$(a.get_element()).addClass("readonly").append("<div class='readonly-warning'>READ ONLY</div>");q.onChange=function(){if(a._loaded_editors.CodeMirror){var g=a._loaded_editors.CodeMirror.historySize();
a.trigger_editor_event("change",[g.undo,g.redo])}};var l=document.createElement("div");$(l).css({height:"100%",width:"100%"});$(a.get_element()).append(l);var r,f=b(l,q).onready(function(g){g.setParser(e(a));if(o)g.set_state(o);else r&&g.set_state({text:r.result.text});g._file=a;g._top_element=l;a.trigger_editor_event("newframe",[g.frame]);q.cursorActivity=function(){g.highlight_line()}});if(!o&&a.has_been_saved()){r=a.t_get_revision();f.require(r)}return f};CodeMirror.prototype.destroy=function(){if("_codeAssist"in
this){this._codeAssist.dispose();this._codeAssist=null}$(this._top_element).remove()};CodeMirror.prototype.show=function(a){var o=this,q=o._file;o._prefs=a;setTimeout(function(){o.setLineNumbers(a.margin);o.setTextWrapping(a.softwrap);o.highlight_line();$(o._top_element).show();$("iframe",o._top_element).focus();if(o._last_selection){var l=o._last_selection.start,r=o._last_selection.end;o.selectLines(l.line,l.character,r.line,r.character);delete o._last_selection}a.dotTrigger&&q.is_writable()&&fb.get_script(fb.acre.libs.codeassist,
function(){if(!o._codeAssist)o._codeAssist=new CodeAssist(o.frame,o,{isMjt:q.get_acre_handler()=="mjt"});o._codeAssist.putSetting("dotTrigger",a.dotTrigger)})},1)};CodeMirror.prototype.hide=function(){var a=this.cursorPosition(),o=this.cursorPosition(false);this._last_selection={start:a,end:o};$(this._top_element).hide()};CodeMirror.prototype.highlight_line=function(){var a=this._file,o=this.currentLine(),q=$(this.lineNumbers);q.find(".Codemirror-current-line").removeClass("Codemirror-current-line");
q.find("div").eq(o).addClass("Codemirror-current-line");a.trigger_editor_event("linechange",[o])};CodeMirror.prototype.goto_line=function(a){try{this.jumpToLine(a)}catch(o){this.selectLines(this.prevLine(this.lastLine()),0)}};var j={"acre:doc":"xml-tagname-acre","acre:block":"xml-tagname-acre","acre:script":"xml-tagname-acre"};CodeMirror.style_token=function(a,o){var q=o.content.toLowerCase();if(o.style=="xml-tagname")if(j[q])a.className+=" "+j[q]}})();
EDITORS.CodeMirror={name:"CodeMirror",editor_class:CodeMirror,supports:{hotswap:true,mimetype_change:true,margin:true,linenumbers:true,softwrap:true,undo:true,indent:true,codeassist:true},config:{parserConfig:{triggers:{"acre:script":"JSParser",script:"JSParser",style:"CSSParser"}},activeTokens:CodeMirror.style_token,height:"100%",marginWidth:45,autoMatchParens:true,passDelay:100,undoDelay:250,basefiles:[],parserfile:[fb.acre.libs.codemirror],stylesheet:[fb.acre.libs.codemirror_css],lineNumbers:true,
highlightActiveLine:true,tabMode:"shift",dotTrigger:false}};var ui={};
(function(){function e(h){h=h.replace(/<\?xml[^>]+>/g,"");h=h.replace(/<style[^>]+>/g,"<style>");return h=h.replace(/type=['"]text\/(css|javascript)['"]/g,"")}function b(h){return h.replace(/acre:/g,"")}function j(h){h=h.replace(/<acre:script>/g,"<script>").replace(/<\/acre:script>/g,"<\/script>");h=h.replace(/<\/?acre:(block|doc)[^>]*>/g,"");h=h.replace(/<[^>]+>/g,b);return h=e(h)}function a(h){/^\s*@charset\s+"UTF-8";/.test(h)||(h='@charset "UTF-8"; '+h);return h}ui.init=function(){$("#body").acre(fb.acre.apps.appeditor+
"/templates","body");$("#button-apps").click(function(){ui.do_show_menu("apps")}).attr("title",ui.shortcut.get_keys("Open App"));ui.shortcut.register_keys(document);window.onbeforeunload=ui.warn_user_about_unsaved_files;$(document).keydown(function(h){return!(h.which===8&&h.target.nodeName!=="INPUT"&&h.target.nodeName!=="TEXTAREA")});$(".exit").live("click",ui.do_hide_overlays);$(".app-link").live("click",function(h){if(!(h.ctrlKey||h.metaKey||h.altKey||h.shiftKey)){h=$(this).attr("apppath");ui.do_hide_overlays();
ui.get_app()&&ui.get_app().is_dirty()?ui.do_show_dialog("files_dirty",[h]):ui.do_choose_app(h);return false}});ui.check_browser_hash();setInterval(ui.check_browser_hash,250)};ui.refresh_app_templates=function(h){var i=ui.get_app();$("#header-apptitle").acre(fb.acre.apps.appeditor+"/templates","header",[h]);if(i){$("#list-column").acre(fb.acre.apps.appeditor+"/templates","list_column");i.is_writable()?$("#about-bar").hide():$("#about-bar").acre(fb.acre.apps.appeditor+"/templates","about_bar").show()}};
ui.refresh_file_templates=function(){$("#file-list").acre(fb.acre.apps.appeditor+"/templates","file_list");$("#button-bar").acre(fb.acre.apps.appeditor+"/templates","button_bar");ui.finish_drawing()};ui.finish_drawing=function(){$(".refresh").show();ui.set_state();$(window).trigger("resize")};ui.do_show_dialog=function(h,i){function m(p){if(p.keyCode==27){ui.do_hide_dialog_overlays();$(document).unbind("keydown",m)}}ui.do_hide_overlays();if(h=="welcome")ui.dialog=$("<div id='"+h+"'></div>").acre(fb.acre.apps.appeditor+
"/dialogs",h,i).prependTo(document.body);else{$("<div id='dialog-overlay'></div>").prependTo(document.body);$(document).bind("keydown",m);ui.dialog=$("<div id='dialog-"+h+"' class='dialog'></div>").acre(fb.acre.apps.appeditor+"/dialogs",h,i).prepend("<div class='dialog-close' onclick='ui.do_hide_overlays()'></div>").prependTo(document.body)}ui.dialog.show();ui.dialog.css("left",($(window).width()-ui.dialog.outerWidth())/2);return false};ui.do_show_menu=function(h,i){function m(){ui.do_hide_menu_overlays();
$(document).unbind("keydown",p)}function p(y){y.keyCode==27&&m()}$("<div id='menu-overlay'></div>").prependTo(document.body).click(m);$(document).bind("keydown",p);$("#button-"+h).addClass("button-open");var t=$("#button-"+h).offset(),u=$("#button-"+h).height();$("<div id='menu-"+h+"' class='menu'></div>").css({top:t.top+u+10,left:t.left}).prependTo(document.body).acre(fb.acre.apps.appeditor+"/menus",h,i);return false};ui.do_setup_submenu=function(h,i,m){var p,t,u=false,y=$("#"+h),C=y.closest(".menu"),
w=$("<div id='menu-"+i+"' class='menu submenu'></div>");y.mouseenter(function(){p=setTimeout(function(){if(u)w.css("visibility","visible");else{w.css({top:y.offset().top,left:C.offset().left+C.width()}).prependTo(document.body).acre(fb.acre.apps.appeditor+"/menus",i,m).mouseenter(function(){clearTimeout(t)}).mouseleave(function(){clearTimeout(p);t=setTimeout(function(){w.css("visibility","hidden")},100)});u=true}},250)}).mouseleave(function(){clearTimeout(p);t=setTimeout(function(){w.css("visibility",
"hidden")},100)})};ui.do_hide_dialog_overlays=function(){delete ui.dialog;$("#dialog-overlay, .dialog").remove();$(".fbs-pane, .fbs-flyout-pane").hide()};ui.do_hide_menu_overlays=function(){$("#menu-overlay, .menu").remove();$(".button-open").removeClass("button-open");$(".fbs-pane, .fbs-flyout-pane").hide()};ui.do_hide_overlays=function(){ui.do_hide_dialog_overlays();ui.do_hide_menu_overlays()};ui.do_hide_welcome=function(){$("#welcome").remove()};var o=true,q,l,r,f,g,s=false,d=false,c=+new Date;
ui.check_browser_hash=function(){if(!d){var h=ui._get_browser_hash();if(h=="0")ui.set_state();else if(o||ui._ui_state_to_browser_hash()!==h){o=false;h=mjt.app.decode_uristate(h);var i=/[\<\>]/,m=h.path||h.app;m=!i.test(m)?m:null;i=!i.test(h.file)?h.file:null;ui.do_choose_app(m,i,h.line,h.create)}}};ui._get_browser_hash=function(){return window.location.hash.replace(/#!?/,"")};ui._ui_state_to_browser_hash=function(){if(typeof ui.get_app()=="undefined")return null;var h={};if(ui.get_app())h.path=ui.get_app().get_versioned_path();
if(ui.get_file())h.path+="/"+ui.get_file().get_relative_path();return mjt.app.encode_uristate(h)};ui.set_state=function(){var h=ui.get_app(),i=ui.get_file();s=i?i.is_dirty():null;var m="";if(h)m+=(h.get_display_name()||h.get_path())+" - ";if(i)m+=i.get_name()+" - ";m+="Freebase App Editor";document.title=m;h=ui._ui_state_to_browser_hash();if(h!==ui._get_browser_hash())window.location.hash="!"+h;d=false};ui.clear_state=function(){s=g=f=r=null};ui.get_store=function(){return q};ui.set_store=function(h){q=
h};ui.set_user=function(h){var i=ui.get_store();h!==i.get_user()&&i.set_user(h);l=i.get_user()};ui.get_app=function(){if(!r)return null;return r};ui.get_file=function(){if(!f)return null;return f};ui.get_line=function(){return g};ui.get_user=function(){return l};ui.get_recents=function(h,i){var m=$.localStore("recent_"+h,undefined,false);if(m===null)m=[];!i&&m&&m.length>0&&m.shift();return m};ui.add_recent=function(h,i,m){var p=$.localStore("recent_"+h,undefined,false);if(!p||!jQuery.isArray(p))p=
[];for(var t=JSON.stringify(i),u=0;u<p.length;u++)if(JSON.stringify(p[u])==t||h=="apps"&&(i&&(p[u].path==i.path||ui.id_to_path(p[u].path)==i.path)||p[u].path==m))p.splice(u,1);if(i){p.unshift(i);if(p&&p.length>16){i=p.splice(16);if(h=="apps")for(m=0;m<i.length;m++)ui.clear_recents(i[m])}}$.localStore("recent_"+h,p,false)};ui.clear_recents=function(h){$.localStore("recent_"+h,null,false)};ui.do_choose_app=function(h,i,m,p){function t(){ui.clear_state();ui.set_state();ui.refresh_app_templates("open");
var A=ui.get_recents("apps",true);if(p=="app"){if(!ui.get_user())location.href=ui.get_store().get_user_account_url("signin")+"create=app";ui.do_show_dialog("new_app")}else if(A.length>0){var E=A.shift();$.localStore("recent_apps",A,false);ui.do_choose_app(E.path)}else ui.get_user()?ui.do_show_dialog("welcome",[true]):ui.do_show_dialog("welcome")}function u(){if(p=="file"){ui.set_state();ui.do_show_dialog("add_file")}else ui.do_choose_file(i,m)}d=true;var y=ui.get_app(),C=y?y.get_versioned_path():
null;if(h&&y&&h==C){ui.refresh_app_templates();u()}else{ui.do_hide_overlays();ui.do_hide_welcome();$(".refresh").hide();if(h){y&&y.destroy();ui.refresh_app_templates("loading");var w=new AcreApp(ui.get_store(),h);w.t_load().onready(function(){r=w;ui.add_recent("apps",{path:w.get_path(),name:w.get_display_name()});f=null;ui.refresh_app_templates();u();ui.do_status_check()}).onerror(function(A,E,F){if(A=="/api/status/error/input/no_app"){ui.MessagePanel.error(E?E:"Error loading app: "+h+". "+E||"");
ui.add_recent("apps",null,h);t()}else{assert.critical(false,"Error connecting to Freebase<br/>"+E);mjt.error(A,E,F);ui.clear_state();ui.set_state();ui.refresh_app_templates("open")}})}else t()}};ui.do_choose_file=function(h,i){function m(){var y=ui.get_file();if(!y)return ui.refresh_file_templates();var C=ui._get_desired_editor_classname();return y.t_editor_show(C,ui.get_editor_prefs()).onready(function(){i&&setTimeout(function(){y.editor_goto_line(i)},0);ui.refresh_file_templates();ui.set_state()})}
d=true;var p=ui.get_app(),t=ui.get_file(),u=p.get_file(h);u||(u=p.get_file());if(!u||u==t)m(i);else{f=u;s=u.is_dirty();if($("#file-area").has(u.get_element()).length===0){$("#file-area").append(u.get_element());ui._register_editor_event_handlers(u)}t&&t.hide();$(u.get_element()).show();return m(i)}};ui.do_refresh_file=function(){var h=ui.get_file();if(h){h.set_dirty("editor");var i=ui._get_desired_editor_classname();h.t_editor_show(i,ui.get_editor_prefs()).onready(function(){ui.refresh_file_templates();
setTimeout(function(){h.editor_goto_line(ui.get_line())},0)})}};ui.do_run_view=function(h,i){var m=ui.get_file();if(m.get_acre_handler()=="mqlquery")m._current_editor.query_run();else{var p=ui.get_file().get_acre_url(i),t=window.open("about:blank",ui.get_app().get_path().replace(/[\/-]/g,"_"));if(!t){ui.MessagePanel.error("A window couldn't be opened.  Tell your web browser to allow this site to open pop up windows and try again to continue.");return false}ui.do_app_save_all(function(){t.location=
p;t.focus()})}};ui.do_acre_home_link=function(){location.href=ui.get_store().get_freebase_url()+"/apps";return false};ui.do_status_check=function(){var h={};if(ui.get_app())h.appid=ui.get_app().get_path();ui.get_store().XhrGet("store_status_check",h).enqueue().onready(function(i){ui.get_app().set_last_change(i.change);if(!!i.user!==!!ui.get_user()){ui.set_user(i.user);if(!i.user){ui.MessagePanel.error("You are no longer signed in.  Sign back in in another window to not lose any changes.");$(window).trigger("fb.user.signedout")}$(window).trigger("fb.user.signedin")}$("#app-edits-shim").acre(fb.acre.apps.appeditor+
"/templates","app_edits");ui.refresh_file_templates()})};ui.do_app_create_new=function(h,i,m){var p={appid:h};if(i)p.name=i;if(m)p.clone=m;if(ui.get_store().get_user_apps(h))ui.MessagePanel.error("App with that URL already exists");else{ui.MessagePanel.doing("Creating: "+i+"...");ui.get_store().XhrPost("create_app",p).enqueue().onready(function(t){ui.MessagePanel.info("Created: "+i);ui.do_choose_app(h);ui.get_store().set_user_apps(t)}).onerror(function(t,u){ui.MessagePanel.error(u?u:"Error creating: "+
h+". "+u||"")})}};ui.do_app_move=function(h){var i=ui.get_app(),m=i.get_path();d=true;ui.MessagePanel.doing("Moving app...");i.t_move(h).onready(function(){ui.set_state();ui.add_recent("apps",{path:i.get_path(),name:i.get_display_name()},m);ui.get_store().t_refresh_user_apps();ui.MessagePanel.info("App moved to "+h)}).onerror(function(p,t){ui.MessagePanel.error(t?t:"Error moving: "+i.get_display_name())})};ui.do_app_set_host=function(h){var i=ui.get_app();ui.MessagePanel.doing("Updating release URL for "+
i.get_display_name()+"...");i.t_set_host(h).onready(function(){ui.MessagePanel.info("Release URL updated");$("#app-hosts-list").acre(fb.acre.apps.appeditor+"/menus","app_hosts_list")}).onerror(function(m,p){ui.MessagePanel.error(p?p:"Error updating release URL for: "+i.get_display_name())})};ui.do_app_set_release=function(h){var i=ui.get_app();ui.MessagePanel.doing("Updating release of "+i.get_display_name()+"...");i.t_set_release(h).onready(function(){ui.MessagePanel.info("Release updated to "+h);
$("#app-versions-add").acre(fb.acre.apps.appeditor+"/menus","app_versions_list");$("#app-hosts-list").acre(fb.acre.apps.appeditor+"/menus","app_hosts_list")}).onerror(function(m,p){ui.MessagePanel.error(p?p:"Error releasing: "+i.get_display_name())})};ui.do_app_add_version=function(h,i,m){var p=ui.get_app();ui.MessagePanel.doing("Creating version "+h);p.t_add_version(h,i,m).onready(function(){ui.MessagePanel.info("Created version "+h);$("#app-versions-add").acre(fb.acre.apps.appeditor+"/menus","app_versions_list")}).onerror(function(t,
u){ui.MessagePanel.error("Failed to add version. "+u)})};ui.do_app_remove_version=function(h){var i=ui.get_app();ui.MessagePanel.doing("Removing version "+h);i.t_remove_version(h).onready(function(m){ui.MessagePanel.info("Removed version "+h);$("#app-versions-add").acre(fb.acre.apps.appeditor+"/menus","app_versions_list",[m])})};ui.do_app_set_listing=function(h,i,m){var p=ui.get_app();ui.MessagePanel.doing("Updating app name...");p.t_set_listing(h,i,m).onready(function(){h&&ui.add_recent("apps",{path:p.get_path(),
name:p.get_display_name()},p.get_path());ui.MessagePanel.info("Updated app name");ui.refresh_app_templates()}).onerror(function(t,u){ui.MessagePanel.error(u?u:"Error changing app name")})};ui.do_app_add_author=function(h){ui.get_app().t_add_author(h).onready(function(){var i=ui.get_app().get_authors();$("#app-authors-list").acre(fb.acre.apps.appeditor+"/menus","app_authors_list",[i])})};ui.do_app_remove_author=function(h){ui.get_app().t_remove_author(h).onready(function(){var i=ui.get_app().get_authors();
$("#app-authors-list").acre(fb.acre.apps.appeditor+"/menus","app_authors_list",[i])})};ui.do_app_set_oauth=function(h){var i=ui.get_app();ui.MessagePanel.doing("Setting OAuth state...");i.t_set_oauth(h).onready(function(){ui.MessagePanel.info("OAuth "+(h?"enabled":"disabled"))}).onerror(function(m,p){ui.MessagePanel.error("Failed to update OAuth state: "+p)})};ui.do_app_set_writeuser=function(h){var i=ui.get_app();ui.MessagePanel.doing("Setting write user...");i.t_set_writeuser(h).onready(function(){ui.MessagePanel.info("Write user "+
(h?"enabled":"disabled"))}).onerror(function(m,p){ui.MessagePanel.error("Failed to update writeuser state: "+p)})};ui.do_app_add_apikey=function(h,i,m){var p=ui.get_app();ui.MessagePanel.doing("Adding API key for "+h+"...");p.t_add_apikey(h,i,m).onready(function(t){ui.MessagePanel.info(h+" API key added.");$("#app-apikeys-add").acre(fb.acre.apps.appeditor+"/menus","app_apikeys_list",[t.keys])}).onerror(function(t,u){ui.MessagePanel.error("Failed to add API key: "+u)})};ui.do_app_remove_apikey=function(h){var i=
ui.get_app();ui.MessagePanel.doing("Deleting API key for "+h+"...");i.t_remove_apikey(h).onready(function(m){ui.MessagePanel.info(h+" API key deleted.");$("#app-apikeys-add").acre(fb.acre.apps.appeditor+"/menus","app_apikeys_list",[m.keys])}).onerror(function(m,p){ui.MessagePanel.error("Failed to delete API key: "+p)})};ui.do_app_save_all=function(h){var i=ui.get_app();if(!i.is_dirty()&&typeof h==="function")h();else{ui.MessagePanel.doing("Saving all files...");i.t_save_all().onready(function(){ui.MessagePanel.info("All files saved.");
ui.refresh_file_templates();typeof h==="function"&&setTimeout(h,500)}).onerror(function(m,p){ui.MessagePanel.error("Failed to save all files: "+p)})}};ui.do_app_delete=function(){var h=ui.get_app();ui.MessagePanel.doing("Deleting: "+h.get_display_name()+"...");h.t_delete().onready(function(i){ui.get_store().set_user_apps(i);ui.MessagePanel.info("Deleted app");r=null;ui.add_recent("apps",null,h.get_path());ui.do_choose_app()}).onerror(function(i,m){ui.MessagePanel.error(m?m:"Error deleting: "+h.get_display_name())})};
ui.do_app_apply_changes=function(h,i,m){for(var p=0;p<i.length;p++)ui.do_file_apply_change(h.files[i[p]]);ui.refresh_file_templates();m&&ui.do_app_save_all()};ui.do_file_create_new=function(h,i,m){if(ui.get_app().get_file(h))ui.MessagePanel.error("File with that name already exists");else{h=new AcreDoc(ui.get_app(),h,i,m);ui.do_choose_file(h.get_name())}};ui.do_file_set_acre_handler=function(h){var i=ui.get_file();if(h!==i.get_acre_handler()){i.set_acre_handler(h);ui.do_refresh_file()}};ui.do_file_set_mime_type=
function(h){var i=ui.get_file();if(h!==i.get_mime_type()){i.set_mime_type(h);ui.do_refresh_file()}};ui.do_file_save=function(h){var i=ui.get_file();if(i.is_dirty()){ui.MessagePanel.doing("Saving file: "+i.get_name()+"...");i.t_save(h).enqueue().onready(function(){ui.refresh_file_templates();ui.MessagePanel.info("File saved: "+i.get_name())}).onerror(function(m,p,t){if(m==="/api/status/error/upload/content_mismatch"){ui.MessagePanel.clear();ui.do_show_dialog("diff_patch",["save_conflict",t.info])}else if(m===
"/api/status/error/auth")ui.MessagePanel.error("You are not currently signed in.  To not lose your changes, sign in in a new tab or window and then try again.");else m==="/api/status/error/file_format/unsupported_mime_type"?ui.MessagePanel.error(p):ui.MessagePanel.error(p||"Error saving: "+i.get_name());ui.refresh_file_templates()})}};ui.do_file_save_as=function(h,i){var m=ui.get_file(),p=h==m.get_app().get_path()?m.get_app():new AcreApp(ui.get_store(),h),t={acre_handler:m.get_acre_handler(),content_type:m.get_mime_type(),
based_on:m.get_app().get_path()+"/"+mjt.freebase.mqlkey_quote(m.get_name())},u=new AcreDoc(p,i,t,m.get_editor_state());ui.MessagePanel.doing("Saving file as: "+i+"...");u.t_save().enqueue().onready(function(){p==ui.get_app()?ui.do_choose_file(u.get_name()):p.destroy();ui.MessagePanel.info("File created: "+i)}).onerror(function(y,C,w){w&&w.code=="/api/status/error/auth"?ui.MessagePanel.error("You are not currently signed in.  To not lose your changes, sign in in a new tab or window and then try again."):
ui.MessagePanel.error(C||"Error creating: "+i)})};ui.do_file_revert_to_saved=function(){ui.get_file().t_revert_to_saved().onready(function(){ui.do_refresh_file()})};ui.do_file_move=function(h,i){var m=ui.get_file(),p=m.get_name();if(h!=p)if(ui.get_app().get_file(h))ui.MessagePanel.error('The name "'+h+'" is already taken. Please choose a different name.',i);else{try{m.set_name(h)}catch(t){ui.MessagePanel.error(t,i);return}ui.do_choose_file(m.get_name())}};ui.do_file_delete=function(h){var i=h?ui.get_app().get_file(h):
ui.get_file();ui.MessagePanel.doing("Deleting file:"+i.get_name()+"...");i.t_delete().onready(function(){ui.MessagePanel.info("File deleted: "+i.get_name());f=null;ui.do_choose_file()}).onerror(function(m,p){ui.MessagePanel.error(p?p:"Error deleting: "+i.get_name())})};ui.do_file_apply_change=function(h,i){var m=h.file1,p=h.file2,t;if(m)if(p){t=ui.get_app().get_file(p.name);t.set_name(m.name);t.set_acre_handler(m.acre_handler);t.set_mime_type(m.content_type);if(h.patch){m=h.patch.text;if(t.is_editor_loaded())t.set_editor_state({text:m});
else{$("#file-area").append(t.get_element());t.t_editor_show("TextareaEditor",{margin:false},{text:m});t.hide()}}else m.revision&&m.revision!==p.revision&&t.set_revision(m.revision)}else{t={acre_handler:m.acre_handler,content_type:m.content_type,based_on:m.fileid};t=new AcreDoc(ui.get_app(),m.name,t,{text:m.text});t.hide()}else{t=ui.get_app().get_file(p.name);t.set_dirty("to_delete")}p&&p.name===ui.get_file().get_name()&&ui.do_refresh_file();i&&ui.do_file_save()};ui.do_file_editor_undo=function(){ui.get_file().editor_undo()};
ui.do_file_editor_redo=function(){ui.get_file().editor_redo()};ui.do_file_editor_goto_line=function(h){ui.get_file().editor_goto_line(h)};ui.do_file_editor_indent=function(){ui.get_file().editor_indent()};ui.get_file_check_options=function(){var h={bitwise:true,eqeqeq:true,forin:true,sub:true,undef:true,useful:1},i=["acre","JSON","XMLHttpRequest","console"];switch(ui.get_file().get_acre_handler()){case "mqlquery":break;case "acre_script":h.predef=i;h.es5=true;break;case "mjt":h.es5=true;h.useful=
0;h.predef=i;h.before_check=j;break;case "passthrough":h.browser=true;switch(ui.get_file().get_mime_type()){case "application/json":break;case "text/javascript":break;case "text/html":h.before_check=e;break;case "text/css":h.before_check=a;break;case "text/plain":h.useful=0;break;default:h.useful=-1;break}break;default:h.useful=-1;break}return h};ui.do_click_error=function(h){h=$(h.target);if(h.hasClass("jslint-error")){var i=h.attr("title");ui.MessagePanel.clear();i=(i+"").replace(/\&/g,"&amp;").replace(/</g,
"&lt;").replace(/>/g,"&gt;");ui.MessagePanel.error(i);h=h.text();ui.get_file().editor_goto_line(h)}};ui.do_file_check=function(){ui.do_hide_overlays();var h=$(".CodeMirror-line-numbers,.editor-margin-line-numbers",ui.get_file().get_element());$(">div.jslint-error",h).attr("title","").removeClass("jslint-error");ui.MessagePanel.clear();var i=ui.get_file_check_options();assert.critical(i,"missing jslint_options");var m=ui.get_file().get_editor_state().text;if(i.before_check)m=i.before_check(m);fb.get_script(fb.acre.libs.fulljslint,
function(){if(JSLINT(m,i))ui.MessagePanel.info("No syntax errors found");else{var p=JSLINT.errors,t="Found "+p.length+" errors.  Click any of the red line numbers below to see corresponding error details.",u=$(">div",h);if(u.length)for(var y=0;y<p.length;y++){var C=p[y];if(C){var w=u.eq(C.line-1);w.addClass("jslint-error");w.attr("title",w.attr("title")+" "+C.reason)}}else{p=p.slice(0,3);t=$.map(p,function(A){if(A)return"Line: "+A.line+" "+A.reason})}ui.MessagePanel.error(t);ui.get_file().editor_goto_line(p[0].line)}})};
ui.do_zen_coding=function(){if(ui.get_file().get_editor_name()==="CodeMirror"){var h=ui.get_file()._current_editor.editor,i=h.cursorPosition(),m=h.options.indentUnit,p=/(\s*)(.*)/.exec(h.lineContent(i.line));m=Math.floor(p[1].length/m);if(p=p[2]){p=zen.convert(p,m);if(p.error)ui.MessagePanel.error('Zen Coding syntax error in "'+mjt.htmlencode(p.error)+'".<br> See <a target="_blank" href="http://code.google.com/p/zen-coding/wiki/ZenHTMLSelectorsEn">ZenCoding</a> for help');else{ui.MessagePanel.info('Expanded <a target="_blank" href="http://code.google.com/p/zen-coding/wiki/ZenHTMLSelectorsEn">ZenCoding</a> expression');
h.setLineContent(i.line,p.out)}}}};var n={texteditor:"CodeMirror",syntax:navigator.userAgent.indexOf("iPad")===-1?true:false,margin:true,softwrap:false,dotTrigger:false,flw:200,t_mjt:true,t_acre_script:true,t_mqlquery:true,t_passthrough:true,t_binary:true,t_test:true,emql:false};ui.get_editor_prefs=function(h){function i(p){var t=$.localStore(p);return t===null?n[p]:t=="1"?true:t=="0"?false:t}if(h)return i(h);else{h={};for(var m in n)h[m]=i(m);return h}};ui.set_editor_prefs=function(h,i){var m;if(arguments.length==
1)m=h;else if(arguments.length==2){m={};m[h]=i}for(var p in m)$.localStore(p,m[p]===true?"1":m[p]===false?"0":m[p])};ui._get_desired_editor_classname=function(h){h=h||this.get_file();h=h.get_acre_handler();if(h=="binary")return"ImageEditor";else if(h=="mqlquery")return"QueryEditor";else{h=ui.get_editor_prefs("texteditor");return EDITORS[h]?h:n.texteditor}};ui._register_editor_event_handlers=function(h){h.register_editor_event_handlers({change:ui.editor_change_handler,linechange:ui.editor_linechange_handler,
newframe:ui.editor_newframe_handler})};ui.editor_change_handler=function(h,i){if(+new Date-c>6E4){c=+new Date;ui.do_status_check()}if(s!=ui.get_file().is_dirty()||h===0)ui.refresh_file_templates();if(h>0){ui._has_undos||$("#button-undo").removeAttr("disabled");ui._has_undos=true}else{ui._has_undos&&$("#button-undo").attr("disabled","disabled");ui._has_undos=false}if(i>0){ui._has_redos||$("#button-redo").removeAttr("disabled");ui._has_redos=true}else{ui._has_redos&&$("#button-redo").attr("disabled",
"disabled");ui._has_redos=false}};ui.editor_linechange_handler=function(h){g=h;$("#linenumber").val(h)};ui.editor_newframe_handler=function(h){ui.shortcut.register_keys(h.contentWindow?h.contentWindow.document:h.contentDocument)};ui.warn_user_about_unsaved_files=function(){if(ui&&ui.get_app()&&ui.get_app().is_dirty())return"You have unsaved files! The changes you made to these files will be lost if you leave this page."};ui.url_for=function(h){return fb.acre.request.base_path+"/"+h};ui.get_app_url=
function(h){return"http://"+h+ui.get_store().get_acre_host()};ui.get_appeditor_url=function(h,i){var m;if(typeof h=="string")m=h;else if(h instanceof AcreDoc){m=h.get_app().get_versioned_path();i=h.get_relative_path()}else if(h instanceof AcreApp)m=h.get_versioned_path();var p=window.location.protocol+"//"+window.location.host+window.location.pathname;if(m)p+="#!path="+m;if(i)p+="/"+i;return p};ui.id_to_path=function(h){return"//"+h.split("/").reverse().join(".")+"dev"};ui.get_human_timestamp=function(h){return mjt.freebase.date_from_iso(h).toLocaleString()};
ui.get_relative_timestamp=function(h){var i=new Date;h=mjt.freebase.date_from_iso(h);var m=i.getTime()-h.getTime();i=Math.floor(m/94608E7);h=Math.floor(m/2592E6);var p=Math.floor(m/864E5),t=Math.floor(m/36E5);m=Math.floor(m/6E4);if(i>0)return i===1?"1 year ago":i+" years ago";if(h>0)return h===1?"1 month ago":h+" months ago";if(p>0)return p===1?"1 day ago":p+" days ago";if(t>0)return t===1?"1 hour ago":t+" hours ago";if(m>0)return m===1?"1 minute ago":m+" minutes ago";if(m===0)return"less than a minute ago";
if(m<0)return"in the future???"};ui.order_section_files=function(h){var i={};h=h.get_files();for(var m in h){var p=h[m],t=p.get_name();p=p.get_acre_handler();p=p=="acre_script"&&t.substr(0,5)=="test_"?"test":p;if(typeof i[p]=="undefined")i[p]=[];i[p].push(t)}for(var u in i)i[u].sort(function(y,C){return y.localeCompare(C)});return i};ui.order_lib_files=function(h){var i=[];h=h.get_files();for(var m in h)i.push(h[m].get_name());i.sort(function(p,t){return p.localeCompare(t)});return i};ui.watch_inputs=
function(h,i){function m(){var C=false,w=i.inputs.length,A={};jQuery.each(i.inputs,function(E){var F,z=$("#"+E)[0];if(typeof z=="undefined")z=$("input[name='"+E+"']")[0];if(typeof z!="undefined"){if(z.tagName=="TEXTAREA")F=jQuery.trim($("#"+E).val());else if(z.tagName=="INPUT"){z=$(z).attr("type");if(z=="text")F=jQuery.trim($("#"+E).val());else if(z=="radio")F=$("input[name='"+E+"']:checked").val();else if(z=="checkbox")F=$("#"+E).attr("checked")}else if(z.tagName=="SELECT")F=$("#"+E+" :selected").val();
if(F!=i.inputs[E]){C=true;w-=1;A[E]=F}}});return i.activate_on=="all"?w===0?A:false:C?A:false}function p(){var C=m();if(C&&i.change){var w=i.change.apply(this,[C]);if(typeof w!=="undefined")C=w}C?$("#button-"+h).removeAttr("disabled").addClass("button-primary"):$("#button-"+h).attr("disabled","disabled").removeClass("button-primary")}function t(C){$("#"+C).bind("change",function(){p()})}function u(C){var w;$("#"+C).bind("keyup",function(){clearTimeout(w);w=setTimeout(p,i.text_delay||300)})}function y(C){$("input[name='"+
C+"']").bind("click",function(){p()})}jQuery.each(i.inputs,function(C,w){var A=$("#"+C)[0];if(typeof A=="undefined")A=$("input[name='"+C+"']")[0];if(typeof A!="undefined")if(A.tagName=="TEXTAREA")u(C,w);else if(A.tagName=="INPUT"){A=$(A).attr("type");if(A=="text")u(C);else A=="radio"?y(C):t(C)}else A.tagName=="SELECT"&&t(C)});$("#button-"+h).unbind("click").click(function(){var C=m();i.submit.apply(this,[C]);if(i.update_on_submit){jQuery.extend(i.inputs,C);p()}})};ui.populate_diff=function(h,i,m){function p(){var G=
h.parent().height()-C.height();A.height(G);E.height(G);z.height(G);x.height(G)}function t(){var G;if(i.file1||typeof i.file1==="undefined"){G=E.scrollTop();A.scrollTop(G)}else G=x.scrollTop();if(i.file2||typeof i.file2==="undefined"){z.scrollTop(G);x.scrollTop(G)}}function u(G,K,J,H){var D;D=J.length>1?"replace":J[0][0]==-1&&H==="left"?"delete":J[0][0]==1&&H==="right"?"insert":"eq";var L=$('<div class="line"></div>'),N=H==="left"?1:-1;if(J.length==1&&J[0][0]==N)L.append("<pre> </pre>");else{L.append($("<pre></pre>").text(v[H]));
J.length===1&&J[0][0]===N||(v[H]+=1)}G.append(L);G=$('<div class="code"></div>').addClass(D);D=$("<pre></pre>");L=false;for(N=0;N<J.length;N++){var M=J[N],O=M[1]===""?" ":M[1];switch(M[0]){case 0:L=true;M=$('<span class="text-eq"></span>').text(O);D.append(M);break;case 1:if(H==="right"){L=true;M=$('<span class="text-add"></span>').text(O);D.append(M)}break;case -1:if(H==="left"){L=true;M=$('<span class="text-delete"></span>').text(O);D.append(M)}break}}L||D.text(" ");G.append(D);K.append(G)}function y(G){G=
G.fileid.split("/");G.pop();return G.join("/")}var C=$('<div class="diff-header-container"></div>'),w=$('<div class="diff-header"></div>'),A=$('<div class="diff-line-container"></div>'),E=$('<div class="diff-code-container"></div>'),F=$('<div class="diff-header"></div>'),z=$('<div class="diff-line-container"></div>'),x=$('<div class="diff-code-container"></div>'),v={left:1,right:1};if(i.labels&&i.labels.length){if(i.labels[0]){m=$("<h3></h3>");m.text(i.labels[0]);F.append(m);C.append(F)}if(i.labels[1]){m=
$("<h3></h3>");m.text(i.labels[1]);w.append(m);C.append(w)}}else{if(i.file2){var B=$("<h3></h3>");if(!i.file1){F.addClass("full");x.addClass("full");B.append("Delete: ")}(i.file1&&i.file2?i.file1.name!==i.file2.name:false)&&B.addClass("change");B.append(i.file2.name);y(i.file2)!==ui.get_app().get_path()&&B.append("in "+y(i.file2));var I=$("<h3></h3>");(i.file1&&i.file2?i.file1.acre_handler!==i.file2.acre_handler||i.file1.content_type!==i.file2.content_type:false)&&I.addClass("change");I.append(ui.get_store().get_acre_handlers()[i.file2.acre_handler].name);
i.file2.content_type&&I.append(" ("+i.file2.content_type+")");F.append(B).append(I);if(m==="get_file_diff"){B=$("<h3></h3>");i.file2.last_modified&&B.append("Last Mod: "+ui.get_human_timestamp(i.file2.last_modified));F.append(B)}C.append(F)}if(i.file1){F=$("<h3></h3>");if(i.file2)m=="get_file_merge"&&F.append("After Merge: ");else{w.addClass("full");E.addClass("full");F.append("Create: ")}F.append(i.file1.name);m=="get_file_diff"&&y(i.file1)!==ui.get_app().get_path()&&F.append("in "+y(i.file1));B=
$("<h3></h3>");B.append(ui.get_store().get_acre_handlers()[i.file1.acre_handler].name);i.file1.content_type&&B.append(" ("+i.file1.content_type+")");w.append(F).append(B);if(m==="get_file_diff"){m=$("<h3></h3>");i.file1.last_modified&&m.append("Last Mod: "+ui.get_human_timestamp(i.file1.last_modified));w.append(m)}C.append(w)}}h.append(C);if(i.message)h.append($('<div class="message"></div>').text(i.message));else if(i.file1&&i.file2&&i.file1.revision===i.file2.revision)h.append('<div class="message">No change in content</div>');
else if(i.file2&&i.file2.binary||i.file1&&i.file1.binary){if(i.file2&&i.file2.binary){z.append("<pre> </pre>");x.append('<div class="image"><div class="image-preview"><img src="'+i.file2.binary+'" /></div></div>');h.append(z).append(x)}if(i.file1&&i.file1.binary){A.append("<pre> </pre>");E.append('<div class="image"><div class="image-preview"><img src="'+i.file1.binary+'" /></div></div>');h.append(A).append(E)}}else if(i.diff){for(w=0;w<i.diff.length;w++){m=i.diff[w];if(i.file2||typeof i.file2===
"undefined")u(z,x,m,"left");if(i.file1||typeof i.file1==="undefined")u(A,E,m,"right")}if(i.file2||typeof i.file2==="undefined"){z.append('<div class="line"><pre> </pre></div>');h.append(z).append(x);x.scroll(t)}if(i.file1||typeof i.file1==="undefined"){A.append('<div class="line"><pre> </pre></div>');h.append(A).append(E);E.scroll(t)}if((i.file1||typeof i.file1==="undefined")&&(i.file2||typeof i.file2==="undefined"))x.css("overflow-y","hidden")}p();$(window).resize(p)};ui.MessagePanel=function(){function h(t,
u,y){if(p&&p==="error")mjt.error("MessagePanel: Already displaying error. Ignoring: "+t+": "+u);else{$("#message-panel").hide().acre(fb.acre.apps.appeditor+"/templates","message_panel",[t,u,null]);p=t;window.clearTimeout(i);m=function(){$("#message-panel").empty();p=m=null};i=window.setTimeout(m,y);$("#message-panel").slideDown(300)}}var i,m,p;return{doing:function(t,u){h("doing",t,2E6,u);return""},info:function(t,u){h("info",t,4E3,u);return""},error:function(t,u){h("error",t,6E3,u);return""},clear:function(){window.clearTimeout(i);
m&&m()}}}();ui.shortcut={};(function(){var h=[{op:"Code Assist"},{op:"Open App",key:"O",action:function(){ui.do_show_menu("apps",[true])}},{op:"Save File",key:"S",action:function(){ui.do_file_save()}},{op:"View",key:"Shift-P",action:function(){ui.do_run_view(null,false)}},{op:"View with Console",key:"P",action:function(){ui.do_run_view(null,true)}},{op:"Undo",key:"Z",action:function(){ui.do_file_editor_undo()}},{op:"Redo",key:"Shift-Z",action:function(){ui.do_file_editor_redo()}},{op:"Redo",key:"Y",
action:function(){ui.do_file_editor_redo()}},{op:"Check Syntax",key:"Shift-C",action:function(){ui.do_file_check()}},{op:"Expand Expression",key:"E",action:function(){ui.do_zen_coding()}},{op:"Indent Selection",key:"Shift-I",action:function(){ui.do_file_editor_indent()}},{op:"Jump to Line",key:"J",action:function(){$("#linenumber").focus().select()}}],i=navigator.platform.indexOf("Mac")===0?"Meta":"Ctrl";ui.shortcut.register_keys=function(m){$.each(h,function(p,t){shortcut.add(i+"-"+t.key,t.action,
{target:m})})};ui.shortcut.get_shortcuts=function(){return h};ui.shortcut.get_keys=function(m){var p;if(m=="Code Assist")p=(navigator.platform.indexOf("Mac")===0?"Alt-":"Ctrl-")+"Space";else $.each(h,function(t,u){if(u.op==m)p=(navigator.platform.indexOf("Mac")===0?"&#8984;-":"Ctrl-")+u.key});return p}})()})();
$(document).ready(function(){if($.browser.msie&&$.browser.version<"8.0")assert.critical(false,"Internet Explorer 6 and 7 are not supported.  IE8+, Firefox 3+ and Safari 3+ are.Another option is to install <a href='http://www.google.com/chromeframe'>Google Chrome Frame</a>");else{ui.set_store(new FreebaseStore);var e=ui.get_store();e.t_init().onready(function(){ui.set_user(e.get_user());ui.init();e.TestCookies(e).enqueue().onerror(function(){ui.MessagePanel.error("Your browser configuration may not always let you see your latest changes when clicking <b>View</b> (third-party cookies).<br/><br/>Hold down the <b>Shift</b> key when clicking the browser <b>Refresh</b> button to ensure you're seeing the latest.")})}).onerror(function(b,
j,a){assert.critical(false,"Error connecting to Freebase<br/>"+j);mjt.error(b,j,a)})}});
jQuery&&jQuery(window).trigger("acre.template.register",{pkgid:"//5b.appeditor.site.tags.svn.freebase-site.googlecode.dev/templates",source:{def:function(){var e=function(){var b=this.tpackage,j=this.exports,a=b._template_fragments,o=b.runtime.new_markuplist(),q=0;o[q++]=a[0];var l=function(){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[1];b.runtime.ondomready(function(){var s=parseInt(ui.get_editor_prefs("flw"));$(window).resize(function(){$("#list-column").width(s);$("#file-margin").css("left",
s);$("#file-column").css("left",s+$("#file-margin").width());var d=$("#fixer"),c=d.offset(),n=$("#file-column").offset(),h=Math.max(c.top+d[0].offsetHeight,$(window).height())-Math.max(n.top,$("#header").height()+1);n=Math.max(c.left+d[0].offsetWidth,$(window).width())-n.left;var i=$("#file-area").offset();d=Math.max(c.top+d[0].offsetHeight,$(window).height())-i.top;$(".row").width(n);$(".column").height(h-1);$("#file-area").height(d-1);$("#file-list").height(d-$("#app-search").height()-$("#app-edits").height());
$(".refresh-right").show();ui.dialog&&ui.dialog.css("left",($(window).width()-ui.dialog.outerWidth())/2)});$("#file-margin").draggable({axis:"x",iframeFix:true,containment:[125,,400],drag:function(){s=$("#file-margin").offset().left;$(window).trigger("resize")},stop:function(){s=$("#file-margin").offset().left;ui.set_editor_prefs({flw:s});$(window).trigger("resize")}});$("#file-area").click(ui.do_click_error)},this);f[g++]=a[2];return f};l=b.runtime.tfunc_factory("body()",l,b,undefined,false);j.body=
l;l.source_microdata=null;o[q++]=a[3];l=function(f){var g=b.runtime.new_markuplist(),s=0;g[s++]=a[4];ui.get_store();ui.get_user();var d=ui.get_app();g[s++]=a[5];if(f=="open")g[s++]=a[6];else if(f=="loading")g[s++]=a[7];else{f=b.runtime.uniqueid("onclick");mjt._eventcb[f]=function(){ui.do_show_menu("appsettings")};g[s++]=a[8];g[s++]=b.runtime.make_attr_safe(f);g[s++]=a[9];g[s++]=d.get_display_name();g[s++]=a[10]}g[s++]=a[11];return g};l=b.runtime.tfunc_factory("header(state)",l,b,undefined,false);
j.header=l;l.source_microdata=null;o[q++]=a[12];l=function(){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[13];var s=ui.get_app(),d=s.is_author(),c=s.is_remote(),n=ui.get_user(),h=s.get_versions(),i=s.get_released_version(),m=s.get_version_label(),p=s.get_path(),t=s.get_versioned_path();i=i?p.replace("//","//release."):null;var u=h.length;if(i&&i!=t)u-=1;f[g++]=a[14];if(m){f[g++]=a[15];f[g++]=m;f[g++]=a[16]}else{f[g++]=a[17];m="Current";f[g++]=a[18]}f[g++]=a[19];if(c){f[g++]=a[20];f[g++]=s.get_acre_host();
f[g++]=a[21]}else if(d){f[g++]=a[22];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){ui.do_choose_app(ui.get_app().get_path())};f[g++]=a[23];f[g++]=b.runtime.make_attr_safe(n);f[g++]=a[24];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){ui.do_show_dialog("new_app",[true])};f[g++]=a[25];f[g++]=b.runtime.make_attr_safe(n);f[g++]=a[26]}else{f[g++]=a[27];s=b.runtime.uniqueid("onclick");mjt._eventcb[s]=function(){ui.do_show_dialog("new_app",[true])};f[g++]=a[28];d=n?{}:{disabled:"disabled"};
"class"in d||(f[g++]=a[29]);"id"in d||(f[g++]=a[30]);if(!("onclick"in d)){f[g++]=a[31];f[g++]=b.runtime.make_attr_safe(s);f[g++]=a[32]}for(var y in d){f[g++]=" "+y;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+d[y]);f[g++]=b.runtime.bless('"')}f[g++]=a[33];if(!n){f[g++]=a[34];f[g++]=b.runtime.make_attr_safe($("#nav-signin").attr("href"));f[g++]=a[35]}f[g++]=a[36]}f[g++]=a[37];if(h.length){f[g++]=a[38];if(i&&i!=t){f[g++]=a[39];f[g++]=b.runtime.make_attr_safe(i);f[g++]=a[40];f[g++]=b.runtime.make_attr_safe(ui.get_appeditor_url(i));
f[g++]=a[41]}f[g++]=a[42];if(m&&m!="Current"){f[g++]=a[43];f[g++]=b.runtime.make_attr_safe(p);f[g++]=a[44];f[g++]=b.runtime.make_attr_safe(ui.get_appeditor_url(p));f[g++]=a[45]}f[g++]=a[46];if(u>0){h=b.runtime.uniqueid("onclick");mjt._eventcb[h]=function(){return ui.do_show_menu("appsettings",["general"])};f[g++]=a[47];f[g++]=b.runtime.make_attr_safe(h);f[g++]=a[48]}f[g++]=a[49]}f[g++]=a[50];return f};l=b.runtime.tfunc_factory("about_bar()",l,b,undefined,false);j.about_bar=l;l.source_microdata=null;
o[q++]=a[51];l=function(){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[52];if(ui.get_app().is_writable()){var s=b.runtime.uniqueid("onclick");mjt._eventcb[s]=function(){ui.do_show_dialog("add_file")};f[g++]=a[53];f[g++]=b.runtime.make_attr_safe(s);f[g++]=a[54]}f[g++]=a[55];f[g++]=r();f[g++]=a[56];f[g++]=b.runtime.make_attr_safe(ui.get_app().get_acre_host());f[g++]=a[57];f[g++]=b.runtime.make_attr_safe(ui.get_app().get_path());f[g++]=a[58];return f};l=b.runtime.tfunc_factory("list_column()",l,b,undefined,
false);j.list_column=l;l.source_microdata=null;o[q++]=a[59];var r=function(){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[60];var s=false,d=ui.get_app().get_last_change();if(d)if(+new Date-mjt.freebase.date_from_iso(d.timestamp)<36E5)s=true;f[g++]=a[61];if(s){f[g++]=a[62];f[g++]=d.attribution.name;f[g++]=a[63];f[g++]=mjt.freebase.mqlkey_unquote(d.file);f[g++]=a[64];f[g++]=ui.get_relative_timestamp(d.timestamp);f[g++]=a[65]}f[g++]=a[66];return f};r=b.runtime.tfunc_factory("app_edits()",r,b,undefined,
false);j.app_edits=r;r.source_microdata=null;o[q++]=a[67];l=function(){function f(h,i){var m="file-list-item",p=ui.get_file()?ui.get_file().get_relative_path():null;if(h.get_relative_path()==p)m+=" selected-file";if(h.is_dirty("to_delete"))m+=" deleted-file";if(h.is_dirty())m+=" edited-file";ui.get_editor_prefs("t_"+i)||(m+=" hidden-file");return m}var g=b.runtime.new_markuplist(),s=0;g[s++]=a[68];var d=function(h,i,m,p,t){var u=b.runtime.new_markuplist(),y=0;u[y++]=a[69];u[y++]=b.runtime.make_attr_safe(h);
u[y++]=a[70];if(p){u[y++]=a[71];if(ui.get_editor_prefs("t_"+h)){u[y++]=a[72];u[y++]=b.runtime.make_attr_safe(h);u[y++]=a[73]}else{u[y++]=a[74];u[y++]=b.runtime.make_attr_safe(h);u[y++]=a[75]}u[y++]=a[76];if(t){u[y++]=a[77];u[y++]=b.runtime.make_attr_safe(m.get_path());u[y++]=a[78];u[y++]=b.runtime.make_attr_safe(ui.get_appeditor_url(m.get_path()));u[y++]=a[79];u[y++]=i;u[y++]=a[80]}else{u[y++]=a[81];u[y++]=i;u[y++]=a[82]}u[y++]=a[83]}u[y++]=a[84];b.runtime.foreach(this,p,function(C,w){for(var A=1;A;){if(p){u[y++]=
a[85];var E={"class":f(m.get_file(w),h),fname:m.get_file(w).get_relative_path()};for(var F in E){u[y++]=" "+F;u[y++]=b.runtime.bless('="');u[y++]=b.runtime.htmlencode(""+E[F]);u[y++]=b.runtime.bless('"')}u[y++]=a[86];E=b.runtime.uniqueid("onclick");mjt._eventcb[E]=function(){ui.do_show_dialog("delete_file",[w])};u[y++]=a[87];var z=m.is_writable()?{"class":"file-delete"}:{"class":"file-nodelete"};"class"in z||(u[y++]=a[88]);if(!("onclick"in z)){u[y++]=a[89];u[y++]=b.runtime.make_attr_safe(E);u[y++]=
a[90]}for(var x in z){u[y++]=" "+x;u[y++]=b.runtime.bless('="');u[y++]=b.runtime.htmlencode(""+z[x]);u[y++]=b.runtime.bless('"')}u[y++]=a[91];u[y++]=b.runtime.make_attr_safe(ui.get_appeditor_url(m.get_file(w)));u[y++]=a[92];u[y++]=w;u[y++]=a[93]}A--}return A?b.runtime._break_token:b.runtime._continue_token});u[y++]=a[94];return u};d=b.runtime.tfunc_factory("filelist_section(section_key, section_name, app, filenames, link)",d,b,undefined,false);d.source_microdata=null;g[s++]=a[95];var c=ui.get_app(),
n=ui.order_section_files(c);g[s++]=a[96];b.runtime.foreach(this,ui.get_store().get_acre_handlers(),function(h,i){for(var m=1;m;){g[s++]=a[97];g[s++]=d(h,i.plural_name,c,n[h]);g[s++]=a[98];m--}return m?b.runtime._break_token:b.runtime._continue_token});g[s++]=a[99];if(n.test&&n.test.length){g[s++]=a[100];g[s++]=d("test","Tests",c,n.test);g[s++]=a[101]}g[s++]=a[102];b.runtime.ondomready(function(){$(".file-list-section-toggle").click(function(){var h=$(this).attr("section");if($(this).text()=="\u25bc"){$(this).text("\u25ba");
ui.set_editor_prefs("t_"+h,false);$("ul[section='"+h+"'] .file-list-item").addClass("hidden-file")}else{$(this).text("\u25bc");ui.set_editor_prefs("t_"+h,true);$("ul[section='"+h+"'] .file-list-item").removeClass("hidden-file")}});$("#file-list .file-list-item").click(function(h){if(!(h.ctrlKey||h.metaKey||h.altKey||h.shiftKey)){h=$(this).attr("fname");ui.do_choose_file(h);return false}})},this);g[s++]=a[103];return g};l=b.runtime.tfunc_factory("file_list()",l,b,undefined,false);j.file_list=l;l.source_microdata=
null;o[q++]=a[104];l=function(){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[105];var s=ui.get_app(),d=ui.get_file(),c=s?s.is_writable():false,n=d?d.get_editor_supported_features():false;n=n.margin||n.softwrap||n.hotswap||n.emql;var h=$("#button-fileactions").hasClass("button-open"),i=$("#button-editoroptions").hasClass("button-open");f[g++]=a[106];if(d){f[g++]=a[107];var m=b.runtime.uniqueid("onclick");mjt._eventcb[m]=function(){ui.do_run_view(null,false)};f[g++]=a[108];var p=d.get_editor_supported_features("inline_preview")?
{disabled:"disabled"}:{};"id"in p||(f[g++]=a[109]);if(!("title"in p)){f[g++]=a[110];f[g++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("View")));f[g++]=a[111]}if(!("onclick"in p)){f[g++]=a[112];f[g++]=b.runtime.make_attr_safe(m);f[g++]=a[113]}for(var t in p){f[g++]=" "+t;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+p[t]);f[g++]=b.runtime.bless('"')}f[g++]=a[114];t=b.runtime.uniqueid("onclick");mjt._eventcb[t]=function(){ui.do_run_view(null,true)};f[g++]=a[115];m=d.get_editor_supported_features("inline_preview")?
{disabled:"disabled"}:{};"class"in m||(f[g++]=a[116]);"id"in m||(f[g++]=a[117]);if(!("title"in m)){f[g++]=a[118];f[g++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("View with Console")));f[g++]=a[119]}if(!("onclick"in m)){f[g++]=a[120];f[g++]=b.runtime.make_attr_safe(t);f[g++]=a[121]}for(var u in m){f[g++]=" "+u;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+m[u]);f[g++]=b.runtime.bless('"')}f[g++]=a[122];u=b.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){ui.do_file_save()};
f[g++]=a[123];t=d.is_dirty()?{}:{disabled:"disabled"};"class"in t||(f[g++]=a[124]);"id"in t||(f[g++]=a[125]);if(!("title"in t)){f[g++]=a[126];f[g++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("Save File")));f[g++]=a[127]}if(!("onclick"in t)){f[g++]=a[128];f[g++]=b.runtime.make_attr_safe(u);f[g++]=a[129]}for(var y in t){f[g++]=" "+y;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+t[y]);f[g++]=b.runtime.bless('"')}f[g++]=a[130];y=b.runtime.uniqueid("onclick");mjt._eventcb[y]=
function(){ui.do_app_save_all()};f[g++]=a[131];s=s.is_dirty()?{}:{disabled:"disabled"};"class"in s||(f[g++]=a[132]);"id"in s||(f[g++]=a[133]);if(!("onclick"in s)){f[g++]=a[134];f[g++]=b.runtime.make_attr_safe(y);f[g++]=a[135]}for(var C in s){f[g++]=" "+C;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+s[C]);f[g++]=b.runtime.bless('"')}f[g++]=a[136];C=b.runtime.uniqueid("onclick");mjt._eventcb[C]=function(){ui.do_show_dialog("save_file_as")};f[g++]=a[137];s=!ui.get_user()||d.get_acre_handler()==
"binary"?{disabled:"disabled"}:{};"class"in s||(f[g++]=a[138]);"id"in s||(f[g++]=a[139]);if(!("onclick"in s)){f[g++]=a[140];f[g++]=b.runtime.make_attr_safe(C);f[g++]=a[141]}for(var w in s){f[g++]=" "+w;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+s[w]);f[g++]=b.runtime.bless('"')}f[g++]=a[142];w=b.runtime.uniqueid("onclick");mjt._eventcb[w]=function(){ui.do_file_editor_undo()};f[g++]=a[143];C=ui._has_undos?{}:{disabled:"disabled"};"class"in C||(f[g++]=a[144]);"id"in C||(f[g++]=a[145]);
if(!("title"in C)){f[g++]=a[146];f[g++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("Undo")));f[g++]=a[147]}if(!("onclick"in C)){f[g++]=a[148];f[g++]=b.runtime.make_attr_safe(w);f[g++]=a[149]}for(var A in C){f[g++]=" "+A;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+C[A]);f[g++]=b.runtime.bless('"')}f[g++]=a[150];A=b.runtime.uniqueid("onclick");mjt._eventcb[A]=function(){ui.do_file_editor_redo()};f[g++]=a[151];w=ui._has_redos?{}:{disabled:"disabled"};"class"in w||(f[g++]=
a[152]);"id"in w||(f[g++]=a[153]);if(!("title"in w)){f[g++]=a[154];f[g++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("Redo")));f[g++]=a[155]}if(!("onclick"in w)){f[g++]=a[156];f[g++]=b.runtime.make_attr_safe(A);f[g++]=a[157]}for(var E in w){f[g++]=" "+E;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+w[E]);f[g++]=b.runtime.bless('"')}f[g++]=a[158];E=b.runtime.uniqueid("onclick");mjt._eventcb[E]=function(){ui.do_file_editor_indent()};f[g++]=a[159];c=d.get_editor_supported_features("indent")&&
c?{}:{disabled:"disabled"};"id"in c||(f[g++]=a[160]);if(!("title"in c)){f[g++]=a[161];f[g++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("Indent Selection")));f[g++]=a[162]}if(!("onclick"in c)){f[g++]=a[163];f[g++]=b.runtime.make_attr_safe(E);f[g++]=a[164]}for(var F in c){f[g++]=" "+F;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+c[F]);f[g++]=b.runtime.bless('"')}f[g++]=a[165];F=b.runtime.uniqueid("onclick");mjt._eventcb[F]=function(){ui.do_show_menu("fileactions")};f[g++]=
a[166];h=h?{"class":"button-open"}:{};"class"in h||(f[g++]=a[167]);"id"in h||(f[g++]=a[168]);if(!("onclick"in h)){f[g++]=a[169];f[g++]=b.runtime.make_attr_safe(F);f[g++]=a[170]}for(var z in h){f[g++]=" "+z;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+h[z]);f[g++]=b.runtime.bless('"')}f[g++]=a[171];z=b.runtime.uniqueid("onclick");mjt._eventcb[z]=function(){ui.do_show_menu("editoroptions")};f[g++]=a[172];n=i?{"class":"button-open"}:n?{}:{disabled:"disabled"};"class"in n||(f[g++]=a[173]);
"id"in n||(f[g++]=a[174]);if(!("onclick"in n)){f[g++]=a[175];f[g++]=b.runtime.make_attr_safe(z);f[g++]=a[176]}for(var x in n){f[g++]=" "+x;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+n[x]);f[g++]=b.runtime.bless('"')}f[g++]=a[177];x=b.runtime.uniqueid("onclick");mjt._eventcb[x]=function(){ui.do_show_menu("help")};f[g++]=a[178];f[g++]=b.runtime.make_attr_safe(x);f[g++]=a[179];if(d.get_editor_supported_features("linenumbers")){f[g++]=a[180];f[g++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("Jump to Line")));
f[g++]=a[181];f[g++]=b.runtime.make_attr_safe(ui.get_line()||"");f[g++]=a[182]}f[g++]=a[183]}f[g++]=a[184];b.runtime.ondomready(function(){$("#linenumber").keypress(function(v){if(v.which==13){v=parseInt($("#linenumber").val(),10);ui.do_file_editor_goto_line(v)}})},this);f[g++]=a[185];return f};l=b.runtime.tfunc_factory("button_bar()",l,b,undefined,false);j.button_bar=l;l.source_microdata=null;o[q++]=a[186];l=function(){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[187];var s=ui.get_app().is_writable();
f[g++]=a[188];var d=b.runtime.uniqueid("onclick");mjt._eventcb[d]=function(){ui.get_file()._current_editor.query_run()};f[g++]=a[189];f[g++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("View")));f[g++]=a[190];f[g++]=b.runtime.make_attr_safe(d);f[g++]=a[191];d=b.runtime.uniqueid("onclick");mjt._eventcb[d]=function(){ui.get_file()._current_editor.query_assist()};f[g++]=a[192];var c=s?{}:{disabled:"disabled"};"title"in c||(f[g++]=a[193]);if(!("onclick"in c)){f[g++]=a[194];f[g++]=b.runtime.make_attr_safe(d);
f[g++]=a[195]}for(var n in c){f[g++]=" "+n;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+c[n]);f[g++]=b.runtime.bless('"')}f[g++]=a[196];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){ui.get_file()._current_editor.generate_template()};f[g++]=a[197];s=s?{}:{disabled:"disabled"};if(!("onclick"in s)){f[g++]=a[198];f[g++]=b.runtime.make_attr_safe(n);f[g++]=a[199]}for(var h in s){f[g++]=" "+h;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+s[h]);f[g++]=b.runtime.bless('"')}f[g++]=
a[200];return f};l=b.runtime.tfunc_factory("query_button_bar()",l,b,undefined,false);j.query_button_bar=l;l.source_microdata=null;o[q++]=a[201];q=function(f,g,s){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[202];d[c++]=b.runtime.make_attr_safe(f);d[c++]=a[203];if(this.subst_id)d[c++]=b.runtime.bless(' id="'+this.subst_id+'"');d[c++]=a[204];d[c++]=b.runtime.make_attr_safe(f);d[c++]=a[205];d[c++]=mjt.bless(g);d[c++]=a[206];d[c++]=s||"";d[c++]=a[207];b.runtime.ondomready(function(){$("#message-panel-close").click(function(){ui.MessagePanel.clear()})},
this);d[c++]=a[208];return d};q=b.runtime.tfunc_factory("message_panel(type, msg, tid)",q,b,undefined,false);j.message_panel=q;q.source_microdata=null;return o};e.source_microdata=null;return e}(),info:{file:"//5b.appeditor.site.tags.svn.freebase-site.googlecode.dev/templates",stringtable:["\n\n<!-- called by ui.init --\>",'\n  <div id="message-panel"></div>\n  <div id="about-bar"></div>\n  <div id="columns">\n    <div class="refresh column" id="list-column"></div>\n    <div class="refresh column" id="file-margin"></div>\n    <div class="column row" id="file-column">\n      <div class="refresh" id="button-bar"></div>\n      <div class="refresh" id="file-area"></div>\n    </div>\n  </div>',
"","\n\n<!-- called by ui.refresh_app_templates --\>    ","","",'\n  <p>\n    <span class="app-name">Acre App Editor</span>\n  </p>','\n  <p><span class="app-name">Loading...</span></p>','\n  <div class="app-name" id="button-appsettings" onclick="return mjt._eventcb.','.apply(this, [event])">\n    <p><span class="button-menu">',"</span></p>\n  </div>","","\n\n<!-- called by ui.refresh_app_templates --\>","",'\n  <div class="column left" id="about-bar-left">',"\n      <span>\n        Version ","\n      </span>",
"\n      <span>","\n        Current \n      </span>",'\n  </div>\n  <div class="column margin" id="about-bar-margin"> </div>\n  <div class="column row" id="about-bar-middle">',"\n    <div>\n      <h2><em>This app is hosted on ","</em></h2>\n    </div>","\n    <div>",'\n      <button class="button-primary" id="button-trunk" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Edit Current</button>\n      or','\n      <button id="button-clone" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Clone this App</button>      \n    </div>',
"\n    <div>","\n      <button",' class="button-primary"',' id="button-clone"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n        Clone this App</button> ",'\n        <span>\n          <a href="','" title="Sign in to your Freebase account">Sign in</a>\n        </span>'," \n        to make an app based on this one!\n    </div>",'\n    <div class="refresh-right" id="about-bar-right">',"\n      <span><b>\n        Versions:",'\n        <a apppath="','" class="app-link" href="','">Release</a>',
"",'\n        <a apppath="','" class="app-link" href="','">Current</a>',"",'\n        <a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">more...</a>',"\n      </b></span>","\n    </div>\n  </div>","","",'\n  <button id="button-new-file" onclick="return mjt._eventcb.','.apply(this, [event])">\n    New File</button>','\n  <h1>Files</h1>\n  \n  <div id="file-list"></div>\n  <div id="app-edits-shim">\n    ','\n  </div>\n  \n  <div id="app-search">\n    <form action="http://codesearch.',
'/" id="codesearch-form" target="_blank">\n      <div class="file-list-section-title">Find code in app:</div>\n      <input id="codesearch-app" name="app" type="hidden" value="','">\n      <input name="q" type="text" value="">\n    </form>\n  </div>',"","","",'\n    <div id="app-edits">\n      <div class="content">\n        <span class="file-list-section-title">Active Author: </span>\n        <span class="change">\n          '," edited '","' ","\n        </span>\n      </div>\n    </div>","","\n\n<!-- called by ui.refresh_file_templates --\>  ",
"",'\n    <ul section="','">','\n      <li class="file-list-section-header">','\n        <span class="file-list-section-toggle" section="','">\u25bc</span>','\n        <span class="file-list-section-toggle" section="','">\u25ba</span>',"",'\n        <a apppath="','" class="file-list-section-title app-link" href="','">',"</a>",'\n        <span class="file-list-section-title">',"</span>","\n      </li>","","\n      <li",">","\n          <div",' class="file-delete"',' onclick="return mjt._eventcb.',
'.apply(this, [event])"','></div>\n          <a href="','">',"</a>\n      </li>","\n    </ul>","","","\n\n  <div>\n    ","\n  </div>","","\n  <div>\n    ","\n  </div>","","","\n\n<!-- called by ui.refresh_file_templates --\>  ","",'\n    <div id="file-buttons">','\n      <div>\n      <div class="refresh-right" id="file-buttons-right">',"\n        <button",' id="button-view"',' title="','"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n          View</button>","\n        <button",' class="button-primary"',
' id="button-preview"',' title="','"',' onclick="return mjt._eventcb.','.apply(this, [event])"','>\n          View with Console</button>\n      </div>\n      <span class="buttonset">',"\n        <button",' class="button-left button-primary"',' id="button-save"',' title="','"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n          Save\n        </button>","<button",' class="button-middle"',' id="button-saveall"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n          Save All\n        </button>",
"<button",' class="button-right"',' id="button-save"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n          Save As</button>","\n        <button",' class="button-left"',' id="button-undo"',' title="','"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n          Undo\n        </button>","<button",' class="button-right"',' id="button-redo"',' title="','"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n          Redo</button>","\n        <button",' id="button-indent"',
' title="','"',' onclick="return mjt._eventcb.','.apply(this, [event])"','>\n          Indent\n        </button>\n      </span>\n      <span class="buttonset">',"\n       <button",' class="button-left"',' id="button-fileactions"',' onclick="return mjt._eventcb.','.apply(this, [event])"','>    \n          <span class="button-menu">File</span></button>',"<button",' class="button-middle"',' id="button-editoroptions"',' onclick="return mjt._eventcb.','.apply(this, [event])"','>\n          <span class="button-menu">Editor</span></button>',
'<button class="button-right" id="button-help" onclick="return mjt._eventcb.','.apply(this, [event])">\n          <span class="button-menu">Help</span></button>\n      </span>\n      <span class="buttoncount">','\n        <span class=" buttonset linecount">\n          Line <input class="form-textbox" id="linenumber" title="','" type="text" value="','">\n        </span>',"\n      </span>\n    </div>","","\n  </div>","",'<div id="query-editor-buttons">',"",'\n  <button class="button-primary" title="',
'" onclick="return mjt._eventcb.','.apply(this, [event])">\n    Run</button>',"\n  <button",' title="Tab"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">Query Assist</button>","\n  <button",' onclick="return mjt._eventcb.','.apply(this, [event])"',">Create Template</button>\n</div>","\n\n<!-- utilities --\>  ",'<div class="message-','"','>\n  <!--<span id="message-panel-close">x</span>--\>\n  <div class="message-icon ','"></div> ',' \n  <span class="message-tid">',"</span>","\n</div>"],
debug_locs:[1,1,1,1,1,1,7,7,7,7,7,7,18,18,18,18,18,18,18,18,18,18,18,18,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,68,68,68,68,68,70,70,70,70,70,70,71,71,72,73,74,75,76,76,78,78,78,78,78,79,79,79,79,80,80,80,80,80,80,80,81,81,81,82,82,82,83,83,83,83,83,83,86,86,86,86,86,86,87,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,103,103,103,104,104,104,104,105,105,105,106,107,107,107,110,110,110,
110,113,113,113,113,113,114,114,114,114,115,115,115,116,117,117,117,117,117,117,117,117,120,120,120,120,120,120,120,120,120,122,122,122,122,123,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,126,126,126,127,127,127,127,128,128,128,130,130,130,130,132,132,132,134,134,134,134,134,134,134,134,134,134,134,135,135,135,135,135,135,135,135,135,136,136,136,136,136,136,136,136,136,136,137,137,137,140,140,140,140,140,140,140,140,142,142,142,142,143,143,143,143,143,
143,143,143,144,144,144,149,149,149,149,149,149,149,153,153,153,153,153,153,155,155,155,155,159,159,159,159,159,159,159,159,159,161,161,161,161,162,162,163,164,165,166,167,168,169,170,170,174,174,174,174,174,174,174,174,174,174,174,177,177,177,177,177,178,178,178,178,178,178,181,181,181,181,181,181,183,183,183,183,184,184,184,185,185,186,186,186,186,186,186,186,186,187,187,187,187,187,187,189,189,189,189,189,189,189,189,189,189,189,190,190,190,190,190,190,191,191,191,193,193,193,193,193,193,193,193,
193,193,193,193,193,193,193,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,195,195,195,195,195,196,196,196,196,196,196,196,198,198,198,198,198,198,200,200,201,202,203,204,205,206,207,208,209,210,211,212,213,215,215,215,215,216,216,216,216,216,217,217,217,217,217,217,218,218,219,219,219,219,220,220,220,222,222,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,247,247,247,247,247,249,249,249,249,249,249,250,250,251,
252,253,254,255,256,257,258,259,260,262,262,262,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,268,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,276,279,279,279,279,279,279,279,279,279,
279,279,279,279,279,279,279,279,279,279,279,279,279,279,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,285,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,288,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,294,296,296,296,296,296,296,296,
296,296,296,296,296,296,296,296,296,296,296,296,296,296,296,297,297,297,297,297,297,297,301,301,301,301,301,302,302,302,302,302,302,303,303,303,305,305,305,305,306,306,306,307,308,309,310,311,312,313,314,316,316,316,316,316,316,316,317,317,317,317,318,318,319,320,321,321,321,321,321,321,321,321,321,324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,326,326,326,326,326,326,326,326,326,326,326,326,326,326,326,326,326,326,327,327,327,327,327,327,327,330,330,330,330,330,
330,330,330,330,330,332,332,332,332,332,332,333,333,333,334,334,334,335,336,337,338,339,340,340,340,340,340,340,340,340,340,340],output_mode:"html"}}});
jQuery&&jQuery(window).trigger("acre.template.register",{pkgid:"//5b.appeditor.site.tags.svn.freebase-site.googlecode.dev/dialogs",source:{def:function(){var e=function(){var b=this.tpackage,j=this.exports,a=b._template_fragments,o=b.runtime.new_markuplist(),q=0;o[q++]=a[0];var l=function(r){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[1];var s=b.runtime.uniqueid("onclick");mjt._eventcb[s]=function(){ui.do_choose_app(r)};f[g++]=a[2];f[g++]=b.runtime.make_attr_safe(s);f[g++]=a[3];return f};l=b.runtime.tfunc_factory("files_dirty(new_app)",
l,b,undefined,false);j.files_dirty=l;l.source_microdata=null;o[q++]=a[4];l=function(r){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[5];f[g++]=b.runtime.make_attr_safe(ui.url_for("logo-acre.png"));f[g++]=a[6];if(r){f[g++]=a[7];f[g++]=b.runtime.make_attr_safe(ui.get_store().get_freebase_url());f[g++]=a[8];f[g++]=b.runtime.make_attr_safe(ui.get_store().get_freebase_url());f[g++]=a[9];r=b.runtime.uniqueid("onclick");mjt._eventcb[r]=function(){ui.do_show("new_app")};f[g++]=a[10];f[g++]=b.runtime.make_attr_safe(r);
f[g++]=a[11];r=b.runtime.uniqueid("onclick");mjt._eventcb[r]=function(){ui.do_show_menu("yourapps")};f[g++]=a[12];f[g++]=b.runtime.make_attr_safe(r);f[g++]=a[13]}else{f[g++]=a[14];f[g++]=b.runtime.make_attr_safe($("#nav-signin").attr("href"));f[g++]=a[15];f[g++]=b.runtime.make_attr_safe(ui.get_store().get_freebase_url());f[g++]=a[16];f[g++]=b.runtime.make_attr_safe(ui.get_store().get_freebase_url());f[g++]=a[17]}f[g++]=a[18];return f};l=b.runtime.tfunc_factory("welcome(is_user)",l,b,undefined,false);
j.welcome=l;l.source_microdata=null;o[q++]=a[19];l=function(r){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[20];var s=r?ui.get_app().get_display_name()+" copy":"",d=r?ui.get_app().get_name()+"-copy":"";f[g++]=a[21];var c=r?{}:{checked:"checked"};"id"in c||(f[g++]=a[22]);"name"in c||(f[g++]=a[23]);"type"in c||(f[g++]=a[24]);"value"in c||(f[g++]=a[25]);for(var n in c){f[g++]=" "+n;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+c[n]);f[g++]=b.runtime.bless('"')}f[g++]=a[26];c=r?{checked:"checked"}:
{};"id"in c||(f[g++]=a[27]);"name"in c||(f[g++]=a[28]);"type"in c||(f[g++]=a[29]);"value"in c||(f[g++]=a[30]);for(var h in c){f[g++]=" "+h;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+c[h]);f[g++]=b.runtime.bless('"')}f[g++]=a[31];h=r?{}:{style:"display:none"};"id"in h||(f[g++]=a[32]);for(var i in h){f[g++]=" "+i;f[g++]=b.runtime.bless('="');f[g++]=b.runtime.htmlencode(""+h[i]);f[g++]=b.runtime.bless('"')}f[g++]=a[33];f[g++]=b.runtime.make_attr_safe(r?ui.get_app().get_versioned_path():
"");f[g++]=a[34];f[g++]=b.runtime.make_attr_safe(s);f[g++]=a[35];f[g++]=b.runtime.make_attr_safe(d);f[g++]=a[36];f[g++]=ui.get_user().get_new_app_host();f[g++]=a[37];f[g++]=b.runtime.make_attr_safe(ui.url_for("cc-bsd.png"));f[g++]=a[38];b.runtime.ondomready(function(){$("#new-app-dialog-name").focus().select();$("#dialog-new_app input[name='new-app']").change(function(){$("#new-app-clone-field").toggle()});$("#new-app-clone-id").suggest({type:"/freebase/apps/acre_app"}).bind("fb-select",function(m,
p){$(this).val(ui.id_to_path(p.id))});$("#button-new-app").click(function(){var m=[ui.get_user().get_new_app_path($.trim($("#new-app-dialog-key").val())),$.trim($("#new-app-dialog-name").val())],p=$("#dialog-new_app input[name='new-app']:checked").val(),t=$("#new-app-clone-id").val();p=="clone"&&t!==""&&m.push(t);ui.do_app_create_new.apply(this,m)})},this);f[g++]=a[39];return f};l=b.runtime.tfunc_factory("new_app(clone)",l,b,undefined,false);j.new_app=l;l.source_microdata=null;o[q++]=a[40];l=function(){var r=
b.runtime.new_markuplist(),f=0;r[f++]=a[41];r[f++]=ui.get_app().get_display_name();r[f++]=a[42];var g=b.runtime.uniqueid("onclick");mjt._eventcb[g]=function(){ui.do_app_delete()};r[f++]=a[43];r[f++]=b.runtime.make_attr_safe(g);r[f++]=a[44];return r};l=b.runtime.tfunc_factory("delete_app()",l,b,undefined,false);j.delete_app=l;l.source_microdata=null;o[q++]=a[45];l=function(){var r=b.runtime.new_markuplist(),f=0;r[f++]=a[46];var g=function(s){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[47];ui.app_keys=
{};$.each(s,function(){ui.app_keys[this.appid]=this.files});d[c++]=a[48];d[c++]=b.runtime.make_attr_safe(ui.get_file().get_name());d[c++]=a[49];b.runtime.foreach(this,s,function(n,h){for(var i=1;i;){d[c++]=a[50];var m=ui.get_app().get_path()==h.path?{selected:true}:{};if(!("value"in m)){d[c++]=a[51];d[c++]=b.runtime.make_attr_safe(h.path);d[c++]=a[52]}for(var p in m){d[c++]=" "+p;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+m[p]);d[c++]=b.runtime.bless('"')}d[c++]=a[53];d[c++]=h.name;
d[c++]=a[54];i--}return i?b.runtime._break_token:b.runtime._continue_token});d[c++]=a[55];b.runtime.ondomready(function(){$("#clone-filename").focus().select();$("#button-clone").click(function(){var n=$.trim($("#clone-filename").val()),h=$.trim($("#clone-file-app :selected").val());if($.inArray(n,ui.app_keys[h])==-1){ui.do_file_save_as(h,n);ui.do_hide_overlays()}else ui.MessagePanel.error("File exists!  Try a different file name.")})},this);d[c++]=a[56];return d};g=b.runtime.tfunc_factory("save_file_applist(applist)",
g,b,undefined,false);g.source_microdata=null;r[f++]=a[57];b.runtime.ondomready(function(){ui.get_store().XhrGet("list_user_apps",{include_filenames:true}).enqueue().onready(function(s){$("#applist").acre(g(s))})},this);r[f++]=a[58];return r};l=b.runtime.tfunc_factory("save_file_as()",l,b,undefined,false);j.save_file_as=l;l.source_microdata=null;o[q++]=a[59];l=function(){var r=b.runtime.new_markuplist(),f=0;r[f++]=a[60];var g=ui.get_app().get_untitled_file_name();r[f++]=a[61];var s=function(d){var c=
b.runtime.new_markuplist(),n=0;c[n++]=a[62];var h=ui.get_store().get_supported_mime_types(d);c[n++]=a[63];c[n++]=b.runtime.make_attr_safe(g);c[n++]=a[64];if(h.length>1&&d!="binary"){c[n++]=a[65];b.runtime.foreach(this,h,function(i,m){for(var p=1;p;){c[n++]=a[66];var t=m=="text/plain"?{selected:""}:{};if(!("value"in t)){c[n++]=a[67];c[n++]=b.runtime.make_attr_safe(m);c[n++]=a[68]}for(var u in t){c[n++]=" "+u;c[n++]=b.runtime.bless('="');c[n++]=b.runtime.htmlencode(""+t[u]);c[n++]=b.runtime.bless('"')}c[n++]=
a[69];c[n++]=m;c[n++]=a[70];p--}return p?b.runtime._break_token:b.runtime._continue_token});c[n++]=a[71]}c[n++]=a[72];b.runtime.ondomready(function(){$("#add-file-name").select().keydown(function(i){i.which==13&&$("#button-add-file").click()});ui.watch_inputs(null,{inputs:{"add-file-name":null},change:function(i){g=i["add-file-name"]}})},this);c[n++]=a[73];return c};s=b.runtime.tfunc_factory("show_handler(handler)",s,b,undefined,false);s.source_microdata=null;r[f++]=a[74];b.runtime.foreach(this,ui.get_store().get_acre_handlers(),
function(d,c){for(var n=1;n;){r[f++]=a[75];r[f++]=b.runtime.make_attr_safe(c.key);r[f++]=a[76];r[f++]=b.runtime.make_attr_safe(c.key);r[f++]=a[77];r[f++]=c.name;r[f++]=a[78];r[f++]=c.description;r[f++]=a[79];n--}return n?b.runtime._break_token:b.runtime._continue_token});r[f++]=a[80];b.runtime.ondomready(function(){ui.watch_inputs("add-file",{inputs:{"new-file-handler":null},change:function(d){d=d["new-file-handler"];$(".handler-new").empty();$("#handler-"+d+" .handler-new").acre(s(d));$(".handler-section-active").removeClass("handler-section-active");
$("#handler-"+d).addClass("handler-section-active")},submit:function(d){var c=$.trim($("#add-file-name").val());if(ui.get_store().validate_filename(c)){d={acre_handler:d["new-file-handler"]};if($("#add-file-mimetype :selected").val())d.content_type=$("#add-file-mimetype :selected").val();ui.do_file_create_new(c,d);ui.do_hide_overlays()}else ui.MessagePanel.error("Invalid filename.  Only alphanumeric characters, '-', '_' and '.' are allowed.")}});$("input[name='new-file-handler'][value='mjt']").attr("checked",
"checked").trigger("click")},this);r[f++]=a[81];return r};l=b.runtime.tfunc_factory("add_file()",l,b,undefined,false);j.add_file=l;l.source_microdata=null;o[q++]=a[82];l=function(r){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[83];f[g++]=r;f[g++]=a[84];f[g++]=r;f[g++]=a[85];var s=b.runtime.uniqueid("onclick");mjt._eventcb[s]=function(){ui.do_file_delete(r)};f[g++]=a[86];f[g++]=b.runtime.make_attr_safe(s);f[g++]=a[87];return f};l=b.runtime.tfunc_factory("delete_file(filename)",l,b,undefined,false);
j.delete_file=l;l.source_microdata=null;o[q++]=a[88];l=function(r,f){var g=b.runtime.new_markuplist(),s=0;g[s++]=a[89];var d=function(z,x){var v=b.runtime.new_markuplist(),B=0;v[B++]=a[90];if(this.subst_id)v[B++]=b.runtime.bless(' id="'+this.subst_id+'"');v[B++]=a[91];var I=z[0]||{},G=false,K=false,J=false;if(I.revision)if(I.file)K=true;else J=true;else G=true;I=ui.get_file().get_based_on();v[B++]=a[92];if(J&&I){v[B++]=a[93];v[B++]=ui.get_file().get_name();v[B++]=a[94];v[B++]=b.runtime.make_attr_safe(ui.get_store().get_url());
v[B++]=a[95];v[B++]=b.runtime.make_attr_safe(I.id);v[B++]=a[96];v[B++]=I.id;v[B++]=a[97]}v[B++]=a[98];if(G)v[B++]=a[99];v[B++]=a[100];if(K)v[B++]=a[101];v[B++]=a[102];if(J)v[B++]=a[103];v[B++]=a[104];if(K||J)v[B++]=a[105];v[B++]=a[106];if(G)v[B++]=a[107];v[B++]=a[108];if(K)v[B++]=a[109];v[B++]=a[110];if(J)v[B++]=a[111];v[B++]=a[112];if(K||J)v[B++]=a[113];v[B++]=a[114];b.runtime.foreach(this,z,function(H,D){for(var L=1;L;){v[B++]=a[115];var N;if(G)N=D.as_of_time;if(K||J)N=D.timestamp;v[B++]=a[116];
v[B++]=b.runtime.make_attr_safe(N);v[B++]=a[117];v[B++]=b.runtime.make_attr_safe(N);v[B++]=a[118];if(G){v[B++]=a[119];v[B++]=D.name;v[B++]=a[120]}v[B++]=a[121];if(K){v[B++]=a[122];v[B++]=mjt.freebase.mqlkey_unquote(D.file);v[B++]=a[123]}v[B++]=a[124];v[B++]=mjt.freebase.date_from_iso(D.as_of_time||D.timestamp).toLocaleString();v[B++]=a[125];if(J){v[B++]=a[126];v[B++]=D.length;v[B++]=a[127]}v[B++]=a[128];if(K||J){v[B++]=a[129];v[B++]=D.attribution.name;v[B++]=a[130]}v[B++]=a[131];L--}return L?b.runtime._break_token:
b.runtime._continue_token});v[B++]=a[132];b.runtime.ondomready(function(){function H(){$("input[name='diff-from'], input[name='diff-to']").removeAttr("disabled");var D=$("input[name='diff-to']").index($("input[name='diff-to']:checked")[0]),L=$("input[name='diff-from']").index($("input[name='diff-from']:checked")[0]);$("input[name='diff-to']").slice(0,L+1).attr("disabled","disabled");$("input[name='diff-from']").slice(D).attr("disabled","disabled")}$("#dialog-diff_patch input, .show-revision, .revert-revision, .diff-button").unbind("click");
H();$("input[name='diff-from'], input[name='diff-to']").click(function(){$(".button-patch").attr("disabled","disabled");var D={timestamp1:$("input[name='diff-to']:checked").val(),timestamp2:$("input[name='diff-from']:checked").val()};if(G||K){$("#diff-filelist-shim").acre(n(true));$("#diff-view-shim").acre(i());D.appid1=x;D.appid2=x;ui.get_store().XhrGet("get_app_diff",D).enqueue().onready(function(L){$("#diff-filelist-shim").acre(n(L))})}if(J){D.fileid1=x;D.fileid2=x;ui.get_store().XhrGet("get_file_diff",
D).enqueue().onready(function(L){$("#diff-view-shim").acre(i(L,"get_file_diff"));$("#button-file-revert, #button-file-revert-save").removeAttr("disabled").unbind("click");$("#button-file-revert").click(function(){ui.do_file_apply_change(L)});$("#button-file-revert-save").click(function(){ui.do_file_apply_change(L,true)})})}H()})},this);v[B++]=a[133];return v};d=b.runtime.tfunc_factory("revision_list(history, id)",d,b,undefined,false);d.source_microdata=null;g[s++]=a[134];var c=function(z){var x=b.runtime.new_markuplist(),
v=0;x[v++]=a[135];x[v++]=n(z);x[v++]=a[136];return x};c=b.runtime.tfunc_factory("filelist_shim(patch)",c,b,undefined,false);c.source_microdata=null;g[s++]=a[137];var n=function(z){var x=b.runtime.new_markuplist(),v=0;x[v++]=a[138];if(z&&z.files){x[v++]=a[139];ui.get_app().get_path();var B=[];if($.isArray(z.files))B=z.files;else for(key in z.files)B.push(key);B.sort(function(K,J){return K.localeCompare(J)});x[v++]=a[140];var I=function(K,J){var H=b.runtime.new_markuplist(),D=0;H[D++]=a[141];if(J){H[D++]=
a[142];if(r!=="app_diff"){H[D++]=a[143];var L=J==="update"?{checked:"checked"}:{};"type"in L||(H[D++]=a[144]);for(var N in L){H[D++]=" "+N;H[D++]=b.runtime.bless('="');H[D++]=b.runtime.htmlencode(""+L[N]);H[D++]=b.runtime.bless('"')}H[D++]=a[145]}H[D++]=a[146];L=r==="app_diff"?{"class":"diff-filelist-stub"}:{};"href"in L||(H[D++]=a[147]);for(var M in L){H[D++]=" "+M;H[D++]=b.runtime.bless('="');H[D++]=b.runtime.htmlencode(""+L[M]);H[D++]=b.runtime.bless('"')}H[D++]=a[148];H[D++]=mjt.freebase.mqlkey_unquote(K);
H[D++]=a[149]}else{H[D++]=a[150];H[D++]=mjt.freebase.mqlkey_unquote(K);H[D++]=a[151]}H[D++]=a[152];switch(J){case "add":H[D++]=a[153];break;case "delete":H[D++]=a[154];break;case "conflict":H[D++]=a[155];break;case "update":H[D++]=a[156];break}H[D++]=a[157];return H};I=b.runtime.tfunc_factory("diff_file(fn, status)",I,b,undefined,false);I.source_microdata=null;x[v++]=a[158];var G=b.runtime.uniqueid("onclick");mjt._eventcb[G]=function(){$("#diff-filelist input").attr("checked","checked")};x[v++]=a[159];
x[v++]=b.runtime.make_attr_safe(G);x[v++]=a[160];G=b.runtime.uniqueid("onclick");mjt._eventcb[G]=function(){$("#diff-filelist input").removeAttr("checked")};x[v++]=a[161];x[v++]=b.runtime.make_attr_safe(G);x[v++]=a[162];b.runtime.foreach(this,B,function(K,J){for(var H=1;H;){x[v++]=a[163];x[v++]=b.runtime.make_attr_safe(J);x[v++]=a[164];x[v++]=mjt.freebase.mqlkey_unquote(J);x[v++]=a[165];H--}return H?b.runtime._break_token:b.runtime._continue_token});x[v++]=a[166];b.runtime.ondomready(function(){var K=
$("#diff-filelist .file-list-item").length;$("#diff-filelist .file-list-item").each(function(){function J(M,O,P){$(H).acre(I(D,M)).click(function(){$("#diff-filelist .file-list-item").removeClass("selected-file");$(H).addClass("selected-file");$("#diff-view-shim").acre(O.apply(this,P))});K-=1;if(K===0){$(".button-patch").removeAttr("disabled");$("#diff-filelist .file-list-item input").click(function(Q){Q.stopPropagation()})}}var H=$(this),D=$(H).attr("data-fn"),L,N={};switch(r){case "app_history":case "app_diff":L=
"get_file_diff";N={fileid1:z.files[D].file1?z.files[D].file1.fileid:undefined,fileid2:z.files[D].file2?z.files[D].file2.fileid:undefined,timestamp1:z.app1?z.app1.timestamp:undefined,timestamp2:z.app2?z.app2.timestamp:undefined};break;case "merge_changes":L="get_file_merge";N={fileid1:z.files[D].file1?z.files[D].file1.fileid:undefined,fileid2:z.files[D].file2?z.files[D].file2.fileid:undefined};break}ui.get_store().XhrGet(L,N).enqueue().onready(function(M){z.files[D]=M;status=M.file1?M.file2?M.patch&&
M.patch.conflict==true?"conflict":"update":"add":"delete";J(status,i,[z.files[D],L])}).onerror(function(M,O,P){J(false,m,[O,P])})})},this);x[v++]=a[167]}else if(z)x[v++]=a[168];else x[v++]=a[169];x[v++]=a[170];b.runtime.ondomready(function(){$(".patch-apply, .patch-apply-save").unbind("click");$(".patch-apply, .patch-apply-save").click(function(){var K=[];$("#diff-filelist input:checked").each(function(){var J=$(this).closest(".file-list-item").attr("data-fn");K.push(J)});ui.do_app_apply_changes(z,
K,$(this).hasClass("patch-apply-save"))})},this);x[v++]=a[171];return x};n=b.runtime.tfunc_factory("filelist(patch)",n,b,undefined,false);n.source_microdata=null;g[s++]=a[172];var h=function(z){var x=b.runtime.new_markuplist(),v=0;x[v++]=a[173];x[v++]=i(z);x[v++]=a[174];return x};h=b.runtime.tfunc_factory("diff_view_shim(diff)",h,b,undefined,false);h.source_microdata=null;g[s++]=a[175];var i=function(z,x){var v=b.runtime.new_markuplist(),B=0;v[B++]=a[176];if(z){v[B++]=a[177];b.runtime.ondomready(function(){ui.populate_diff($("#diff-view"),
z,x)},this);v[B++]=a[178]}else v[B++]=a[179];v[B++]=a[180];return v};i=b.runtime.tfunc_factory("diff_view(data, method)",i,b,undefined,false);i.source_microdata=null;g[s++]=a[181];var m=function(z){var x=b.runtime.new_markuplist(),v=0;x[v++]=a[182];x[v++]=z;x[v++]=a[183];return x};m=b.runtime.tfunc_factory("merge_error(msg, info)",m,b,undefined,false);m.source_microdata=null;g[s++]=a[184];var p=function(){var z=b.runtime.new_markuplist(),x=0;z[x++]=a[185];var v=function(){var B=b.runtime.new_markuplist(),
I=0;B[I++]=a[186];B[I++]=c();B[I++]=a[187];B[I++]=h();B[I++]=a[188];return B};v=b.runtime.tfunc_factory("history_diff()",v,b,undefined,false);v.source_microdata=null;z[x++]=a[189];if(w)z[x++]=a[190];z[x++]=a[191];if(w)z[x++]=a[192];z[x++]=a[193];b.runtime.ondomready(function(){function B(I){$("#revision-list-shim").empty().addClass("loader-square");(I=="versions"?mjt.Succeed(ui.get_app().get_versions()):ui.get_app().t_get_history()).enqueue().onready(function(G){$("#revision-list-shim").removeClass("loader-square").acre(d(G.history||
G,ui.get_app().get_path()));$("#history-diff").acre(v());$(".button-patch").attr("disabled","disabled")})}$('input[name="app-history"]').change(function(){B($(this).val())});B("versions")},this);z[x++]=a[194];return z};p=b.runtime.tfunc_factory("app_history(t)",p,b,undefined,false);p.source_microdata=null;g[s++]=a[195];var t=function(z){var x=b.runtime.new_markuplist(),v=0;x[v++]=a[196];x[v++]=c(z);x[v++]=a[197];x[v++]=h();x[v++]=a[198];return x};t=b.runtime.tfunc_factory("app_diff(diff)",t,b,undefined,
false);t.source_microdata=null;g[s++]=a[199];var u=function(z){var x=b.runtime.new_markuplist(),v=0;x[v++]=a[200];x[v++]=d(z.history,z.fileid);x[v++]=a[201];x[v++]=h();x[v++]=a[202];if(w)x[v++]=a[203];x[v++]=a[204];if(w)x[v++]=a[205];x[v++]=a[206];return x};u=b.runtime.tfunc_factory("file_history(t)",u,b,undefined,false);u.source_microdata=null;g[s++]=a[207];var y=function(z){var x=b.runtime.new_markuplist(),v=0;x[v++]=a[208];x[v++]=c(z);x[v++]=a[209];x[v++]=h();x[v++]=a[210];if(w)x[v++]=a[211];x[v++]=
a[212];if(w)x[v++]=a[213];x[v++]=a[214];return x};y=b.runtime.tfunc_factory("merge_changes(patch)",y,b,undefined,false);y.source_microdata=null;g[s++]=a[215];var C=function(z){var x=b.runtime.new_markuplist(),v=0;x[v++]=a[216];z.labels=["Saved Copy","Your Local Version"];x[v++]=a[217];x[v++]=i(z,"get_file_diff");x[v++]=a[218];z=b.runtime.uniqueid("onclick");mjt._eventcb[z]=function(){ui.do_file_save(true)};x[v++]=a[219];x[v++]=b.runtime.make_attr_safe(z);x[v++]=a[220];return x};C=b.runtime.tfunc_factory("save_conflict(diff)",
C,b,undefined,false);C.source_microdata=null;g[s++]=a[221];var w=ui.get_app().is_writable(),A,E,F;switch(r){case "app_history":A="App History";E=mjt.Succeed(ui.get_app().get_versions());F=p;break;case "app_diff":p=ui.get_app().get_versions()[0];A="View changes since version "+p.name;E=ui.get_store().XhrGet("get_app_diff",{appid1:ui.get_app().get_path(),appid2:ui.get_app().get_path(),timestamp2:p.as_of_time});F=t;break;case "file_history":A="File History";E=ui.get_file().t_get_history();F=u;break;
case "merge_changes":A="View changes from "+f.appid;E=ui.get_store().XhrGet("get_app_diff",{appid1:f.appid,appid2:ui.get_app().get_path()});F=y;break;case "save_conflict":A="File Save Conflict";E=mjt.Succeed(f);F=C;break}g[s++]=a[222];g[s++]=A;g[s++]=a[223];b.runtime.ondomready(function(){E.enqueue().onready(function(z){$("#diff-dialog").acre(F(z))})},this);g[s++]=a[224];return g};l=b.runtime.tfunc_factory("diff_patch(mode, opts)",l,b,undefined,false);j.diff_patch=l;l.source_microdata=null;o[q++]=
a[225];l=function(){var r=b.runtime.new_markuplist(),f=0;r[f++]=a[226];b.runtime.foreach(this,ui.shortcut.get_shortcuts(),function(g,s){for(var d=1;d;){r[f++]=a[227];r[f++]=mjt.bless(ui.shortcut.get_keys(s.op));r[f++]=a[228];r[f++]=s.op;r[f++]=a[229];d--}return d?b.runtime._break_token:b.runtime._continue_token});r[f++]=a[230];return r};l=b.runtime.tfunc_factory("keyboard_shortcuts()",l,b,undefined,false);j.keyboard_shortcuts=l;l.source_microdata=null;o[q++]=a[231];l=function(){var r=b.runtime.new_markuplist(),
f=0;r[f++]=a[232];r[f++]=b.runtime.make_attr_safe(ui.url_for("license.html"));r[f++]=a[233];r[f++]=fb.acre.appeditor.version;r[f++]=a[234];r[f++]=ui.get_store().get_acre_version();r[f++]=a[235];return r};l=b.runtime.tfunc_factory("about_appeditor()",l,b,undefined,false);j.about_appeditor=l;l.source_microdata=null;o[q++]=a[236];l=function(r){var f=b.runtime.new_markuplist(),g=0;f[g++]=a[237];var s=b.runtime.uniqueid("onclick");mjt._eventcb[s]=function(){ui.do_hide_overlays()};f[g++]=a[238];f[g++]=
b.runtime.make_attr_safe(r);f[g++]=a[239];f[g++]=b.runtime.make_attr_safe(s);f[g++]=a[240];f[g++]=b.runtime.make_attr_safe(r);f[g++]=a[241];return f};l=b.runtime.tfunc_factory("documentation(url)",l,b,undefined,false);j.documentation=l;l.source_microdata=null;o[q++]=a[242];return o};e.source_microdata=null;return e}(),info:{file:"//5b.appeditor.site.tags.svn.freebase-site.googlecode.dev/dialogs",stringtable:["\n\n<!-- Dirty files dialog --\>",'\n  <h3 class="dialog-title">Abandon Changes?</h3>\n  <div class="dialog-content">\n    <div class="dialog-inset">\n      <p>You haven\'t saved all the changes you made to the app you currently have open. <b>Abandon these changes?</b></p>\n    </div>\n  </div>\n  <div class="button-bar">\n    <button class="button-primary exit">No</button>',
'\n    <button class="exit" onclick="return mjt._eventcb.','.apply(this, [event])">\n      Yes, abandon changes and switch apps</button>\n  </div>',"\n\n\n<!-- New user dialog --\>",'\n  <div id="welcome-panel">\n    <div class="acre-logo">\n      <img alt="Acre: Open Code for Open Data" border="0" height="47" width="211" src="','">\n    </div>\n    <div>','\n      <ul>\n        <li><em>See what you can build!</em><br>\n          <small>Check out <a class="exit" href="','/apps" target="_new">the App Directory</a> or <a class="exit" href="',
'/docs/acre" target="_new">the documentation</a>.</small>\n        </li>\n        <li><em>Ready to go?</em><br>\n          <small></small>','<button id="button-newapp" onclick="return mjt._eventcb.','.apply(this, [event])"><small>Create a New App</small></button> ','<button id="button-yourapps" onclick="return mjt._eventcb.','.apply(this, [event])">\n            <span class="button-menu">Choose from Your Apps</span></button>\n        </li>\n      </ul>','\n      <ul>  \n        <li><em>Create your own Acre app</em><br>\n          <small><a href="',
'" title="Sign in to your Freebase account">Sign in or Sign Up</a>\n          for Freebase to get started.</small>\n        </li>\n        <li><em>See what you can build!</em><br>\n          <small>Check out <a class="exit" href="','/apps" target="_new">the App Directory</a> or <a class="exit" href="','/docs/acre" target="_new">the documentation</a>.</small>\n        </li>\n      </ul>',"\n    </div>\n  </div>","\n\n\n<!-- App action dialogs --\>","",'\n  <h3 class="dialog-title">Create New App</h3>\n  <div class="dialog-content">\n    <fieldset>\n      <div class="dialog-inset">\n        <div class="dialog-inset-header">\n          <input',
' id="new-app-create"',' name="new-app"',' type="radio"',' value="create"','>\n          <label for="new-app-create">Create a new app</label>\n          <input',' id="new-app-clone"',' name="new-app"',' type="radio"',' value="clone"','>\n          <label for="new-app-clone">Clone an existing app</label>\n          <span',' id="new-app-clone-field"','>: \n            <input class="longfield" id="new-app-clone-id" type="text" value="','">\n          </span>\n        </div>\n        <div class="form-row">\n          <label for="new-app-dialog-name">Name your App: </label>\n          <input id="new-app-dialog-name" maxlength="50" type="text" value="',
'">\n        </div>\n        <div class="form-row wide">\n          <label for="new-app-dialog-key">Choose a URL: </label>      \n          <span class="url">http://<input class="shortfield" id="new-app-dialog-key" maxlength="20" minlength="5" size="15" type="text" value="','">.','</span>\n        </div>\n        <div class="form-tip">      \n          This URL points to the development version of your code.\n          Later you can choose a shorter Release URL to share with others.\n        </div>\n      </div>\n    </fieldset>\n\n    <div class="cc-callout">\n      <a class="cc-logo" href="http://creativecommons.org/licenses/BSD/"><img alt="CC-BSD" src="',
'"></a>\n      <div class="cc-about">\n        All Acre apps are published on Freebase under the\n        <a href="http://creativecommons.org/licenses/BSD/">BSD license</a>\n        so everyone can "view source", clone code, and learn from each other.\n      </div>\n    </div>\n  </div>\n\n  <div class="button-bar">\n    <button class="button-primary exit" id="button-new-app">Create</button>\n    <button class="exit">Cancel</button>\n  </div>',"","",'\n  <h3 class="dialog-title">Delete app \u201c',
'\u201d?</h3>\n  <div class="dialog-content">\n    <div class="dialog-inset">\n      <p>\n        Are you sure you want to <b>delete this entire app</b>?\n      </p>\n      <p>\n        This can\'t be undone!\n      </p>\n    </div>\n  </div>\n  <div class="button-bar">','\n    <button class="button-primary exit" onclick="return mjt._eventcb.','.apply(this, [event])">Delete App</button>\n    <button class="exit">Cancel</button>\n  </div>',"  \n\n\n<!-- File action dialogs --\>",'\n  <h3 class="dialog-title">Save File As</h3>\n  <div class="dialog-content" id="applist">\n    <span class="loader-square"></span>\n  </div>',
"",'\n    <div class="dialog-inset">\n      <fieldset>\n        <div class="form-row">\n          <label for="clone-filename">New file name: </label>\n          <input id="clone-filename" type="text" value="','">\n        </div>\n        <div class="form-row">\n          <label for="clone-file-app">In app: </label>\n          <select id="clone-file-app">',"\n            <option",' value="','"',">\n              ","\n            </option>",'\n          </select>\n        </div>\n      </fieldset>\n    </div>\n    <div class="button-bar">\n      <button class="button-primary" id="button-clone">Save</button>\n      <button class="exit">Cancel</button>\n    </div>',
"","","","","",'\n  <h3 class="dialog-title">Create a New...</h3>',"",'\n  \n    <div class="form-row">\n      <label for="add-file-name">New file name:</label>\n      <input id="add-file-name" type="text" value="','">\n    </div>','\n  \n    <div>\n      <div class="form-row">\n        <label for="add-file-mimetype">MIME type: </label>\n        <select id="add-file-mimetype">',"\n          <option",' value="','"',">\n            ","</option>","\n        </select>\n      </div>\n    </div>","","",
'\n  \n  <div class="dialog-content">\n    <div class="dialog-inset">\n      <fieldset>\n        <ul>','\n          <li class="handler-section" id="handler-','">\n            <h4><input name="new-file-handler" type="radio" value="','"> ',"</h4>\n            <p>",'</p>\n            <div class="handler-new"></div>\n          </li>','\n        </ul>\n      </fieldset>\n    </div>\n  </div>\n  <div class="button-bar">\n    <button class="button-primary" id="button-add-file">Create New File</button>\n    <button class="exit">Cancel</button>\n  </div>',
"","",'\n  <h3 class="dialog-title">Delete file \u201c','\u201d?</h3>\n  <div class="dialog-content">\n  <div class="dialog-inset">\n    <p>\n      Are you sure you want to delete the file \u201c<b>','</b>\u201d?\n    </p>\n    <p>\n      This can\'t be undone!\n    </p>\n  </div>\n  </div>\n  <div class="button-bar">','\n    <button class="button-primary exit" onclick="return mjt._eventcb.','.apply(this, [event])">Delete File</button>\n    <button class="exit">Cancel</button>\n  </div>',"  \n  \n\n<!-- Diff/Patch dialogs --\>",
"","<div",'>\n    <div class="revision-list">',"","\n      <p>\n        <b>",'</b> is based on:\n        <a class="external-link" href="',"/view",'" target="_blank">',"</a>\n      </p>",'              \n      <table class="item-list">\n        <thead>\n          <tr>\n            <th>Compare</th>','\n            <th class="left">Version</th>',"",'\n            <th class="left">File</th>','\n            <th class="left">Date</th>',"\n            <th>Length</th>","",'\n            <th class="left">By</th>',
'\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td class="center">\n              <span>\n                <input checked="checked" name="diff-from" type="radio" value=""> |\n                <input checked="checked" name="diff-to" type="radio" value="">\n              </span>\n            </td>\n            <td><b><i>Current</i></b></td>',"\n            <td></td>","","\n            <td></td>","","\n            <td></td>","","\n            <td></td>","\n          </tr>",
'\n          <tr>\n            <td class="center">\n              <span>','\n                <input name="diff-from" type="radio" value="','"> |\n                <input name="diff-to" type="radio" value="','">\n              </span>\n            </td>',"\n            <td>","</td>","","\n            <td>","</td>",'\n            <td>\n              <span class="last_mod">\n                ',"\n              </span>\n            </td>",'\n            <td class="center">',"</td>","","\n            <td>",
"</td>","\n          </tr>","\n        </tbody>\n      </table>\n    </div>","\n  </div>","\n      \n  <!-- Used when the filelist needs to be dynamically updated --\>",'<div id="diff-filelist-shim">\n    ',"\n  </div>","",'<div id="diff-filelist">',"","","","\n        <span>","\n          <input",' type="checkbox"',">","\n          <a",' href="#0"',">\n            ","</a>\n        </span>",'\n        <span class="diff-filelist-stub">\n          <i>',"</i>\n        </span>","",'<span class="file-merge-status">+</span>',
'<span class="file-merge-status">-</span>','<span class="file-merge-status error-alert">!</span>','<span class="file-merge-status"></span>',"","\n      <p>\n        Select: ",'<a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">All</a> | ','\n        <a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">None</a>\n      </p>\n      <ul>','\n        <li class="file-list-item" data-fn="','">\n          <span class="diff-filelist-stub">',"</span>\n        </li>","\n      </ul>",
"",'\n    <span class="loader-square"></span>',"\n    <p>Pick revisions above to see changed files</p>","","\n  </div>","\n\n  <!-- Used when the diff view needs to be dynamically updated --\>",'<div id="diff-view-shim">\n    ',"\n  </div>","",'<div class="diff" id="diff-view">',"","","\n    <p>Click on a file or revision to see the changes.</p>","\n  </div>","",'<div id="diff-error-view">\n    <div class="message">',"</div>\n  </div>","\n      \n  <!-- Main content for each mode --\>    ",'\n    <div class="dialog-content">\n      <fieldset id="apphistory-mode">\n        <div class="radiogroup">\n          <h5>\n            <input checked="checked" name="app-history" type="radio" value="versions">\n            Versions\n          </h5>\n        </div>\n        <div class="radiogroup">\n          <h5>\n            <input name="app-history" type="radio" value="all-changes">\n            Edits\n          </h5>\n        </div>\n      </fieldset>\n      <div class="diff-top">\n        <div id="revision-list-shim"></div>\n      </div>\n      <div class="diff-bottom-short" id="history-diff"></div>',
"\n        ",'\n        <div class="diff-area-files">',"</div>",'\n    </div>\n    <div class="button-bar">','\n      <button class="button-patch patch-apply button-primary exit" disabled="disabled">Revert to Right</button>',"        ",'\n      <button class="button-patch patch-apply-save exit" disabled="disabled">Revert &amp; Save</button>','\n      <button class="exit">Done</button>\n    </div>',"","",'\n    <div class="dialog-content">\n      <div class="diff-bottom-tall">\n        ','\n        <div class="diff-area-files">',
'</div>\n      </div>\n    </div>\n    <div class="button-bar">\n      <button class="exit">Done</button>\n    </div>',"",'\n    <div class="dialog-content">\n      <div class="diff-top">\n        ','\n      </div>\n      <div class="diff-bottom-short">\n        <div class="diff-area-full diff-area-short">','</div>\n      </div>\n    </div>\n    <div class="button-bar">','\n      <button class="button-primary exit" disabled="disabled" id="button-file-revert">Revert to Right</button>',"",'\n      <button class="exit" disabled="disabled" id="button-file-revert-save">Revert &amp; Save</button>',
'        <button class="exit">Done</button>\n    </div>',"",'\n    <div class="dialog-content">\n      <div class="diff-bottom-tall">\n        ','\n        <div class="diff-area-files">','</div>\n      </div>\n    </div>\n    <div class="button-bar">','\n      <button class="button-patch patch-apply button-primary exit" disabled="disabled">Apply Selected Changes</button>',"",'\n      <button class="button-patch patch-apply-save exit" disabled="disabled">Apply &amp; Save</button>','\n      <button class="exit">Done</button>\n    </div>',
"","",'\n    <div class="dialog-content">\n      <div class="diff-top">\n        <p>\n          The saved version of this file has changed since it was loaded, likely because \n          it was edited by another user or by you in another browser or tab.  \n        </p>\n        <p>\n          Decide how to proceed or view the details of the conflict.\n        </p>\n      </div>\n      <div class="diff-bottom-short">\n        <div class="diff-area-full">','</div>\n      </div>\n    </div>\n    <div class="button-bar">',
'\n      <button class="button exit" onclick="return mjt._eventcb.','.apply(this, [event])">Save Anyway</button>\n      <button class="button-primary exit">Cancel</button>\n    </div>',"\n   \n  <!-- Setup the dialog for all modes --\>",'\n  \n  <h3 class="dialog-title">','</h3>\n  <div id="diff-dialog">\n    <span class="loader-square"></span>\n  </div>',"","\n\n\n<!-- Help dialogs --\>",'\n  <h3 class="dialog-title">App Editor Keyboard Shortcuts</h3>\n  <div class="dialog-content">\n    <div class="dialog-inset">\n      <table>',
"\n        <tr>\n          <th>","</th>\n          <td>","</td>\n        </tr>","\n      </table>\n    </div>\n  </div>","",'\n  <h3 class="dialog-title">About App Editor</h3>\n  <iframe class="dialog-content" id="dialog-aboutappeditor" src="','"></iframe>\n  <div class="button-bar">\n    <b>Version: </b>\n    <span>',"</span>\n    <span>- ","</span>\n  </div>","","",'\n  <a class="doc-view-link" href="','" target="_blank" onclick="return mjt._eventcb.','.apply(this, [event])">Open in a new window</a>\n  <iframe class="dialog-content" src="',
'"></iframe>',""],debug_locs:[1,1,1,1,1,1,7,7,7,7,7,7,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,19,19,19,19,19,19,19,19,23,23,23,23,23,23,23,26,26,26,26,26,29,29,29,29,31,31,31,31,31,31,31,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,37,37,37,37,37,38,40,40,40,40,40,44,44,44,44,44,44,44,44,46,46,46,46,49,49,49,49,49,49,49,49,53,53,53,53,53,53,53,54,54,55,56,57,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,67,67,67,
67,67,67,67,67,67,67,67,67,67,68,68,68,73,73,73,73,73,73,73,77,77,77,77,77,77,77,77,87,87,87,87,87,87,87,87,87,87,87,87,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,127,127,127,127,127,128,128,128,128,129,129,129,141,141,141,141,141,141,141,141,141,141,141,141,141,141,141,141,141,141,144,144,144,144,144,144,144,144,148,148,148,148,148,148,148,154,154,154,154,154,154,154,154,155,
155,156,157,158,159,160,165,165,165,165,165,165,165,171,171,171,171,171,171,171,171,171,171,171,171,171,171,171,171,171,171,171,171,171,171,172,172,172,173,173,173,173,173,173,182,182,182,182,182,182,182,182,182,182,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,198,198,198,198,199,199,199,200,201,202,203,204,205,206,207,208,208,208,208,208,208,209,209,209,209,210,210,211,212,215,215,215,215,215,216,216,217,218,222,222,222,222,222,222,225,225,225,230,230,230,230,230,230,230,230,
230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,231,231,231,231,231,231,231,231,234,234,234,234,234,236,236,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,253,253,253,253,258,258,258,258,258,258,258,258,258,258,258,258,259,259,259,259,259,260,260,260,262,262,262,262,262,262,262,272,272,272,272,272,272,272,272,272,272,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,304,304,304,304,
304,305,305,305,305,306,306,306,310,310,310,310,310,310,318,318,318,318,318,318,318,318,318,318,318,318,318,318,321,321,321,321,321,321,321,321,326,326,326,326,326,326,326,328,328,328,328,328,328,330,330,330,331,332,333,334,335,336,337,338,339,339,340,340,340,340,341,341,341,341,341,341,341,342,342,342,347,347,347,347,347,347,347,347,347,348,348,348,348,348,350,350,350,350,350,350,351,351,351,351,351,363,363,363,363,363,363,363,363,363,363,363,363,363,363,363,363,364,364,364,364,364,365,365,365,365,
365,366,366,366,366,366,368,368,368,368,368,371,371,371,371,371,372,373,374,375,376,376,376,377,377,377,380,380,380,380,380,380,380,380,380,381,381,381,381,381,381,381,384,384,384,384,384,387,387,387,387,387,387,387,387,387,388,388,388,388,388,388,388,389,389,389,389,389,389,393,393,393,393,393,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,
445,446,446,446,446,446,446,448,448,448,448,448,448,449,449,449,450,450,450,450,450,450,452,452,452,452,453,453,454,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,468,468,468,469,469,470,470,470,470,470,470,470,470,470,470,470,470,470,470,470,470,470,471,471,471,471,471,471,471,471,471,471,471,471,472,472,472,473,473,473,474,475,475,475,475,476,476,476,477,477,477,478,478,478,479,479,479,480,480,480,481,481,481,482,482,482,482,482,485,485,485,485,485,485,485,485,486,486,486,486,486,486,
486,489,489,489,489,489,489,489,489,489,490,490,490,491,491,491,491,491,491,493,493,493,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,556,556,556,556,556,557,557,557,557,558,558,558,559,560,561,562,563,564,565,566,567,568,569,570,570,570,570,570,570,572,572,572,572,572,572,573,573,573,574,574,
574,574,574,574,576,576,576,576,577,577,578,578,578,579,580,581,582,582,582,582,582,582,583,583,583,583,583,583,585,585,585,585,586,586,586,587,587,587,587,587,587,590,590,590,590,590,590,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,610,611,611,611,612,612,612,613,613,613,613,613,616,616,616,616,616,616,616,617,617,617,617,617,620,620,620,620,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,640,640,640,640,641,641,641,641,
644,644,644,644,644,645,645,645,651,651,651,651,651,651,651,651,651,651,653,653,653,653,656,656,656,656,656,659,659,659,659,659,663,663,663,663,663,663,663,663,664,664,664,664,664,666,666,666,666,666,666,668,668,668,668,671,671,671,671,671,672,672,672,676,676,676,676,676,676,676,676,677,677,677,677,677,680,680,680,680,680,680,680,682,682,682,682,683,683,684,685,697,697,697,697,697,697,697,697,697,697,697,697,697,697,701,701,701,701,701,701,701,701,701,701,704,704,704,704,704,704,704,707,707,707,707,
708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,740,740,740,740,744,744,744,744,744,744,745,746,747,748,749,751,751,751,751,751,751,754,754,754,754,754,754,754,759,759,759,759,759,759,759,759,760,760,760,760,761,761,761,762,762,762,762,762,762,766,766,766,766,766,766,766,766,766,768,768,768,768,770,770,770,770,773,773,773,773,773,774,774,774,776,776,776,776,776,776,776,778,778,778,778,779,779,779,779,779,779,779,779,779,780,
780,780,781,781,781,781,781,781,782,782,782,782],output_mode:"html"}}});
jQuery&&jQuery(window).trigger("acre.template.register",{pkgid:"//5b.appeditor.site.tags.svn.freebase-site.googlecode.dev/menus",source:{def:function(){var e=function(){var b=this.tpackage,j=this.exports,a=b._template_fragments,o=b.runtime.new_markuplist(),q=0;o[q++]=a[0];var l=function(d){var c=b.runtime.new_markuplist(),n=0;c[n++]=a[1];var h=ui.get_user(),i=ui.get_recents("apps"),m=Math.min(i.length,10);c[n++]=a[2];if(h){h=b.runtime.uniqueid("onclick");mjt._eventcb[h]=function(){ui.do_show_dialog("new_app")};
c[n++]=a[3];c[n++]=b.runtime.make_attr_safe(h);c[n++]=a[4]}c[n++]=a[5];h=b.runtime.uniqueid("onclick");mjt._eventcb[h]=function(){ui.do_acre_home_link("/apps")};c[n++]=a[6];c[n++]=b.runtime.make_attr_safe(h);c[n++]=a[7];if(ui.get_user()){c[n++]=a[8];c[n++]=b.runtime.make_attr_safe(ui.url_for("loader-tinyorange.gif"));c[n++]=a[9]}else{c[n++]=a[10];c[n++]=b.runtime.make_attr_safe($("#nav-signin").attr("href"));c[n++]=a[11]}c[n++]=a[12];if(m>0){c[n++]=a[13];for(h=0;h<m;h++){c[n++]=a[14];var p=i[h],t=
p.path.match(/\.dev\.([a-z0-9\.\-]*)\.$/);t=t?t[1]:null;c[n++]=a[15];c[n++]=b.runtime.make_attr_safe(p.path);c[n++]=a[16];c[n++]=b.runtime.make_attr_safe(ui.get_appeditor_url(p.path));c[n++]=a[17];c[n++]=b.runtime.make_attr_safe(p.path);c[n++]=a[18];c[n++]=p.name;c[n++]=a[19];if(t){c[n++]=a[20];c[n++]=t;c[n++]=a[21]}c[n++]=a[22]}c[n++]=a[23]}else c[n++]=a[24];c[n++]=a[25];b.runtime.ondomready(function(){ui.do_setup_submenu("your-apps-menu-item","yourapps");d&&$("#your-apps-menu-item").trigger("mouseenter")},
this);c[n++]=a[26];return c};l=b.runtime.tfunc_factory("apps(auto_open)",l,b,undefined,false);j.apps=l;l.source_microdata=null;o[q++]=a[27];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[28];var n=ui.get_store().get_user_apps();ui.get_store().t_refresh_user_apps();d[c++]=a[29];if(n.length===0)d[c++]=a[30];else{d[c++]=a[31];b.runtime.foreach(this,n,function(h,i){for(var m=1;m;){d[c++]=a[32];d[c++]=b.runtime.make_attr_safe(i.path);d[c++]=a[33];d[c++]=b.runtime.make_attr_safe(ui.get_appeditor_url(i.path));
d[c++]=a[34];d[c++]=b.runtime.make_attr_safe(i.path);d[c++]=a[35];d[c++]=i.name;d[c++]=a[36];m--}return m?b.runtime._break_token:b.runtime._continue_token});d[c++]=a[37]}d[c++]=a[38];b.runtime.ondomready(function(){var h=$("#menu-yourapps"),i=Math.min(h.height(),$(window).height()-h.offset().top-25);h.height(i).css("visibility","visible");$("#your-apps-loader").hide()},this);d[c++]=a[39];return d};l=b.runtime.tfunc_factory("yourapps()",l,b,undefined,false);j.yourapps=l;l.source_microdata=null;o[q++]=
a[40];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[41];var n=ui.get_app(),h=ui.get_file();ui.get_user();n=n?n.is_writable():false;d[c++]=a[42];if(n){d[c++]=a[43];d[c++]=b.runtime.make_attr_safe(ui.get_file().get_name());d[c++]=a[44];if(n)d[c++]=a[45];d[c++]=a[46]}d[c++]=a[47];if(n){d[c++]=a[48];var i=function(){var w=b.runtime.new_markuplist(),A=0;w[A++]=a[49];if(this.subst_id)w[A++]=b.runtime.bless(' id="'+this.subst_id+'"');w[A++]=a[50];var E=ui.get_store().get_acre_handlers(),F=[];
for(var z in E)$.inArray(h.get_mime_type(),ui.get_store().get_supported_mime_types(z))!=-1&&F.push(E[z]);E=ui.get_store().get_supported_mime_types(h.get_acre_handler());w[A++]=a[51];z=F.length>1?{}:{disabled:"disabled"};"id"in z||(w[A++]=a[52]);for(var x in z){w[A++]=" "+x;w[A++]=b.runtime.bless('="');w[A++]=b.runtime.htmlencode(""+z[x]);w[A++]=b.runtime.bless('"')}w[A++]=a[53];b.runtime.foreach(this,F,function(B,I){for(var G=1;G;){w[A++]=a[54];var K=I.key===h.get_acre_handler()?{selected:""}:{};
if(!("value"in K)){w[A++]=a[55];w[A++]=b.runtime.make_attr_safe(I.key);w[A++]=a[56]}for(var J in K){w[A++]=" "+J;w[A++]=b.runtime.bless('="');w[A++]=b.runtime.htmlencode(""+K[J]);w[A++]=b.runtime.bless('"')}w[A++]=a[57];w[A++]=I.name;w[A++]=a[58];G--}return G?b.runtime._break_token:b.runtime._continue_token});w[A++]=a[59];F=!h.get_editor_supported_features("mimetype_change")||E.length<2?{}:{};"id"in F||(w[A++]=a[60]);for(var v in F){w[A++]=" "+v;w[A++]=b.runtime.bless('="');w[A++]=b.runtime.htmlencode(""+
F[v]);w[A++]=b.runtime.bless('"')}w[A++]=a[61];b.runtime.foreach(this,E,function(B,I){for(var G=1;G;){w[A++]=a[62];var K=I===h.get_mime_type()?{selected:""}:{};if(!("value"in K)){w[A++]=a[63];w[A++]=b.runtime.make_attr_safe(I);w[A++]=a[64]}for(var J in K){w[A++]=" "+J;w[A++]=b.runtime.bless('="');w[A++]=b.runtime.htmlencode(""+K[J]);w[A++]=b.runtime.bless('"')}w[A++]=a[65];w[A++]=I;w[A++]=a[66];G--}return G?b.runtime._break_token:b.runtime._continue_token});w[A++]=a[67];b.runtime.ondomready(function(){$("#file-handler").change(function(){ui.do_file_set_acre_handler($(":selected",
this).val());$("#metadata-section").acre(i())});$("#file-mimetype").change(function(){ui.do_file_set_mime_type($(":selected",this).val());$("#metadata-section").acre(i())})},this);w[A++]=a[68];return w};i=b.runtime.tfunc_factory("metadata_section()",i,b,undefined,false);i.source_microdata=null;d[c++]=a[69];d[c++]=i();d[c++]=a[70]}else{d[c++]=a[71];d[c++]=h.get_acre_handler();d[c++]=a[72];d[c++]=h.get_mime_type();d[c++]=a[73]}d[c++]=a[74];var m=b.runtime.uniqueid("onclick");mjt._eventcb[m]=function(){ui.do_file_check()};
d[c++]=a[75];var p=ui.get_file_check_options().useful===1?{}:{disabled:"disabled"};if(!("title"in p)){d[c++]=a[76];d[c++]=b.runtime.make_attr_safe(mjt.bless(ui.shortcut.get_keys("Check Syntax")));d[c++]=a[77]}if(!("onclick"in p)){d[c++]=a[78];d[c++]=b.runtime.make_attr_safe(m);d[c++]=a[79]}for(var t in p){d[c++]=" "+t;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+p[t]);d[c++]=b.runtime.bless('"')}d[c++]=a[80];if(n){t=b.runtime.uniqueid("onclick");mjt._eventcb[t]=function(){ui.do_file_revert_to_saved()};
d[c++]=a[81];m=!h.is_dirty()?{disabled:"disabled"}:{};"class"in m||(d[c++]=a[82]);if(!("onclick"in m)){d[c++]=a[83];d[c++]=b.runtime.make_attr_safe(t);d[c++]=a[84]}for(var u in m){d[c++]=" "+u;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+m[u]);d[c++]=b.runtime.bless('"')}d[c++]=a[85]}d[c++]=a[86];u=b.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){ui.do_show_dialog("diff_patch",["file_history",ui.get_file().get_name()])};d[c++]=a[87];d[c++]=b.runtime.make_attr_safe(u);d[c++]=
a[88];u=b.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){ui.do_show_dialog("save_file_as")};d[c++]=a[89];t=ui.get_user()?{}:{disabled:"disabled"};if(!("onclick"in t)){d[c++]=a[90];d[c++]=b.runtime.make_attr_safe(u);d[c++]=a[91]}for(var y in t){d[c++]=" "+y;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+t[y]);d[c++]=b.runtime.bless('"')}d[c++]=a[92];y=b.runtime.uniqueid("onclick");mjt._eventcb[y]=function(){ui.do_show_dialog("delete_file",[ui.get_file().get_name()])};d[c++]=a[93];
n=n?{}:{disabled:"disabled"};if(!("onclick"in n)){d[c++]=a[94];d[c++]=b.runtime.make_attr_safe(y);d[c++]=a[95]}for(var C in n){d[c++]=" "+C;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+n[C]);d[c++]=b.runtime.bless('"')}d[c++]=a[96];b.runtime.ondomready(function(){ui.watch_inputs("name",{inputs:{"file-name":ui.get_file().get_name()},change:function(w){return w["file-name"]!==""?w:false},submit:function(w){ui.do_file_move(w["file-name"])}})},this);d[c++]=a[97];return d};l=b.runtime.tfunc_factory("fileactions()",
l,b,undefined,false);j.fileactions=l;l.source_microdata=null;o[q++]=a[98];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[99];var n=false;ui.get_store();var h=ui.get_app(),i=ui.get_file();ui.get_user()&&h.is_writable();d[c++]=a[100];if(i.get_editor_supported_features("hotswap")){d[c++]=a[101];n=true;d[c++]=a[102];b.runtime.foreach(this,EDITORS,function(E,F){for(var z=1;z;){if(F.supports.hotswap){d[c++]=a[103];var x=ui.get_editor_prefs("texteditor")===E?{checked:"checked"}:{};if(!("id"in
x)){d[c++]=a[104];d[c++]=b.runtime.make_attr_safe(E);d[c++]=a[105]}"name"in x||(d[c++]=a[106]);"type"in x||(d[c++]=a[107]);if(!("value"in x)){d[c++]=a[108];d[c++]=b.runtime.make_attr_safe(E);d[c++]=a[109]}for(var v in x){d[c++]=" "+v;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+x[v]);d[c++]=b.runtime.bless('"')}d[c++]=a[110];d[c++]=b.runtime.make_attr_safe(E);d[c++]=a[111];d[c++]=F.name;d[c++]=a[112]}z--}return z?b.runtime._break_token:b.runtime._continue_token});d[c++]=a[113]}d[c++]=
a[114];if(i.get_editor_supported_features("margin")){d[c++]=a[115];n=true;d[c++]=a[116];h=ui.get_editor_prefs("margin")?{checked:"checked"}:{};"id"in h||(d[c++]=a[117]);"name"in h||(d[c++]=a[118]);"type"in h||(d[c++]=a[119]);"value"in h||(d[c++]=a[120]);for(var m in h){d[c++]=" "+m;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+h[m]);d[c++]=b.runtime.bless('"')}d[c++]=a[121];m=ui.get_editor_prefs("margin")?{}:{checked:"checked"};"id"in m||(d[c++]=a[122]);"name"in m||(d[c++]=a[123]);"type"in
m||(d[c++]=a[124]);"value"in m||(d[c++]=a[125]);for(var p in m){d[c++]=" "+p;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+m[p]);d[c++]=b.runtime.bless('"')}d[c++]=a[126]}d[c++]=a[127];if(i.get_editor_supported_features("softwrap")){d[c++]=a[128];n=true;d[c++]=a[129];p=ui.get_editor_prefs("softwrap")?{checked:"checked"}:{};"id"in p||(d[c++]=a[130]);"name"in p||(d[c++]=a[131]);"type"in p||(d[c++]=a[132]);"value"in p||(d[c++]=a[133]);for(var t in p){d[c++]=" "+t;d[c++]=b.runtime.bless('="');
d[c++]=b.runtime.htmlencode(""+p[t]);d[c++]=b.runtime.bless('"')}d[c++]=a[134];t=ui.get_editor_prefs("softwrap")?{}:{checked:"checked"};"id"in t||(d[c++]=a[135]);"name"in t||(d[c++]=a[136]);"type"in t||(d[c++]=a[137]);"value"in t||(d[c++]=a[138]);for(var u in t){d[c++]=" "+u;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+t[u]);d[c++]=b.runtime.bless('"')}d[c++]=a[139]}d[c++]=a[140];if(i.get_editor_supported_features("codeassist")){d[c++]=a[141];n=true;d[c++]=a[142];u=ui.get_editor_prefs("dotTrigger")?
{checked:"checked"}:{};"id"in u||(d[c++]=a[143]);"name"in u||(d[c++]=a[144]);"type"in u||(d[c++]=a[145]);"value"in u||(d[c++]=a[146]);for(var y in u){d[c++]=" "+y;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+u[y]);d[c++]=b.runtime.bless('"')}d[c++]=a[147];y=ui.get_editor_prefs("dotTrigger")?{}:{checked:"checked"};"id"in y||(d[c++]=a[148]);"name"in y||(d[c++]=a[149]);"type"in y||(d[c++]=a[150]);"value"in y||(d[c++]=a[151]);for(var C in y){d[c++]=" "+C;d[c++]=b.runtime.bless('="');d[c++]=
b.runtime.htmlencode(""+y[C]);d[c++]=b.runtime.bless('"')}d[c++]=a[152]}d[c++]=a[153];if(i.get_editor_supported_features("emql")){d[c++]=a[154];n=true;d[c++]=a[155];i=ui.get_editor_prefs("emql")?{checked:"checked"}:{};"id"in i||(d[c++]=a[156]);"name"in i||(d[c++]=a[157]);"type"in i||(d[c++]=a[158]);"value"in i||(d[c++]=a[159]);for(var w in i){d[c++]=" "+w;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+i[w]);d[c++]=b.runtime.bless('"')}d[c++]=a[160];w=ui.get_editor_prefs("emql")?{}:{checked:"checked"};
"id"in w||(d[c++]=a[161]);"name"in w||(d[c++]=a[162]);"type"in w||(d[c++]=a[163]);"value"in w||(d[c++]=a[164]);for(var A in w){d[c++]=" "+A;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+w[A]);d[c++]=b.runtime.bless('"')}d[c++]=a[165]}d[c++]=a[166];n||(d[c++]=a[167]);d[c++]=a[168];b.runtime.ondomready(function(){$("#menu-editoroptions input[type='radio']").click(function(){var E=$(this).attr("name").split("edopt-")[1],F={};F[E]=$(this).val();ui.set_editor_prefs(F);ui.do_refresh_file();
ui.do_hide_overlays()})},this);d[c++]=a[169];return d};l=b.runtime.tfunc_factory("editoroptions()",l,b,undefined,false);j.editoroptions=l;l.source_microdata=null;o[q++]=a[170];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[171];var n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){return ui.do_show_dialog("keyboard_shortcuts")};d[c++]=a[172];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[173];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){return ui.do_show_dialog("documentation",
[ui.get_store().get_freebase_url()+"/docs/iframe/acre_api"])};d[c++]=a[174];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[175];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){return ui.do_show_dialog("documentation",[ui.get_store().get_freebase_url()+"/docs/iframe/acre_templates"])};d[c++]=a[176];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[177];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){return ui.do_show_dialog("documentation",[ui.get_store().get_freebase_url()+"/docs/iframe/js_reference"])};
d[c++]=a[178];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[179];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){return ui.do_show_dialog("documentation",[ui.get_store().get_freebase_url()+"/docs/iframe/mql"])};d[c++]=a[180];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[181];d[c++]=b.runtime.make_attr_safe(ui.get_store().get_freebase_url());d[c++]=a[182];d[c++]=b.runtime.make_attr_safe(ui.get_store().get_acre_host());d[c++]=a[183];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){return ui.do_show_dialog("about_appeditor")};
d[c++]=a[184];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[185];b.runtime.ondomready(function(){$("#help-menu-content a").click(function(){ui.do_hide_overlays()})},this);d[c++]=a[186];return d};l=b.runtime.tfunc_factory("help()",l,b,undefined,false);j.help=l;l.source_microdata=null;o[q++]=a[187];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[188];var n=ui.get_app().is_writable();d[c++]=a[189];var h=b.runtime.uniqueid("onclick");mjt._eventcb[h]=function(){ui.do_hide_overlays()};d[c++]=a[190];
d[c++]=b.runtime.make_attr_safe(h);d[c++]=a[191];if(n)d[c++]=a[192];d[c++]=a[193];if(ui.get_app().is_remote()){d[c++]=a[203];if(ui.get_user()){n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){ui.do_show_dialog("new_app",[true])};d[c++]=a[204];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[205]}d[c++]=a[206]}else{d[c++]=a[194];if(ui.get_app().is_author())d[c++]=a[195];d[c++]=a[196];if(ui.get_user()){h=b.runtime.uniqueid("onclick");mjt._eventcb[h]=function(){ui.do_show_dialog("new_app",[true])};
d[c++]=a[197];d[c++]=b.runtime.make_attr_safe(h);d[c++]=a[198]}d[c++]=a[199];if(n){n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){ui.do_show_dialog("delete_app")};d[c++]=a[200];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[201]}d[c++]=a[202]}d[c++]=a[207];n=b.runtime.uniqueid("onclick");mjt._eventcb[n]=function(){ui.do_hide_overlays()};d[c++]=a[208];d[c++]=b.runtime.make_attr_safe(n);d[c++]=a[209];b.runtime.ondomready(function(){$("#button-appsettings").addClass("button-open");$("#settings-tabs").tabs("#settings-tab-content > div",
{api:true,initialIndex:0,onBeforeClick:function(i,m){var p=$(this.getPanes()[m]).attr("id");setTimeout(function(){$("#"+p).acre(fb.acre.apps.appeditor+"/menus",p)},0)}});$("#app-general-listing").click(function(){window.open(ui.get_app().get_edit_url());return false})},this);d[c++]=a[210];return d};l=b.runtime.tfunc_factory("appsettings()",l,b,undefined,false);j.appsettings=l;l.source_microdata=null;o[q++]=a[211];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[212];if(this.subst_id)d[c++]=
b.runtime.bless(' id="'+this.subst_id+'"');d[c++]=a[213];var n=ui.get_app().is_writable();d[c++]=a[214];if(n){d[c++]=a[215];var h=b.runtime.uniqueid("onclick");mjt._eventcb[h]=function(){ui.do_app_add_version($("#add-version-key").val())};d[c++]=a[216];d[c++]=b.runtime.make_attr_safe(h);d[c++]=a[217];if(ui.get_app().get_versions().length){h=b.runtime.uniqueid("onclick");mjt._eventcb[h]=function(){ui.do_show_dialog("diff_patch",["app_diff"])};d[c++]=a[218];d[c++]=b.runtime.make_attr_safe(h);d[c++]=
a[219]}d[c++]=a[220]}d[c++]=a[221];d[c++]=f();d[c++]=a[222];var i=ui.get_app();h=i.get_name();var m=i.get_base_url().replace("http://"+h,"").replace("."+i.get_store().get_acre_host(),"");d[c++]=a[223];if(n){d[c++]=a[224];d[c++]=b.runtime.make_attr_safe(h);d[c++]=a[225];d[c++]=m;d[c++]=a[226];d[c++]=i.get_acre_host();d[c++]=a[227]}else{d[c++]=a[228];d[c++]=b.runtime.make_attr_safe(i.get_base_url());d[c++]=a[229];d[c++]=i.get_base_url();d[c++]=a[230]}d[c++]=a[231];n&&b.runtime.ondomready(function(){ui.watch_inputs("devurl",
{inputs:{devurl:i.get_name()},update_on_submit:true,submit:function(p){ui.do_app_move("//"+p.devurl+m)}})},this);d[c++]=a[232];d[c++]=r();d[c++]=a[233];return d};l=b.runtime.tfunc_factory("app_general()",l,b,undefined,false);j.app_general=l;l.source_microdata=null;o[q++]=a[234];var r=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[235];for(var n=ui.get_app(),h=n.is_writable(),i=n.get_hosts(),m=n.get_released_version()||"current",p=/([^.]*)\.freebaseapps\.com$/,t=null,u=0;u<i.length;u++){var y=
i[u];if(y.version==m)if(y=p.exec(y.host)){t=y[1];break}}d[c++]=a[236];if(h){d[c++]=a[237];d[c++]=b.runtime.make_attr_safe(t||"");d[c++]=a[238];d[c++]=n.get_acre_host();d[c++]=a[239];if(t)d[c++]=a[240];else d[c++]=a[241];d[c++]=a[242];if(t?i.length>1:i.length>0){d[c++]=a[243];b.runtime.foreach(this,i,function(C,w){for(var A=1;A;){if(w.host!==t+".freebaseapps.com"){d[c++]=a[244];d[c++]=b.runtime.make_attr_safe(w.host);d[c++]=a[245];d[c++]=w.host;d[c++]=a[246];if(w.version!=m){d[c++]=a[247];d[c++]=w.version;
d[c++]=a[248]}d[c++]=a[249]}A--}return A?b.runtime._break_token:b.runtime._continue_token});d[c++]=a[250]}d[c++]=a[251];b.runtime.ondomready(function(){ui.watch_inputs("puburl",{inputs:{puburl:$("#puburl").val()},text_delay:1E3,update_on_submit:true,change:function(C){$("#button-puburl").attr("disabled","disabled");$("#puburl-status").removeClass().html("").addClass("puburl-wait");ui.get_store().XhrGet("check_host_availability",{host:C.puburl}).enqueue().onready(function(w){$("#button-puburl").removeAttr("disabled");
$("#puburl-status").removeClass().addClass("puburl-success").html(w.message)}).onerror(function(w,A){$("#puburl-status").removeClass().addClass("puburl-fail").html(A)})},submit:function(C){$("#puburl-status").removeClass().empty();ui.do_app_set_host(C.puburl)}})},this);d[c++]=a[252]}else{d[c++]=a[253];if(t){d[c++]=a[254];if(t){d[c++]=a[255];d[c++]=b.runtime.make_attr_safe(t+"."+ui.get_app().get_acre_host());d[c++]=a[256];d[c++]=t;d[c++]=a[257];d[c++]=ui.get_app().get_acre_host();d[c++]=a[258]}d[c++]=
a[259]}d[c++]=a[260]}d[c++]=a[261];return d};r=b.runtime.tfunc_factory("app_hosts_list()",r,b,undefined,false);j.app_hosts_list=r;r.source_microdata=null;o[q++]=a[262];var f=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[263];for(var n=ui.get_app(),h=n.get_path(),i=n.is_writable(),m=n.get_released_version(),p=m?h.replace("//","//"+m+"."):h,t=n.get_versions(),u=/(\d+)/,y=1,C=0;C<t.length;C++){var w=u.exec(t[C].name);if(w&&w.length){w=parseInt(w[1],10);if(y<=w)y=w+1}}var A=true;d[c++]=a[264];
if(m||i)d[c++]=a[265];d[c++]=a[266];if(i)d[c++]=a[267];d[c++]=a[268];if(i)d[c++]=a[269];d[c++]=a[270];if(m||i){d[c++]=a[271];if(i){d[c++]=a[272];u=p==h?{checked:"checked"}:{};"name"in u||(d[c++]=a[273]);"type"in u||(d[c++]=a[274]);"value"in u||(d[c++]=a[275]);for(var E in u){d[c++]=" "+E;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+u[E]);d[c++]=b.runtime.bless('"')}d[c++]=a[276]}else{d[c++]=a[277];if(p==h)d[c++]=a[278];d[c++]=a[279]}d[c++]=a[280]}d[c++]=a[281];d[c++]=b.runtime.make_attr_safe(h);
d[c++]=a[282];d[c++]=b.runtime.make_attr_safe(ui.get_appeditor_url(h));d[c++]=a[283];if(i)d[c++]=a[284];d[c++]=a[285];d[c++]=b.runtime.make_attr_safe(n.get_base_url());d[c++]=a[286];if(i)d[c++]=a[287];d[c++]=a[288];b.runtime.foreach(this,t,function(F,z){for(var x=1;x;){d[c++]=a[289];var v=h.replace("//","//"+z.name+"."),B=n.get_base_url().replace("//","//"+z.name+"."),I=false;if(/\d+/.test(z.name)){if(A){I=true;A=false}}else I=true;d[c++]=a[290];if(m||i){d[c++]=a[291];if(i){d[c++]=a[292];var G=p!=
v?{}:{checked:"checked"};"name"in G||(d[c++]=a[293]);"type"in G||(d[c++]=a[294]);if(!("value"in G)){d[c++]=a[295];d[c++]=b.runtime.make_attr_safe(z.name);d[c++]=a[296]}for(var K in G){d[c++]=" "+K;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+G[K]);d[c++]=b.runtime.bless('"')}d[c++]=a[297]}else{d[c++]=a[298];if(p==v)d[c++]=a[299];d[c++]=a[300]}d[c++]=a[301]}d[c++]=a[302];d[c++]=b.runtime.make_attr_safe(v);d[c++]=a[303];d[c++]=b.runtime.make_attr_safe(ui.get_appeditor_url(v));d[c++]=
a[304];d[c++]=z.name;d[c++]=a[305];if(z.as_of_time){d[c++]=a[306];d[c++]=ui.get_relative_timestamp(z.as_of_time);d[c++]=a[307];if(i&&I){d[c++]=a[308];I=b.runtime.uniqueid("onclick");mjt._eventcb[I]=function(){ui.do_app_add_version(z.name,"__now__")};d[c++]=a[309];d[c++]=b.runtime.make_attr_safe(I);d[c++]=a[310]}d[c++]=a[311]}d[c++]=a[312];if(i){d[c++]=a[313];I=z.service_url=="http://www.sandbox-freebase.com"?{checked:"checked"}:{};"class"in I||(d[c++]=a[314]);if(!("key"in I)){d[c++]=a[315];d[c++]=
b.runtime.make_attr_safe(z.name);d[c++]=a[316]}"type"in I||(d[c++]=a[317]);for(var J in I){d[c++]=" "+J;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+I[J]);d[c++]=b.runtime.bless('"')}d[c++]=a[318]}d[c++]=a[319];d[c++]=b.runtime.make_attr_safe(B);d[c++]=a[320];if(i){d[c++]=a[321];if(p!=v){d[c++]=a[322];d[c++]=b.runtime.make_attr_safe(z.name);d[c++]=a[323]}d[c++]=a[324]}d[c++]=a[325];x--}return x?b.runtime._break_token:b.runtime._continue_token});d[c++]=a[326];i&&b.runtime.ondomready(function(){$("#add-version-key").val(y);
$(".remove-version-button").click(function(){$(this).parents("tr").fadeOut("slow");ui.do_app_remove_version($(this).attr("key"));return false});$("input[name='version-release']").click(function(){var F=$(this).val();ui.do_app_set_release(F);return false});$(".version-service-url").click(function(){service_url=$(this).attr("checked")?"http://www.sandbox-freebase.com":false;ui.do_app_add_version($(this).attr("key"),null,service_url)})},this);d[c++]=a[327];return d};f=b.runtime.tfunc_factory("app_versions_list()",
f,b,undefined,false);j.app_versions_list=f;f.source_microdata=null;o[q++]=a[328];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[329];if(this.subst_id)d[c++]=b.runtime.bless(' id="'+this.subst_id+'"');d[c++]=a[330];var n=ui.get_app();n.is_writable();var h=ui.id_to_path("/freebase/apps/seed");d[c++]=a[331];var i=b.runtime.uniqueid("onclick");mjt._eventcb[i]=function(){ui.do_show_dialog("diff_patch",["app_history"])};d[c++]=a[332];d[c++]=b.runtime.make_attr_safe(i);d[c++]=a[333];if(!n.get_parent()&&
!n.get_children().length||n.get_parent()&&n.get_parent().path===h)d[c++]=a[334];d[c++]=a[335];if(n.get_parent()&&n.get_parent().path!==h){d[c++]=a[336];d[c++]=b.runtime.make_attr_safe(n.get_parent().path);d[c++]=a[337];d[c++]=n.get_parent().path;d[c++]=a[338];d[c++]=b.runtime.make_attr_safe(n.get_parent().path);d[c++]=a[339]}d[c++]=a[340];if(n.get_children().length){d[c++]=a[341];b.runtime.foreach(this,n.get_children(),function(m,p){for(var t=1;t;){d[c++]=a[342];d[c++]=b.runtime.make_attr_safe(p.path);
d[c++]=a[343];d[c++]=p.path;d[c++]=a[344];d[c++]=b.runtime.make_attr_safe(p.path);d[c++]=a[345];t--}return t?b.runtime._break_token:b.runtime._continue_token});d[c++]=a[346]}d[c++]=a[347];b.runtime.ondomready(function(){$("#merge-app").suggest({type:"/freebase/apps/acre_app"}).bind("fb-select",function(m,p){var t=ui.id_to_path(p.id);$(this).val(t);$("#button-merge").removeAttr("disabled").val(t)});$(".button-get-changes").click(function(){ui.do_show_dialog("diff_patch",["merge_changes",{appid:$(this).val()}])})},
this);d[c++]=a[348];return d};l=b.runtime.tfunc_factory("app_changes()",l,b,undefined,false);j.app_changes=l;l.source_microdata=null;o[q++]=a[349];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[350];if(this.subst_id)d[c++]=b.runtime.bless(' id="'+this.subst_id+'"');d[c++]=a[351];if(ui.get_app().is_writable()){d[c++]=a[352];d[c++]=g(ui.get_app().get_authors());d[c++]=a[353];b.runtime.ondomready(function(){$("#add-author-input").suggest({type:"/type/user"}).bind("fb-select",function(n,h){$(this).val("");
ui.do_app_add_author(h.name)}).focus()},this);d[c++]=a[354]}else{d[c++]=a[355];d[c++]=g(ui.get_app().get_authors());d[c++]=a[356]}d[c++]=a[357];return d};l=b.runtime.tfunc_factory("app_authors()",l,b,undefined,false);j.app_authors=l;l.source_microdata=null;o[q++]=a[358];var g=function(d){var c=b.runtime.new_markuplist(),n=0;c[n++]=a[359];var h=function(){var i=0;for(var m in d)i++;return i==1}();c[n++]=a[360];b.runtime.foreach(this,d,function(i,m){for(var p=1;p;){c[n++]=a[361];c[n++]=b.runtime.make_attr_safe(m.get_view_url());
c[n++]=a[362];c[n++]=b.runtime.make_attr_safe(m.get_full_name()||m.get_name());c[n++]=a[363];c[n++]=b.runtime.make_attr_safe(m.get_image_url());c[n++]=a[364];c[n++]=b.runtime.make_attr_safe(m.get_view_url());c[n++]=a[365];c[n++]=b.runtime.make_attr_safe(m.get_full_name()||m.get_name());c[n++]=a[366];c[n++]=m.get_name();c[n++]=a[367];if(!h&&ui.get_app().is_writable()&&m.is_admin()){c[n++]=a[368];c[n++]=b.runtime.make_attr_safe(m.get_name());c[n++]=a[369]}c[n++]=a[370];p--}return p?b.runtime._break_token:
b.runtime._continue_token});c[n++]=a[371];b.runtime.ondomready(function(){$("#add-author-input").focus();$(".remove-user-button").click(function(){$(this).parents("tr").fadeOut("slow");ui.do_app_remove_author($(this).attr("user"));return false})},this);c[n++]=a[372];return c};g=b.runtime.tfunc_factory("app_authors_list(user_dict)",g,b,undefined,false);j.app_authors_list=g;g.source_microdata=null;o[q++]=a[373];l=function(){var d=b.runtime.new_markuplist(),c=0;d[c++]=a[374];if(this.subst_id)d[c++]=
b.runtime.bless(' id="'+this.subst_id+'"');d[c++]=a[375];var n=ui.get_app().get_write_user(),h=n&&n.get_name()==ui.get_user().get_name()?true:false,i=ui.get_app().is_oauth_enabled(),m={},p={};if(n){m.checked="checked";if(!h)m.disabled="disabled"}if(i)p.checked="checked";d[c++]=a[376];"id"in p||(d[c++]=a[377]);"type"in p||(d[c++]=a[378]);for(var t in p){d[c++]=" "+t;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+p[t]);d[c++]=b.runtime.bless('"')}d[c++]=a[379];"id"in m||(d[c++]=a[380]);
"type"in m||(d[c++]=a[381]);for(var u in m){d[c++]=" "+u;d[c++]=b.runtime.bless('="');d[c++]=b.runtime.htmlencode(""+m[u]);d[c++]=b.runtime.bless('"')}d[c++]=a[382];d[c++]=n?n.get_name():ui.get_user().get_name();d[c++]=a[383];if(window.location.protocol=="https:"){d[c++]=a[384];(n=this.tasks&&this.tasks.apikeys)||(n=this.mktask("apikeys",ui.get_app().t_get_apikeys()));d[c++]=a[385];d[c++]=a[386];switch(n.state){case "ready":d[c++]=a[387];n=n.result.keys;d[c++]=a[388];d[c++]=s(n);d[c++]=a[389];break;
case "wait":d[c++]=a[390];break;case "error":d[c++]=a[391];break}d[c++]=a[392]}else{d[c++]=a[393];d[c++]=b.runtime.make_attr_safe(window.location.host+window.location.pathname+window.location.hash);d[c++]=a[394]}d[c++]=a[395];b.runtime.ondomready(function(){$("#permission-oauth").change(function(){ui.do_app_set_oauth(!!$(this).attr("checked"))});$("#permission-writeuser").change(function(){ui.do_app_set_writeuser(!!$(this).attr("checked"))})},this);d[c++]=a[396];return d};l=b.runtime.tfunc_factory("app_services()",
l,b,true,false);j.app_services=l;l.source_microdata=null;o[q++]=a[397];var s=function(d){var c=b.runtime.new_markuplist(),n=0;c[n++]=a[398];if(d.length){c[n++]=a[399];b.runtime.foreach(this,d,function(h,i){for(var m=1;m;){c[n++]=a[400];c[n++]=i.key_id;c[n++]=a[401];c[n++]=i.token;c[n++]=a[402];c[n++]=i.secret;c[n++]=a[403];if(i.key_id!=="freebase.com"){c[n++]=a[404];c[n++]=b.runtime.make_attr_safe(i.key_id);c[n++]=a[405]}c[n++]=a[406];m--}return m?b.runtime._break_token:b.runtime._continue_token});
c[n++]=a[407]}else c[n++]=a[408];c[n++]=a[409];b.runtime.ondomready(function(){ui.watch_inputs("apikey-add",{inputs:{"apikey-name":null,"apikey-token":null,"apikey-secret":null},submit:function(h){ui.do_app_add_apikey(h["apikey-name"],h["apikey-token"],h["apikey-secret"])}});$(".remove-key-button").click(function(){$(this).parents("tr").fadeOut("slow");ui.do_app_remove_apikey($(this).attr("key"));return false})},this);c[n++]=a[410];return c};s=b.runtime.tfunc_factory("app_apikeys_list(keys)",s,b,
undefined,false);j.app_apikeys_list=s;s.source_microdata=null;return o};e.source_microdata=null;return e}(),info:{file:"//5b.appeditor.site.tags.svn.freebase-site.googlecode.dev/menus",stringtable:["\n\n<!-- Your Apps Menu --\>","","",'\n  <div class="section selectable" onclick="return mjt._eventcb.','.apply(this, [event])">\n    New App...\n  </div>',"",'\n  <div class="section selectable" onclick="return mjt._eventcb.','.apply(this, [event])">      \n    App Directory...     \n  </div>','\n  <div class="section selectable" id="your-apps-menu-item">      \n    <div id="your-apps-opener"><img id="your-apps-loader" style="display:none;" src="',
'"></div>\n    Your Apps \n  </div>','\n  <div class="section">\n    <h3>Your Apps</h3>\n    <a href="','" title="Sign in to your Freebase account">Sign in</a> to show your apps here.\n  </div>','\n\n  <div class="section last"> \n    <h3>Recent Apps</h3>',"\n    <ul>","\n      <li>",'\n        <a apppath="','" class="app-link" href="','" title="','">',"</a>","\n        <em>on ","</em>","\n      </li>","\n    </ul>","\n    <div>If you work on multiple apps, recently opened ones will appear here.</div>",
"\n  </div>","","","","",'\n    <p class="menu-message">Apps you create or clone will appear here.</p>',"\n    <ul>",'\n      <li>\n        <a apppath="','" class="app-link" href="','" title="','">\n          ',"\n        </a>\n      </li>","\n    </ul>","","","\n\n\n<!-- File Menu --\>","","",'\n  <div class="section">\n    <h3>Name</h3>\n    <fieldset class="center">\n      <label for="file-name">File name </label>\n      <input class="form-textbox" id="file-name" type="text" value="','">','\n      <button class="exit" disabled="disabled" id="button-name">Rename</button>',
"\n    </fieldset>\n  </div>","",'\n  <div class="section">\n    <h3>Type</h3>\n    <fieldset id="fieldset-metadata">',"<div",">",'\n        <div class="form-row">\n          <label for="file-handler">Acre type </label>\n          <select',' id="file-handler"',">","\n            <option",' value="','"',">\n                ","\n            </option>",'\n          </select>\n        </div>\n        <div class="form-row">\n          <label for="file-mimetype">MIME type </label>\n          <select',' id="file-mimetype"',
">","\n            <option",' value="','"',">\n              ","\n            </option>","\n          </select>\n        </div>","\n      </div>",'\n      <div id="metadata-section">',"</div>\n    </fieldset>\n  </div>",'\n  <div class="section">\n    <h3>Type</h3>\n    <fieldset id="fieldset-metadata">\n      <div class="form-row">\n        <label for="file-handler">Acre type:</label>\n        <span class="form-static">','</span>\n      </div>            \n      <div class="form-row">            \n        <label for="file-mimetype">MIME type: </label>\n        <span class="form-static">',
"</span>\n      </div>              \n    </fieldset>\n  </div>",'\n  <div class="section">\n    <h3>Validate</h3>',"\n    <button",' title="','"',' onclick="return mjt._eventcb.','.apply(this, [event])"','>\n      Check Syntax</button>\n  </div>\n  <div class="section">\n    <h3>History</h3>\n    <fieldset>',"\n      <button",' class="exit"',' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n        Revert to Saved</button>"," ",'\n      <button onclick="return mjt._eventcb.','.apply(this, [event])">\n        Review Older Versions</button>\n    </fieldset>\n  </div>\n  <div class="section last">\n    <h3>Actions</h3>',
"\n    <button",' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n      Clone this File</button>","\n    <button",' onclick="return mjt._eventcb.','.apply(this, [event])"',">\n      Delete this File</button>\n  </div>","","\n\n\n<!-- Editor Menu --\>","","",'\n  <div class="section">',"\n    <h3>Text Editor</h3>\n    <fieldset>",'\n      <div class="line">\n        <input',' id="edopt-texteditor-','"',' name="edopt-texteditor"',' type="radio"',' value="','"','>\n        <label for="edopt-texteditor-',
'">',"</label><br>\n      </div>","\n    </fieldset>\n  </div>","",'\n  <div class="section">'," \n    <h3>Line Numbers</h3>\n    <fieldset>\n      <input",' id="edopt-margin-y"',' name="edopt-margin"',' type="radio"',' value="1"','> <label for="edopt-margin-y">yes</label>\n      <input',' id="edopt-margin-n"',' name="edopt-margin"',' type="radio"',' value="0"','> <label for="edopt-margin-y">no</label>\n    </fieldset>\n  </div>',"",'\n  <div class="section">',"\n    <h3>Soft Wrap</h3>\n    <fieldset>\n      <input",
' id="edopt-softwrap-y"',' name="edopt-softwrap"',' type="radio"',' value="1"','> <label for="edopt-softwrap-y">yes</label>\n      <input',' id="edopt-softwrap-n"',' name="edopt-softwrap"',' type="radio"',' value="0"','> <label for="edopt-softwrap-n">no</label>\n    </fieldset>\n  </div>',"",'\n  <div class="section last">',"\n    <h3>Automatic Code Assist</h3>\n    <fieldset>\n      <input",' id="edopt-dotTrigger-y"',' name="edopt-dotTrigger"',' type="radio"',' value="1"','> <label for="edopt-dotTrigger-y">yes</label>\n      <input',
' id="edopt-dotTrigger-n"',' name="edopt-dotTrigger"',' type="radio"',' value="0"','> <label for="edopt-dotTrigger-n">no</label>\n    </fieldset>\n  </div>',"",'\n  <div class="section last">',"\n    <h3>Enable MQL Extensions (experimental)</h3>\n    <fieldset>\n      <input",' id="edopt-emql-y"',' name="edopt-emql"',' type="radio"',' value="1"','> <label for="edopt-emql-y">yes</label>\n      <input',' id="edopt-emql-n"',' name="edopt-emql"',' type="radio"',' value="0"','> <label for="edopt-emql-n">no</label>\n    </fieldset>\n  </div>',
"",'\n  <div>\n    <p style="margin:10px">\n      No configuration options for this file type. \n    </p>\n  </div>',"","","\n\n\n<!-- Help Menu --\>",'\n  <div id="help-menu-content">\n  <div class="section">\n    <h3>Documentation</h3>\n    <ul>\n      <li>','<a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Keyboard Shortcuts</a></li>\n      <li>','<a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Acre API Reference</a></li>\n      <li>',
'<a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Acre Template Tag Reference</a></li>\n      <li>','<a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Javascript Reference</a></li>\n      <li>','<a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">\n        MQL Reference Guide</a></li>\n      <li><a href="','/docs/" target="_new">\n        Freebase Documentation Hub</a></li>\n    </ul>\n  </div>\n  <div class="section">\n    <h3>Code Search</h3>\n    <p>\n      Not sure how to use a particular method or template tag?  See how someone else did!\n    </p>\n    <form action="http://codesearch.',
'/" id="codesearch-form" target="_blank">\n      <fieldset>\n          <input id="code-search" name="q" type="text">\n          <button id="button-codesearch">Find Code</button>\n      </fieldset>\n    </form>\n  </div>\n  <div class="section last">','\n    <a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">About App Editor</a>\n  </div>\n  </div>',"","\n\n\n<!-- App  menu --\>","","",'\n  <div class="dialog-close" onclick="return mjt._eventcb.','.apply(this, [event])"></div>\n  <div class="clear" id="app-settings-section">\n    <div id="settings-tabs">\n      <ul id="settings-tabs-bar">\n        <li class="tab"><a class="settings-tab-link" href="#app_general">Versions</a></li>\n        <li class="tab"><a class="settings-tab-link" href="#app_changes">Changes</a></li>\n        <li class="tab"><a class="settings-tab-link" href="#app_authors">Authors</a></li>',
'\n        <li class="tab"><a class="settings-tab-link" href="#app_services">Web Services</a></li>','\n      </ul>\n      <div class="tabbed-content" id="settings-tab-content">\n        <div id="app_general"></div>\n        <div id="app_changes"></div>\n        <div id="app_authors"></div>\n        <div id="app_services"></div>\n      </div>\n    </div>\n  </div>\n  <div class="button-bar">','\n    <fieldset id="app-clonedelete">','\n      <button class="button-primary" id="app-general-listing">\n        Edit Name &amp; Directory Listing</button>',
"",'\n      <button id="app-general-clone" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Clone this App</button>',"",'\n      <button id="app-general-delete" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Delete this App</button>',"\n    </fieldset>",'\n    <fieldset id="app-clonedelete">','\n      <button id="app-general-clone" onclick="return mjt._eventcb.','.apply(this, [event])">\n        Clone this App</button>',"\n    </fieldset>","",'\n    <button onclick="return mjt._eventcb.',
'.apply(this, [event])">Done</button>\n  </div>',"","",'<div class="tab-body"',">",'\n        \n    <div class="tab-section">\n      <h3>Versions</h3>\n      <div class="sidebar">\n        <p>\n          App authors can create and release new versions of their app any time.\n        </p>\n        <p>\n          <em>Current</em> is always the latest version; all edits are made to Current.  Other versions are read only.\n        </p>\n        <p>\n          <em>Release</em> is the version the app author wants people to use.  Any version can be released, but it\'s good practice to create and release a version other than Current to prevent development from impacting users. \n        </p>\n      </div>',
'\n      <fieldset id="add-version">\n        <label for="add-version-key">Create a new version: </label>\n        <input id="add-version-key" maxlength="10" type="text">','\n        <button id="button-version" onclick="return mjt._eventcb.','.apply(this, [event])">\n          Add Version</button>','\n        <button onclick="return mjt._eventcb.','.apply(this, [event])">\n          View Changes</button>',"\n      </fieldset>",'\n      <div id="app-versions-add">','</div>\n    </div>\n\n    <div class="tab-section">',
"",'\n      <div class="app-url">\n        <p>\n          Your <strong>Dev URL</strong> points to <em>Current:</em>\n        </p>\n        <fieldset>\n            http://<input class="shortfield" id="devurl" maxlength="20" minlength="5" type="text" value="','">',".",'\n          <button disabled="disabled" id="button-devurl">Change URL</button>\n        </fieldset>\n      </div>','\n      <div class="app-url">\n        <p>URL to <em>Current</em> version:</p>\n        <p><a href="','" target="current">',
"</a></p>\n      </div>","",'\n    </div>\n    <div class="tab-section last">\n      <div class="app-url">\n        ',"\n      </div>\n    </div>\n  </div>","","","",'\n      <div>\n        <p>Your <strong>Release URL</strong> points to <em>Release:</em></p>\n        <fieldset>\n          http://<input id="puburl" maxlength="20" minlength="5" type="text" value="','">.',' \n          <button disabled="disabled" id="button-puburl">',"\n            <span>Change URL</span>","\n            <span>Choose URL</span>",
'\n          </button>\n          <span id="puburl-status"></span>\n        </fieldset>','\n        <div>\n          <h4 class="list-title">Other URLs:</h4>\n          <table class="edit-list">','\n            <tr>\n              <td><a href="http://','" target="_blank">',"</a></td>\n              <td>",'<span class="version-bad">',"</span>","</td>\n            </tr>","\n          </table>\n        </div>","","\n      </div>","\n      <div>","\n        <div>\n          <p>URL to <em>Release</em> version:</p>",
'\n          <p><a href="http://','" target="release">http://',".","</a>\n          </p>","\n        </div>","\n      </div>","","","",'\n\n      <div id="app-versions-list">\n        <table class="edit-list">\n          <thead>\n            <tr>','\n              <th class="center">release</th>','\n              <th class="left">version</th>\n              <th class="left">snapshot time</th>','\n              <th class="center">run on<br>sandbox</th>',"\n              <th></th>","\n              <th></th>",
'\n            </tr>\n          </thead>\n          <tbody>\n            <tr class="version-listitem">','\n              <td class="center">',"\n                <input",' name="version-release"',' type="radio"',' value="current"',">","\n                <span>","<em>\u2713</em>","</span>","\n              </td>",'\n              <td>\n                <a apppath="','" class="app-link" href="','">Current</a>\n              </td>\n              <td></td>',"\n              <td></td>",'\n              <td><a href="',
'" target="_blank">view</a></td>',"\n              <td></td>","\n            </tr>",'\n            <tr class="version-listitem">',"",'\n              <td class="center">',"\n                <input",' name="version-release"',' type="radio"',' value="','"',">","\n                <span>","<em>\u2713</em>","</span>","\n              </td>",'\n              <td>\n                <a apppath="','" class="app-link" href="','">',"</a>\n              </td>     \n              <td>","\n                <span>\n                  ",
"","\n                  <span>\n                    [",'<a href="#0" onclick="return mjt._eventcb.','.apply(this, [event])">set to now</a>]\n                  </span>',"\n                </span>","\n              </td>",'\n              <td class="center">\n                <input',' class="version-service-url"',' key="','"',' type="checkbox"',">\n              </td>",'\n              <td><a href="','" target="_blank">view</a></td>','\n              <td class="remove">','\n                <a class="remove-version-button" href="#0" key="',
'">x</a>',"\n              </td>","\n            </tr>","\n          </tbody>\n        </table>\n      </div>","","",'<div class="tab-body"',">",'\n    <div class="tab-section">\n      <div class="sidebar">\n        <p>\n          View the changes between versions or even individual edits.\n        </p>\n        <p>\n          If you\'re an author, you can also <em>revert</em> the changes.\n        </p>\n      </div>\n      <h3>App History</h3>','\n      <button id="button-app-history" onclick="return mjt._eventcb.',
'.apply(this, [event])">\n        Diff Versions &amp; Edits</button>\n    </div>\n    <div class="tab-section">\n      <div class="sidebar">\n        <p>\n          View the changes between this app and it\'s parents or children.\n        </p>\n        <p>\n          If you\'re an author, you can also <em>merge</em> the changes.\n        </p>\n        \n      </div>\n      <h3>View Changes from Clones</h3>\n      <div id="clone-list">',"\n        <p>\n          <i>\n            This app does not have either parent or children apps.  <br>\n            Choose any app to view changes from below.\n          </i>\n        </p>",
"",'\n        <table class="edit-list">\n          <thead>\n            <tr colspan="2"><th class="left">Parent:</th></tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td class="left">\n                <a apppath="','" class="app-link" href="#0">','</a>\n              </td>\n              <td class="right">\n                <button class="button-get-changes" value="','">View Changes</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>',
"",'\n        <table class="edit-list">\n          <thead>\n            <tr colspan="2"><th class="left">Children:</th></tr>\n          </thead>\n          <tbody>','\n            <tr>\n              <td class="left">\n                <a apppath="','" class="app-link" href="#0">','</a>\n              </td>\n              <td class="right">\n                <button class="button-get-changes" value="','">View Changes</button>\n              </td>\n            </tr>',"\n          </tbody>\n        </table>",
'\n      </div>\n    </div>\n    <div class="tab-section last">\n      <div class="sidebar">\n        <p>\n          Select any app you\'d like to view changes from.\n        </p>\n      </div>\n      <h3>View Changes from any App</h3>\n      <fieldset id="add-patch">\n        <label for="merge-app">Choose app: </label>\n        <input id="merge-app" maxlength="60" type="text">\n        <button class="button-get-changes" disabled="disabled" id="button-merge">\n          View Changes</button>\n      </fieldset>\n    </div>',
"\n  </div>","",'<div class="tab-body"','>\n    <div class="tab-section last">','\n      <div>\n        <div class="sidebar">\n          <p>\n            You can add other Freebase users as <em>Authors</em>\n            to your app.  Choose authors carefully! They can edit code, release versions, \n            and delete files.\n          </p>\n        </div>\n        <h3>Add an Author</h3>\n        <fieldset class="form-indent">\n          <label for="add-author-input">Find a user to add</label>\n          <input id="add-author-input" type="text">\n        </fieldset>\n    \n        <div id="app-authors-list">\n          ',
"\n        </div>","\n      </div>",'\n      <div>\n        <h3>Authors</h3>\n        <div id="app-authors-list">\n          ',"\n        </div>\n      </div>","\n    </div>\n  </div>","","",'\n    \n      <h4 class="list-title">These authors can edit this app:</h4>\n  \n      <table class="edit-list">','\n        <tr class="user-listitem">\n          <td class="user-image-cell">\n            <div class="user-image">\n              <a href="','" target="user" title="View profile for ','">\n                <!-- dummy but valid img src --\>\n                <img alt="mugshot" src="',
'">\n              </a>\n            </div>\n          </td>\n          <td>\n            <a class="user-name" href="','" target="user" title="View profile for ','">','</a>\n          </td>\n          <td class="remove">','\n            <a class="remove-user-button" href="#0" user="','">x</a>',"\n          </td>\n        </tr>","\n      </table>","","",'<div class="tab-body"',">",'\n    <div class="tab-section">\n      <fieldset id="permissions-settings">\n        <h3>Writing to Freebase</h3>\n        <div class="radiogroup">\n          <h5>\n            <input',
' id="permission-oauth"',' type="checkbox"','>\n            Allow your users to write as themselves\n          </h5>\n          <p>\n            <small>Writes will be attributed to the user making them. Users will be asked to allow your app \n            to use their Freebase account. <strong>This is usually is the best choice</strong>.</small>\n          </p>\n        </div>\n        <div class="radiogroup">\n          <h5>\n            <input',' id="permission-writeuser"',' type="checkbox"',">\n            Allow <strong>",
'</strong> to write on behalf of any user\n          </h5>\n          <p>\n            <small>\n              Writes will all be attributed to this user. Be careful, however, as you may quickly exceed \n              Freebase\'s daily single-user write limit if you have a lot of users!<br>\n              <strong>\n                NOTE: If you\'ve also enabled your users to write, you will need to set the <em>http_sign</em>\n                option to <em>false</em> for any Freebase call you want written by this user\n              </strong>\n            </small>\n          </p>\n        </div>\n      </fieldset>\n    </div>\n    <div class="tab-section last">\n      <div class="sidebar">\n        <p>\n          <em>API keys</em> authorize information exchange with other web applications or services. Register your app with the <strong>service domain</strong> you want to use.  Each service handles this differently, so follow their instructions.  Once registered, enter the <strong>API key</strong> and <strong>secret</strong> (if required) provided by the service here.\n        </p>\n      </div>\n      <h3>Add an API Key</h3>',
"\n      <div>","","\n        <div>","<div>",'\n            <div id="app-apikeys-add">',"</div>\n          </div>",'<p><span class="loader-square hidden" id="version-loader"></span></p>',"<p>Error loading API keys.</p>","</div>\n      </div>",'\n      <div>\n        <p>\n          For your security, please <a href="https://','">switch to App Editor over SSL</a> to add or edit your API keys.\n        </p>\n      </div>',"\n    </div>","\n  </div>","",'\n      <fieldset>\n        <div class="form-row">\n          <label for="apikey-name">Service domain:</label>\n          <input id="apikey-name" type="text">\n        </div>\n        <div class="form-row">          \n          <label for="apikey-token">Key:</label>\n          <input id="apikey-token" type="text">\n        </div>\n        <div class="form-row">\n          <label for="apikey-secret">Secret:</label>\n          <input id="apikey-secret" type="text"><br>\n        </div>\n        <div class="form-row">\n          <button disabled="disabled" id="button-apikey-add">Add API Key</button>\n        </div>\n      </fieldset>',
'\n      <div id="api-key-list">\n      <h3>API Keys</h3>\n        <table class="edit-list">\n          <thead>\n            <tr class="key-listitem">\n              <th>Service Domain</th>\n              <th>Key</th>\n              <th>Secret</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>','\n            <tr class="key-listitem">\n              <td>',"</td>\n              <td>","</td>\n              <td>",'</td>\n              <td class="remove">','\n                <a class="remove-key-button" href="#0" key="',
'">x</a>',"\n              </td>\n            </tr>","\n          </tbody>\n        </table>\n      </div>",'\n      <h4 class="list-title">You haven\'t added any API keys.</h4>',"",""],debug_locs:[1,1,1,1,1,1,7,7,7,7,7,7,8,8,9,10,11,12,13,13,13,13,13,13,13,13,15,15,15,15,16,16,16,16,16,16,16,19,19,19,19,20,20,20,20,22,22,22,22,23,25,25,25,25,25,26,26,26,30,30,30,30,30,31,31,31,32,32,32,33,34,35,36,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,39,39,39,40,40,40,41,41,41,41,43,43,43,43,44,45,46,
47,48,49,50,50,50,50,50,50,51,51,51,51,52,52,53,54,55,56,57,57,57,57,57,58,59,59,59,59,59,60,60,60,60,60,60,60,60,61,61,61,63,63,63,63,63,63,63,64,64,64,65,65,65,66,67,68,69,70,71,72,73,73,73,73,73,73,76,76,76,76,76,76,76,77,77,78,79,80,81,82,83,83,87,87,87,87,87,87,87,88,88,88,88,88,90,90,90,90,91,91,94,94,94,94,94,94,94,94,94,95,95,96,97,98,99,100,101,102,103,104,105,108,108,108,108,108,108,108,108,108,108,108,108,108,108,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,111,
111,111,112,112,112,112,112,112,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,121,121,121,122,122,122,122,122,122,125,125,125,125,125,126,127,128,129,130,131,132,133,134,135,136,137,137,137,137,137,137,137,137,137,139,139,139,139,140,145,145,145,145,145,145,145,145,149,149,149,149,149,149,152,152,152,152,152,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,163,163,
163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,164,164,164,165,165,165,165,165,165,165,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,178,178,178,178,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,192,192,192,192,195,195,195,195,195,195,195,196,196,197,198,199,200,201,202,203,204,205,205,206,206,206,209,209,209,209,
209,209,209,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,211,211,211,211,211,212,212,212,212,212,212,212,214,214,214,214,215,215,216,216,216,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,222,222,222,222,223,223,224,224,224,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,228,228,228,228,228,228,228,228,228,228,228,228,
228,228,228,228,228,228,230,230,230,230,231,231,232,232,232,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,236,236,236,236,236,236,236,236,236,236,236,236,236,236,236,236,236,236,238,238,238,238,239,239,240,240,240,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,246,246,246,246,247,247,251,251,251,251,251,251,251,252,252,252,253,254,255,256,257,258,259,260,261,262,
263,263,263,263,263,263,266,266,266,266,266,266,266,271,271,271,271,271,271,271,271,271,271,271,273,273,273,273,273,273,273,273,275,275,275,275,275,275,275,275,277,277,277,277,277,277,277,277,279,279,279,279,279,279,279,279,281,281,281,281,290,290,290,290,290,290,290,290,290,290,290,298,298,298,298,298,298,298,298,298,298,298,298,298,298,301,301,301,301,301,302,303,304,305,306,307,307,307,307,307,307,310,310,310,310,310,310,310,311,311,312,313,314,314,314,314,314,314,314,321,321,321,321,321,321,321,
321,321,321,321,332,332,332,332,332,332,332,332,332,332,332,332,333,333,333,334,334,334,334,335,335,335,335,335,335,335,335,336,336,336,337,337,337,337,337,337,337,337,338,338,338,339,339,339,340,341,341,341,341,341,341,341,341,341,342,342,342,343,343,343,344,344,344,344,344,344,344,346,346,346,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,364,364,364,364,364,365,365,365,365,365,365,366,366,367,368,383,383,383,383,383,383,383,383,383,383,383,383,383,383,383,383,386,386,
386,386,386,386,386,386,386,386,389,389,389,389,389,389,389,389,389,390,390,390,391,391,391,392,392,392,396,396,396,396,396,397,398,399,400,401,401,406,406,406,406,406,406,406,406,406,406,406,406,409,409,409,409,409,410,412,412,412,412,412,412,412,413,413,413,414,414,414,414,415,416,417,418,419,420,421,422,423,424,425,425,428,428,428,428,428,428,431,431,431,431,431,431,431,431,431,433,433,433,433,434,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,453,456,456,456,456,
456,456,456,456,458,458,458,458,458,458,459,459,459,459,463,463,463,463,463,466,466,466,466,466,466,466,466,467,467,467,467,467,467,468,468,468,468,468,468,468,469,469,469,469,469,469,469,471,471,471,471,472,472,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,499,499,499,500,500,500,502,502,502,502,502,502,502,502,502,502,502,503,503,503,504,504,504,505,505,505,506,506,506,506,506,506,508,508,508,508,509,509,510,511,512,513,514,515,516,
517,518,519,520,521,522,523,524,525,526,527,528,534,534,534,534,534,534,534,534,534,534,537,537,537,537,537,537,537,539,539,539,539,539,539,544,544,544,544,544,544,545,545,545,545,545,545,545,545,545,545,545,545,545,545,545,545,545,545,545,545,545,546,546,546,546,546,546,546,546,547,547,547,549,549,549,549,549,549,552,552,552,552,552,552,552,553,553,553,554,554,554,554,554,556,556,556,556,556,557,557,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,571,573,573,573,573,573,573,573,573,573,
573,573,573,573,573,573,573,573,573,573,573,573,573,573,574,574,574,574,574,574,574,574,575,575,575,577,577,577,577,577,577,577,577,580,580,580,580,581,581,581,581,582,582,583,583,583,583,583,583,583,583,584,584,584,585,585,585,587,587,587,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,590,590,590,591,591,591,592,592,593,593,593,593,593,593,593,593,594,594,594,595,595,595,595,595,595,599,599,599,599,599,599,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,
615,616,617,618,619,619,620,620,620,620,620,620,622,622,622,622,622,622,623,623,624,625,626,627,638,638,638,638,638,638,638,638,638,638,638,638,638,638,638,638,638,653,653,653,653,653,653,653,653,653,653,653,653,653,653,653,653,658,658,658,658,658,658,658,658,659,659,666,666,666,666,666,666,666,666,666,666,666,666,669,669,669,669,669,673,673,673,673,673,673,674,674,679,679,679,679,679,679,679,679,679,681,681,681,681,681,681,681,684,684,684,684,684,686,686,686,686,686,686,686,688,688,688,688,705,705,
705,705,705,705,705,705,705,705,705,705,705,705,705,705,705,705,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,719,719,719,719,719,719,720,720,720,720,720,720,722,722,722,737,737,737,737,737,737,737,737,737,737,737,737,737,737,737,737,737,737,739,739,739,739,740,741,742,743,744,745,746,747,748,748,748,748,751,751,751,751,751,751,753,753,753,753,755,755,755,755,755,755,755,755,757,757,757,757,758,758,759,760,765,765,765,765,765,765,765,765,768,768,768,768,768,768,768,768,770,770,770,770,
775,775,775,775,775,775,775,775,775,775,775,778,778,778,778,778,778,778,778,778,780,780,780,780,780,780,780,782,782,782,782,783,784,785,786,787,788,789,790,791,791,791,791,791,791,792,792,792,792,792,792,793,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,815,815,815,815,815,815,815,815,815,815,815,815,815,815,815,815,815,815,815,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,826,826,826,848,848,848,848,848,848,848,848,848,848,848,848,
848,848,848,848,848,848,848,848,848,848,848,849,849,849,849,849,849,849,852,852,852,852,852,854,854,855,856,857,857,857,858,858,858,858,859,859,859,860,860,860,861,861,861,863,865,865,865,865,865,867,867,867,867,869,869,869,869,870,871,872,873,874,875,876,877,878,878,878,878,878,878,878,879,879,879,879,897,897,897,897,897,897,897,897,897,897,897,897,897,897,897,897,897,897,897,909,909,909,909,909,909,909,909,909,909,909,909,909,909,909,909,910,910,910,910,911,911,911,912,912,912,914,914,914,914,914,
914,914,914,916,916,916,916,916,916,916,919,919,919,919,919,920,920,920,920,921,921,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,940,940,940,940,940,940,940,940],output_mode:"html"}}});
