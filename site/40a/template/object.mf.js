
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
if(!("JSON"in window&&window.JSON)){if(!this.JSON)this.JSON={};(function(){function b(i){return i<10?"0"+i:i}function f(i){a.lastIndex=0;return a.test(i)?'"'+i.replace(a,function(j){var l=h[j];return typeof l==="string"?l:"\\u"+("0000"+j.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+i+'"'}function k(i,j){var l,m,n,r,o=c,p,q=j[i];if(q&&typeof q==="object"&&typeof q.toJSON==="function")q=q.toJSON(i);if(typeof g==="function")q=g.call(j,i,q);switch(typeof q){case "string":return f(q);case "number":return isFinite(q)?
String(q):"null";case "boolean":case "null":return String(q);case "object":if(!q)return"null";c+=d;p=[];if(Object.prototype.toString.apply(q)==="[object Array]"){r=q.length;for(l=0;l<r;l+=1)p[l]=k(l,q)||"null";n=p.length===0?"[]":c?"[\n"+c+p.join(",\n"+c)+"\n"+o+"]":"["+p.join(",")+"]";c=o;return n}if(g&&typeof g==="object"){r=g.length;for(l=0;l<r;l+=1){m=g[l];if(typeof m==="string")if(n=k(m,q))p.push(f(m)+(c?": ":":")+n)}}else for(m in q)if(Object.hasOwnProperty.call(q,m))if(n=k(m,q))p.push(f(m)+
(c?": ":":")+n);n=p.length===0?"{}":c?"{\n"+c+p.join(",\n"+c)+"\n"+o+"}":"{"+p.join(",")+"}";c=o;return n}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,d,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;if(typeof JSON.stringify!=="function")JSON.stringify=function(i,j,l){var m;d=c="";if(typeof l==="number")for(m=0;m<l;m+=1)d+=" ";else if(typeof l==="string")d=l;if((g=j)&&typeof j!=="function"&&(typeof j!=="object"||typeof j.length!=="number"))throw new Error("JSON.stringify");return k("",
{"":i})};if(typeof JSON.parse!=="function")JSON.parse=function(i,j){function l(n,r){var o,p,q=n[r];if(q&&typeof q==="object")for(o in q)if(Object.hasOwnProperty.call(q,o)){p=l(q,o);if(p!==undefined)q[o]=p;else delete q[o]}return j.call(n,r,q)}var m;i=String(i);e.lastIndex=0;if(e.test(i))i=i.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(i.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){m=eval("("+i+")");return typeof j==="function"?l({"":m},""):m}throw new SyntaxError("JSON.parse");}})()}
(function(b){b.factory=function(f,k){if(b.fn[f])throw"$.fn."+f+" plugin already exists";else if(b[f])throw"$."+f+" class already exists";b.fn[f]=function(e){return this.each(function(){var a=b(this),c=a.data("$."+f);c&&c._destroy();c=new b[f](a,e);a.data("$."+f,c)})};b[f]=function(e,a){this.options=b.extend(true,{},b[f].defaults,a);this.element=e;this.init()};b.extend(b[f].prototype,{init:function(){},_destroy:function(){}},k);return b[f]}})(jQuery);
(function(){var b={};$.extend({localstore:function(f,k,e,a){var c=document.location.hostname,d=document.location.protocol;if(typeof k!=="undefined"){var h=JSON.stringify(k);if(!e&&window.globalStorage)if(k===null)delete window.globalStorage[c][d+f];else window.globalStorage[c][d+f]=h;else if(!e&&window.localStorage&&window.localStorage.setItem)k===null?window.localStorage.removeItem(d+f):window.localStorage.setItem(d+f,h);else if(e!==false){e={};e.domain=fb.get_cookie_domain();k===null?$.cookie(f,
null,e):$.cookie(f,h,$.extend(e,a||{expires:14,path:"/"}))}else if(k===null)delete b[f];else b[f]=h;return k}else{if(!e&&window.globalStorage){if(window.globalStorage[c][d+f])k=window.globalStorage[c][d+f].value}else k=!e&&window.localStorage?window.localStorage.getItem(d+f):e!==false?$.cookie(f):b[f];if(k!=""&&k!==null&&k!==undefined)return JSON.parse(k,null)}return null}})})();
(function(b){b.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(f,k){this.defaults.type=f;this.defaults.name=k},get:function(f,k){var e=b.extend({},this.defaults,k);if(!e.single.length)e.single="metadata";var a=b.data(f,e.single);if(a)return a;a="{}";var c=function(g){if(typeof g!="string")return g;return g=eval("("+g+")")};if(e.type=="html5"){var d={};b(f.attributes).each(function(){var g=this.nodeName;if(g.match(/^data-/))g=g.replace(/^data-/,
"");else return true;d[g]=c(this.nodeValue)})}else{if(e.type=="class"){var h=e.cre.exec(f.className);if(h)a=h[1]}else if(e.type=="elem"){if(!f.getElementsByTagName)return;h=f.getElementsByTagName(e.name);if(h.length)a=b.trim(h[0].innerHTML)}else if(f.getAttribute!=undefined)if(h=f.getAttribute(e.name))a=h;d=c(a.indexOf("{")<0?"{"+a+"}":a)}b.data(f,e.single,d);return d}}});b.fn.metadata=function(f){return b.metadata.get(this[0],f)}})(jQuery);
(function(b){b(function(){if(b.tablesorter){var f=b("<div>");b.tablesorter.defaults.cssAsc="column-header-asc";b.tablesorter.defaults.cssDesc="column-header-desc";b.tablesorter.defaults.cssHeader="column-header";b.tablesorter.addParser({id:"datetime",is:function(){return false},format:function(k){f.html(k);return f.find("time:first").attr("datetime")},type:"text"});b.tablesorter.addParser({id:"ignoreCase",is:function(){return false},format:function(k){f.html(k);return f.text().toLowerCase()},type:"text"});
b.tablesorter.addParser({id:"string",is:function(){return false},format:function(k){f.html(k);return f.text()},type:"text"});b.tablesorter.addParser({id:"number",is:function(){return false},format:function(k){f.html(k);k=f.find(".number:first").attr("data-value");if(k==null)return Number.MAX_VALUE;return k},type:"numeric"});b(".table-sortable").each(function(){b(this).tablesorter()})}})})(jQuery);
(function(b,f){function k(e){return!b(e).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});b.fn.extend({_focus:b.fn.focus,focus:function(e,a){return typeof e==="number"?this.each(function(){var c=this;setTimeout(function(){b(c).focus();a&&a.call(c)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;e=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,
"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!e.length?b(document):e},zIndex:function(e){if(e!==f)return this.css("zIndex",e);if(this.length){e=b(this[0]);for(var a;e.length&&e[0]!==document;){a=e.css("position");
if(a==="absolute"||a==="relative"||a==="fixed"){a=parseInt(e.css("zIndex"),10);if(!isNaN(a)&&a!==0)return a}e=e.parent()}}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.each(["Width","Height"],function(e,a){function c(i,j,l,m){b.each(d,function(){j-=parseFloat(b.curCSS(i,"padding"+this,true))||0;if(l)j-=parseFloat(b.curCSS(i,
"border"+this+"Width",true))||0;if(m)j-=parseFloat(b.curCSS(i,"margin"+this,true))||0});return j}var d=a==="Width"?["Left","Right"]:["Top","Bottom"],h=a.toLowerCase(),g={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+a]=function(i){if(i===f)return g["inner"+a].call(this);return this.each(function(){b(this).css(h,c(this,i)+"px")})};b.fn["outer"+a]=function(i,j){if(typeof i!=="number")return g["outer"+a].call(this,i);return this.each(function(){b(this).css(h,
c(this,i,true,j)+"px")})}});b.extend(b.expr[":"],{data:function(e,a,c){return!!b.data(e,c[3])},focusable:function(e){var a=e.nodeName.toLowerCase(),c=b.attr(e,"tabindex");if("area"===a){a=e.parentNode;c=a.name;if(!e.href||!c||a.nodeName.toLowerCase()!=="map")return false;e=b("img[usemap=#"+c+"]")[0];return!!e&&k(e)}return(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"==a?e.href||!isNaN(c):!isNaN(c))&&k(e)},tabbable:function(e){var a=b.attr(e,"tabindex");return(isNaN(a)||a>=0)&&b(e).is(":focusable")}});
b(function(){var e=document.body,a=e.appendChild(a=document.createElement("div"));b.extend(a.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=a.offsetHeight===100;b.support.selectstart="onselectstart"in a;e.removeChild(a).style.display="none"});b.extend(b.ui,{plugin:{add:function(e,a,c){e=b.ui[e].prototype;for(var d in c){e.plugins[d]=e.plugins[d]||[];e.plugins[d].push([a,c[d]])}},call:function(e,a,c){if((a=e.plugins[a])&&e.element[0].parentNode)for(var d=0;d<a.length;d++)e.options[a[d][0]]&&
a[d][1].apply(e.element,c)}},contains:function(e,a){return document.compareDocumentPosition?e.compareDocumentPosition(a)&16:e!==a&&e.contains(a)},hasScroll:function(e,a){if(b(e).css("overflow")==="hidden")return false;var c=a&&a==="left"?"scrollLeft":"scrollTop",d=false;if(e[c]>0)return true;e[c]=1;d=e[c]>0;e[c]=0;return d},isOverAxis:function(e,a,c){return e>a&&e<a+c},isOver:function(e,a,c,d,h,g){return b.ui.isOverAxis(e,c,h)&&b.ui.isOverAxis(a,d,g)}})}})(jQuery);
(function(b,f){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)b(d).triggerHandler("remove");k(a)}}else{var e=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return e.call(b(this),a,c)})}}b.widget=function(a,c,d){var h=a.split(".")[0],g;a=a.split(".")[1];g=h+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][g]=function(i){return!!b.data(i,
a)};b[h]=b[h]||{};b[h][a]=function(i,j){arguments.length&&this._createWidget(i,j)};c=new c;c.options=b.extend(true,{},c.options);b[h][a].prototype=b.extend(true,c,{namespace:h,widgetName:a,widgetEventPrefix:b[h][a].prototype.widgetEventPrefix||a,widgetBaseClass:g},d);b.widget.bridge(a,b[h][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var h=typeof d==="string",g=Array.prototype.slice.call(arguments,1),i=this;d=!h&&g.length?b.extend.apply(null,[true,d].concat(g)):d;if(h&&d.charAt(0)==="_")return i;
h?this.each(function(){var j=b.data(this,a),l=j&&b.isFunction(j[d])?j[d].apply(j,g):j;if(l!==j&&l!==f){i=l;return false}}):this.each(function(){var j=b.data(this,a);j?j.option(d||{})._init():b.data(this,a,new c(d,this))});return i}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===f)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,h){c._setOption(d,h)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var h=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var g;a;){g=b.event.props[--a];c[g]=c.originalEvent[g]}}this.element.trigger(c,d);return!(b.isFunction(h)&&h.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
(function(b){b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(k){return f._mouseDown(k)}).bind("click."+this.widgetName,function(k){if(true===b.data(k.target,f.widgetName+".preventClickEvent")){b.removeData(k.target,f.widgetName+".preventClickEvent");k.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(f){f.originalEvent=
f.originalEvent||{};if(!f.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(f);this._mouseDownEvent=f;var k=this,e=f.which==1,a=typeof this.options.cancel=="string"?b(f.target).parents().add(f.target).filter(this.options.cancel).length:false;if(!e||a||!this._mouseCapture(f))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){k.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=
this._mouseStart(f)!==false;if(!this._mouseStarted){f.preventDefault();return true}}this._mouseMoveDelegate=function(c){return k._mouseMove(c)};this._mouseUpDelegate=function(c){return k._mouseUp(c)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();return f.originalEvent.mouseHandled=true}},_mouseMove:function(f){if(b.browser.msie&&!(document.documentMode>=9)&&!f.button)return this._mouseUp(f);if(this._mouseStarted){this._mouseDrag(f);
return f.preventDefault()}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,f)!==false)?this._mouseDrag(f):this._mouseUp(f);return!this._mouseStarted},_mouseUp:function(f){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;f.target==this._mouseDownEvent.target&&b.data(f.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(f)}return false},_mouseDistanceMet:function(f){return Math.max(Math.abs(this._mouseDownEvent.pageX-f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(b){b.ui=b.ui||{};var f=/left|center|right/,k=/top|center|bottom/,e=b.fn.position,a=b.fn.offset;b.fn.position=function(c){if(!c||!c.of)return e.apply(this,arguments);c=b.extend({},c);var d=b(c.of),h=d[0],g=(c.collision||"flip").split(" "),i=c.offset?c.offset.split(" "):[0,0],j,l,m;if(h.nodeType===9){j=d.width();l=d.height();m={top:0,left:0}}else if(h.setTimeout){j=d.width();l=d.height();m={top:d.scrollTop(),left:d.scrollLeft()}}else if(h.preventDefault){c.at="left top";j=l=0;m={top:c.of.pageY,
left:c.of.pageX}}else{j=d.outerWidth();l=d.outerHeight();m=d.offset()}b.each(["my","at"],function(){var n=(c[this]||"").split(" ");if(n.length===1)n=f.test(n[0])?n.concat(["center"]):k.test(n[0])?["center"].concat(n):["center","center"];n[0]=f.test(n[0])?n[0]:"center";n[1]=k.test(n[1])?n[1]:"center";c[this]=n});if(g.length===1)g[1]=g[0];i[0]=parseInt(i[0],10)||0;if(i.length===1)i[1]=i[0];i[1]=parseInt(i[1],10)||0;if(c.at[0]==="right")m.left+=j;else if(c.at[0]==="center")m.left+=j/2;if(c.at[1]==="bottom")m.top+=
l;else if(c.at[1]==="center")m.top+=l/2;m.left+=i[0];m.top+=i[1];return this.each(function(){var n=b(this),r=n.outerWidth(),o=n.outerHeight(),p=parseInt(b.curCSS(this,"marginLeft",true))||0,q=parseInt(b.curCSS(this,"marginTop",true))||0,v=r+p+(parseInt(b.curCSS(this,"marginRight",true))||0),w=o+q+(parseInt(b.curCSS(this,"marginBottom",true))||0),s=b.extend({},m),t;if(c.my[0]==="right")s.left-=r;else if(c.my[0]==="center")s.left-=r/2;if(c.my[1]==="bottom")s.top-=o;else if(c.my[1]==="center")s.top-=
o/2;s.left=Math.round(s.left);s.top=Math.round(s.top);t={left:s.left-p,top:s.top-q};b.each(["left","top"],function(u,x){b.ui.position[g[u]]&&b.ui.position[g[u]][x](s,{targetWidth:j,targetHeight:l,elemWidth:r,elemHeight:o,collisionPosition:t,collisionWidth:v,collisionHeight:w,offset:i,my:c.my,at:c.at})});b.fn.bgiframe&&n.bgiframe();n.offset(b.extend(s,{using:c.using}))})};b.ui.position={fit:{left:function(c,d){var h=b(window);h=d.collisionPosition.left+d.collisionWidth-h.width()-h.scrollLeft();c.left=
h>0?c.left-h:Math.max(c.left-d.collisionPosition.left,c.left)},top:function(c,d){var h=b(window);h=d.collisionPosition.top+d.collisionHeight-h.height()-h.scrollTop();c.top=h>0?c.top-h:Math.max(c.top-d.collisionPosition.top,c.top)}},flip:{left:function(c,d){if(d.at[0]!=="center"){var h=b(window);h=d.collisionPosition.left+d.collisionWidth-h.width()-h.scrollLeft();var g=d.my[0]==="left"?-d.elemWidth:d.my[0]==="right"?d.elemWidth:0,i=d.at[0]==="left"?d.targetWidth:-d.targetWidth,j=-2*d.offset[0];c.left+=
d.collisionPosition.left<0?g+i+j:h>0?g+i+j:0}},top:function(c,d){if(d.at[1]!=="center"){var h=b(window);h=d.collisionPosition.top+d.collisionHeight-h.height()-h.scrollTop();var g=d.my[1]==="top"?-d.elemHeight:d.my[1]==="bottom"?d.elemHeight:0,i=d.at[1]==="top"?d.targetHeight:-d.targetHeight,j=-2*d.offset[1];c.top+=d.collisionPosition.top<0?g+i+j:h>0?g+i+j:0}}}};if(!b.offset.setOffset){b.offset.setOffset=function(c,d){if(/static/.test(b.curCSS(c,"position")))c.style.position="relative";var h=b(c),
g=h.offset(),i=parseInt(b.curCSS(c,"top",true),10)||0,j=parseInt(b.curCSS(c,"left",true),10)||0;g={top:d.top-g.top+i,left:d.left-g.left+j};"using"in d?d.using.call(c,g):h.css(g)};b.fn.offset=function(c){var d=this[0];if(!d||!d.ownerDocument)return null;if(c)return this.each(function(){b.offset.setOffset(this,c)});return a.call(this)}}})(jQuery);
(function(b,f){if(!("console"in window)){var k=window.console={};k.log=k.warn=k.error=k.debug=function(){}}b(function(){var a=b("<div>");b(document.body).append(a);var c=setTimeout(function(){if(b.cleanData){var d=b.cleanData;b.cleanData=function(g){for(var i=0,j;(j=g[i])!=null;i++)b(j).triggerHandler("remove");d(g)}}else{var h=b.fn.remove;b.fn.remove=function(g,i){return this.each(function(){if(!i)if(!g||b.filter(g,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});
return h.call(b(this),g,i)})}}},1);a.bind("remove",function(){clearTimeout(c)});a.remove()});b.suggest=function(a,c){b.fn[a]=function(d){this.length||console.warn("Suggest: invoked on empty element set");return this.each(function(){if(this.nodeName)if(this.nodeName.toUpperCase()==="INPUT")this.type&&this.type.toUpperCase()!=="TEXT"&&console.warn("Suggest: unsupported INPUT type: "+this.type);else console.warn("Suggest: unsupported DOM element: "+this.nodeName);var h=b.data(this,a);h&&h._destroy();
b.data(this,a,new b.suggest[a](this,d))._init()})};b.suggest[a]=function(d,h){var g=this,i=this.options=b.extend(true,{},b.suggest.defaults,b.suggest[a].defaults,h),j=i.css_prefix=i.css_prefix||"",l=i.css;this.name=a;b.each(l,function(o){l[o]=j+l[o]});i.ac_param={};b.each(["key","filter","spell","exact","lang","scoring","prefixed","stemmed","format","mql_output"],function(o,p){var q=i[p];q===null||q===""||(i.ac_param[p]=q)});this._status={START:"",LOADING:"",SELECT:"",ERROR:""};if(i.status&&i.status instanceof
Array&&i.status.length>=3){this._status.START=i.status[0]||"";this._status.LOADING=i.status[1]||"";this._status.SELECT=i.status[2]||"";if(i.status.length===4)this._status.ERROR=i.status[3]||""}var m=this.status=b('<div style="display:none;">').addClass(l.status),n=this.list=b("<ul>").addClass(l.list),r=this.pane=b('<div style="display:none;" class="fbs-reset">').addClass(l.pane);r.append(m).append(n);if(i.parent)b(i.parent).append(r);else{r.css("position","absolute");i.zIndex&&r.css("z-index",i.zIndex);
b(document.body).append(r)}r.bind("mousedown",function(o){g.input.data("dont_hide",true);o.stopPropagation()}).bind("mouseup",function(o){g.input.data("dont_hide")&&g.input.focus();g.input.removeData("dont_hide");o.stopPropagation()}).bind("click",function(o){o.stopPropagation();if(o=g.get_selected()){g.onselect(o,true);g.hide_all()}});n.hover(function(o){g.hoverover_list(o)},function(o){g.hoverout_list(o)});this.input=b(d).attr("autocomplete","off").unbind(".suggest").bind("remove.suggest",function(){g._destroy()}).bind("keydown.suggest",
function(o){g.keydown(o)}).bind("keypress.suggest",function(o){g.keypress(o)}).bind("keyup.suggest",function(o){g.keyup(o)}).bind("blur.suggest",function(o){g.blur(o)}).bind("textchange.suggest",function(){g.textchange()}).bind("focus.suggest",function(o){g.focus(o)}).bind(b.browser.msie?"paste.suggest":"input.suggest",function(){clearTimeout(g.paste_timeout);g.paste_timeout=setTimeout(function(){g.textchange()},0)});this.onresize=function(){g.invalidate_position();if(r.is(":visible")){g.position();
if(i.flyout&&g.flyoutpane&&g.flyoutpane.is(":visible")){var o=g.get_selected();o&&g.flyout_position(o)}}};b(window).bind("resize.suggest",this.onresize).bind("scroll.suggest",this.onresize)};b.suggest[a].prototype=b.extend({},b.suggest.prototype,c)};b.suggest.prototype={_init:function(){},_destroy:function(){this.pane.remove();this.list.remove();this.input.unbind(".suggest");b(window).unbind("resize.suggest",this.onresize).unbind("scroll.suggest",this.onresize);this.input.removeData("data.suggest")},
invalidate_position:function(){self._position=null},status_start:function(){this.hide_all();this.status.siblings().hide();if(this._status.START){this.status.text(this._status.START).show();if(!this.pane.is(":visible")){this.position();this.pane_show()}}this._status.LOADING&&this.status.removeClass("loading")},status_loading:function(){this.status.siblings().show();if(this._status.LOADING){this.status.addClass("loading").text(this._status.LOADING).show();if(!this.pane.is(":visible")){this.position();
this.pane_show()}}else this.status.hide()},status_select:function(){this.status.siblings().show();this._status.SELECT?this.status.text(this._status.SELECT).show():this.status.hide();this._status.LOADING&&this.status.removeClass("loading")},status_error:function(){this.status.siblings().show();this._status.ERROR?this.status.text(this._status.ERROR).show():this.status.hide();this._status.LOADING&&this.status.removeClass("loading")},focus:function(a){this.input.val()===""?this.status_start():this.focus_hook(a)},
focus_hook:function(){if(!this.input.data("data.suggest")&&!this.pane.is(":visible")&&b("."+this.options.css.item,this.list).length){this.position();this.pane_show()}},keydown:function(a){var c=a.keyCode;if(c===9)this.tab(a);else if(c===38||c===40)a.shiftKey||a.preventDefault()},keypress:function(a){var c=a.keyCode;if(c===38||c===40)a.shiftKey||a.preventDefault();else c===13&&this.enter(a)},keyup:function(a){var c=a.keyCode;if(c===38){a.preventDefault();this.up(a)}else if(c===40){a.preventDefault();
this.down(a)}else if(a.ctrlKey&&c===77)b(".fbs-more-link",this.pane).click();else if(b.suggest.is_char(a)){clearTimeout(this.keypress.timeout);var d=this;this.keypress.timeout=setTimeout(function(){d.textchange()},0)}else c===27&&this.escape(a);return true},blur:function(){if(!this.input.data("dont_hide")){this.input.data("data.suggest");this.hide_all()}},tab:function(a){if(!(a.shiftKey||a.metaKey||a.ctrlKey)){a=this.options;a=this.pane.is(":visible")&&b("."+a.css.item,this.list).length;var c=this.get_selected();
if(a&&c){this.onselect(c);this.hide_all()}}},enter:function(a){var c=this.options;if(this.pane.is(":visible"))if(a.shiftKey){this.shift_enter(a);a.preventDefault()}else if(b("."+c.css.item,this.list).length)if(c=this.get_selected()){this.onselect(c);this.hide_all();a.preventDefault()}else{this.input.data("data.suggest");if(b("."+this.options.css.item+":visible",this.list).length){this.updown(false);a.preventDefault()}}},shift_enter:function(){},escape:function(){this.hide_all()},up:function(a){this.updown(true,
a.ctrlKey||a.shiftKey)},down:function(a){this.updown(false,null,a.ctrlKey||a.shiftKey)},updown:function(a,c,d){var h=this.options.css,g=this.list;if(this.pane.is(":visible")){var i=b("."+h.item+":visible",g);if(i.length){g=b(i[0]);i=b(i[i.length-1]);var j=this.get_selected()||[];clearTimeout(this.ignore_mouseover.timeout);this._ignore_mouseover=false;if(a)if(c)this._goto(g);else if(j.length)if(j[0]==g[0]){g.removeClass(h.selected);this.input.val(this.input.data("original.suggest"));this.hoverout_list()}else this._goto(j.prevAll("."+
h.item+":visible:first"));else this._goto(i);else if(d)this._goto(i);else if(j.length)if(j[0]==i[0]){i.removeClass(h.selected);this.input.val(this.input.data("original.suggest"));this.hoverout_list()}else this._goto(j.nextAll("."+h.item+":visible:first"));else this._goto(g)}}else a||this.textchange()},_goto:function(a){a.trigger("mouseover.suggest");var c=a.data("data.suggest");this.input.val(c?c.name:this.input.data("original.suggest"));this.scroll_to(a)},scroll_to:function(a){var c=this.list,d=
c.scrollTop(),h=d+c.innerHeight(),g=a.outerHeight();a=a.prevAll().length*g;g=a+g;if(a<d){this.ignore_mouseover();c.scrollTop(a)}else if(g>h){this.ignore_mouseover();c.scrollTop(d+g-h)}},textchange:function(){this.input.removeData("data.suggest");this.input.trigger("fb-textchange",this);var a=this.input.val();if(a==="")this.status_start();else{this.status_loading();this.request(a)}},request:function(){},response:function(a){if(a){"cost"in a&&this.trackEvent(this.name,"response","cost",a.cost);if(this.check_response(a)){var c=
[];if(b.isArray(a))c=a;else if("result"in a)c=a.result;var d=b.map(arguments,function(l){return l});this.response_hook.apply(this,d);var h=null,g=this,i=this.options;b.each(c,function(l,m){if(!m.id&&m.mid)m.id=m.mid;var n=g.create_item(m,a).bind("mouseover.suggest",function(r){g.mouseover_item(r)});n.data("data.suggest",m);g.list.append(n);if(l===0)h=n});this.input.data("original.suggest",this.input.val());if(b("."+i.css.item,this.list).length===0&&i.nomatch){c=b('<li class="fbs-nomatch">');if(typeof i.nomatch===
"string")c.text(i.nomatch);else{i.nomatch.title&&c.append(b('<em class="fbs-nomatch-text">').text(i.nomatch.title));i.nomatch.heading&&c.append(b("<h3>").text(i.nomatch.heading));if((i=i.nomatch.tips)&&i.length){var j=b('<ul class="fbs-search-tips">');b.each(i,function(l,m){j.append(b("<li>").text(m))});c.append(j)}}c.bind("click.suggest",function(l){l.stopPropagation()});this.list.append(c)}d.push(h);this.show_hook.apply(this,d);this.position();this.pane_show()}}},pane_show:function(){var a=false;
if(b("> li",this.list).length)a=true;a||this.pane.children(":not(."+this.options.css.list+")").each(function(){if(b(this).css("display")!="none"){a=true;return false}});if(a)if(this.options.animate){var c=this;this.pane.slideDown("fast",function(){c.input.trigger("fb-pane-show",c)})}else{this.pane.show();this.input.trigger("fb-pane-show",this)}else{this.pane.hide();this.input.trigger("fb-pane-hide",this)}},create_item:function(a){var c=this.options.css,d=b("<li>").addClass(c.item);a=b("<label>").text(a.name);
d.append(b("<div>").addClass(c.item_name).append(a));return d},mouseover_item:function(a){if(!this._ignore_mouseover){a=a.target;if(a.nodeName.toLowerCase()!=="li")a=b(a).parents("li:first");var c=b(a),d=this.options.css;b("."+d.item,this.list).each(function(){this!==c[0]&&b(this).removeClass(d.selected)});if(!c.hasClass(d.selected)){c.addClass(d.selected);this.mouseover_item_hook(c)}}},mouseover_item_hook:function(){},hoverover_list:function(){},hoverout_list:function(){},check_response:function(){return true},
response_hook:function(){this.list.empty()},show_hook:function(){this.status_select()},position:function(){var a=this.pane,c=this.options;if(!c.parent){if(!self._position){var d=this.input,h=d.offset(),g=d.outerWidth(true),i=d.outerHeight(true);h.top+=i;var j=a.outerWidth(),l=a.outerHeight(),m=h.top+l/2,n=b(window).scrollLeft();d=b(window).scrollTop();var r=b(window).width(),o=b(window).height()+d,p=true;if("left"==c.align)p=true;else if("right"==c.align)p=false;else if(h.left>n+r/2)p=false;if(!p){p=
h.left-(j-g);if(p>n)h.left=p}if(m>o){c=h.top-i-l;if(c>d)h.top=c}this._position=h}a.css({top:this._position.top,left:this._position.left})}},ignore_mouseover:function(){this._ignore_mouseover=true;var a=this;this.ignore_mouseover.timeout=setTimeout(function(){a.ignore_mouseover_reset()},1E3)},ignore_mouseover_reset:function(){this._ignore_mouseover=false},get_selected:function(){var a=null,c=this.options.css.selected;b("li",this.list).each(function(){var d=b(this);if(d.hasClass(c)&&d.is(":visible")){a=
d;return false}});return a},onselect:function(a){var c=a.data("data.suggest");if(c){this.input.val(c.name).data("data.suggest",c).trigger("fb-select",c);this.trackEvent(this.name,"fb-select","index",a.prevAll().length)}},trackEvent:function(a,c,d,h){this.input.trigger("fb-track-event",{category:a,action:c,label:d,value:h})},hide_all:function(){this.pane.hide();this.input.trigger("fb-pane-hide",this)}};b.extend(b.suggest,{defaults:{status:["Start typing to get suggestions...","Searching...","Select an item from the list:",
"Sorry, something went wrong. Please try again later"],soft:false,nomatch:"no matches",css:{pane:"fbs-pane",list:"fbs-list",item:"fbs-item",item_name:"fbs-item-name",selected:"fbs-selected",status:"fbs-status"},css_prefix:null,parent:null,animate:false,zIndex:null},use_jsonp:function(a){if(!a)return false;var c=window.location.href;c=c.substr(0,c.length-window.location.pathname.length);if(c===a)return false;return true},strongify:function(a,c){var d,h=a.toLowerCase().indexOf(c.toLowerCase());if(h>=
0){var g=c.length;d=document.createTextNode(a.substring(0,h));var i=b("<strong>").text(a.substring(h,h+g));h=document.createTextNode(a.substring(h+g));d=b("<div>").append(d).append(i).append(h)}else d=b("<div>").text(a);return d},keyCode:{CAPS_LOCK:20,CONTROL:17,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ENTER:108,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,OPTION:18,APPLE:224},is_char:function(a){if(a.type==="keypress")if((a.metaKey||a.ctrlKey)&&a.charCode===
118)return true;else{if("isChar"in a)return a.isChar}else{var c=b.suggest.keyCode.not_char;if(!c){c={};b.each(b.suggest.keyCode,function(d,h){c[""+h]=1});b.suggest.keyCode.not_char=c}return!(""+a.keyCode in c)}},parse_input:function(a){var c=[];a=b.trim(a);if(a==="")return["",c];var d=a.search(/[\S]+\:[\S]/);if(d===-1)return[a,c];var h=b.trim(a.substring(0,d));a=a.substring(d);d=/(\S+\:"[^\"]+\"|\S+\:\S+)/g;for(var g=d.exec(a);g;){c.push(g[0]);g=d.exec(a)}return[h,c]},mqlkey_fast:/^[_A-Za-z0-9][A-Za-z0-9_-]*$/,
mqlkey_slow:/^(?:[A-Za-z0-9]|\$[A-F0-9]{4})(?:[A-Za-z0-9_-]|\$[A-F0-9]{4})*$/,check_mql_key:function(a){if(b.suggest.mqlkey_fast.test(a))return true;else if(b.suggest.mqlkey_slow.test(a))return true;return false},check_mql_id:function(a){if(a.indexOf("/")===0){a=a.split("/");a.shift();if(!(a.length==1&&a[0]===""))for(var c=0,d=a.length;c<d;c++)if(!b.suggest.check_mql_key(a[c]))return false;return true}else return false}});var e={_destroy:b.suggest.prototype._destroy,show_hook:b.suggest.prototype.show_hook};
b.suggest("suggest",{_init:function(){var a=this,c=this.options;if(c.flyout_service_url==null)c.flyout_service_url=c.service_url;this.flyout_url=c.flyout_service_url;if(c.flyout_service_path)this.flyout_url+=c.flyout_service_path;this.jsonp=true;this.jsonp_flyout=b.suggest.use_jsonp(c.flyout_service_url);if(!b.suggest.cache)b.suggest.cache={};if(c.flyout){this.flyoutpane=b('<div style="display:none;" class="fbs-reset">').addClass(c.css.flyoutpane);if(c.flyout_parent)b(c.flyout_parent).append(this.flyoutpane);
else{this.flyoutpane.css("position","absolute");c.zIndex&&this.flyoutpane.css("z-index",c.zIndex);b(document.body).append(this.flyoutpane)}this.flyoutpane.hover(function(d){a.hoverover_list(d)},function(d){a.hoverout_list(d)}).bind("mousedown.suggest",function(d){d.stopPropagation();a.pane.click()});if(!b.suggest.flyout)b.suggest.flyout={};if(!b.suggest.flyout.cache)b.suggest.flyout.cache={}}},_destroy:function(){e._destroy.call(this);this.flyoutpane&&this.flyoutpane.remove();this.input.removeData("request.count.suggest");
this.input.removeData("flyout.request.count.suggest")},shift_enter:function(){if(this.options.suggest_new){this.suggest_new();this.hide_all()}},hide_all:function(){this.pane.hide();this.flyoutpane&&this.flyoutpane.hide();this.input.trigger("fb-pane-hide",this);this.input.trigger("fb-flyoutpane-hide",this)},request:function(a,c){var d=this,h=this.options;if(this.ac_xhr){!this.jsonp&&this.ac_xhr.abort&&this.ac_xhr.abort();this.ac_xhr=null}var g=a,i=h.ac_param.filter||[];if(b.type(i)==="string")i=[i];
i=i.slice();if(h.advanced){var j=b.suggest.parse_input(g);g=j[0];j[1].length&&i.push("(all "+j[1].join(" ")+")");if(b.suggest.check_mql_id(g)){i.push('(all mid:"'+g+'")');g=""}}j={};j[h.query_param_name]=g;if(c)j.cursor=c;b.extend(j,h.ac_param);if(i.length)j.filter=i;var l=h.service_url+h.service_path+"?"+b.param(j,true);if(g=b.suggest.cache[l])this.response(g,c?c:-1,true);else{clearTimeout(this.request.timeout);var m={url:h.service_url+h.service_path,data:j,traditional:true,beforeSend:function(){var n=
d.input.data("request.count.suggest")||0;n||d.trackEvent(d.name,"start_session");n+=1;d.trackEvent(d.name,"request","count",n);d.input.data("request.count.suggest",n)},success:function(n){b.suggest.cache[l]=n;n.prefix=a;d.response(n,c?c:-1)},error:function(n){d.status_error();d.trackEvent(d.name,"request","error",{url:this.url,response:n?n.responseText:""});d.input.trigger("fb-error",Array.prototype.slice.call(arguments))},complete:function(n){n&&d.trackEvent(d.name,"request","tid",n.getResponseHeader("X-Metaweb-TID"))},
dataType:d.jsonp?"jsonp":"json",cache:true};this.request.timeout=setTimeout(function(){d.ac_xhr=b.ajax(m)},h.xhr_delay)}},create_item:function(a,c){var d=this.options.css,h=b("<li>").addClass(d.item),g=b("<div>").addClass(d.item_name).append(b("<label>").append(b.suggest.strongify(a.name||a.id,c.prefix)));h.append(g);var i=a.notable;d=b("<div>").addClass(d.item_type);if(i&&i.name)d.text(i.name);else a.id&&d.text(a.id);g.prepend(d);return h},mouseover_item_hook:function(a){a=a.data("data.suggest");
this.options.flyout&&a&&this.flyout_request(a)},check_response:function(a){return a.prefix===this.input.val()},response_hook:function(a,c){this.flyoutpane&&this.flyoutpane.hide();c>0?b(".fbs-more",this.pane).remove():this.list.empty()},show_hook:function(a,c,d){e.show_hook.apply(this,[a]);var h=this.options,g=this,i=this.pane,j=this.list,l=a.result,m=b(".fbs-more",i),n=b(".fbs-suggestnew",i);b(".fbs-status",i);var r=a.correction;if(r&&r.length){var o=b('<a class="fbs-spell-link" href="#">').append(r[0]).bind("click.suggest",
function(p){p.preventDefault();p.stopPropagation();g.input.val(r[0]).trigger("textchange")});g.status.empty().append("Search instead for ").append(o).show()}if(l&&l.length&&"cursor"in a){if(!m.length){l=b('<a class="fbs-more-link" href="#" title="(Ctrl+m)">view more</a>');m=b('<div class="fbs-more">').append(l);l.bind("click.suggest",function(p){p.preventDefault();p.stopPropagation();p=b(this).parent(".fbs-more");g.more(p.data("cursor.suggest"))});j.after(m)}m.data("cursor.suggest",a.cursor);m.show()}else m.remove();
if(h.suggest_new){if(!n.length){a=b('<button class="fbs-suggestnew-button">');a.text(h.suggest_new);n=b('<div class="fbs-suggestnew">').append('<div class="fbs-suggestnew-description">Your item not in the list?</div>').append(a).append('<span class="fbs-suggestnew-shortcut">(Shift+Enter)</span>').bind("click.suggest",function(p){p.stopPropagation();g.suggest_new(p)});i.append(n)}n.show()}else n.remove();if(d&&d.length&&c>0){c=d.prevAll().length*d.outerHeight();j.scrollTop();j.animate({scrollTop:c},
"slow",function(){d.trigger("mouseover.suggest")})}},suggest_new:function(){var a=this.input.val();if(a!==""){this.input.data("data.suggest",a).trigger("fb-select-new",a);this.trackEvent(this.name,"fb-select-new","index","new");this.hide_all()}},more:function(a){if(a){var c=this.input.data("original.suggest");c!==null&&this.input.val(c);this.request(this.input.val(),a);this.trackEvent(this.name,"more","cursor",a)}return false},flyout_request:function(a){var c=this;if(this.flyout_xhr){!this.jsonp_flyout&&
this.flyout_xhr.abort&&this.flyout_xhr.abort();this.flyout_xhr=null}var d=this.options,h=this.flyoutpane.data("data.suggest");if(h&&a.id===h.id){if(!this.flyoutpane.is(":visible")){this.flyout_position(this.get_selected());this.flyoutpane.show();this.input.trigger("fb-flyoutpane-show",this)}}else if((h=b.suggest.flyout.cache[a.id])&&h.id&&h.html)this.flyout_response(h);else{var g=a.id,i={url:this.flyout_url.replace(/\$\{id\}/g,a.id),traditional:true,data:{},beforeSend:function(){var j=c.input.data("flyout.request.count.suggest")||
0;j+=1;c.trackEvent(c.name,"flyout.request","count",j);c.input.data("flyout.request.count.suggest",j)},success:function(j){j=c.jsonp_flyout?j:{id:g,html:j};b.suggest.flyout.cache[j.id]=j;c.flyout_response(j)},error:function(j){c.trackEvent(c.name,"flyout","error",{url:this.url,response:j?j.responseText:""})},complete:function(j){j&&c.trackEvent(c.name,"flyout","tid",j.getResponseHeader("X-Metaweb-TID"))},dataType:c.jsonp_flyout?"jsonp":"html",cache:true};if(d.ac_param.lang)i.data.lang=d.ac_param.lang;
clearTimeout(this.flyout_request.timeout);this.flyout_request.timeout=setTimeout(function(){c.flyout_xhr=b.ajax(i)},d.xhr_delay);this.input.trigger("fb-request-flyout",i)}},flyout_response:function(a){var c=this.pane,d=this.get_selected()||[];if(c.is(":visible")&&d.length)if((c=d.data("data.suggest"))&&a.id===c.id&&a.html){this.flyoutpane.html(a.html);this.flyout_position(d);this.flyoutpane.show().data("data.suggest",c);this.input.trigger("fb-flyoutpane-show",this)}},flyout_position:function(a){if(!this.options.flyout_parent){var c=
this.pane,d=this.flyoutpane,h=this.options.css,g=f,i={top:parseInt(d.css("top"),10),left:parseInt(d.css("left"),10)},j=c.offset(),l=c.outerWidth(),m=d.outerHeight(),n=d.outerWidth();if(this.options.flyout==="bottom"){g=j;l=this.input.offset();if(j.top<l.top)g.top-=m;else g.top+=c.outerHeight();d.addClass(h.flyoutpane+"-bottom")}else{g=a.offset();a=a.outerHeight();g.left+=l;var r=g.left+n;c=b(document.body).scrollLeft();var o=b(window).width()+c;g.top=g.top+a-m;if(g.top<j.top)g.top=j.top;if(r>o){j=
g.left-(l+n);if(j>c)g.left=j}d.removeClass(h.flyoutpane+"-bottom")}g.top===i.top&&g.left===i.left||d.css({top:g.top,left:g.left})}},hoverout_list:function(){this.flyoutpane&&!this.get_selected()&&this.flyoutpane.hide()}});b.extend(b.suggest.suggest,{defaults:{filter:null,spell:"always",exact:false,scoring:null,lang:null,key:null,prefixed:true,stemmed:null,format:"ac",advanced:true,query_param_name:"query",service_url:"https://www.googleapis.com",service_path:"/freebase/v1/search",align:null,flyout:true,
flyout_service_url:"http://dev.freebase.com",flyout_service_path:"/flyout?id=${id}",flyout_parent:null,suggest_new:null,nomatch:{title:"No suggested matches",heading:"Tips on getting better suggestions:",tips:["Enter more or fewer characters","Add words related to your original search","Try alternate spellings","Check your spelling"]},css:{item_type:"fbs-item-type",flyoutpane:"fbs-flyout-pane"},xhr_delay:200}});document.createElement("input")})(jQuery);
(function(b){window.freebase=window.fb={mwLWTReloading:false};window.SERVER&&typeof window.SERVER==="object"&&b.extend(window.freebase,window.SERVER);b.cookie=window.freebase.cookie})(jQuery);
(function(b,f){if(!f.datelineReloading){if(!window.console)window.console={log:b.noop,info:b.noop,debug:b.noop,warn:b.noop,error:b.noop};f.dispatch=function(a,c,d,h){if(typeof c!=="function")return false;a=b.event.fix(a||window.event);d||(d=[]);h||(h=this);return c.apply(h,[a].concat(d))};f.get_script=function(a,c){var d=f.get_script.cache,h=d[a];if(h)if(h.state===1)h.callbacks.push(c);else h.state===4&&c();else{h=d[a]={state:0,callbacks:[c]};b.ajax({url:a,dataType:"script",beforeSend:function(){h.state=
1},success:function(){h.state=4;b.each(h.callbacks,function(g,i){i()})},error:function(){h.state=-1}})}};f.get_script.cache={};b(window).bind("fb.user.signedin",function(a,c){f.user=c;var d=b("#nav-username");if(d.length){d[0].href+=f.user.id.substring(1);var h=f.h.image_url(c.id,{maxwidth:25,maxheight:25,mode:"fillcropmid"});h=b('<a class="user-thumb" href="'+c.id+'"><img src="'+h+'" /></a>');d.prepend(h)}b("#signedin").show();b(".signedin").show()}).bind("fb.user.signedout",function(){b("#signedout").show();
b(".signedout").show()}).bind("fb.user.unauthorized",function(){window.location.href=f.h.fb_url("/account/signin",{onsignin:window.location.href})}).bind("fb.user.feedback",function(a,c){if(confirm("Uh oh! Something went wrong. Please report this using our feedback tool."))try{userfeedback.api.startFeedback({productId:"68931",disableScrolling:false},c);return false}catch(d){}});var k=b.cookie("fb-account-name");if(k){var e={id:"/user/"+k,name:k};setTimeout(function(){b(window).trigger("fb.user.signedin",
e);var a=f.h.ajax_url("lib/template/refresh_credentials"),c=b("<iframe name='rc'></iframe>").attr("src",a).hide().appendTo("body").load(function(){var d=parseInt(b("body",window.rc.document).text(),10)-(new Date).getTime();d&&d>0&&setTimeout(function(){b(c).attr("src",a)},d)})},0)}else setTimeout(function(){b(window).trigger("fb.user.signedout")},0);f.window_position=function(){var a={};if(typeof window.innerWidth=="number"){a.width=window.outerWidth;a.height=window.outerHeight;a.top=window.screenY;
a.left=window.screenX}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){a.width=document.body.clientWidth;a.height=document.body.clientHeight;a.top=window.screenTop;a.left=window.screenLeft}return a};f.status=function(){function a(){h&&h.slideUp(300);l=null;return false}function c(m,n,r,o){if(h===null){h=b("#page-state");g=b(".status-msg",h);i=b(".close-msg",h);i.click(a)}if(l==="error")console.warn("MessagePanel: Already displaying error. Ignoring: ",
m,n);else{h.hide();b.each(d,function(p,q){h.removeClass(q)});h.addClass(m);g.text(n);l=m;window.clearTimeout(j);if(o){i.show();h.slideDown(300)}else{i.hide();h.slideDown(300);j=window.setTimeout(a,r)}}return false}var d=["notice","info","warning","success","error"],h=null,g=null,i=null,j=null,l=null;return{doing:function(m){return c("notice",m,2E6)},info:function(m,n){return c("info",m,4E3,n)},warning:function(m,n){return c("warning",m,4E3,n)},success:function(m,n){return c("success",m,6E3,n)},error:function(m,
n){return c("error",m,6E3,n)},clear:function(){window.clearTimeout(j);l==="error"?console.warn("MessagePanel: Displaying error. Ignoring clearing status."):a()}}}();f.popup=function(a,c,d,h){c=c||300;d=d||300;var g=f.window_position(),i=Math.floor((g.width-c)/2)+g.left;g=Math.floor((g.height-d)/2)+g.top;if(/chrome/.test(navigator.userAgent.toLowerCase()))d+=50;c={width:c,height:d,top:g,left:i,directories:"no",location:"no",menubar:"no",resizable:"no",scrollbars:"yes",status:"no",toolbar:"no"};d=[];
for(var j in c)d.push(j+"="+c[j]);return window.open(a,h||"",d.join())};f.login_popup=function(a){a||(a=function(){window.location.reload()});var c=f.popup("/account/signin",900,600,"Freebase");if(c.opener==null)c.opener=self;window.onsignin=a;window.focus&&c.focus();return false};f.logout_popup=function(a){a||(a=function(){window.location.reload()});var c=f.popup("/account/signout",900,600,"Freebase");if(c.opener==null)c.opener=self;window.onsignout=a;window.focus&&c.focus();return false};b(function(){var a=
b("#header > #nav-utilities > .language-picker"),c=b(".current-lang",a);b("select",a).bind("change",function(){var d=b(this).find(":selected").text();c.text(d)})});b(function(){f.suggest_lang={SUPPORTED:{en:1,es:1,fr:1,de:1,it:1,pt:1,zh:1,ja:1,ko:1,ru:1,sv:1,fi:1,da:1,nl:1,el:1,ro:1,tr:1,hu:1},lang:function(a){a=f.h.lang_code(a||f.lang||"/lang/en");if(f.suggest_lang.SUPPORTED[a])if(a!=="en")return a+",en";return"en"}};f.suggest_options={service_defaults:{status:["","Searching...","Select an item from the list:"],
service_url:f.h.suggest_url(),service_path:"",flyout_service_url:"",flyout_service_path:"/flyout?id=${id}",key:f.acre.freebase.api_key,lang:f.suggest_lang.lang()},filter:{operator:function(){var a=Array.prototype.slice.call(arguments),c=a.shift();if(!(c==="any"||c==="all"||c==="should"))throw"Invalid search operator: "+c;var d=[c];if(c==="should"&&a.length>1){a=["any"].concat(a);d.push(f.suggest_options.filter.operator.apply(null,a))}else d=d.concat(a);return"("+d.join(" ")+")"},any:function(){var a=
Array.prototype.slice.call(arguments);a.unshift("any");return f.suggest_options.filter.operator.apply(null,a)},all:function(){var a=Array.prototype.slice.call(arguments);a.unshift("all");return f.suggest_options.filter.operator.apply(null,a)},should:function(){var a=Array.prototype.slice.call(arguments);a.unshift("should");return f.suggest_options.filter.operator.apply(null,a)}},any:function(){var a=b.extend({},f.suggest_options.service_defaults);a.filter=f.suggest_options.filter.any.apply(null,arguments);
return a},all:function(){var a=b.extend({},f.suggest_options.service_defaults);a.filter=f.suggest_options.filter.all.apply(null,arguments);return a},should:function(){var a=b.extend({},f.suggest_options.service_defaults);a.filter=f.suggest_options.filter.should.apply(null,arguments);return a},search:function(){return b.extend({},f.suggest_options.service_defaults,{status:null,parent:"#site-search-box",align:"right"})},instance:function(a,c,d){var h=["type:"+a];b.each(["user","domain","type"],function(i,
j){if(a==="/freebase/"+j+"_profile"){h.push("type:/type/"+j);return false}});a==="/book/book_subject"&&h.push("type:/base/skosbase/skos_concept");var g=null;if(f.h.is_metaweb_system_type(a))g=f.suggest_options.any.apply(null,h);else{g=f.suggest_options.should.apply(null,h);if(c)g.suggest_new="Create new"}if(d)g.lang=f.suggest_lang.lang(d);return g},cotype:function(){return b.extend({scoring:"schema"},f.suggest_options.all.apply(null,["type:/type/type","(not namespace:/type)","(not namespace:/freebase)",
"(any (not namespace:/common) (any mid:/m/01c5 mid:/m/02_1_m4 mid:/m/03hc3d_))"]))},included_type:function(){return f.suggest_options.cotype()},expected_type:function(){return b.extend({scoring:"schema"},f.suggest_options.all.apply(null,["type:/type/type"]))},delegate_property:function(){return b.extend({scoring:"schema"},f.suggest_options.all.apply(null,["type:/type/property","(not namespace:/type/object)"]))}}});b(function(){var a=b("#SearchBox .SearchBox-input,#fb-search-input"),c=b("#fb-search");
a.suggest(f.suggest_options.search());var d=b("#site-search-label"),h=b("#site-search-box .fbs-pane");a.bind("fb-select",function(g,i){var j={};b(this).siblings("input[type=hidden]").each(function(){j[this.name]=this.value});window.location=f.h.fb_url(i.id,j);return false}).bind("fb-pane-show",function(){d.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",function(){b.trim(a.val())===""?d.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):
d.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){d.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){if(!d.is(":visible")){b("#site-search-label").slideDown("fast");c.addClass("active")}}).blur(function(){if(!h.is(":visible")&&d.is(":visible")){b("#site-search-label").slideUp("fast");c.removeClass("active")}});b(".SearchBox-form").submit(function(){return b.trim(b("#fb-search-input").val()).length==
0?false:true})});f.disable=function(a){b(a).attr("disabled","disabled").addClass("disabled")};f.enable=function(a){b(a).removeAttr("disabled").removeClass("disabled")};f.lang_select=function(a,c){if(c==="/lang/en"){b(this).removeAttr("name");if(!b(":input[name]",this.form).length){window.location=b(this.form).attr("action");return}}this.form.submit()};f.devbar={div:b("#devbar"),touch:function(){/\.(freebase|sandbox\-freebase)\.com$/.test(f.acre.request.server_name)?b.ajax({url:f.acre.freebase.googleapis_url?
f.h.fb_googleapis_url("/touch"):f.h.fb_api_url("/api/service/touch"),dataType:"jsonp"}):b.ajax({url:"/acre/touch"});return false},txn_ids:[],txn:function(){return f.devbar.view_txn(this.href,f.devbar.txn_ids)},view_txn:function(a,c){if(c&&c.length)window.location=a+"?"+b.param({tid:c},true);return false},ajaxComplete:function(a){if(a&&a.readyState===4)(a=a.getResponseHeader("x-metaweb-tid"))&&f.devbar.txn_ids.push(a)},init:function(){$nav_user_controls=b(".nav-user-controls");$user_controls=b("#user-controls");
b("#signedin .trigger").click(function(){if($user_controls.is(":hidden")){$user_controls.fadeIn();$nav_user_controls.addClass("active")}else{$user_controls.fadeOut();$nav_user_controls.removeClass("active")}return false});b("html").click(function(){if($user_controls.is(":visible")){$user_controls.fadeOut();$nav_user_controls.removeClass("active")}});$user_controls.click(function(a){a.stopPropagation()});b("#devbar-touch > a").click(f.devbar.touch);f.tid&&f.devbar.txn_ids.push(f.tid);b("#devbar-txn > a").click(f.devbar.txn);
b.ajaxSetup({complete:function(){f.devbar.ajaxComplete.apply(null,arguments)},error:function(a){var c=this,d={};b.each(["url","data","dataType","type"],function(h,g){d[g]=c[g]});b.each(["status","statusText","responseText"],function(h,g){d[g]=a[g]});d.responseHeaders=a.getAllResponseHeaders()}})}};f.devbar.init();f.mqlread=function(a,c,d){var h;if(f.acre.freebase.googleapis_url){h=f.h.fb_googleapis_url("/mqlread");a={query:JSON.stringify(a),key:f.acre.freebase.api_key}}else{h=f.h.fb_api_url("/api/service/mqlread");
a={query:JSON.stringify({query:a})}}return b.ajax({url:h,data:a,dataType:"jsonp",success:function(g){c&&c.apply(this,[g.result])},error:function(){d&&d.apply(this,arguments)}})};b(function(){f.hover={pane:"#fb-topic-hover-pane",current_target:null,cache:{},show:function(){function a(){if(c===f.hover.current_target){b(f.hover.pane).html(f.hover.cache[d]);var h=b(f.hover.pane).height(),g=b(c).height(),i=b(c).offset(),j=i.left;i=i.top;if(i-b(document).scrollTop()+h<b(window).height())i+=g;else i=i-h-
g;b(f.hover.pane).css({top:i,left:j}).show()}}var c=this,d=b(c).attr("data-id");if(d){f.hover.current_target=c;b(c).removeAttr("title");f.hover.cache[d]?a():b.get(f.h.fb_url("/flyout",{id:d,lang:f.lang}),function(h){f.hover.cache[d]=h;a()})}},hide:function(){f.hover.current_target=null;b(f.hover.pane).hide()}};b("#page-content").on("mouseover","a.property-value",f.hover.show).on("mouseout","a.property-value",f.hover.hide)})}})(jQuery,window.freebase);
(function(b,f){var k=f.h={type:b.type||function(){var e={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(a){e["[object "+a+"]"]=a.toLowerCase()});return function(a){return a==null?String(a):e[Object.prototype.toString.call(a)]||"object"}}(),parse_params:function(e){if(b.isArray(e)){var a={};b.each(e,function(c,d){a[d[0]]=d[1]});return a}return e},build_url:function(e){if(e&&e.indexOf("://")===-1)throw"Host must contain scheme: "+e;var a=e||"",c,d;if(arguments.length>
1){c=Array.prototype.slice.call(arguments);c.shift();for(var h=[],g=0,i=c.length;g<i;g++){var j=c[g];if(k.type(j)==="string")h.push(j);else{d={};for(g=g;g<i;g++)d=b.extend(d,k.parse_params(c[g]));break}}c=h.join("")}if(c&&c.indexOf("/")!==0)throw"Path must begin with a '/': "+c;if(c)a+=c;if(a==="")a="/";b.isEmptyObject(d)||(a+="?"+b.param(d,true));return a},fb_url:function(){var e=Array.prototype.slice.call(arguments);e.unshift(null);f.lang&&f.lang!=="/lang/en"&&e.push({lang:k.lang_code(f.lang)});
return k.build_url.apply(null,e)},ajax_url:function(){var e=Array.prototype.slice.call(arguments);e.unshift("/ajax");return k.reentrant_url.apply(null,e)},static_url:function(){var e=Array.prototype.slice.call(arguments);e.unshift("/static");return k.reentrant_url.apply(null,e)},reentrant_url:function(e,a){a=k.resolve_reentrant_path(a);a=a.replace(/^\/\//,e+"/");var c=Array.prototype.slice.call(arguments,2);c.unshift(a);c.unshift(null);return k.build_url.apply(null,c)},resolve_reentrant_path:function(e){e=
e||"";if(e.indexOf("//")==0)return e;if(e.indexOf("lib/")===0)return f.acre.current_script.app.path+e.substring(3);else{if(e&&e[0]!="/")e="/"+e;return f.acre.request.script.app.path+e}},suggest_url:function(){return f.acre.freebase.googleapis_url?k.build_url(f.acre.freebase.googleapis_url,"/search"):k.legacy_fb_url("/private/suggest")},legacy_fb_url:function(){var e=Array.prototype.slice.call(arguments),a=f.acre.freebase.site_host.replace(/^(https?\:\/\/)([^\.]+)\./,"$1www.").replace(":"+f.acre.request.server_port,
"");e.unshift(a);return k.build_url.apply(null,e)},fb_api_url:function(){var e=Array.prototype.slice.call(arguments);e.unshift(f.acre.freebase.service_url);return k.build_url.apply(null,e)},fb_googleapis_url:function(){if(f.acre.freebase.googleapis_url){var e=Array.prototype.slice.call(arguments);e.unshift(f.acre.freebase.googleapis_url);return k.build_url.apply(null,e)}throw"fb.acre.freebase.googleapis_url is not defined";},wiki_url:function(){var e=Array.prototype.slice.call(arguments);e.unshift("http://wiki.freebase.com",
"/wiki/");return k.build_url.apply(null,e)},lib_base_url:function(e){e=f.acre.metadata.libs[e];return e.base_url+e.version},image_url:function(e,a){return f.acre.freebase.imgurl(e,a.maxwidth,a.maxheight,a.mode,a.pad,a.errorid)},is_metaweb_system_type:function(e){return e.indexOf("/type/")===0||e.indexOf("/common/")===0&&e!=="/common/topic"||e.indexOf("/freebase/")===0&&e.indexOf("_profile")===e.length-8},id_key:function(e,a){var c=e.split("/"),d=c.pop();if(a){c=c.join("/");if(c==="")c="/";return[c,
d]}else return d},lang_code:function(e){return k.id_key(e)},lang_id:function(e){return"/lang/"+k.lang_code(e)}}})(jQuery,window.freebase);
(function(b,f){var k=f.permission={init:function(){if(f.user){var e=f.c;e&&e.id&&b.ajax({url:f.h.ajax_url("lib/permission/has_permission.ajax"),data:{id:e.id,user_id:f.user.id},dataType:"json",success:function(a){k.has_permission=a.result&&a.result[e.id]===true;b(window).trigger("fb.permission.has_permission",k.has_permission)}});check_permissioned_objects(b(".edit-perm"),f.user.id)}}};b(window).bind("fb.user.signedin",k.init);b(window).bind("fb.permission.has_permission",function(e,a){a?b(".edit").show():
b(".no-edit").show()})})(jQuery,window.freebase);function check_permissioned_objects(b,f){if(b.length&&f){var k={},e=[];$.each(b,function(){var a=$(this).metadata().id;if(a&&!k[a]){e.push(a);k[a]=1}});e.length&&$.ajax({url:fb.h.ajax_url("lib/permission/has_permission.ajax"),data:{id:e,user_id:f},traditional:true,dataType:"json",success:function(a){var c=a.result||{};$.each(b,function(){var d=$(this).metadata().id;d&&c[d]===true?$(this).show():$(this).addClass("edit-perm-lock")})}})}}
(function(b,f){var k=f.incompatible_types={overlay_dialog:null,inline_dialog:null,check:function(e,a,c){c=c||{};b.ajax({url:f.h.ajax_url("lib/incompatible_types/incompatible_types.ajax"),data:{id:e,type:a},dataType:"json",beforeSend:function(){f.status.doing("Checking compatibility...")},success:function(d){d=d.result;if(b.isEmptyObject(d))c.compatible&&c.compatible(e,a);else c.incompatible&&c.incompatible(e,a,d)},error:function(d){f.status.error(d.responseText)},complete:function(){f.status.clear()}})},
overlay_suggest_incompatible_callback:function(e,a){if(!k.overlay_dialog)k.overlay_dialog=b(".incompatible-overlay-dialog");if(k.overlay_dialog.length){a=a||{};return function(c,d,h){k.overlay_dialog.removeData("overlay");b(".modal-content",k.overlay_dialog).empty().append(k.description_html(c,d,h));b(".incompatible-topic",k.overlay_dialog).text(e.val());k.overlay_dialog.overlay({close:"button",closeOnClick:false,load:true,fixed:false,mask:{color:"#000",loadSpeed:200,opacity:0.5},onClose:function(){e.focus().select();
b("button",k.overlay_dialog).unbind();a.onClose&&a.onClose()},onLoad:function(){b(".cancel",k.overlay_dialog).focus().click(function(){e.focus().select().trigger("textchange");a.onCancel&&a.onCancel()});b(".save",k.overlay_dialog).click(function(){e.focus().select();a.onConfirm&&a.onConfirm(c,d)});a.onLoad&&a.onLoad()}})}}else return k.native_confirm_suggest_incompatible_callback(e,a)},inline_suggest_incompatible_callback:function(e,a){if(!k.inline_dialog)k.inline_dialog=b(".incompatible-inline-dialog");
if(k.inline_dialog.length){a=a||{};return function(c,d,h){b(".modal-content",k.inline_dialog).empty().append(k.description_html(c,d,h));b(".incompatible-topic",k.inline_dialog).text(e.val());b(".save",k.inline_dialog).unbind().click(function(){e.focus().select();a.onConfirm&&a.onConfirm(c,d);k.inline_dialog.hide(a.onClose)});b(".cancel",k.inline_dialog).unbind().click(function(){e.focus().select().trigger("textchange");a.onCancel&&a.onCancel();k.inline_dialog.hide(a.onClose)});h=e.offsetParent();
var g=e.position();h.append(k.inline_dialog);k.inline_dialog.css({top:g.top+e.outerHeight(),left:g.left});k.inline_dialog.show(a.onLoad)}}else return k.native_confirm_suggest_incompatible_callback(e,a)},native_confirm_suggest_incompatible_callback:function(e,a){a=a||{};return function(c,d,h){if(confirm(k.description_text(c,d,h))){e.focus().select();a.onConfirm&&a.onConfirm(c,d)}else{e.focus().select().trigger("textchange");a.onCancel&&a.onCancel()}a.onClose&&a.onClose();e.focus().select()}},description_html:function(e,
a,c){var d=b("<div>");b.each(c,function(h,g){d.append(k.reason_html(e,h,g))});d.append("<p>Are you sure you want to continue?<p>");return d},reason_html:function(e,a,c){var d=b('<p><span class="incompatible-topic"></span> is already typed as <b class="incompatible-existing"></b>, it\'s unlikely it should also be typed as <b class="incompatible-type"></b>.</p>');b(".incompatible-topic",d).text(e);b(".incompatible-existing",d).text(a);b(".incompatible-type",d).text(c.join(", "));return d},description_text:function(e,
a,c){return k.description_html(e,a,c).text()}}})(jQuery,window.freebase);
(function(b,f){f.require("dojo.date.stamp");f.require("dojo.date.locale");f.require("dojo.number");var k,e=false,a={"long":1,"short":1,full:1,medium:1},c=/^\d{4}$/,d=/^\d{4}\-\d{2}$/,h=/L/g,g=window.i18n={normalize_pattern:function(i){return i.replace(h,"M")},ize:function(i){g.ize_datetime(i);g.ize_number(i)},ize_datetime:function(i){i=b("time",i).each(function(){var j=b(this);if(j.attr("data-i18n")!=="off"){var l=j.attr("datetime");if(l){var m=j.attr("data-format");l=g.datetime(l,m);j.text(l)}}});
e&&i.attr("dir","rtl");i.css("visibility","visible")},ize_datetime_input:function(i){i=b(i);var j=i.val();if(j!==""){j=g.datetime(j);i.val(j)}e&&i.attr("dir","rtl")},datetime:function(i,j){var l=f.date.stamp.fromISOString(i),m={selector:"date"};if(j)if(a[j])m.formatLength=j;else m.datePattern=k["dateFormatItem-"+j];else m.datePattern=c.test(i)?k["dateFormatItem-y"]:d.test(i)?k["dateFormatItem-yMMM"]:k["dateFormat-long"];if(m.datePattern)m.datePattern=g.normalize_pattern(m.datePattern);return f.date.locale.format(l,
m)},ize_number:function(i){i=b(".number",i).each(function(){var j=b(this);if(j.attr("data-i18n")!=="off"){var l=j.attr("data-value");if(l!=null){l=g.number(l);j.text(l)}}});e&&i.attr("dir","rtl");i.css("visibility","visible")},ize_number_input:function(i){i=b(i);var j=i.val();if(j!==""){j=g.number(j);i.val(j)}e&&i.attr("dir","rtl")},number:function(i){return f&&f.number?f.number.format(i):i},_get_edit_script:function(i,j){g._get_edit_script.loaded?j():b.getScript(i+"/i18n-edit.mf.js",function(){g._get_edit_script.loaded=
1;j()})},text_edit:function(i,j,l,m,n,r){g._get_edit_script(j,function(){g.edit.text_edit_begin(b(i),j,l,m,n,r)});return false}};f.ready(function(){if(f.locale==="ar"||f.locale==="he")e=true;k=f.date.locale._getGregorianBundle();g.ize()})})(jQuery,dojo);
(function(b,f){var k=f.flag={merge:function(e){return k.flag(e,"merge_begin")},split:function(e){return k.flag(e,"split_begin")},"delete":function(e){return k.flag(e,"delete_begin")},offensive:function(e){return k.flag(e,"offensive_begin")},flag:function(e,a){e=b(e);f.get_script(f.h.static_url("lib/flag/flag-edit.mf.js"),function(){k.edit[a](e)});return false},undo:function(e,a){e=b(e);f.get_script(f.h.static_url("lib/flag/flag-edit.mf.js"),function(){k.edit.undo_begin(e,a)});return false}}})(jQuery,
window.freebase);
(function(b){function f(){e();b(this).parents(".headmenu").data("submenu").find("a:first").click();return false}function k(c,d){var h=b(this),g=h.data("submenu");if(!g.is(".submenu-valid")){var i=h.offset(),j=h.outerHeight();j=i.top+j;if(g.is(".center")){h=h.outerWidth();i=i.left+h/2-g.outerWidth()/2}else if(g.is(".right")){h=h.outerWidth();i=i.left+h-g.outerWidth()}else i=i.left;i={display:"none",position:"absolute",top:j,left:i};if(d.overlay)i.zIndex=d.overlay.css("zIndex");g.css(i);b(document.body).append(g);
g.addClass(".submenu-valid")}if(g.is(":visible"))e(g);else{e();g.fadeIn()}return false}function e(c){(c||b(".submenu:visible")).fadeOut()}function a(c){(c||b(".submenu-valid")).each(function(){b(this).removeClass("submenu-valid")})}b.factory("nicemenu",{init:function(){var c=this.options;b(".headmenu",this.element).each(function(){var d=b(this),h=d.next(".submenu");d.data("submenu",h);h.data("headmenu",d);b(".default-action",d).click(f);d.click(function(g){return k.apply(this,[g,c])})});b(".submenu",
this.element).click(function(){e(b(this));b(this).fadeOut()})}});b(document).click(function(){e()}).bind("scroll resize",function(){e();a()})})(jQuery);
(function(b,f){b(function(){b(".nicemenu").nicemenu();b(window).bind("fb.permission.has_permission",function(e,a){var c=".nav-utilities > li > .submenu > li:not(.no-settings)";a||(c+=":not(.edit)");b(c).length||b("li.no-settings").show()});b("#description").css("height","auto");var k=b("#page-header .creation-timestamp").width();b("#page-header h1").css("margin-right",k);setTimeout(function(){b("#page-content").css({opacity:1})},0);b("body").is(".embed")||f.init_page_scroll();f.init_search()});f.nav_get_script=
function(k,e,a){b.ajax({url:k.href,dataType:"script",beforeSend:function(){f.status.doing("Loading...")},success:function(){f.status.clear();if(e){var c=e.split(".");if(c.length){var d=f;c.every(function(h){if(d[h]){d=d[h];return true}else{d=null;return false}});b.isFunction(d)&&b.isArray(a)&&d.apply(null,a)}}},error:function(){f.status.error("Error retrieving script")}});return false};f.init_page_scroll=function(){var k=b(window),e=b("#page-header"),a=b("#header"),c=b("#content"),d=k.height(),h=
a.outerHeight(),g=e.outerHeight(),i=h+g;k.bind("scroll resize",function(){if(d<1E3){e.removeClass("sticky");c.css({"padding-top":"0"})}var j=k.scrollTop();d=k.height();if(d>1E3)if(j>0){a.addClass("sticky");e.addClass("sticky");c.css({"padding-top":i+"px"})}else{a.removeClass("sticky");e.removeClass("sticky");c.css({"padding-top":"0"})}})};f.init_search=function(){var k=b("#header #fb-search-input");b(document).keydown(function(e){if(k.is(":focus"))e.keyCode===27&&k.blur();else if(!(this!==event.target&&
(/textarea|select/i.test(event.target.nodeName)||event.target.type==="text")))if(e.keyCode===191){k.focus();return false}})}})(jQuery,window.freebase);
