
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
if(!("JSON"in window&&window.JSON)){if(!this.JSON)this.JSON={};(function(){function a(h){return h<10?"0"+h:h}function f(h){d.lastIndex=0;return d.test(h)?'"'+h.replace(d,function(j){var l=e[j];return typeof l==="string"?l:"\\u"+("0000"+j.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function k(h,j){var l,m,n,r,q=b,o,p=j[h];if(p&&typeof p==="object"&&typeof p.toJSON==="function")p=p.toJSON(h);if(typeof i==="function")p=i.call(j,h,p);switch(typeof p){case "string":return f(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";b+=c;o=[];if(Object.prototype.toString.apply(p)==="[object Array]"){r=p.length;for(l=0;l<r;l+=1)o[l]=k(l,p)||"null";n=o.length===0?"[]":b?"[\n"+b+o.join(",\n"+b)+"\n"+q+"]":"["+o.join(",")+"]";b=q;return n}if(i&&typeof i==="object"){r=i.length;for(l=0;l<r;l+=1){m=i[l];if(typeof m==="string")if(n=k(m,p))o.push(f(m)+(b?": ":":")+n)}}else for(m in p)if(Object.hasOwnProperty.call(p,m))if(n=k(m,p))o.push(f(m)+
(b?": ":":")+n);n=o.length===0?"{}":b?"{\n"+b+o.join(",\n"+b)+"\n"+q+"}":"{"+o.join(",")+"}";b=q;return n}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b,c,e={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof JSON.stringify!=="function")JSON.stringify=function(h,j,l){var m;c=b="";if(typeof l==="number")for(m=0;m<l;m+=1)c+=" ";else if(typeof l==="string")c=l;if((i=j)&&typeof j!=="function"&&(typeof j!=="object"||typeof j.length!=="number"))throw new Error("JSON.stringify");return k("",
{"":h})};if(typeof JSON.parse!=="function")JSON.parse=function(h,j){function l(n,r){var q,o,p=n[r];if(p&&typeof p==="object")for(q in p)if(Object.hasOwnProperty.call(p,q)){o=l(p,q);if(o!==undefined)p[q]=o;else delete p[q]}return j.call(n,r,p)}var m;h=String(h);g.lastIndex=0;if(g.test(h))h=h.replace(g,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(h.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){m=eval("("+h+")");return typeof j==="function"?l({"":m},""):m}throw new SyntaxError("JSON.parse");}})()}
(function(a){a.factory=function(f,k){if(a.fn[f])throw"$.fn."+f+" plugin already exists";else if(a[f])throw"$."+f+" class already exists";a.fn[f]=function(g){return this.each(function(){var d=a(this),b=d.data("$."+f);b&&b._destroy();b=new a[f](d,g);d.data("$."+f,b)})};a[f]=function(g,d){this.options=a.extend(true,{},a[f].defaults,d);this.element=g;this.init()};a.extend(a[f].prototype,{init:function(){},_destroy:function(){}},k);return a[f]}})(jQuery);
(function(){var a={};$.extend({localstore:function(f,k,g,d){var b=document.location.hostname,c=document.location.protocol;if(typeof k!=="undefined"){var e=JSON.stringify(k);if(!g&&window.globalStorage)if(k===null)delete window.globalStorage[b][c+f];else window.globalStorage[b][c+f]=e;else if(!g&&window.localStorage&&window.localStorage.setItem)k===null?window.localStorage.removeItem(c+f):window.localStorage.setItem(c+f,e);else if(g!==false){g={};g.domain=fb.get_cookie_domain();k===null?$.cookie(f,
null,g):$.cookie(f,e,$.extend(g,d||{expires:14,path:"/"}))}else if(k===null)delete a[f];else a[f]=e;return k}else{if(!g&&window.globalStorage){if(window.globalStorage[b][c+f])k=window.globalStorage[b][c+f].value}else k=!g&&window.localStorage?window.localStorage.getItem(c+f):g!==false?$.cookie(f):a[f];if(k!=""&&k!==null&&k!==undefined)return JSON.parse(k,null)}return null}})})();
(function(a){a.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(f,k){this.defaults.type=f;this.defaults.name=k},get:function(f,k){var g=a.extend({},this.defaults,k);if(!g.single.length)g.single="metadata";var d=a.data(f,g.single);if(d)return d;d="{}";var b=function(i){if(typeof i!="string")return i;return i=eval("("+i+")")};if(g.type=="html5"){var c={};a(f.attributes).each(function(){var i=this.nodeName;if(i.match(/^data-/))i=i.replace(/^data-/,
"");else return true;c[i]=b(this.nodeValue)})}else{if(g.type=="class"){var e=g.cre.exec(f.className);if(e)d=e[1]}else if(g.type=="elem"){if(!f.getElementsByTagName)return;e=f.getElementsByTagName(g.name);if(e.length)d=a.trim(e[0].innerHTML)}else if(f.getAttribute!=undefined)if(e=f.getAttribute(g.name))d=e;c=b(d.indexOf("{")<0?"{"+d+"}":d)}a.data(f,g.single,c);return c}}});a.fn.metadata=function(f){return a.metadata.get(this[0],f)}})(jQuery);
(function(a){a(function(){if(a.tablesorter){var f=a("<div>");a.tablesorter.defaults.cssAsc="column-header-asc";a.tablesorter.defaults.cssDesc="column-header-desc";a.tablesorter.defaults.cssHeader="column-header";a.tablesorter.addParser({id:"datetime",is:function(){return false},format:function(k){f.html(k);return f.find("time:first").attr("datetime")},type:"text"});a.tablesorter.addParser({id:"ignoreCase",is:function(){return false},format:function(k){f.html(k);return f.text().toLowerCase()},type:"text"});
a.tablesorter.addParser({id:"string",is:function(){return false},format:function(k){f.html(k);return f.text()},type:"text"});a.tablesorter.addParser({id:"number",is:function(){return false},format:function(k){f.html(k);k=f.find(".number:first").attr("data-value");if(k==null)return Number.MAX_VALUE;return k},type:"numeric"});a(".table-sortable").each(function(){a(this).tablesorter()})}})})(jQuery);
(function(a,f){function k(g){return!a(g).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(g,d){return typeof g==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;g=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!g.length?a(document):g},zIndex:function(g){if(g!==f)return this.css("zIndex",g);if(this.length){g=a(this[0]);for(var d;g.length&&g[0]!==document;){d=g.css("position");
if(d==="absolute"||d==="relative"||d==="fixed"){d=parseInt(g.css("zIndex"),10);if(!isNaN(d)&&d!==0)return d}g=g.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(g,d){function b(h,j,l,m){a.each(c,function(){j-=parseFloat(a.curCSS(h,"padding"+this,true))||0;if(l)j-=parseFloat(a.curCSS(h,
"border"+this+"Width",true))||0;if(m)j-=parseFloat(a.curCSS(h,"margin"+this,true))||0});return j}var c=d==="Width"?["Left","Right"]:["Top","Bottom"],e=d.toLowerCase(),i={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(h){if(h===f)return i["inner"+d].call(this);return this.each(function(){a(this).css(e,b(this,h)+"px")})};a.fn["outer"+d]=function(h,j){if(typeof h!=="number")return i["outer"+d].call(this,h);return this.each(function(){a(this).css(e,
b(this,h,true,j)+"px")})}});a.extend(a.expr[":"],{data:function(g,d,b){return!!a.data(g,b[3])},focusable:function(g){var d=g.nodeName.toLowerCase(),b=a.attr(g,"tabindex");if("area"===d){d=g.parentNode;b=d.name;if(!g.href||!b||d.nodeName.toLowerCase()!=="map")return false;g=a("img[usemap=#"+b+"]")[0];return!!g&&k(g)}return(/input|select|textarea|button|object/.test(d)?!g.disabled:"a"==d?g.href||!isNaN(b):!isNaN(b))&&k(g)},tabbable:function(g){var d=a.attr(g,"tabindex");return(isNaN(d)||d>=0)&&a(g).is(":focusable")}});
a(function(){var g=document.body,d=g.appendChild(d=document.createElement("div"));a.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=d.offsetHeight===100;a.support.selectstart="onselectstart"in d;g.removeChild(d).style.display="none"});a.extend(a.ui,{plugin:{add:function(g,d,b){g=a.ui[g].prototype;for(var c in b){g.plugins[c]=g.plugins[c]||[];g.plugins[c].push([d,b[c]])}},call:function(g,d,b){if((d=g.plugins[d])&&g.element[0].parentNode)for(var c=0;c<d.length;c++)g.options[d[c][0]]&&
d[c][1].apply(g.element,b)}},contains:function(g,d){return document.compareDocumentPosition?g.compareDocumentPosition(d)&16:g!==d&&g.contains(d)},hasScroll:function(g,d){if(a(g).css("overflow")==="hidden")return false;var b=d&&d==="left"?"scrollLeft":"scrollTop",c=false;if(g[b]>0)return true;g[b]=1;c=g[b]>0;g[b]=0;return c},isOverAxis:function(g,d,b){return g>d&&g<d+b},isOver:function(g,d,b,c,e,i){return a.ui.isOverAxis(g,b,e)&&a.ui.isOverAxis(d,c,i)}})}})(jQuery);
(function(a,f){if(a.cleanData){var k=a.cleanData;a.cleanData=function(d){for(var b=0,c;(c=d[b])!=null;b++)a(c).triggerHandler("remove");k(d)}}else{var g=a.fn.remove;a.fn.remove=function(d,b){return this.each(function(){if(!b)if(!d||a.filter(d,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return g.call(a(this),d,b)})}}a.widget=function(d,b,c){var e=d.split(".")[0],i;d=d.split(".")[1];i=e+"-"+d;if(!c){c=b;b=a.Widget}a.expr[":"][i]=function(h){return!!a.data(h,
d)};a[e]=a[e]||{};a[e][d]=function(h,j){arguments.length&&this._createWidget(h,j)};b=new b;b.options=a.extend(true,{},b.options);a[e][d].prototype=a.extend(true,b,{namespace:e,widgetName:d,widgetEventPrefix:a[e][d].prototype.widgetEventPrefix||d,widgetBaseClass:i},c);a.widget.bridge(d,a[e][d])};a.widget.bridge=function(d,b){a.fn[d]=function(c){var e=typeof c==="string",i=Array.prototype.slice.call(arguments,1),h=this;c=!e&&i.length?a.extend.apply(null,[true,c].concat(i)):c;if(e&&c.charAt(0)==="_")return h;
e?this.each(function(){var j=a.data(this,d),l=j&&a.isFunction(j[c])?j[c].apply(j,i):j;if(l!==j&&l!==f){h=l;return false}}):this.each(function(){var j=a.data(this,d);j?j.option(c||{})._init():a.data(this,d,new b(c,this))});return h}};a.Widget=function(d,b){arguments.length&&this._createWidget(d,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,b){a.data(b,this.widgetName,this);this.element=a(b);this.options=a.extend(true,{},this.options,
this._getCreateOptions(),d);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(d,b){var c=d;if(arguments.length===0)return a.extend({},this.options);if(typeof d==="string"){if(b===f)return this.options[d];c={};c[d]=b}this._setOptions(c);return this},_setOptions:function(d){var b=this;a.each(d,function(c,e){b._setOption(c,e)});return this},_setOption:function(d,b){this.options[d]=b;if(d==="disabled")this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(d,b,c){var e=this.options[d];b=a.Event(b);b.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();c=c||{};if(b.originalEvent){d=a.event.props.length;for(var i;d;){i=a.event.props[--d];b[i]=b.originalEvent[i]}}this.element.trigger(b,c);return!(a.isFunction(e)&&e.call(this.element[0],b,c)===false||b.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(k){return f._mouseDown(k)}).bind("click."+this.widgetName,function(k){if(true===a.data(k.target,f.widgetName+".preventClickEvent")){a.removeData(k.target,f.widgetName+".preventClickEvent");k.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(f){f.originalEvent=
f.originalEvent||{};if(!f.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(f);this._mouseDownEvent=f;var k=this,g=f.which==1,d=typeof this.options.cancel=="string"?a(f.target).parents().add(f.target).filter(this.options.cancel).length:false;if(!g||d||!this._mouseCapture(f))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){k.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=
this._mouseStart(f)!==false;if(!this._mouseStarted){f.preventDefault();return true}}this._mouseMoveDelegate=function(b){return k._mouseMove(b)};this._mouseUpDelegate=function(b){return k._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();return f.originalEvent.mouseHandled=true}},_mouseMove:function(f){if(a.browser.msie&&!(document.documentMode>=9)&&!f.button)return this._mouseUp(f);if(this._mouseStarted){this._mouseDrag(f);
return f.preventDefault()}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,f)!==false)?this._mouseDrag(f):this._mouseUp(f);return!this._mouseStarted},_mouseUp:function(f){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;f.target==this._mouseDownEvent.target&&a.data(f.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(f)}return false},_mouseDistanceMet:function(f){return Math.max(Math.abs(this._mouseDownEvent.pageX-f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var f=/left|center|right/,k=/top|center|bottom/,g=a.fn.position,d=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var c=a(b.of),e=c[0],i=(b.collision||"flip").split(" "),h=b.offset?b.offset.split(" "):[0,0],j,l,m;if(e.nodeType===9){j=c.width();l=c.height();m={top:0,left:0}}else if(e.setTimeout){j=c.width();l=c.height();m={top:c.scrollTop(),left:c.scrollLeft()}}else if(e.preventDefault){b.at="left top";j=l=0;m={top:b.of.pageY,
left:b.of.pageX}}else{j=c.outerWidth();l=c.outerHeight();m=c.offset()}a.each(["my","at"],function(){var n=(b[this]||"").split(" ");if(n.length===1)n=f.test(n[0])?n.concat(["center"]):k.test(n[0])?["center"].concat(n):["center","center"];n[0]=f.test(n[0])?n[0]:"center";n[1]=k.test(n[1])?n[1]:"center";b[this]=n});if(i.length===1)i[1]=i[0];h[0]=parseInt(h[0],10)||0;if(h.length===1)h[1]=h[0];h[1]=parseInt(h[1],10)||0;if(b.at[0]==="right")m.left+=j;else if(b.at[0]==="center")m.left+=j/2;if(b.at[1]==="bottom")m.top+=
l;else if(b.at[1]==="center")m.top+=l/2;m.left+=h[0];m.top+=h[1];return this.each(function(){var n=a(this),r=n.outerWidth(),q=n.outerHeight(),o=parseInt(a.curCSS(this,"marginLeft",true))||0,p=parseInt(a.curCSS(this,"marginTop",true))||0,u=r+o+(parseInt(a.curCSS(this,"marginRight",true))||0),t=q+p+(parseInt(a.curCSS(this,"marginBottom",true))||0),s=a.extend({},m),v;if(b.my[0]==="right")s.left-=r;else if(b.my[0]==="center")s.left-=r/2;if(b.my[1]==="bottom")s.top-=q;else if(b.my[1]==="center")s.top-=
q/2;s.left=Math.round(s.left);s.top=Math.round(s.top);v={left:s.left-o,top:s.top-p};a.each(["left","top"],function(w,x){a.ui.position[i[w]]&&a.ui.position[i[w]][x](s,{targetWidth:j,targetHeight:l,elemWidth:r,elemHeight:q,collisionPosition:v,collisionWidth:u,collisionHeight:t,offset:h,my:b.my,at:b.at})});a.fn.bgiframe&&n.bgiframe();n.offset(a.extend(s,{using:b.using}))})};a.ui.position={fit:{left:function(b,c){var e=a(window);e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();b.left=
e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var e=a(window);e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!=="center"){var e=a(window);e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();var i=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,j=-2*c.offset[0];b.left+=
c.collisionPosition.left<0?i+h+j:e>0?i+h+j:0}},top:function(b,c){if(c.at[1]!=="center"){var e=a(window);e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();var i=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,j=-2*c.offset[1];b.top+=c.collisionPosition.top<0?i+h+j:e>0?i+h+j:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(b,c){if(/static/.test(a.curCSS(b,"position")))b.style.position="relative";var e=a(b),
i=e.offset(),h=parseInt(a.curCSS(b,"top",true),10)||0,j=parseInt(a.curCSS(b,"left",true),10)||0;i={top:c.top-i.top+h,left:c.left-i.left+j};"using"in c?c.using.call(b,i):e.css(i)};a.fn.offset=function(b){var c=this[0];if(!c||!c.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return d.call(this)}}})(jQuery);
(function(a,f){if(!("console"in window)){var k=window.console={};k.log=k.warn=k.error=k.debug=function(){}}a(function(){var b=a("<div>");a(document.body).append(b);var c=setTimeout(function(){if(a.cleanData){var e=a.cleanData;a.cleanData=function(h){for(var j=0,l;(l=h[j])!=null;j++)a(l).triggerHandler("remove");e(h)}}else{var i=a.fn.remove;a.fn.remove=function(h,j){return this.each(function(){if(!j)if(!h||a.filter(h,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});
return i.call(a(this),h,j)})}}},1);b.bind("remove",function(){clearTimeout(c)});b.remove()});var g={key:1,filter:1,spell:1,exact:1,lang:1,scoring:1,prefixed:1,stemmed:1,format:1,mql_output:1};a.suggest=function(b,c){a.fn[b]=function(e){this.length||console.warn("Suggest: invoked on empty element set");return this.each(function(){if(this.nodeName)if(this.nodeName.toUpperCase()==="INPUT")this.type&&this.type.toUpperCase()!=="TEXT"&&console.warn("Suggest: unsupported INPUT type: "+this.type);else console.warn("Suggest: unsupported DOM element: "+
this.nodeName);var i=a.data(this,b);i&&i._destroy();a.data(this,b,new a.suggest[b](this,e))._init()})};a.suggest[b]=function(e,i){var h=this,j=this.options=a.extend(true,{},a.suggest.defaults,a.suggest[b].defaults,i),l=j.css_prefix=j.css_prefix||"",m=j.css;this.name=b;a.each(m,function(o){m[o]=l+m[o]});j.ac_param={};a.each(g,function(o){var p=j[o];p===null||p===""||(j.ac_param[o]=p)});j.flyout_lang=null;if(j.ac_param.lang){var n=j.ac_param.lang;if(a.type(n)==="string")n=n.split(",");if(a.isArray(n)&&
n.length)if(n=a.trim(n[0]))j.flyout_lang=n}this._status={START:"",LOADING:"",SELECT:"",ERROR:""};if(j.status&&j.status instanceof Array&&j.status.length>=3){this._status.START=j.status[0]||"";this._status.LOADING=j.status[1]||"";this._status.SELECT=j.status[2]||"";if(j.status.length===4)this._status.ERROR=j.status[3]||""}n=this.status=a('<div style="display:none;">').addClass(m.status);var r=this.list=a("<ul>").addClass(m.list),q=this.pane=a('<div style="display:none;" class="fbs-reset">').addClass(m.pane);
q.append(n).append(r);if(j.parent)a(j.parent).append(q);else{q.css("position","absolute");j.zIndex&&q.css("z-index",j.zIndex);a(document.body).append(q)}q.bind("mousedown",function(o){h.input.data("dont_hide",true);o.stopPropagation()}).bind("mouseup",function(o){h.input.data("dont_hide")&&h.input.focus();h.input.removeData("dont_hide");o.stopPropagation()}).bind("click",function(o){o.stopPropagation();if(o=h.get_selected()){h.onselect(o,true);h.hide_all()}});r.hover(function(o){h.hoverover_list(o)},
function(o){h.hoverout_list(o)});this.input=a(e).attr("autocomplete","off").unbind(".suggest").bind("remove.suggest",function(){h._destroy()}).bind("keydown.suggest",function(o){h.keydown(o)}).bind("keypress.suggest",function(o){h.keypress(o)}).bind("keyup.suggest",function(o){h.keyup(o)}).bind("blur.suggest",function(o){h.blur(o)}).bind("textchange.suggest",function(){h.textchange()}).bind("focus.suggest",function(o){h.focus(o)}).bind(a.browser.msie?"paste.suggest":"input.suggest",function(){clearTimeout(h.paste_timeout);
h.paste_timeout=setTimeout(function(){h.textchange()},0)});this.onresize=function(){h.invalidate_position();if(q.is(":visible")){h.position();if(j.flyout&&h.flyoutpane&&h.flyoutpane.is(":visible")){var o=h.get_selected();o&&h.flyout_position(o)}}};a(window).bind("resize.suggest",this.onresize).bind("scroll.suggest",this.onresize)};a.suggest[b].prototype=a.extend({},a.suggest.prototype,c)};a.suggest.prototype={_init:function(){},_destroy:function(){this.pane.remove();this.list.remove();this.input.unbind(".suggest");
a(window).unbind("resize.suggest",this.onresize).unbind("scroll.suggest",this.onresize);this.input.removeData("data.suggest")},invalidate_position:function(){self._position=null},status_start:function(){this.hide_all();this.status.siblings().hide();if(this._status.START){this.status.text(this._status.START).show();if(!this.pane.is(":visible")){this.position();this.pane_show()}}this._status.LOADING&&this.status.removeClass("loading")},status_loading:function(){this.status.siblings().show();if(this._status.LOADING){this.status.addClass("loading").text(this._status.LOADING).show();
if(!this.pane.is(":visible")){this.position();this.pane_show()}}else this.status.hide()},status_select:function(){this.status.siblings().show();this._status.SELECT?this.status.text(this._status.SELECT).show():this.status.hide();this._status.LOADING&&this.status.removeClass("loading")},status_error:function(){this.status.siblings().show();this._status.ERROR?this.status.text(this._status.ERROR).show():this.status.hide();this._status.LOADING&&this.status.removeClass("loading")},focus:function(b){this.input.val()===
""?this.status_start():this.focus_hook(b)},focus_hook:function(){if(!this.input.data("data.suggest")&&!this.pane.is(":visible")&&a("."+this.options.css.item,this.list).length){this.position();this.pane_show()}},keydown:function(b){var c=b.keyCode;if(c===9)this.tab(b);else if(c===38||c===40)b.shiftKey||b.preventDefault()},keypress:function(b){var c=b.keyCode;if(c===38||c===40)b.shiftKey||b.preventDefault();else c===13&&this.enter(b)},keyup:function(b){var c=b.keyCode;if(c===38){b.preventDefault();
this.up(b)}else if(c===40){b.preventDefault();this.down(b)}else if(b.ctrlKey&&c===77)a(".fbs-more-link",this.pane).click();else if(a.suggest.is_char(b)){clearTimeout(this.keypress.timeout);var e=this;this.keypress.timeout=setTimeout(function(){e.textchange()},0)}else c===27&&this.escape(b);return true},blur:function(){if(!this.input.data("dont_hide")){this.input.data("data.suggest");this.hide_all()}},tab:function(b){if(!(b.shiftKey||b.metaKey||b.ctrlKey)){b=this.options;b=this.pane.is(":visible")&&
a("."+b.css.item,this.list).length;var c=this.get_selected();if(b&&c){this.onselect(c);this.hide_all()}}},enter:function(b){var c=this.options;if(this.pane.is(":visible"))if(b.shiftKey){this.shift_enter(b);b.preventDefault()}else if(a("."+c.css.item,this.list).length)if(c=this.get_selected()){this.onselect(c);this.hide_all();b.preventDefault()}else{this.input.data("data.suggest");if(a("."+this.options.css.item+":visible",this.list).length){this.updown(false);b.preventDefault()}}},shift_enter:function(){},
escape:function(){this.hide_all()},up:function(b){this.updown(true,b.ctrlKey||b.shiftKey)},down:function(b){this.updown(false,null,b.ctrlKey||b.shiftKey)},updown:function(b,c,e){var i=this.options.css,h=this.list;if(this.pane.is(":visible")){var j=a("."+i.item+":visible",h);if(j.length){h=a(j[0]);j=a(j[j.length-1]);var l=this.get_selected()||[];clearTimeout(this.ignore_mouseover.timeout);this._ignore_mouseover=false;if(b)if(c)this._goto(h);else if(l.length)if(l[0]==h[0]){h.removeClass(i.selected);
this.input.val(this.input.data("original.suggest"));this.hoverout_list()}else this._goto(l.prevAll("."+i.item+":visible:first"));else this._goto(j);else if(e)this._goto(j);else if(l.length)if(l[0]==j[0]){j.removeClass(i.selected);this.input.val(this.input.data("original.suggest"));this.hoverout_list()}else this._goto(l.nextAll("."+i.item+":visible:first"));else this._goto(h)}}else b||this.textchange()},_goto:function(b){b.trigger("mouseover.suggest");var c=b.data("data.suggest");this.input.val(c?
c.name:this.input.data("original.suggest"));this.scroll_to(b)},scroll_to:function(b){var c=this.list,e=c.scrollTop(),i=e+c.innerHeight(),h=b.outerHeight();b=b.prevAll().length*h;h=b+h;if(b<e){this.ignore_mouseover();c.scrollTop(b)}else if(h>i){this.ignore_mouseover();c.scrollTop(e+h-i)}},textchange:function(){this.input.removeData("data.suggest");this.input.trigger("fb-textchange",this);var b=this.input.val();if(b==="")this.status_start();else{this.status_loading();this.request(b)}},request:function(){},
response:function(b){if(b){"cost"in b&&this.trackEvent(this.name,"response","cost",b.cost);if(this.check_response(b)){var c=[];if(a.isArray(b))c=b;else if("result"in b)c=b.result;var e=a.map(arguments,function(m){return m});this.response_hook.apply(this,e);var i=null,h=this,j=this.options;a.each(c,function(m,n){if(!n.id&&n.mid)n.id=n.mid;var r=h.create_item(n,b).bind("mouseover.suggest",function(q){h.mouseover_item(q)});r.data("data.suggest",n);h.list.append(r);if(m===0)i=r});this.input.data("original.suggest",
this.input.val());if(a("."+j.css.item,this.list).length===0&&j.nomatch){c=a('<li class="fbs-nomatch">');if(typeof j.nomatch==="string")c.text(j.nomatch);else{j.nomatch.title&&c.append(a('<em class="fbs-nomatch-text">').text(j.nomatch.title));j.nomatch.heading&&c.append(a("<h3>").text(j.nomatch.heading));if((j=j.nomatch.tips)&&j.length){var l=a('<ul class="fbs-search-tips">');a.each(j,function(m,n){l.append(a("<li>").text(n))});c.append(l)}}c.bind("click.suggest",function(m){m.stopPropagation()});
this.list.append(c)}e.push(i);this.show_hook.apply(this,e);this.position();this.pane_show()}}},pane_show:function(){var b=false;if(a("> li",this.list).length)b=true;b||this.pane.children(":not(."+this.options.css.list+")").each(function(){if(a(this).css("display")!="none"){b=true;return false}});if(b)if(this.options.animate){var c=this;this.pane.slideDown("fast",function(){c.input.trigger("fb-pane-show",c)})}else{this.pane.show();this.input.trigger("fb-pane-show",this)}else{this.pane.hide();this.input.trigger("fb-pane-hide",
this)}},create_item:function(b){var c=this.options.css,e=a("<li>").addClass(c.item);b=a("<label>").text(b.name);e.append(a("<div>").addClass(c.item_name).append(b));return e},mouseover_item:function(b){if(!this._ignore_mouseover){b=b.target;if(b.nodeName.toLowerCase()!=="li")b=a(b).parents("li:first");var c=a(b),e=this.options.css;a("."+e.item,this.list).each(function(){this!==c[0]&&a(this).removeClass(e.selected)});if(!c.hasClass(e.selected)){c.addClass(e.selected);this.mouseover_item_hook(c)}}},
mouseover_item_hook:function(){},hoverover_list:function(){},hoverout_list:function(){},check_response:function(){return true},response_hook:function(){this.list.empty()},show_hook:function(){this.status_select()},position:function(){var b=this.pane,c=this.options;if(!c.parent){if(!self._position){var e=this.input,i=e.offset(),h=e.outerWidth(true),j=e.outerHeight(true);i.top+=j;var l=b.outerWidth(),m=b.outerHeight(),n=i.top+m/2,r=a(window).scrollLeft();e=a(window).scrollTop();var q=a(window).width(),
o=a(window).height()+e,p=true;if("left"==c.align)p=true;else if("right"==c.align)p=false;else if(i.left>r+q/2)p=false;if(!p){p=i.left-(l-h);if(p>r)i.left=p}if(n>o){c=i.top-j-m;if(c>e)i.top=c}this._position=i}b.css({top:this._position.top,left:this._position.left})}},ignore_mouseover:function(){this._ignore_mouseover=true;var b=this;this.ignore_mouseover.timeout=setTimeout(function(){b.ignore_mouseover_reset()},1E3)},ignore_mouseover_reset:function(){this._ignore_mouseover=false},get_selected:function(){var b=
null,c=this.options.css.selected;a("li",this.list).each(function(){var e=a(this);if(e.hasClass(c)&&e.is(":visible")){b=e;return false}});return b},onselect:function(b){var c=b.data("data.suggest");if(c){this.input.val(c.name).data("data.suggest",c).trigger("fb-select",c);this.trackEvent(this.name,"fb-select","index",b.prevAll().length)}},trackEvent:function(b,c,e,i){this.input.trigger("fb-track-event",{category:b,action:c,label:e,value:i})},hide_all:function(){this.pane.hide();this.input.trigger("fb-pane-hide",
this)}};a.extend(a.suggest,{defaults:{status:["Start typing to get suggestions...","Searching...","Select an item from the list:","Sorry, something went wrong. Please try again later"],soft:false,nomatch:"no matches",css:{pane:"fbs-pane",list:"fbs-list",item:"fbs-item",item_name:"fbs-item-name",selected:"fbs-selected",status:"fbs-status"},css_prefix:null,parent:null,animate:false,zIndex:null},strongify:function(b,c){var e,i=b.toLowerCase().indexOf(c.toLowerCase());if(i>=0){var h=c.length;e=document.createTextNode(b.substring(0,
i));var j=a("<strong>").text(b.substring(i,i+h));i=document.createTextNode(b.substring(i+h));e=a("<div>").append(e).append(j).append(i)}else e=a("<div>").text(b);return e},keyCode:{CAPS_LOCK:20,CONTROL:17,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ENTER:108,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,OPTION:18,APPLE:224},is_char:function(b){if(b.type==="keypress")if((b.metaKey||b.ctrlKey)&&b.charCode===118)return true;else{if("isChar"in b)return b.isChar}else{var c=
a.suggest.keyCode.not_char;if(!c){c={};a.each(a.suggest.keyCode,function(e,i){c[""+i]=1});a.suggest.keyCode.not_char=c}return!(""+b.keyCode in c)}},parse_input:function(b){for(var c=/(\S+)\:(?:\"([^\"]+)\"|(\S+))/g,e=b,i=[],h={},j=c.exec(b);j;){if(j[1]in g)h[j[1]]=a.isEmptyObject(j[2])?j[3]:j[2];else i.push(j[0]);e=e.replace(j[0],"");j=c.exec(b)}e=a.trim(e.replace(/\s+/g," "));return[e,i,h]},mqlkey_fast:/^[_A-Za-z0-9][A-Za-z0-9_-]*$/,mqlkey_slow:/^(?:[A-Za-z0-9]|\$[A-F0-9]{4})(?:[A-Za-z0-9_-]|\$[A-F0-9]{4})*$/,
check_mql_key:function(b){if(a.suggest.mqlkey_fast.test(b))return true;else if(a.suggest.mqlkey_slow.test(b))return true;return false},check_mql_id:function(b){if(b.indexOf("/")===0){b=b.split("/");b.shift();if(!(b.length==1&&b[0]===""))for(var c=0,e=b.length;c<e;c++)if(!a.suggest.check_mql_key(b[c]))return false;return true}else return false}});var d={_destroy:a.suggest.prototype._destroy,show_hook:a.suggest.prototype.show_hook};a.suggest("suggest",{_init:function(){var b=this,c=this.options;if(c.flyout_service_url==
null)c.flyout_service_url=c.service_url;this.flyout_url=c.flyout_service_url;if(c.flyout_service_path)this.flyout_url+=c.flyout_service_path;this.flyout_url=this.flyout_url.replace(/\$\{key\}/g,c.key);if(c.flyout_image_service_url==null)c.flyout_image_service_url=c.service_url;this.flyout_image_url=c.flyout_image_service_url;if(c.flyout_image_service_path)this.flyout_image_url+=c.flyout_image_service_path;this.flyout_image_url=this.flyout_image_url.replace(/\$\{key\}/g,c.key);if(!a.suggest.cache)a.suggest.cache=
{};if(c.flyout){this.flyoutpane=a('<div style="display:none;" class="fbs-reset">').addClass(c.css.flyoutpane);if(c.flyout_parent)a(c.flyout_parent).append(this.flyoutpane);else{this.flyoutpane.css("position","absolute");c.zIndex&&this.flyoutpane.css("z-index",c.zIndex);a(document.body).append(this.flyoutpane)}this.flyoutpane.hover(function(e){b.hoverover_list(e)},function(e){b.hoverout_list(e)}).bind("mousedown.suggest",function(e){e.stopPropagation();b.pane.click()});if(!a.suggest.flyout)a.suggest.flyout=
{};if(!a.suggest.flyout.cache)a.suggest.flyout.cache={}}},_destroy:function(){d._destroy.call(this);this.flyoutpane&&this.flyoutpane.remove();this.input.removeData("request.count.suggest");this.input.removeData("flyout.request.count.suggest")},shift_enter:function(){if(this.options.suggest_new){this.suggest_new();this.hide_all()}},hide_all:function(){this.pane.hide();this.flyoutpane&&this.flyoutpane.hide();this.input.trigger("fb-pane-hide",this);this.input.trigger("fb-flyoutpane-hide",this)},request:function(b,
c){var e=this,i=this.options,h=b,j=i.ac_param.filter||[],l=null;if(a.type(j)==="string")j=[j];j=j.slice();if(i.advanced){var m=a.suggest.parse_input(h);h=m[0];m[1].length&&j.push("(all "+m[1].join(" ")+")");l=m[2];if(a.suggest.check_mql_id(h)){j.push('(all mid:"'+h+'")');h=""}}m={};m[i.query_param_name]=h;if(c)m.cursor=c;a.extend(m,i.ac_param,l);if(j.length)m.filter=j;var n=i.service_url+i.service_path+"?"+a.param(m,true);if(h=a.suggest.cache[n])this.response(h,c?c:-1,true);else{clearTimeout(this.request.timeout);
var r={url:i.service_url+i.service_path,data:m,traditional:true,beforeSend:function(){var q=e.input.data("request.count.suggest")||0;q||e.trackEvent(e.name,"start_session");q+=1;e.trackEvent(e.name,"request","count",q);e.input.data("request.count.suggest",q)},success:function(q){a.suggest.cache[n]=q;q.prefix=b;e.response(q,c?c:-1)},error:function(q){e.status_error();e.trackEvent(e.name,"request","error",{url:this.url,response:q?q.responseText:""});e.input.trigger("fb-error",Array.prototype.slice.call(arguments))},
complete:function(q){q&&e.trackEvent(e.name,"request","tid",q.getResponseHeader("X-Metaweb-TID"))},dataType:"jsonp",cache:true};this.request.timeout=setTimeout(function(){a.ajax(r)},i.xhr_delay)}},create_item:function(b,c){var e=this.options.css,i=a("<li>").addClass(e.item),h=a("<label>").append(a.suggest.strongify(b.name||b.id,c.prefix)),j=a("<div>").addClass(e.item_name).append(h);b.under&&a(":first",h).append(a("<small>").text(" ("+b.under+")"));i.append(j);h=b.notable;e=a("<div>").addClass(e.item_type);
if(h&&h.name)e.text(h.name);else this.options.show_id&&b.id&&e.text(b.id);j.prepend(e);return i},mouseover_item_hook:function(b){b=b.data("data.suggest");this.options.flyout&&b&&this.flyout_request(b)},check_response:function(b){return b.prefix===this.input.val()},response_hook:function(b,c){this.flyoutpane&&this.flyoutpane.hide();c>0?a(".fbs-more",this.pane).remove():this.list.empty()},show_hook:function(b,c,e){d.show_hook.apply(this,[b]);var i=this.options,h=this,j=this.pane,l=this.list,m=b.result,
n=a(".fbs-more",j),r=a(".fbs-suggestnew",j);a(".fbs-status",j);var q=b.correction;if(q&&q.length){var o=a('<a class="fbs-spell-link" href="#">').append(q[0]).bind("click.suggest",function(p){p.preventDefault();p.stopPropagation();h.input.val(q[0]).trigger("textchange")});h.status.empty().append("Search instead for ").append(o).show()}if(m&&m.length&&"cursor"in b){if(!n.length){m=a('<a class="fbs-more-link" href="#" title="(Ctrl+m)">view more</a>');n=a('<div class="fbs-more">').append(m);m.bind("click.suggest",
function(p){p.preventDefault();p.stopPropagation();p=a(this).parent(".fbs-more");h.more(p.data("cursor.suggest"))});l.after(n)}n.data("cursor.suggest",b.cursor);n.show()}else n.remove();if(i.suggest_new){if(!r.length){b=a('<button class="fbs-suggestnew-button">');b.text(i.suggest_new);r=a('<div class="fbs-suggestnew">').append('<div class="fbs-suggestnew-description">Your item not in the list?</div>').append(b).append('<span class="fbs-suggestnew-shortcut">(Shift+Enter)</span>').bind("click.suggest",
function(p){p.stopPropagation();h.suggest_new(p)});j.append(r)}r.show()}else r.remove();if(e&&e.length&&c>0){c=e.prevAll().length*e.outerHeight();l.scrollTop();l.animate({scrollTop:c},"slow",function(){e.trigger("mouseover.suggest")})}},suggest_new:function(){var b=this.input.val();if(b!==""){this.input.data("data.suggest",b).trigger("fb-select-new",b);this.trackEvent(this.name,"fb-select-new","index","new");this.hide_all()}},more:function(b){if(b){var c=this.input.data("original.suggest");c!==null&&
this.input.val(c);this.request(this.input.val(),b);this.trackEvent(this.name,"more","cursor",b)}return false},flyout_request:function(b){var c=this,e=this.options,i=this.flyoutpane.data("data.suggest");if(i&&b.id===i.id){if(!this.flyoutpane.is(":visible")){this.flyout_position(this.get_selected());this.flyoutpane.show();this.input.trigger("fb-flyoutpane-show",this)}}else if((i=a.suggest.flyout.cache[b.id])&&i.id&&i.html)this.flyout_response(i);else{var h=b.id,j={url:this.flyout_url.replace(/\$\{id\}/g,
b.id),traditional:true,beforeSend:function(){var l=c.input.data("flyout.request.count.suggest")||0;l+=1;c.trackEvent(c.name,"flyout.request","count",l);c.input.data("flyout.request.count.suggest",l)},success:function(l){l["req:id"]=h;l.html=a.suggest.suggest.create_flyout(l,c.flyout_image_url);a.suggest.flyout.cache[h]=l;c.flyout_response(l)},error:function(l){c.trackEvent(c.name,"flyout","error",{url:this.url,response:l?l.responseText:""})},complete:function(l){l&&c.trackEvent(c.name,"flyout","tid",
l.getResponseHeader("X-Metaweb-TID"))},dataType:"jsonp",cache:true};if(e.flyout_lang)j.data={lang:e.flyout_lang};clearTimeout(this.flyout_request.timeout);this.flyout_request.timeout=setTimeout(function(){a.ajax(j)},e.xhr_delay);this.input.trigger("fb-request-flyout",j)}},flyout_response:function(b){var c=this.pane,e=this.get_selected()||[];if(c.is(":visible")&&e.length)if((c=e.data("data.suggest"))&&b["req:id"]===c.id&&b.html){this.flyoutpane.html(b.html);this.flyout_position(e);this.flyoutpane.show().data("data.suggest",
c);this.input.trigger("fb-flyoutpane-show",this)}},flyout_position:function(b){if(!this.options.flyout_parent){var c=this.pane,e=this.flyoutpane,i=this.options.css,h=f,j={top:parseInt(e.css("top"),10),left:parseInt(e.css("left"),10)},l=c.offset(),m=c.outerWidth(),n=e.outerHeight(),r=e.outerWidth();if(this.options.flyout==="bottom"){h=l;m=this.input.offset();if(l.top<m.top)h.top-=n;else h.top+=c.outerHeight();e.addClass(i.flyoutpane+"-bottom")}else{h=b.offset();b=b.outerHeight();h.left+=m;var q=h.left+
r;c=a(document.body).scrollLeft();var o=a(window).width()+c;h.top=h.top+b-n;if(h.top<l.top)h.top=l.top;if(q>o){l=h.left-(m+r);if(l>c)h.left=l}e.removeClass(i.flyoutpane+"-bottom")}h.top===j.top&&h.left===j.left||e.css({top:h.top,left:h.left})}},hoverout_list:function(){this.flyoutpane&&!this.get_selected()&&this.flyoutpane.hide()}});a.extend(a.suggest.suggest,{defaults:{filter:null,spell:"always",exact:false,scoring:null,lang:null,key:null,prefixed:true,stemmed:null,format:null,advanced:true,show_id:true,
query_param_name:"query",service_url:"https://www.googleapis.com/freebase/v1",service_path:"/search",align:null,flyout:true,flyout_service_url:null,flyout_service_path:"/topic${id}?filter=suggest&limit=3&key=${key}",flyout_image_service_url:null,flyout_image_service_path:"/image${id}?maxwidth=75&key=${key}",flyout_parent:null,suggest_new:null,nomatch:{title:"No suggested matches",heading:"Tips on getting better suggestions:",tips:["Enter more or fewer characters","Add words related to your original search",
"Try alternate spellings","Check your spelling"]},css:{item_type:"fbs-item-type",flyoutpane:"fbs-flyout-pane"},xhr_delay:200},get_values:function(b,c){var e=b.property;return e&&e[c]&&e[c].values?e[c].values:null},get_first_value:function(b,c){var e=a.suggest.suggest.get_values(b,c);if(e&&e.length>0)return e[0];return null},create_flyout:function(b,c){var e=a.suggest.suggest.get_values,i=a.suggest.suggest.get_first_value,h=i(b,"/type/object/name");h=h?h.text:b.id;var j=i(b,"/common/topic/description")||
i(b,"/common/topic/article")||false;if(j)j=j.text;if(i=i(b,"/common/topic/image")||false)i=c.replace(/\$\{id\}/g,b.id);var l=[],m=[b.id],n=e(b,"/common/topic/notable_properties");n&&a.each(n,function(p,u){var t=e(b,u.id);if(t&&t.length){t=a.map(t,function(s){return s.text}).join(", ");l.push([u.text||u.id,t])}});n=e(b,"/common/topic/notable_for");var r=e(b,"/common/topic/notable_types");if(n||r){var q={};m=[];a.each([n,r],function(p,u){u&&u.forEach(function(t){if(t.id&&!q[t.id]){m.push(t.text);q[t.id]=
true}})})}m=m.join(", ");var o=a('<div class="fbs-flyout-content">');o.append(a('<h1 id="fbs-flyout-title">').text(h));a.each(l,function(p,u){o.append(a('<h3 class="fbs-topic-properties">').append(a("<strong>").text(u[0]+": ")).append(document.createTextNode(u[1])))});j&&o.append(a('<p class="fbs-topic-article">').text(j));if(i){o.children().addClass("fbs-flyout-image-true");o.prepend(a('<img id="fbs-topic-image" class="fbs-flyout-image-true" src="'+i+'">'))}h=a('<span class="fbs-flyout-types">').append(m);
h=a('<div class="fbs-attribution">').append(h);return a("<div>").append(o).append(h).html()}});document.createElement("input")})(jQuery);(function(a){window.freebase=window.fb={mwLWTReloading:false};window.SERVER&&typeof window.SERVER==="object"&&a.extend(window.freebase,window.SERVER);a.cookie=window.freebase.cookie})(jQuery);
(function(a,f){if(!f.datelineReloading){if(!window.console)window.console={log:a.noop,info:a.noop,debug:a.noop,warn:a.noop,error:a.noop};f.dispatch=function(d,b,c,e){if(typeof b!=="function")return false;d=a.event.fix(d||window.event);c||(c=[]);e||(e=this);return b.apply(e,[d].concat(c))};f.get_script=function(d,b){var c=f.get_script.cache,e=c[d];if(e)if(e.state===1)e.callbacks.push(b);else e.state===4&&b();else{e=c[d]={state:0,callbacks:[b]};a.ajax({url:d,dataType:"script",beforeSend:function(){e.state=
1},success:function(){e.state=4;a.each(e.callbacks,function(i,h){h()})},error:function(){e.state=-1}})}};f.get_script.cache={};a(window).bind("fb.user.signedin",function(d,b){f.user=b;var c=a("#nav-username");if(c.length){c[0].href+=f.user.id.substring(1);var e=f.h.image_url(b.id,{maxwidth:25,maxheight:25,mode:"fillcropmid"});e=a('<a class="user-thumb" href="'+b.id+'"><img src="'+e+'" /></a>');c.prepend(e)}a("#signedin").show();a(".signedin").show()}).bind("fb.user.signedout",function(){a("#signedout").show();
a(".signedout").show()}).bind("fb.user.unauthorized",function(){window.location.href=f.h.fb_url("/account/signin",{onsignin:window.location.href})}).bind("fb.user.feedback",function(d,b){if(confirm("Uh oh! Something went wrong. Please report this using our feedback tool."))try{userfeedback.api.startFeedback({productId:"68931",disableScrolling:false},b);return false}catch(c){}});var k=a.cookie("fb-account-name");if(k){var g={id:"/user/"+k,name:k};setTimeout(function(){a(window).trigger("fb.user.signedin",
g);var d=f.h.ajax_url("lib/template/refresh_credentials"),b=a("<iframe name='rc'></iframe>").attr("src",d).hide().appendTo("body").load(function(){var c=parseInt(a("body",window.rc.document).text(),10)-(new Date).getTime();c&&c>0&&setTimeout(function(){a(b).attr("src",d)},c)})},0)}else setTimeout(function(){a(window).trigger("fb.user.signedout")},0);f.window_position=function(){var d={};if(typeof window.innerWidth=="number"){d.width=window.outerWidth;d.height=window.outerHeight;d.top=window.screenY;
d.left=window.screenX}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){d.width=document.body.clientWidth;d.height=document.body.clientHeight;d.top=window.screenTop;d.left=window.screenLeft}return d};f.status=function(){function d(){e&&e.slideUp(300);l=null;return false}function b(m,n,r,q){if(e===null){e=a("#page-state");i=a(".status-msg",e);h=a(".close-msg",e);h.click(d)}if(l==="error")console.warn("MessagePanel: Already displaying error. Ignoring: ",
m,n);else{e.hide();a.each(c,function(o,p){e.removeClass(p)});e.addClass(m);i.text(n);l=m;window.clearTimeout(j);if(q){h.show();e.slideDown(300)}else{h.hide();e.slideDown(300);j=window.setTimeout(d,r)}}return false}var c=["notice","info","warning","success","error"],e=null,i=null,h=null,j=null,l=null;return{doing:function(m){return b("notice",m,2E6)},info:function(m,n){return b("info",m,4E3,n)},warning:function(m,n){return b("warning",m,4E3,n)},success:function(m,n){return b("success",m,6E3,n)},error:function(m,
n){return b("error",m,6E3,n)},clear:function(){window.clearTimeout(j);l==="error"?console.warn("MessagePanel: Displaying error. Ignoring clearing status."):d()}}}();f.popup=function(d,b,c,e){b=b||300;c=c||300;var i=f.window_position(),h=Math.floor((i.width-b)/2)+i.left;i=Math.floor((i.height-c)/2)+i.top;if(/chrome/.test(navigator.userAgent.toLowerCase()))c+=50;b={width:b,height:c,top:i,left:h,directories:"no",location:"no",menubar:"no",resizable:"no",scrollbars:"yes",status:"no",toolbar:"no"};c=[];
for(var j in b)c.push(j+"="+b[j]);return window.open(d,e||"",c.join())};f.login_popup=function(d){d||(d=function(){window.location.reload()});var b=f.popup("/account/signin",900,600,"Freebase");if(b.opener==null)b.opener=self;window.onsignin=d;window.focus&&b.focus();return false};f.logout_popup=function(d){d||(d=function(){window.location.reload()});var b=f.popup("/account/signout",900,600,"Freebase");if(b.opener==null)b.opener=self;window.onsignout=d;window.focus&&b.focus();return false};a(function(){var d=
a("#header > #nav-utilities > .language-picker"),b=a(".current-lang",d);a("select",d).bind("change",function(){var c=a(this).find(":selected").text();b.text(c)})});a(function(){f.suggest_lang={SUPPORTED:{en:1,es:1,fr:1,de:1,it:1,pt:1,zh:1,ja:1,ko:1,ru:1,sv:1,fi:1,da:1,nl:1,el:1,ro:1,tr:1,hu:1},lang:function(d){d=f.h.lang_code(d||f.lang||"/lang/en");if(f.suggest_lang.SUPPORTED[d])if(d!=="en")return d+",en";return"en"}};f.suggest_options={service_defaults:{status:["","Searching...","Select an item from the list:"],
service_url:f.h.fb_googleapis_url(),key:f.acre.freebase.api_key,lang:f.suggest_lang.lang()},filter:{operator:function(){var d=Array.prototype.slice.call(arguments),b=d.shift();if(!(b==="any"||b==="all"||b==="should"))throw"Invalid search operator: "+b;var c=[b];if(b==="should"&&d.length>1){d=["any"].concat(d);c.push(f.suggest_options.filter.operator.apply(null,d))}else c=c.concat(d);return"("+c.join(" ")+")"},any:function(){var d=Array.prototype.slice.call(arguments);d.unshift("any");return f.suggest_options.filter.operator.apply(null,
d)},all:function(){var d=Array.prototype.slice.call(arguments);d.unshift("all");return f.suggest_options.filter.operator.apply(null,d)},should:function(){var d=Array.prototype.slice.call(arguments);d.unshift("should");return f.suggest_options.filter.operator.apply(null,d)}},any:function(){var d=a.extend({},f.suggest_options.service_defaults);d.filter=f.suggest_options.filter.any.apply(null,arguments);return d},all:function(){var d=a.extend({},f.suggest_options.service_defaults);d.filter=f.suggest_options.filter.all.apply(null,
arguments);return d},should:function(){var d=a.extend({},f.suggest_options.service_defaults);d.filter=f.suggest_options.filter.should.apply(null,arguments);return d},search:function(){return a.extend({},f.suggest_options.service_defaults,{status:null,parent:"#site-search-box",align:"right"})},instance:function(d,b,c){var e=["type:"+d];a.each(["user","domain","type"],function(h,j){if(d==="/freebase/"+j+"_profile"){e.push("type:/type/"+j);return false}});d==="/book/book_subject"&&e.push("type:/base/skosbase/skos_concept");
var i=null;if(f.h.is_metaweb_system_type(d))i=f.suggest_options.any.apply(null,e);else{i=f.suggest_options.should.apply(null,e);if(b)i.suggest_new="Create new"}if(c)i.lang=f.suggest_lang.lang(c);return i},cotype:function(){return a.extend({scoring:"schema"},f.suggest_options.all.apply(null,["type:/type/type","(not namespace:/type)","(not namespace:/freebase)","(any (not namespace:/common) (any mid:/m/01c5 mid:/m/02_1_m4 mid:/m/03hc3d_))"]))},included_type:function(){return f.suggest_options.cotype()},
expected_type:function(){return a.extend({scoring:"schema"},f.suggest_options.all.apply(null,["type:/type/type"]))},delegate_property:function(){return a.extend({scoring:"schema"},f.suggest_options.all.apply(null,["type:/type/property","(not namespace:/type/object)"]))}}});a(function(){var d=a("#SearchBox .SearchBox-input,#fb-search-input"),b=a("#fb-search");d.suggest(f.suggest_options.search());var c=a("#site-search-label"),e=a("#site-search-box .fbs-pane");d.bind("fb-select",function(i,h){var j=
{};a(this).siblings("input[type=hidden]").each(function(){j[this.name]=this.value});window.location=f.h.fb_url(h.id,j);return false}).bind("fb-pane-show",function(){c.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",function(){a.trim(d.val())===""?c.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):c.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){c.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){if(!c.is(":visible")){a("#site-search-label").slideDown("fast");
b.addClass("active")}}).blur(function(){if(!e.is(":visible")&&c.is(":visible")){a("#site-search-label").slideUp("fast");b.removeClass("active")}});a(".SearchBox-form").submit(function(){return a.trim(a("#fb-search-input").val()).length==0?false:true})});f.disable=function(d){a(d).attr("disabled","disabled").addClass("disabled")};f.enable=function(d){a(d).removeAttr("disabled").removeClass("disabled")};f.lang_select=function(d,b){if(b==="/lang/en"){a(this).removeAttr("name");if(!a(":input[name]",this.form).length){window.location=
a(this.form).attr("action");return}}this.form.submit()};f.devbar={div:a("#devbar"),touch:function(){/\.(freebase|sandbox\-freebase)\.com$/.test(f.acre.request.server_name)?a.ajax({url:f.acre.freebase.googleapis_url?f.h.fb_googleapis_url("/touch"):f.h.fb_api_url("/api/service/touch"),dataType:"jsonp"}):a.ajax({url:"/acre/touch"});return false},txn_ids:[],txn:function(){return f.devbar.view_txn(this.href,f.devbar.txn_ids)},view_txn:function(d,b){if(b&&b.length)window.location=d+"?"+a.param({tid:b},
true);return false},ajaxComplete:function(d){if(d&&d.readyState===4)(d=d.getResponseHeader("x-metaweb-tid"))&&f.devbar.txn_ids.push(d)},init:function(){$nav_user_controls=a(".nav-user-controls");$user_controls=a("#user-controls");a("#signedin .trigger").click(function(){if($user_controls.is(":hidden")){$user_controls.fadeIn();$nav_user_controls.addClass("active")}else{$user_controls.fadeOut();$nav_user_controls.removeClass("active")}return false});a("html").click(function(){if($user_controls.is(":visible")){$user_controls.fadeOut();
$nav_user_controls.removeClass("active")}});$user_controls.click(function(d){d.stopPropagation()});a("#devbar-touch > a").click(f.devbar.touch);f.tid&&f.devbar.txn_ids.push(f.tid);a("#devbar-txn > a").click(f.devbar.txn);a.ajaxSetup({complete:function(){f.devbar.ajaxComplete.apply(null,arguments)},error:function(d){var b=this,c={};a.each(["url","data","dataType","type"],function(e,i){c[i]=b[i]});a.each(["status","statusText","responseText"],function(e,i){c[i]=d[i]});c.responseHeaders=d.getAllResponseHeaders()}})}};
f.devbar.init();f.mqlread=function(d,b,c){var e;if(f.acre.freebase.googleapis_url){e=f.h.fb_googleapis_url("/mqlread");d={query:JSON.stringify(d),key:f.acre.freebase.api_key}}else{e=f.h.fb_api_url("/api/service/mqlread");d={query:JSON.stringify({query:d})}}return a.ajax({url:e,data:d,dataType:"jsonp",success:function(i){b&&b.apply(this,[i.result])},error:function(){c&&c.apply(this,arguments)}})};a(function(){f.hover={pane:"#fb-topic-hover-pane",current_target:null,cache:{},topic_url:f.h.fb_googleapis_url()+
"/topic${id}?filter=suggest&limit=3&key="+f.acre.freebase.api_key+"&lang="+f.h.lang_code(f.lang),image_url:f.h.fb_googleapis_url()+"/image${id}?maxwidth=75&key="+f.acre.freebase.api_key,show:function(){function d(){if(b===f.hover.current_target){a(f.hover.pane).html(f.hover.cache[c]);var e=a(f.hover.pane).height(),i=a(b).height(),h=a(b).offset(),j=h.left;h=h.top;if(h-a(document).scrollTop()+e<a(window).height())h+=i;else h=h-e-i;a(f.hover.pane).css({top:h,left:j}).show()}}var b=this,c=a(b).attr("data-id");
if(c){f.hover.current_target=b;a(b).removeAttr("title");f.hover.cache[c]?d():a.ajax({url:f.hover.topic_url.replace(/\$\{id\}/g,c),success:function(e){e=a.suggest.suggest.create_flyout(e,f.hover.image_url);f.hover.cache[c]=e;d()},dataType:"jsonp",cache:true})}},hide:function(){f.hover.current_target=null;a(f.hover.pane).hide()}};a("#page-content").on("mouseover","a.property-value",f.hover.show).on("mouseout","a.property-value",f.hover.hide)})}})(jQuery,window.freebase);
(function(a,f){var k=f.h={type:a.type||function(){var g={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(d){g["[object "+d+"]"]=d.toLowerCase()});return function(d){return d==null?String(d):g[Object.prototype.toString.call(d)]||"object"}}(),parse_params:function(g){if(a.isArray(g)){var d={};a.each(g,function(b,c){d[c[0]]=c[1]});return d}return g},build_url:function(g){if(g&&g.indexOf("://")===-1)throw"Host must contain scheme: "+g;var d=g||"",b,c;if(arguments.length>
1){b=Array.prototype.slice.call(arguments);b.shift();for(var e=[],i=0,h=b.length;i<h;i++){var j=b[i];if(k.type(j)==="string")e.push(j);else{c={};for(i=i;i<h;i++)c=a.extend(c,k.parse_params(b[i]));break}}b=e.join("")}if(b&&b.indexOf("/")!==0)throw"Path must begin with a '/': "+b;if(b)d+=b;if(d==="")d="/";a.isEmptyObject(c)||(d+="?"+a.param(c,true));return d},fb_url:function(){var g=Array.prototype.slice.call(arguments);g.unshift(null);f.lang&&f.lang!=="/lang/en"&&g.push({lang:k.lang_code(f.lang)});
return k.build_url.apply(null,g)},ajax_url:function(){var g=Array.prototype.slice.call(arguments);g.unshift("/ajax");return k.reentrant_url.apply(null,g)},static_url:function(){var g=Array.prototype.slice.call(arguments);g.unshift("/static");return k.reentrant_url.apply(null,g)},reentrant_url:function(g,d){d=k.resolve_reentrant_path(d);d=d.replace(/^\/\//,g+"/");var b=Array.prototype.slice.call(arguments,2);b.unshift(d);b.unshift(null);return k.build_url.apply(null,b)},resolve_reentrant_path:function(g){g=
g||"";if(g.indexOf("//")==0)return g;if(g.indexOf("lib/")===0)return f.acre.current_script.app.path+g.substring(3);else{if(g&&g[0]!="/")g="/"+g;return f.acre.request.script.app.path+g}},legacy_fb_url:function(){var g=Array.prototype.slice.call(arguments),d=f.acre.freebase.site_host.replace(/^(https?\:\/\/)([^\.]+)\./,"$1www.").replace(":"+f.acre.request.server_port,"");g.unshift(d);return k.build_url.apply(null,g)},fb_api_url:function(){var g=Array.prototype.slice.call(arguments);g.unshift(f.acre.freebase.service_url);
return k.build_url.apply(null,g)},fb_googleapis_url:function(){if(f.acre.freebase.googleapis_url){var g=Array.prototype.slice.call(arguments);g.unshift(f.acre.freebase.googleapis_url);return k.build_url.apply(null,g)}throw"fb.acre.freebase.googleapis_url is not defined";},wiki_url:function(){var g=Array.prototype.slice.call(arguments);g.unshift("http://wiki.freebase.com","/wiki/");return k.build_url.apply(null,g)},lib_base_url:function(g){g=f.acre.metadata.libs[g];return g.base_url+g.version},image_url:function(g,
d){return f.acre.freebase.imgurl(g,d.maxwidth,d.maxheight,d.mode,d.pad,d.errorid)},is_metaweb_system_type:function(g){return g.indexOf("/type/")===0||g.indexOf("/common/")===0&&g!=="/common/topic"||g.indexOf("/freebase/")===0&&g.indexOf("_profile")===g.length-8},id_key:function(g,d){var b=g.split("/"),c=b.pop();if(d){b=b.join("/");if(b==="")b="/";return[b,c]}else return c},lang_code:function(g){return k.id_key(g)},lang_id:function(g){return"/lang/"+k.lang_code(g)}}})(jQuery,window.freebase);
(function(a,f){var k=f.permission={init:function(){if(f.user){var g=f.c;g&&g.id&&a.ajax({url:f.h.ajax_url("lib/permission/has_permission.ajax"),data:{id:g.id,user_id:f.user.id},dataType:"json",success:function(d){k.has_permission=d.result&&d.result[g.id]===true;a(window).trigger("fb.permission.has_permission",k.has_permission)}});check_permissioned_objects(a(".edit-perm"),f.user.id)}}};a(window).bind("fb.user.signedin",k.init);a(window).bind("fb.permission.has_permission",function(g,d){d?a(".edit").show():
a(".no-edit").show()})})(jQuery,window.freebase);function check_permissioned_objects(a,f){if(a.length&&f){var k={},g=[];$.each(a,function(){var d=$(this).metadata().id;if(d&&!k[d]){g.push(d);k[d]=1}});g.length&&$.ajax({url:fb.h.ajax_url("lib/permission/has_permission.ajax"),data:{id:g,user_id:f},traditional:true,dataType:"json",success:function(d){var b=d.result||{};$.each(a,function(){var c=$(this).metadata().id;c&&b[c]===true?$(this).show():$(this).addClass("edit-perm-lock")})}})}}
(function(a,f){var k=f.incompatible_types={overlay_dialog:null,inline_dialog:null,check:function(g,d,b){b=b||{};a.ajax({url:f.h.ajax_url("lib/incompatible_types/incompatible_types.ajax"),data:{id:g,type:d},dataType:"json",beforeSend:function(){f.status.doing("Checking compatibility...")},success:function(c){c=c.result;if(a.isEmptyObject(c))b.compatible&&b.compatible(g,d);else b.incompatible&&b.incompatible(g,d,c)},error:function(c){f.status.error(c.responseText)},complete:function(){f.status.clear()}})},
overlay_suggest_incompatible_callback:function(g,d){if(!k.overlay_dialog)k.overlay_dialog=a(".incompatible-overlay-dialog");if(k.overlay_dialog.length){d=d||{};return function(b,c,e){k.overlay_dialog.removeData("overlay");a(".modal-content",k.overlay_dialog).empty().append(k.description_html(b,c,e));a(".incompatible-topic",k.overlay_dialog).text(g.val());k.overlay_dialog.overlay({close:"button",closeOnClick:false,load:true,fixed:false,mask:{color:"#000",loadSpeed:200,opacity:0.5},onClose:function(){g.focus().select();
a("button",k.overlay_dialog).unbind();d.onClose&&d.onClose()},onLoad:function(){a(".cancel",k.overlay_dialog).focus().click(function(){g.focus().select().trigger("textchange");d.onCancel&&d.onCancel()});a(".save",k.overlay_dialog).click(function(){g.focus().select();d.onConfirm&&d.onConfirm(b,c)});d.onLoad&&d.onLoad()}})}}else return k.native_confirm_suggest_incompatible_callback(g,d)},inline_suggest_incompatible_callback:function(g,d){if(!k.inline_dialog)k.inline_dialog=a(".incompatible-inline-dialog");
if(k.inline_dialog.length){d=d||{};return function(b,c,e){a(".modal-content",k.inline_dialog).empty().append(k.description_html(b,c,e));a(".incompatible-topic",k.inline_dialog).text(g.val());a(".save",k.inline_dialog).unbind().click(function(){g.focus().select();d.onConfirm&&d.onConfirm(b,c);k.inline_dialog.hide(d.onClose)});a(".cancel",k.inline_dialog).unbind().click(function(){g.focus().select().trigger("textchange");d.onCancel&&d.onCancel();k.inline_dialog.hide(d.onClose)});e=g.offsetParent();
var i=g.position();e.append(k.inline_dialog);k.inline_dialog.css({top:i.top+g.outerHeight(),left:i.left});k.inline_dialog.show(d.onLoad)}}else return k.native_confirm_suggest_incompatible_callback(g,d)},native_confirm_suggest_incompatible_callback:function(g,d){d=d||{};return function(b,c,e){if(confirm(k.description_text(b,c,e))){g.focus().select();d.onConfirm&&d.onConfirm(b,c)}else{g.focus().select().trigger("textchange");d.onCancel&&d.onCancel()}d.onClose&&d.onClose();g.focus().select()}},description_html:function(g,
d,b){var c=a("<div>");a.each(b,function(e,i){c.append(k.reason_html(g,e,i))});c.append("<p>Are you sure you want to continue?<p>");return c},reason_html:function(g,d,b){var c=a('<p><span class="incompatible-topic"></span> is already typed as <b class="incompatible-existing"></b>, it\'s unlikely it should also be typed as <b class="incompatible-type"></b>.</p>');a(".incompatible-topic",c).text(g);a(".incompatible-existing",c).text(d);a(".incompatible-type",c).text(b.join(", "));return c},description_text:function(g,
d,b){return k.description_html(g,d,b).text()}}})(jQuery,window.freebase);
(function(a,f){f.require("dojo.date.stamp");f.require("dojo.date.locale");f.require("dojo.number");var k,g=false,d={"long":1,"short":1,full:1,medium:1},b=/^\d{4}$/,c=/^\d{4}\-\d{2}$/,e=/L/g,i=window.i18n={normalize_pattern:function(h){return h.replace(e,"M")},ize:function(h){i.ize_datetime(h);i.ize_number(h)},ize_datetime:function(h){h=a("time",h).each(function(){var j=a(this);if(j.attr("data-i18n")!=="off"){var l=j.attr("datetime");if(l){var m=j.attr("data-format");l=i.datetime(l,m);j.text(l)}}});
g&&h.attr("dir","rtl");h.css("visibility","visible")},ize_datetime_input:function(h){h=a(h);var j=h.val();if(j!==""){j=i.datetime(j);h.val(j)}g&&h.attr("dir","rtl")},datetime:function(h,j){var l=f.date.stamp.fromISOString(h),m={selector:"date"};if(j)if(d[j])m.formatLength=j;else m.datePattern=k["dateFormatItem-"+j];else m.datePattern=b.test(h)?k["dateFormatItem-y"]:c.test(h)?k["dateFormatItem-yMMM"]:k["dateFormat-long"];if(m.datePattern)m.datePattern=i.normalize_pattern(m.datePattern);return f.date.locale.format(l,
m)},ize_number:function(h){h=a(".number",h).each(function(){var j=a(this);if(j.attr("data-i18n")!=="off"){var l=j.attr("data-value");if(l!=null){l=i.number(l);j.text(l)}}});g&&h.attr("dir","rtl");h.css("visibility","visible")},ize_number_input:function(h){h=a(h);var j=h.val();if(j!==""){j=i.number(j);h.val(j)}g&&h.attr("dir","rtl")},number:function(h){return f&&f.number?f.number.format(h):h},_get_edit_script:function(h,j){i._get_edit_script.loaded?j():a.getScript(h+"/i18n-edit.mf.js",function(){i._get_edit_script.loaded=
1;j()})},text_edit:function(h,j,l,m,n,r){i._get_edit_script(j,function(){i.edit.text_edit_begin(a(h),j,l,m,n,r)});return false}};f.ready(function(){if(f.locale==="ar"||f.locale==="he")g=true;k=f.date.locale._getGregorianBundle();i.ize()})})(jQuery,dojo);
(function(a,f){var k=f.flag={merge:function(g){return k.flag(g,"merge_begin")},split:function(g){return k.flag(g,"split_begin")},"delete":function(g){return k.flag(g,"delete_begin")},offensive:function(g){return k.flag(g,"offensive_begin")},flag:function(g,d){g=a(g);f.get_script(f.h.static_url("lib/flag/flag-edit.mf.js"),function(){k.edit[d](g)});return false},undo:function(g,d){g=a(g);f.get_script(f.h.static_url("lib/flag/flag-edit.mf.js"),function(){k.edit.undo_begin(g,d)});return false}}})(jQuery,
window.freebase);
(function(a){function f(){g();a(this).parents(".headmenu").data("submenu").find("a:first").click();return false}function k(b,c){var e=a(this),i=e.data("submenu");if(!i.is(".submenu-valid")){var h=e.offset(),j=e.outerHeight();j=h.top+j;if(i.is(".center")){e=e.outerWidth();h=h.left+e/2-i.outerWidth()/2}else if(i.is(".right")){e=e.outerWidth();h=h.left+e-i.outerWidth()}else h=h.left;h={display:"none",position:"absolute",top:j,left:h};if(c.overlay)h.zIndex=c.overlay.css("zIndex");i.css(h);a(document.body).append(i);
i.addClass(".submenu-valid")}if(i.is(":visible"))g(i);else{g();i.fadeIn()}return false}function g(b){(b||a(".submenu:visible")).fadeOut()}function d(b){(b||a(".submenu-valid")).each(function(){a(this).removeClass("submenu-valid")})}a.factory("nicemenu",{init:function(){var b=this.options;a(".headmenu",this.element).each(function(){var c=a(this),e=c.next(".submenu");c.data("submenu",e);e.data("headmenu",c);a(".default-action",c).click(f);c.click(function(i){return k.apply(this,[i,b])})});a(".submenu",
this.element).click(function(){g(a(this));a(this).fadeOut()})}});a(document).click(function(){g()}).bind("scroll resize",function(){g();d()})})(jQuery);
(function(a,f){a(function(){a(".nicemenu").nicemenu();a("#description").css("height","auto");var k=a("#page-header .creation-timestamp").width();a("#page-header h1").css("margin-right",k);setTimeout(function(){a("#page-content").css({opacity:1})},0);f.init_search()});f.nav_ajax=function(k){a.getScript(k.href,function(){f.nav_ajax.begin(k)});return false};f.init_search=function(){var k=a("#header #fb-search-input");a(document).keydown(function(g){if(k.is(":focus"))g.keyCode===27&&k.blur();else if(!(this!==
event.target&&(/textarea|select/i.test(event.target.nodeName)||event.target.type==="text")))if(g.keyCode===191){k.focus();return false}})}})(jQuery,window.freebase);
