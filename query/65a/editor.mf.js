
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*
 
 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE 
*/
(function(a){function f(d,c,b){var g=this,e=d.add(this),i=d.find(b.tabs),k=c.jquery?c:d.children(c),f;i.length||(i=d.children());k.length||(k=d.parent().find(c));k.length||(k=a(c));a.extend(this,{click:function(c,d){var k=i.eq(c);"string"==typeof c&&c.replace("#","")&&(c=c.replace(/([\"\#\$\%\&\'\(\)\*\+\,\.\/\:\;\<\=\>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1"),k=i.filter("[href*="+c.replace("#","")+"]"),c=Math.max(i.index(k),0));if(b.rotate){var p=i.length-1;if(0>c)return g.click(p,d);if(c>p)return g.click(0,
d)}if(!k.length){if(0<=f)return g;c=b.initialIndex;k=i.eq(c)}if(c===f)return g;d=d||a.Event();d.type="onBeforeClick";e.trigger(d,[c]);if(!d.isDefaultPrevented())return h[b.effect].call(g,c,function(){d.type="onClick";e.trigger(d,[c])}),f=c,i.removeClass(b.current),k.addClass(b.current),g},getConf:function(){return b},getTabs:function(){return i},getPanes:function(){return k},getCurrentPane:function(){return k.eq(f)},getCurrentTab:function(){return i.eq(f)},getIndex:function(){return f},next:function(){return g.click(f+
1)},prev:function(){return g.click(f-1)},destroy:function(){i.unbind(b.event).removeClass(b.current);k.find("a[href^=#]").unbind("click.T");return g}});a.each(["onBeforeClick","onClick"],function(c,d){a.isFunction(b[d])&&a(g).bind(d,b[d]);g[d]=function(b){a(g).bind(d,b);return g}});b.history&&a.fn.history&&(a.tools.history.init(i),b.event="history");i.each(function(c){a(this).bind(b.event,function(b){g.click(c,b);return b.preventDefault()})});k.find("a[href^=#]").bind("click.T",function(b){g.click(a(this).attr("href"),
b)});location.hash?g.click(location.hash):(0===b.initialIndex||0<b.initialIndex)&&g.click(b.initialIndex)}a.tools=a.tools||{version:"@VERSION"};a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,history:!1},addEffect:function(a,c){h[a]=c}};var h={"default":function(a,c){this.getPanes().hide().eq(a).show();c.call()},fade:function(a,c){var b=this.getConf(),g=b.fadeOutSpeed,e=this.getPanes();g?e.fadeOut(g):e.hide();e.eq(a).fadeIn(b.fadeInSpeed,
c)},slide:function(a,c){this.getPanes().slideUp(200);this.getPanes().eq(a).slideDown(400,c)},ajax:function(a,c){this.getPanes().eq(0).load(this.getTabs().eq(a).attr("href"),c)}},e;a.tools.tabs.addEffect("horizontal",function(d,c){e||(e=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){a(this).hide()});this.getPanes().eq(d).animate({width:e},function(){a(this).show();c.call()})});a.fn.tabs=function(d,c){var b=this.data("tabs");b&&(b.destroy(),this.removeData("tabs"));
a.isFunction(c)&&(c={onBeforeClick:c});c=a.extend({},a.tools.tabs.conf,c);this.each(function(){b=new f(a(this),d,c);a(this).data("tabs",b)});return c.api?b:this}})(jQuery);
(function(a,f){function h(e){return!a(e).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(e,d){return"number"===typeof e?this.each(function(){var c=this;setTimeout(function(){a(c).focus();d&&d.call(c)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;e=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!e.length?a(document):e},zIndex:function(e){if(e!==f)return this.css("zIndex",e);if(this.length)for(var e=a(this[0]),d;e.length&&e[0]!==document;){d=e.css("position");if("absolute"===
d||"relative"===d||"fixed"===d)if(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d)return d;e=e.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(e,d){function c(c,d,g,e){a.each(b,function(){d-=parseFloat(a.curCSS(c,"padding"+this,!0))||0;g&&(d-=parseFloat(a.curCSS(c,"border"+
this+"Width",!0))||0);e&&(d-=parseFloat(a.curCSS(c,"margin"+this,!0))||0)});return d}var b="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),l={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(b){return b===f?l["inner"+d].call(this):this.each(function(){a(this).css(g,c(this,b)+"px")})};a.fn["outer"+d]=function(b,e){return"number"!==typeof b?l["outer"+d].call(this,b):this.each(function(){a(this).css(g,
c(this,b,!0,e)+"px")})}}),a.extend(a.expr[":"],{data:function(e,d,c){return!!a.data(e,c[3])},focusable:function(e){var d=e.nodeName.toLowerCase(),c=a.attr(e,"tabindex");if("area"===d){d=e.parentNode;c=d.name;if(!e.href||!c||"map"!==d.nodeName.toLowerCase())return!1;e=a("img[usemap=#"+c+"]")[0];return!!e&&h(e)}return(/input|select|textarea|button|object/.test(d)?!e.disabled:"a"==d?e.href||!isNaN(c):!isNaN(c))&&h(e)},tabbable:function(e){var d=a.attr(e,"tabindex");return(isNaN(d)||0<=d)&&a(e).is(":focusable")}}),
a(function(){var e=document.body,d=e.appendChild(d=document.createElement("div"));a.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===d.offsetHeight;a.support.selectstart="onselectstart"in d;e.removeChild(d).style.display="none"}),a.extend(a.ui,{plugin:{add:function(e,d,c){var e=a.ui[e].prototype,b;for(b in c)e.plugins[b]=e.plugins[b]||[],e.plugins[b].push([d,c[b]])},call:function(a,d,c){if((d=a.plugins[d])&&a.element[0].parentNode)for(var b=0;b<d.length;b++)a.options[d[b][0]]&&
d[b][1].apply(a.element,c)}},contains:function(a,d){return document.compareDocumentPosition?a.compareDocumentPosition(d)&16:a!==d&&a.contains(d)},hasScroll:function(e,d){if("hidden"===a(e).css("overflow"))return!1;var c=d&&"left"===d?"scrollLeft":"scrollTop",b=!1;if(0<e[c])return!0;e[c]=1;b=0<e[c];e[c]=0;return b},isOverAxis:function(a,d,c){return a>d&&a<d+c},isOver:function(e,d,c,b,g,l){return a.ui.isOverAxis(e,c,g)&&a.ui.isOverAxis(d,b,l)}}))})(jQuery);
(function(a,f){if(a.cleanData){var h=a.cleanData;a.cleanData=function(d){for(var c=0,b;null!=(b=d[c]);c++)a(b).triggerHandler("remove");h(d)}}else{var e=a.fn.remove;a.fn.remove=function(d,c){return this.each(function(){c||(!d||a.filter(d,[this]).length)&&a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return e.call(a(this),d,c)})}}a.widget=function(d,c,b){var g=d.split(".")[0],e,d=d.split(".")[1];e=g+"-"+d;b||(b=c,c=a.Widget);a.expr[":"][e]=function(b){return!!a.data(b,
d)};a[g]=a[g]||{};a[g][d]=function(b,a){arguments.length&&this._createWidget(b,a)};c=new c;c.options=a.extend(!0,{},c.options);a[g][d].prototype=a.extend(!0,c,{namespace:g,widgetName:d,widgetEventPrefix:a[g][d].prototype.widgetEventPrefix||d,widgetBaseClass:e},b);a.widget.bridge(d,a[g][d])};a.widget.bridge=function(d,c){a.fn[d]=function(b){var g="string"===typeof b,e=Array.prototype.slice.call(arguments,1),i=this,b=!g&&e.length?a.extend.apply(null,[!0,b].concat(e)):b;if(g&&"_"===b.charAt(0))return i;
g?this.each(function(){var c=a.data(this,d),g=c&&a.isFunction(c[b])?c[b].apply(c,e):c;if(g!==c&&g!==f)return i=g,!1}):this.each(function(){var g=a.data(this,d);g?g.option(b||{})._init():a.data(this,d,new c(b,this))});return i}};a.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(d,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=a.extend(!0,{},this.options,this._getCreateOptions(),
d);var b=this;this.element.bind("remove."+this.widgetName,function(){b.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(d,c){var b=d;if(0===arguments.length)return a.extend({},this.options);if("string"===typeof d){if(c===f)return this.options[d];b={};b[d]=c}this._setOptions(b);return this},_setOptions:function(d){var c=this;a.each(d,function(b,a){c._setOption(b,a)});return this},_setOption:function(a,c){this.options[a]=c;"disabled"===a&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(d,c,b){var g=this.options[d],c=a.Event(c);c.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();b=b||{};if(c.originalEvent)for(var d=a.event.props.length,e;d;)e=a.event.props[--d],c[e]=c.originalEvent[e];this.element.trigger(c,b);return!(a.isFunction(g)&&!1===g.call(this.element[0],c,b)||c.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(a){return f._mouseDown(a)}).bind("click."+this.widgetName,function(h){if(!0===a.data(h.target,f.widgetName+".preventClickEvent"))return a.removeData(h.target,f.widgetName+".preventClickEvent"),h.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(f){f.originalEvent=
f.originalEvent||{};if(!f.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(f);this._mouseDownEvent=f;var h=this,e=1==f.which,d="string"==typeof this.options.cancel?a(f.target).parents().add(f.target).filter(this.options.cancel).length:!1;if(!e||d||!this._mouseCapture(f))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){h.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)&&(this._mouseStarted=
!1!==this._mouseStart(f),!this._mouseStarted))return f.preventDefault(),!0;this._mouseMoveDelegate=function(a){return h._mouseMove(a)};this._mouseUpDelegate=function(a){return h._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();return f.originalEvent.mouseHandled=!0}},_mouseMove:function(f){if(a.browser.msie&&!(9<=document.documentMode)&&!f.button)return this._mouseUp(f);if(this._mouseStarted)return this._mouseDrag(f),
f.preventDefault();this._mouseDistanceMet(f)&&this._mouseDelayMet(f)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,f))?this._mouseDrag(f):this._mouseUp(f));return!this._mouseStarted},_mouseUp:function(f){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,f.target==this._mouseDownEvent.target&&a.data(f.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(f));
return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){a.ui=a.ui||{};var f=/left|center|right/,h=/top|center|bottom/,e=a.fn.position,d=a.fn.offset;a.fn.position=function(c){if(!c||!c.of)return e.apply(this,arguments);var c=a.extend({},c),b=a(c.of),d=b[0],l=(c.collision||"flip").split(" "),i=c.offset?c.offset.split(" "):[0,0],k,n,j;9===d.nodeType?(k=b.width(),n=b.height(),j={top:0,left:0}):d.setTimeout?(k=b.width(),n=b.height(),j={top:b.scrollTop(),left:b.scrollLeft()}):d.preventDefault?(c.at="left top",k=n=0,j={top:c.of.pageY,left:c.of.pageX}):
(k=b.outerWidth(),n=b.outerHeight(),j=b.offset());a.each(["my","at"],function(){var b=(c[this]||"").split(" ");b.length===1&&(b=f.test(b[0])?b.concat(["center"]):h.test(b[0])?["center"].concat(b):["center","center"]);b[0]=f.test(b[0])?b[0]:"center";b[1]=h.test(b[1])?b[1]:"center";c[this]=b});1===l.length&&(l[1]=l[0]);i[0]=parseInt(i[0],10)||0;1===i.length&&(i[1]=i[0]);i[1]=parseInt(i[1],10)||0;"right"===c.at[0]?j.left+=k:"center"===c.at[0]&&(j.left+=k/2);"bottom"===c.at[1]?j.top+=n:"center"===c.at[1]&&
(j.top+=n/2);j.left+=i[0];j.top+=i[1];return this.each(function(){var b=a(this),d=b.outerWidth(),g=b.outerHeight(),e=parseInt(a.curCSS(this,"marginLeft",true))||0,f=parseInt(a.curCSS(this,"marginTop",true))||0,h=d+e+(parseInt(a.curCSS(this,"marginRight",true))||0),q=g+f+(parseInt(a.curCSS(this,"marginBottom",true))||0),m=a.extend({},j),v;if(c.my[0]==="right")m.left=m.left-d;else if(c.my[0]==="center")m.left=m.left-d/2;if(c.my[1]==="bottom")m.top=m.top-g;else if(c.my[1]==="center")m.top=m.top-g/2;
m.left=Math.round(m.left);m.top=Math.round(m.top);v={left:m.left-e,top:m.top-f};a.each(["left","top"],function(b,e){if(a.ui.position[l[b]])a.ui.position[l[b]][e](m,{targetWidth:k,targetHeight:n,elemWidth:d,elemHeight:g,collisionPosition:v,collisionWidth:h,collisionHeight:q,offset:i,my:c.my,at:c.at})});a.fn.bgiframe&&b.bgiframe();b.offset(a.extend(m,{using:c.using}))})};a.ui.position={fit:{left:function(c,b){var d=a(window),d=b.collisionPosition.left+b.collisionWidth-d.width()-d.scrollLeft();c.left=
0<d?c.left-d:Math.max(c.left-b.collisionPosition.left,c.left)},top:function(c,b){var d=a(window),d=b.collisionPosition.top+b.collisionHeight-d.height()-d.scrollTop();c.top=0<d?c.top-d:Math.max(c.top-b.collisionPosition.top,c.top)}},flip:{left:function(c,b){if("center"!==b.at[0]){var d=a(window),d=b.collisionPosition.left+b.collisionWidth-d.width()-d.scrollLeft(),e="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,f="left"===b.at[0]?b.targetWidth:-b.targetWidth,h=-2*b.offset[0];c.left+=
0>b.collisionPosition.left?e+f+h:0<d?e+f+h:0}},top:function(c,b){if("center"!==b.at[1]){var d=a(window),d=b.collisionPosition.top+b.collisionHeight-d.height()-d.scrollTop(),e="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,f="top"===b.at[1]?b.targetHeight:-b.targetHeight,h=-2*b.offset[1];c.top+=0>b.collisionPosition.top?e+f+h:0<d?e+f+h:0}}}};a.offset.setOffset||(a.offset.setOffset=function(c,b){/static/.test(a.curCSS(c,"position"))&&(c.style.position="relative");var d=a(c),e=d.offset(),
f=parseInt(a.curCSS(c,"top",!0),10)||0,h=parseInt(a.curCSS(c,"left",!0),10)||0,e={top:b.top-e.top+f,left:b.left-e.left+h};"using"in b?b.using.call(c,e):d.css(e)},a.fn.offset=function(c){var b=this[0];return!b||!b.ownerDocument?null:c?this.each(function(){a.offset.setOffset(this,c)}):d.call(this)})})(jQuery);
(function(a,f){var h={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(d){var c=a(this).css(d).offset().top;0>c&&a(this).css("top",d.top-c)}},resizable:!0,
show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var d=this,c=d.options,b=c.title||"&#160;",g=a.ui.dialog.getTitleId(d.element),e=(d.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",
0).keydown(function(b){if(c.closeOnEscape&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){d.close(b);b.preventDefault()}}).attr({role:"dialog","aria-labelledby":g}).mousedown(function(b){d.moveToTop(false,b)});d.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e);var f=(d.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(e),h=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(b){d.close(b);return false}).appendTo(f);(d.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(h);a("<span></span>").addClass("ui-dialog-title").attr("id",g).html(b).prependTo(f);a.isFunction(c.beforeclose)&&!a.isFunction(c.beforeClose)&&
(c.beforeClose=c.beforeclose);f.find("*").add(f).disableSelection();c.draggable&&a.fn.draggable&&d._makeDraggable();c.resizable&&a.fn.resizable&&d._makeResizable();d._createButtons(c.buttons);d._isOpen=!1;a.fn.bgiframe&&e.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();
this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(d){var c=this,b,g;if(!1!==c._trigger("beforeClose",d))return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",d)}):(c.uiDialog.hide(),c._trigger("close",d)),a.ui.dialog.overlay.resize(),c.options.modal&&(b=0,a(".ui-dialog").each(function(){if(this!==c.uiDialog[0]){g=
a(this).css("z-index");isNaN(g)||(b=Math.max(b,g))}}),a.ui.dialog.maxZ=b),c},isOpen:function(){return this._isOpen},moveToTop:function(d,c){var b=this.options;if(b.modal&&!d||!b.stack&&!b.modal)return this._trigger("focus",c);b.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=b.zIndex);this.overlay&&(a.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ));b={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};a.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",
a.ui.dialog.maxZ);this.element.attr(b);this._trigger("focus",c);return this},open:function(){if(!this._isOpen){var d=this.options,c=this.uiDialog;this.overlay=d.modal?new a.ui.dialog.overlay(this):null;this._size();this._position(d.position);c.show(d.show);this.moveToTop(!0);d.modal&&c.bind("keypress.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),c=c.filter(":last");if(b.target===c[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return c.focus(1),
!1}});a(this.element.find(":tabbable").get().concat(c.find(".ui-dialog-buttonpane :tabbable").get().concat(c.get()))).eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(d){var c=this,b=!1,g=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),e=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(g);c.uiDialog.find(".ui-dialog-buttonpane").remove();"object"===typeof d&&null!==d&&a.each(d,function(){return!(b=!0)});b&&(a.each(d,
function(b,d){var d=a.isFunction(d)?{click:d,text:b}:d,g=a('<button type="button"></button>').attr(d,!0).unbind("click").click(function(){d.click.apply(c.element[0],arguments)}).appendTo(e);a.fn.button&&g.button()}),g.appendTo(c.uiDialog))},_makeDraggable:function(){function d(b){return{position:b.position,offset:b.offset}}var c=this,b=c.options,g=a(document),e;c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(g,
f){e="auto"===b.height?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");c._trigger("dragStart",g,d(f))},drag:function(b,a){c._trigger("drag",b,d(a))},stop:function(f,h){b.position=[h.position.left-g.scrollLeft(),h.position.top-g.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(e);c._trigger("dragStop",f,d(h));a.ui.dialog.overlay.resize()}})},_makeResizable:function(d){function c(b){return{originalPosition:b.originalPosition,originalSize:b.originalSize,
position:b.position,size:b.size}}var d=d===f?this.options.resizable:d,b=this,g=b.options,e=b.uiDialog.css("position"),d="string"===typeof d?d:"n,e,s,w,se,sw,ne,nw";b.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:b.element,maxWidth:g.maxWidth,maxHeight:g.maxHeight,minWidth:g.minWidth,minHeight:b._minHeight(),handles:d,start:function(d,g){a(this).addClass("ui-dialog-resizing");b._trigger("resizeStart",d,c(g))},resize:function(a,d){b._trigger("resize",a,c(d))},stop:function(d,
e){a(this).removeClass("ui-dialog-resizing");g.height=a(this).height();g.width=a(this).width();b._trigger("resizeStop",d,c(e));a.ui.dialog.overlay.resize()}}).css("position",e).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(d){var c=[],b=[0,0],g;if(d){if("string"===typeof d||"object"===typeof d&&"0"in d)c=d.split?d.split(" "):[d[0],d[1]],1===c.length&&
(c[1]=c[0]),a.each(["left","top"],function(a,d){+c[a]===c[a]&&(b[a]=c[a],c[a]=d)}),d={my:c.join(" "),at:c.join(" "),offset:b.join(" ")};d=a.extend({},a.ui.dialog.prototype.options.position,d)}else d=a.ui.dialog.prototype.options.position;(g=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},d));g||this.uiDialog.hide()},_setOptions:function(d){var c=this,b={},g=!1;a.each(d,function(a,d){c._setOption(a,d);a in h&&(g=!0);a in e&&(b[a]=
d)});g&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(d,c){var b=this.uiDialog;switch(d){case "beforeclose":d="beforeClose";break;case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":b.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case "disabled":c?b.addClass("ui-dialog-disabled"):b.removeClass("ui-dialog-disabled");
break;case "draggable":var g=b.is(":data(draggable)");g&&!c&&b.draggable("destroy");!g&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(g=b.is(":data(resizable)"))&&!c&&b.resizable("destroy");g&&"string"===typeof c&&b.resizable("option","handles",c);!g&&!1!==c&&this._makeResizable(c);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"))}a.Widget.prototype._setOption.apply(this,arguments)},_size:function(){var d=this.options,
c,b,g=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});d.minWidth>d.width&&(d.width=d.minWidth);c=this.uiDialog.css({height:"auto",width:d.width}).height();b=Math.max(0,d.minHeight-c);"auto"===d.height?a.support.minHeight?this.element.css({minHeight:b,height:"auto"}):(this.uiDialog.show(),d=this.element.css("height","auto").height(),g||this.uiDialog.hide(),this.element.height(Math.max(d,b))):this.element.height(Math.max(d.height-c,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.10",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(d){this.$el=a.ui.dialog.overlay.create(d)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(d){0===this.instances.length&&
(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(b){d.options.closeOnEscape&&(b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)&&(d.close(b),b.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});a.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(d){var c=a.inArray(d,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");d.remove();var b=0;a.each(this.instances,function(){b=Math.max(b,this.css("z-index"))});this.maxZ=b},height:function(){var d,c;return a.browser.msie&&7>a.browser.version?(d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),
c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),d<c?a(window).height()+"px":d+"px"):a(document).height()+"px"},width:function(){var d,c;return a.browser.msie&&7>a.browser.version?(d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),d<c?a(window).width()+"px":d+"px"):a(document).width()+"px"},resize:function(){var d=a([]);a.each(a.ui.dialog.overlay.instances,function(){d=d.add(this)});
d.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a){function f(){e();a(this).parents(".headmenu").data("submenu").find("a:first").click();return!1}function h(d,c){var b=a(this),g=b.data("submenu");if(!g.is(".submenu-valid")){var f=b.offset(),h=b.outerHeight(),h=f.top+h;g.is(".center")?(b=b.outerWidth(),f=f.left+b/2-g.outerWidth()/2):g.is(".right")?(b=b.outerWidth(),f=f.left+b-g.outerWidth()):f=f.left;f={display:"none",position:"absolute",top:h,left:f};c.overlay&&(f.zIndex=c.overlay.css("zIndex"));g.css(f);a(document.body).append(g);g.addClass(".submenu-valid")}g.is(":visible")?
e(g):(e(),g.fadeIn());return!1}function e(d){(d||a(".submenu:visible")).fadeOut()}a.factory("nicemenu",{init:function(){var d=this.options;a(".headmenu",this.element).each(function(){var c=a(this),b=c.next(".submenu");c.data("submenu",b);b.data("headmenu",c);a(".default-action",c).click(f);c.click(function(b){return h.apply(this,[b,d])})});a(".submenu",this.element).click(function(){e(a(this));a(this).fadeOut()})}});a(document).click(function(){e()}).bind("scroll resize",function(){e();a(".submenu-valid").each(function(){a(this).removeClass("submenu-valid")})})})(jQuery);
(function(a){a.fn.extend({radiotoggle:function(f){f=a.extend({},{onLabel:"On",offLabel:"Off"},f);return this.each(function(){var h=a(this),e=a('<div class="switch"><span class="on">'+f.onLabel+'</span><span class="off">'+f.offLabel+'</span><span class="slide"><span class="inner"></span></span></div>'),d=a(".slide",e),c=a(".on",e),b=a(".off",e);if(h.is(":checked")){e.addClass("on");var g=!0}else e.find(".off").css("display","block"),e.find(".on").hide(),d.animate({left:30},300);e.insertAfter(h);h.hide();
e.click(function(){g?(d.animate({left:30},300,function(){c.hide();b.css({display:"block"});h.attr("checked",!1);e.removeClass("on")}),g=!1,h.removeAttr("checked")):(d.animate({left:-3},300,function(){b.hide();c.css({display:"block"});h.attr("checked",!0);e.addClass("on")}),g=!0,h.attr("checked","checked"));h.click()})})}})})(jQuery);
(function(){var a,f,h,e,d=function(b,a){return function(){return b.apply(a,arguments)}};e=this;a=jQuery;a.fn.extend({chosen:function(b,c){return"msie"===a.browser&&("6.0"===a.browser.version||"7.0"===a.browser.version)?this:a(this).each(function(){if(!a(this).hasClass("chzn-done"))return new f(this,b,c)})}});var c=function(b){this.set_default_values();this.form_field=b;this.form_field_jq=a(this.form_field);this.is_multiple=this.form_field.multiple;this.is_rtl=this.form_field_jq.hasClass("chzn-rtl");
this.default_text_default=this.form_field.multiple?"Select Some Options":"Select an Option";this.set_up_html();this.register_observers();this.form_field_jq.addClass("chzn-done")};c.prototype.set_default_values=function(){this.click_test_action=d(function(b){return this.test_active_click(b)},this);this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=this.result_highlighted=null;return this.choices=0};c.prototype.set_up_html=function(){var b,c;this.container_id=
this.form_field.id.length?this.form_field.id.replace(/(:|\.)/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.width();this.default_text=this.form_field_jq.data("placeholder")?this.form_field_jq.data("placeholder"):this.default_text_default;b=a("<div />",{id:this.container_id,"class":"chzn-container "+(this.is_rtl?"chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+
this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(b);this.container=a("#"+this.container_id);
this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();b=this.container.height();c=this.f_width-h(this.dropdown);this.dropdown.css({width:c+"px",top:b+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),
this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),b=c-h(this.search_container)-h(this.search_field),this.search_field.css({width:b+"px"}));this.results_build();return this.set_tab_index()};c.prototype.register_observers=function(){this.container.mousedown(d(function(b){return this.container_mousedown(b)},this));this.container.mouseenter(d(function(b){return this.mouse_enter(b)},
this));this.container.mouseleave(d(function(b){return this.mouse_leave(b)},this));this.search_results.mouseup(d(function(b){return this.search_results_mouseup(b)},this));this.search_results.mouseover(d(function(b){return this.search_results_mouseover(b)},this));this.search_results.mouseout(d(function(b){return this.search_results_mouseout(b)},this));this.form_field_jq.bind("liszt:updated",d(function(b){return this.results_update_field(b)},this));this.search_field.blur(d(function(b){return this.input_blur(b)},
this));this.search_field.keyup(d(function(b){return this.keyup_checker(b)},this));this.search_field.keydown(d(function(b){return this.keydown_checker(b)},this));return this.is_multiple?(this.search_choices.click(d(function(b){return this.choices_click(b)},this)),this.search_field.focus(d(function(b){return this.input_focus(b)},this))):this.selected_item.focus(d(function(b){return this.activate_field(b)},this))};c.prototype.container_mousedown=function(b){b&&"mousedown"===b.type&&b.stopPropagation();
if(!this.pending_destroy_click){if(this.active_field){if(!this.is_multiple&&b&&(a(b.target)===this.selected_item||a(b.target).parents("a.chzn-single").length))b.preventDefault(),this.results_toggle()}else this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show();return this.activate_field()}return this.pending_destroy_click=!1};c.prototype.mouse_enter=function(){return this.mouse_on_container=!0};c.prototype.mouse_leave=function(){return this.mouse_on_container=
!1};c.prototype.input_focus=function(){if(!this.active_field)return setTimeout(d(function(){return this.container_mousedown()},this),50)};c.prototype.input_blur=function(){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(d(function(){return this.blur_test()},this),100)};c.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};c.prototype.close_field=function(){a(document).unbind("click",this.click_test_action);
this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1));this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};c.prototype.activate_field=function(){!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",
-1));this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};c.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()};c.prototype.results_build=function(){var b,a,c,d,f;this.parsing=!0;this.results_data=e.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),
this.choices=0):this.is_multiple||this.selected_item.find("span").text(this.default_text);b="";f=this.results_data;c=0;for(d=f.length;c<d;c++)a=f[c],a.group?b+=this.result_add_group(a):a.empty||(b+=this.result_add_option(a),a.selected&&this.is_multiple?this.choice_build(a):a.selected&&!this.is_multiple&&this.selected_item.find("span").text(a.text));this.show_search_field_default();this.search_field_scale();this.search_results.html(b);return this.parsing=!1};c.prototype.result_add_group=function(b){if(b.disabled)return"";
b.dom_id=this.container_id+"_g_"+b.array_index;return'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>"};c.prototype.result_add_option=function(b){var a;if(b.disabled)return"";b.dom_id=this.container_id+"_o_"+b.array_index;a=b.selected&&this.is_multiple?[]:["active-result"];b.selected&&a.push("result-selected");null!=b.group_array_index&&a.push("group-option");return'<li id="'+b.dom_id+'" class="'+a.join(" ")+'">'+b.html+"</li>"};c.prototype.results_update_field=
function(){this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};c.prototype.result_do_highlight=function(b){var a,c,d,e;if(b.length){this.result_clear_highlight();this.result_highlight=b;this.result_highlight.addClass("highlighted");c=parseInt(this.search_results.css("maxHeight"),10);e=this.search_results.scrollTop();d=c+e;a=this.result_highlight.position().top+this.search_results.scrollTop();b=a+this.result_highlight.outerHeight();if(b>=d)return this.search_results.scrollTop(0<
b-c?b-c:0);if(a<e)return this.search_results.scrollTop(a)}};c.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};c.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};c.prototype.results_show=function(){var b;this.is_multiple||(this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected));
b=this.is_multiple?this.container.height():this.container.height()-1;this.dropdown.css({top:b+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};c.prototype.results_hide=function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.dropdown.css({left:"-9000px"});return this.results_showing=!1};c.prototype.set_tab_index=function(){var b;if(this.form_field_jq.attr("tabindex")){b=
this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple)return this.search_field.attr("tabindex",b);this.selected_item.attr("tabindex",b);return this.search_field.attr("tabindex",-1)}};c.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};c.prototype.search_results_mouseup=
function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c.length)return this.result_highlight=c,this.result_select(b)};c.prototype.search_results_mouseover=function(b){if(b=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first())return this.result_do_highlight(b)};c.prototype.search_results_mouseout=function(b){if(a(b.target).hasClass("active-result"))return this.result_clear_highlight()};c.prototype.choices_click=
function(b){b.preventDefault();if(this.active_field&&!a(b.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};c.prototype.choice_build=function(b){var c;c=this.container_id+"_c_"+b.array_index;this.choices+=1;this.search_container.before('<li class="search-choice" id="'+c+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>');return a("#"+c).find("a").first().click(d(function(b){return this.choice_destroy_link_click(b)},
this))};c.prototype.choice_destroy_link_click=function(b){b.preventDefault();this.pending_destroy_click=!0;return this.choice_destroy(a(b.target))};c.prototype.choice_destroy=function(b){this.choices-=1;this.show_search_field_default();this.is_multiple&&(0<this.choices&&1>this.search_field.val().length)&&this.results_hide();this.result_deselect(b.attr("rel"));return b.parents("li").first().remove()};c.prototype.result_select=function(b){var a,c;if(this.result_highlight)return a=this.result_highlight,
c=a.attr("id"),this.result_clear_highlight(),a.addClass("result-selected"),this.is_multiple?this.result_deactivate(a):this.result_single_selected=a,a=c.substr(c.lastIndexOf("_")+1),a=this.results_data[a],a.selected=!0,this.form_field.options[a.options_index].selected=!0,this.is_multiple?this.choice_build(a):this.selected_item.find("span").first().text(a.text),(!b.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change"),this.search_field_scale()};
c.prototype.result_activate=function(b){return b.addClass("active-result").show()};c.prototype.result_deactivate=function(b){return b.removeClass("active-result").hide()};c.prototype.result_deselect=function(b){var c;c=this.results_data[b];c.selected=!1;this.form_field.options[c.options_index].selected=!1;a("#"+this.container_id+"_o_"+b).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change");return this.search_field_scale()};
c.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()};c.prototype.winnow_results=function(){var b,c,d,e,f,h,j,o,s,p,r,t,u,q;this.no_results_clear();j=0;o=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html();f=RegExp("^"+o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");s=RegExp(o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");q=this.results_data;p=0;for(t=q.length;p<t;p++)if(c=q[p],!c.disabled&&
!c.empty)if(c.group)a("#"+c.dom_id).hide();else if(!this.is_multiple||!c.selected){b=!1;h=c.dom_id;if(f.test(c.html))b=!0,j+=1;else if(0<=c.html.indexOf(" ")||0===c.html.indexOf("["))if(e=c.html.replace(/\[|\]/g,"").split(" "),e.length){r=0;for(u=e.length;r<u;r++)d=e[r],f.test(d)&&(b=!0,j+=1)}b?(o.length?(b=c.html.search(s),d=c.html.substr(0,b+o.length)+"</em>"+c.html.substr(b+o.length),d=d.substr(0,b)+"<em>"+d.substr(b)):d=c.html,a("#"+h).html!==d&&a("#"+h).html(d),this.result_activate(a("#"+h)),
null!=c.group_array_index&&a("#"+this.results_data[c.group_array_index].dom_id).show()):(this.result_highlight&&h===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a("#"+h)))}return 1>j&&o.length?this.no_results(o):this.winnow_results_set_highlight()};c.prototype.winnow_results_clear=function(){var b,c,d,e,f;this.search_field.val("");c=this.search_results.find("li");f=[];d=0;for(e=c.length;d<e;d++)b=c[d],b=a(b),f.push(b.hasClass("group-result")?b.show():!this.is_multiple||
!b.hasClass("result-selected")?this.result_activate(b):void 0);return f};c.prototype.winnow_results_set_highlight=function(){var b;if(!this.result_highlight&&(b=!this.is_multiple?this.search_results.find(".result-selected"):[],b=b.length?b.first():this.search_results.find(".active-result").first(),null!=b))return this.result_do_highlight(b)};c.prototype.no_results=function(b){var c;c=a('<li class="no-results">No results match "<span></span>"</li>');c.find("span").first().html(b);return this.search_results.append(c)};
c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};c.prototype.keydown_arrow=function(){var b;this.result_highlight?this.results_showing&&(b=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(b):(b=this.search_results.find("li.active-result").first())&&this.result_do_highlight(a(b));if(!this.results_showing)return this.results_show()};c.prototype.keyup_arrow=function(){var b;if(!this.results_showing&&!this.is_multiple)return this.results_show();
if(this.result_highlight){b=this.result_highlight.prevAll("li.active-result");if(b.length)return this.result_do_highlight(b.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};c.prototype.keydown_backstroke=function(){if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();this.pending_backstroke=this.search_container.siblings("li.search-choice").last();return this.pending_backstroke.addClass("search-choice-focus")};
c.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};c.prototype.keyup_checker=function(b){var a,c;a=null!=(c=b.which)?c:b.keyCode;this.search_field_scale();switch(a){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:b.preventDefault();if(this.results_showing)return this.result_select(b);
break;case 27:if(this.results_showing)return this.results_hide();break;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};c.prototype.keydown_checker=function(b){var a,c;a=null!=(c=b.which)?c:b.keyCode;this.search_field_scale();8!==a&&this.pending_backstroke&&this.clear_backstroke();switch(a){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.mouse_on_container=!1;break;case 13:b.preventDefault();break;case 38:b.preventDefault();
this.keyup_arrow();break;case 40:this.keydown_arrow()}};c.prototype.search_field_scale=function(){var b,c,d,e,f;if(this.is_multiple){c="position:absolute; left: -1000px; top: -1000px; display:none;";d="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");e=0;for(f=d.length;e<f;e++)b=d[e],c+=b+":"+this.search_field.css(b)+";";b=a("<div />",{style:c});b.text(this.search_field.val());a("body").append(b);c=b.width()+25;b.remove();c>this.f_width-10&&(c=this.f_width-
10);this.search_field.css({width:c+"px"});b=this.container.height();return this.dropdown.css({top:b+"px"})}};c.prototype.generate_field_id=function(){var b;b=this.generate_random_id();return this.form_field.id=b};c.prototype.generate_random_id=function(){var b;for(b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();0<a("#"+b).length;)b+=this.generate_random_char();return b};c.prototype.generate_random_char=function(){var b;b=Math.floor(36*Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ".substring(b,
b+1)};f=c;h=function(b){return b.outerWidth()-b.width()};e.get_side_border_padding=h}).call(this);
(function(){var a=function(){this.options_index=0;this.parsed=[]};a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName?this.add_group(a):this.add_option(a)};a.prototype.add_group=function(a){var h,e,d,c,b,g;h=this.parsed.length;this.parsed.push({array_index:h,group:!0,label:a.label,children:0,disabled:a.disabled});b=a.childNodes;g=[];d=0;for(c=b.length;d<c;d++)e=b[d],g.push(this.add_option(e,h,a.disabled));return g};a.prototype.add_option=function(a,h,e){if("OPTION"===a.nodeName)return""!==
a.text?(null!=h&&(this.parsed[h].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:!0===e?e:a.disabled,group_array_index:h})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};a.select_to_array=function(f){var h,e,d,c;h=new a;c=f.childNodes;e=0;for(d=c.length;e<d;e++)f=c[e],h.add_node(f);return h.parsed};this.SelectParser=
a}).call(this);
(function(a,f){var h=f.queryeditor={init:function(){CueCard.helper=f.h.ajax_url("lib/cuecard/");CueCard.freebaseServiceUrl=f.acre.freebase.googleapis_url+"/";CueCard.urlPrefix=CueCard.apiProxy.base=f.h.ajax_url("lib/cuecard/");var e=CueCard.parseURLParameters(),d=!1,c={toggle_callback:h.toggleHeaders,initial_tab:e.tab},b={paneldrawer:{element:a("#qe-module"),drawer_height:250,toggle_state:"1"==a.localstore("cc_cp"),toggle_callback:h.toggleControlPane,panel_content:"cuecard-queryEditor-content"},extended:0,
costs:"1"==a.localstore("cc_cp_costs")?!0:!1};queryEditorOptions={focusOnReady:!0,codeMirror:{parserfile:[a("#codemirror-js").attr("href")],stylesheet:[a("#codemirror-css").attr("href")]}};if("q"in e||"query"in e){var g="q"in e?e.q:e.query;try{var l=JSON.parse(g);"query"in l&&(g=JSON.stringify(l.query),delete l.query,b.env=l)}catch(i){}queryEditorOptions.content=g;queryEditorOptions.cleanUp=!0;"extended"in e&&(b.extended="1"==e.extended?1:0);"as_of_time"in e&&(b.as_of_time=e.as_of_time);if("env"in
e)try{b.env=JSON.parse(e.env)}catch(k){}}else try{l=JSON.parse(a.localstore("qe_initialQuery")),0<a.trim(l.t).length&&(queryEditorOptions.content=l.t),b.env=l.e}catch(n){}"autorun"in e&&(d=!0);queryEditorOptions.onChange=function(){h.is_dirty=!0;a("#save-query").addClass("disabled")};queryEditorOptions.onRun=function(b){b.result&&a("#save-query").removeClass("disabled")};queryEditorOptions.onReady=function(){a(".cuecard-queryEditor-queryAssist").radiotoggle();a(".nicemenu").nicemenu();a("#links").prependTo("#the-output-pane .cuecard-outputPane-tabs");
h.resize();a(window).resize(h.resize);h.is_dirty=!1;d&&h.cuecard.queryEditor.run(!1);setTimeout(function(){a("#qe-module, #the-output-pane").css("visibility","visible")},1)};queryEditorOptions.content&&(c.queryLoaded=!0);h.cuecard=CueCard.createComposition({queryEditorElement:a("#the-query-editor")[0],queryEditorOptions:queryEditorOptions,outputPaneElement:a("#the-output-pane")[0],outputPaneOptions:c,controlPaneElement:a("#the-control-pane")[0],controlPaneOptions:b});h.page_chrome_height=a("#header").outerHeight(!0)+
(a("#page-content").outerHeight(!0)-a("#page-content").height())+a("#page-title").outerHeight(!0);a(window).bind("beforeunload",function(){h.store()});a(".cuecard-examples-technique").chosen()},resize:function(){var e=a(window).height()-h.page_chrome_height;e&&(a("#qe-module").height(e),h.cuecard.outputPane&&h.cuecard.outputPane.layout(e),h.cuecard.queryEditor&&h.cuecard.queryEditor.layout(e))},toggleControlPane:function(e){a.localstore("cc_cp",e?"1":"0",!1)},toggleHeaders:function(e){a("span",this).addClass(e?
"remove-icon":"add-icon").removeClass(e?"add-icon":"remove-icon")},getUrlFlags:function(){var a=h.cuecard.controlPane.getQueryEnvelope({},!0);queryEditorOptions.emql&&(a.emql=1);"debug"in queryEditorOptions&&(a.debug=queryEditorOptions.debug);null!=queryEditorOptions.service&&(a.service=queryEditorOptions.service);return a},computeMqlReadLink:function(){a(this).attr("href",h.cuecard.queryEditor.getMqlReadURL())},computePermanentLink:function(){var e=h.getUrlFlags();e.q=h.cuecard.queryEditor.content();
a(this).attr("href",f.h.fb_url("/queryeditor",e))},computeCompactLink:function(){var e=h.getUrlFlags();e.q=h.cuecard.queryEditor.getUnresolvedQuery();a(this).attr("href",f.h.fb_url("/queryeditor",e))},computeTinyCompactLink:function(){var e=h.getUrlFlags();e.q=h.cuecard.queryEditor.getUnresolvedQuery();e.autorun=1;var e=f.h.fb_url(CueCard.helper+"tinyurl.ajax",e),d=CueCard.UI.createBlockingContinuations(function(a,b){window.prompt("Tiny URL to copy",b.result.url)});a.post(e,{},d.onDone,"json")},store:function(){var e=
CueCard.jsonize({t:h.cuecard.queryEditor.content(),e:h.cuecard.controlPane.getQueryEnvelope({},!0,!0)},{breakLines:!1});a.localstore("qe_initialQuery",e,!1)},save:function(){a(this);f.get_script(f.h.static_url("query-edit.mf.js"),function(){h.edit.create_begin(this)});return!1}};a(h.init())})(jQuery,window.freebase);
