
/*
 * Copyright 2010, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*
 
 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE 
*/
(function(a){function i(c,b,d){var f=this,h=c.add(this),g=c.find(d.tabs),j=b.jquery?b:c.children(b),n;g.length||(g=c.children());j.length||(j=c.parent().find(b));j.length||(j=a(b));a.extend(this,{click:function(l,m){var o=g.eq(l);if(typeof l=="string"&&l.replace("#","")){l=l.replace(/([\"\#\$\%\&\'\(\)\*\+\,\.\/\:\;\<\=\>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1");o=g.filter("[href*="+l.replace("#","")+"]");l=Math.max(g.index(o),0)}if(d.rotate){var q=g.length-1;if(l<0)return f.click(q,m);if(l>q)return f.click(0,
m)}if(!o.length){if(n>=0)return f;l=d.initialIndex;o=g.eq(l)}if(l===n)return f;m=m||a.Event();m.type="onBeforeClick";h.trigger(m,[l]);if(!m.isDefaultPrevented()){k[d.effect].call(f,l,function(){m.type="onClick";h.trigger(m,[l])});n=l;g.removeClass(d.current);o.addClass(d.current);return f}},getConf:function(){return d},getTabs:function(){return g},getPanes:function(){return j},getCurrentPane:function(){return j.eq(n)},getCurrentTab:function(){return g.eq(n)},getIndex:function(){return n},next:function(){return f.click(n+
1)},prev:function(){return f.click(n-1)},destroy:function(){g.unbind(d.event).removeClass(d.current);j.find("a[href^=#]").unbind("click.T");return f}});a.each("onBeforeClick,onClick".split(","),function(l,m){a.isFunction(d[m])&&a(f).bind(m,d[m]);f[m]=function(o){a(f).bind(m,o);return f}});if(d.history&&a.fn.history){a.tools.history.init(g);d.event="history"}g.each(function(l){a(this).bind(d.event,function(m){f.click(l,m);return m.preventDefault()})});j.find("a[href^=#]").bind("click.T",function(l){f.click(a(this).attr("href"),
l)});if(location.hash)f.click(location.hash);else if(d.initialIndex===0||d.initialIndex>0)f.click(d.initialIndex)}a.tools=a.tools||{version:"@VERSION"};a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:false,history:false},addEffect:function(c,b){k[c]=b}};var k={"default":function(c,b){this.getPanes().hide().eq(c).show();b.call()},fade:function(c,b){var d=this.getConf(),f=d.fadeOutSpeed,h=this.getPanes();f?h.fadeOut(f):
h.hide();h.eq(c).fadeIn(d.fadeInSpeed,b)},slide:function(c,b){this.getPanes().slideUp(200);this.getPanes().eq(c).slideDown(400,b)},ajax:function(c,b){this.getPanes().eq(0).load(this.getTabs().eq(c).attr("href"),b)}},e;a.tools.tabs.addEffect("horizontal",function(c,b){e||(e=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){a(this).hide()});this.getPanes().eq(c).animate({width:e},function(){a(this).show();b.call()})});a.fn.tabs=function(c,b){var d=this.data("tabs");if(d){d.destroy();
this.removeData("tabs")}if(a.isFunction(b))b={onBeforeClick:b};b=a.extend({},a.tools.tabs.conf,b);this.each(function(){d=new i(a(this),c,b);a(this).data("tabs",d)});return b.api?d:this}})(jQuery);
(function(a,i){function k(e){return!a(e).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(e,c){return typeof e==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();c&&c.call(b)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;e=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!e.length?a(document):e},zIndex:function(e){if(e!==i)return this.css("zIndex",e);if(this.length){e=a(this[0]);for(var c;e.length&&e[0]!==document;){c=e.css("position");
if(c==="absolute"||c==="relative"||c==="fixed"){c=parseInt(e.css("zIndex"),10);if(!isNaN(c)&&c!==0)return c}e=e.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(e,c){function b(g,j,n,l){a.each(d,function(){j-=parseFloat(a.curCSS(g,"padding"+this,true))||0;if(n)j-=parseFloat(a.curCSS(g,
"border"+this+"Width",true))||0;if(l)j-=parseFloat(a.curCSS(g,"margin"+this,true))||0});return j}var d=c==="Width"?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(g){if(g===i)return h["inner"+c].call(this);return this.each(function(){a(this).css(f,b(this,g)+"px")})};a.fn["outer"+c]=function(g,j){if(typeof g!=="number")return h["outer"+c].call(this,g);return this.each(function(){a(this).css(f,
b(this,g,true,j)+"px")})}});a.extend(a.expr[":"],{data:function(e,c,b){return!!a.data(e,b[3])},focusable:function(e){var c=e.nodeName.toLowerCase(),b=a.attr(e,"tabindex");if("area"===c){c=e.parentNode;b=c.name;if(!e.href||!b||c.nodeName.toLowerCase()!=="map")return false;e=a("img[usemap=#"+b+"]")[0];return!!e&&k(e)}return(/input|select|textarea|button|object/.test(c)?!e.disabled:"a"==c?e.href||!isNaN(b):!isNaN(b))&&k(e)},tabbable:function(e){var c=a.attr(e,"tabindex");return(isNaN(c)||c>=0)&&a(e).is(":focusable")}});
a(function(){var e=document.body,c=e.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=c.offsetHeight===100;a.support.selectstart="onselectstart"in c;e.removeChild(c).style.display="none"});a.extend(a.ui,{plugin:{add:function(e,c,b){e=a.ui[e].prototype;for(var d in b){e.plugins[d]=e.plugins[d]||[];e.plugins[d].push([c,b[d]])}},call:function(e,c,b){if((c=e.plugins[c])&&e.element[0].parentNode)for(var d=0;d<c.length;d++)e.options[c[d][0]]&&
c[d][1].apply(e.element,b)}},contains:function(e,c){return document.compareDocumentPosition?e.compareDocumentPosition(c)&16:e!==c&&e.contains(c)},hasScroll:function(e,c){if(a(e).css("overflow")==="hidden")return false;var b=c&&c==="left"?"scrollLeft":"scrollTop",d=false;if(e[b]>0)return true;e[b]=1;d=e[b]>0;e[b]=0;return d},isOverAxis:function(e,c,b){return e>c&&e<c+b},isOver:function(e,c,b,d,f,h){return a.ui.isOverAxis(e,b,f)&&a.ui.isOverAxis(c,d,h)}})}})(jQuery);
(function(a,i){if(a.cleanData){var k=a.cleanData;a.cleanData=function(c){for(var b=0,d;(d=c[b])!=null;b++)a(d).triggerHandler("remove");k(c)}}else{var e=a.fn.remove;a.fn.remove=function(c,b){return this.each(function(){if(!b)if(!c||a.filter(c,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return e.call(a(this),c,b)})}}a.widget=function(c,b,d){var f=c.split(".")[0],h;c=c.split(".")[1];h=f+"-"+c;if(!d){d=b;b=a.Widget}a.expr[":"][h]=function(g){return!!a.data(g,
c)};a[f]=a[f]||{};a[f][c]=function(g,j){arguments.length&&this._createWidget(g,j)};b=new b;b.options=a.extend(true,{},b.options);a[f][c].prototype=a.extend(true,b,{namespace:f,widgetName:c,widgetEventPrefix:a[f][c].prototype.widgetEventPrefix||c,widgetBaseClass:h},d);a.widget.bridge(c,a[f][c])};a.widget.bridge=function(c,b){a.fn[c]=function(d){var f=typeof d==="string",h=Array.prototype.slice.call(arguments,1),g=this;d=!f&&h.length?a.extend.apply(null,[true,d].concat(h)):d;if(f&&d.charAt(0)==="_")return g;
f?this.each(function(){var j=a.data(this,c),n=j&&a.isFunction(j[d])?j[d].apply(j,h):j;if(n!==j&&n!==i){g=n;return false}}):this.each(function(){var j=a.data(this,c);j?j.option(d||{})._init():a.data(this,c,new b(d,this))});return g}};a.Widget=function(c,b){arguments.length&&this._createWidget(c,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(c,b){a.data(b,this.widgetName,this);this.element=a(b);this.options=a.extend(true,{},this.options,
this._getCreateOptions(),c);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(c,b){var d=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c==="string"){if(b===i)return this.options[c];d={};d[c]=b}this._setOptions(d);return this},_setOptions:function(c){var b=this;a.each(c,function(d,f){b._setOption(d,f)});return this},_setOption:function(c,b){this.options[c]=b;if(c==="disabled")this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(c,b,d){var f=this.options[c];b=a.Event(b);b.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();d=d||{};if(b.originalEvent){c=a.event.props.length;for(var h;c;){h=a.event.props[--c];b[h]=b.originalEvent[h]}}this.element.trigger(b,d);return!(a.isFunction(f)&&f.call(this.element[0],b,d)===false||b.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var i=this;this.element.bind("mousedown."+this.widgetName,function(k){return i._mouseDown(k)}).bind("click."+this.widgetName,function(k){if(true===a.data(k.target,i.widgetName+".preventClickEvent")){a.removeData(k.target,i.widgetName+".preventClickEvent");k.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(i){i.originalEvent=
i.originalEvent||{};if(!i.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var k=this,e=i.which==1,c=typeof this.options.cancel=="string"?a(i.target).parents().add(i.target).filter(this.options.cancel).length:false;if(!e||c||!this._mouseCapture(i))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){k.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(i)&&this._mouseDelayMet(i)){this._mouseStarted=
this._mouseStart(i)!==false;if(!this._mouseStarted){i.preventDefault();return true}}this._mouseMoveDelegate=function(b){return k._mouseMove(b)};this._mouseUpDelegate=function(b){return k._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);i.preventDefault();return i.originalEvent.mouseHandled=true}},_mouseMove:function(i){if(a.browser.msie&&!(document.documentMode>=9)&&!i.button)return this._mouseUp(i);if(this._mouseStarted){this._mouseDrag(i);
return i.preventDefault()}if(this._mouseDistanceMet(i)&&this._mouseDelayMet(i))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,i)!==false)?this._mouseDrag(i):this._mouseUp(i);return!this._mouseStarted},_mouseUp:function(i){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;i.target==this._mouseDownEvent.target&&a.data(i.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(i)}return false},_mouseDistanceMet:function(i){return Math.max(Math.abs(this._mouseDownEvent.pageX-i.pageX),Math.abs(this._mouseDownEvent.pageY-i.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var i=/left|center|right/,k=/top|center|bottom/,e=a.fn.position,c=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return e.apply(this,arguments);b=a.extend({},b);var d=a(b.of),f=d[0],h=(b.collision||"flip").split(" "),g=b.offset?b.offset.split(" "):[0,0],j,n,l;if(f.nodeType===9){j=d.width();n=d.height();l={top:0,left:0}}else if(f.setTimeout){j=d.width();n=d.height();l={top:d.scrollTop(),left:d.scrollLeft()}}else if(f.preventDefault){b.at="left top";j=n=0;l={top:b.of.pageY,
left:b.of.pageX}}else{j=d.outerWidth();n=d.outerHeight();l=d.offset()}a.each(["my","at"],function(){var m=(b[this]||"").split(" ");if(m.length===1)m=i.test(m[0])?m.concat(["center"]):k.test(m[0])?["center"].concat(m):["center","center"];m[0]=i.test(m[0])?m[0]:"center";m[1]=k.test(m[1])?m[1]:"center";b[this]=m});if(h.length===1)h[1]=h[0];g[0]=parseInt(g[0],10)||0;if(g.length===1)g[1]=g[0];g[1]=parseInt(g[1],10)||0;if(b.at[0]==="right")l.left+=j;else if(b.at[0]==="center")l.left+=j/2;if(b.at[1]==="bottom")l.top+=
n;else if(b.at[1]==="center")l.top+=n/2;l.left+=g[0];l.top+=g[1];return this.each(function(){var m=a(this),o=m.outerWidth(),q=m.outerHeight(),r=parseInt(a.curCSS(this,"marginLeft",true))||0,s=parseInt(a.curCSS(this,"marginTop",true))||0,v=o+r+(parseInt(a.curCSS(this,"marginRight",true))||0),w=q+s+(parseInt(a.curCSS(this,"marginBottom",true))||0),p=a.extend({},l),t;if(b.my[0]==="right")p.left-=o;else if(b.my[0]==="center")p.left-=o/2;if(b.my[1]==="bottom")p.top-=q;else if(b.my[1]==="center")p.top-=
q/2;p.left=Math.round(p.left);p.top=Math.round(p.top);t={left:p.left-r,top:p.top-s};a.each(["left","top"],function(u,x){a.ui.position[h[u]]&&a.ui.position[h[u]][x](p,{targetWidth:j,targetHeight:n,elemWidth:o,elemHeight:q,collisionPosition:t,collisionWidth:v,collisionHeight:w,offset:g,my:b.my,at:b.at})});a.fn.bgiframe&&m.bgiframe();m.offset(a.extend(p,{using:b.using}))})};a.ui.position={fit:{left:function(b,d){var f=a(window);f=d.collisionPosition.left+d.collisionWidth-f.width()-f.scrollLeft();b.left=
f>0?b.left-f:Math.max(b.left-d.collisionPosition.left,b.left)},top:function(b,d){var f=a(window);f=d.collisionPosition.top+d.collisionHeight-f.height()-f.scrollTop();b.top=f>0?b.top-f:Math.max(b.top-d.collisionPosition.top,b.top)}},flip:{left:function(b,d){if(d.at[0]!=="center"){var f=a(window);f=d.collisionPosition.left+d.collisionWidth-f.width()-f.scrollLeft();var h=d.my[0]==="left"?-d.elemWidth:d.my[0]==="right"?d.elemWidth:0,g=d.at[0]==="left"?d.targetWidth:-d.targetWidth,j=-2*d.offset[0];b.left+=
d.collisionPosition.left<0?h+g+j:f>0?h+g+j:0}},top:function(b,d){if(d.at[1]!=="center"){var f=a(window);f=d.collisionPosition.top+d.collisionHeight-f.height()-f.scrollTop();var h=d.my[1]==="top"?-d.elemHeight:d.my[1]==="bottom"?d.elemHeight:0,g=d.at[1]==="top"?d.targetHeight:-d.targetHeight,j=-2*d.offset[1];b.top+=d.collisionPosition.top<0?h+g+j:f>0?h+g+j:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(b,d){if(/static/.test(a.curCSS(b,"position")))b.style.position="relative";var f=a(b),
h=f.offset(),g=parseInt(a.curCSS(b,"top",true),10)||0,j=parseInt(a.curCSS(b,"left",true),10)||0;h={top:d.top-h.top+g,left:d.left-h.left+j};"using"in d?d.using.call(b,h):f.css(h)};a.fn.offset=function(b){var d=this[0];if(!d||!d.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return c.call(this)}}})(jQuery);
(function(a,i){var k={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},e={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(c){var b=a(this).css(c).offset().top;b<0&&
a(this).css("top",c.top-b)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var c=this,b=c.options,d=b.title||"&#160;",f=a.ui.dialog.getTitleId(c.element),h=(c.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",
-1).css("outline",0).keydown(function(n){if(b.closeOnEscape&&n.keyCode&&n.keyCode===a.ui.keyCode.ESCAPE){c.close(n);n.preventDefault()}}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(n){c.moveToTop(false,n)});c.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(h);var g=(c.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(h),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(n){c.close(n);return false}).appendTo(g);(c.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(j);a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(d).prependTo(g);if(a.isFunction(b.beforeclose)&&!a.isFunction(b.beforeClose))b.beforeClose=
b.beforeclose;g.find("*").add(g).disableSelection();b.draggable&&a.fn.draggable&&c._makeDraggable();b.resizable&&a.fn.resizable&&c._makeResizable();c._createButtons(b.buttons);c._isOpen=false;a.fn.bgiframe&&h.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();
this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(c){var b=this,d,f;if(false!==b._trigger("beforeClose",c)){b.overlay&&b.overlay.destroy();b.uiDialog.unbind("keypress.ui-dialog");b._isOpen=false;if(b.options.hide)b.uiDialog.hide(b.options.hide,function(){b._trigger("close",c)});else{b.uiDialog.hide();b._trigger("close",c)}a.ui.dialog.overlay.resize();if(b.options.modal){d=0;a(".ui-dialog").each(function(){if(this!==
b.uiDialog[0]){f=a(this).css("z-index");isNaN(f)||(d=Math.max(d,f))}});a.ui.dialog.maxZ=d}return b}},isOpen:function(){return this._isOpen},moveToTop:function(c,b){var d=this.options;if(d.modal&&!c||!d.stack&&!d.modal)return this._trigger("focus",b);if(d.zIndex>a.ui.dialog.maxZ)a.ui.dialog.maxZ=d.zIndex;if(this.overlay){a.ui.dialog.maxZ+=1;this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}d={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};
a.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",a.ui.dialog.maxZ);this.element.attr(d);this._trigger("focus",b);return this},open:function(){if(!this._isOpen){var c=this.options,b=this.uiDialog;this.overlay=c.modal?new a.ui.dialog.overlay(this):null;this._size();this._position(c.position);b.show(c.show);this.moveToTop(true);c.modal&&b.bind("keypress.ui-dialog",function(d){if(d.keyCode===a.ui.keyCode.TAB){var f=a(":tabbable",this),h=f.filter(":first");f=f.filter(":last");if(d.target===f[0]&&!d.shiftKey){h.focus(1);
return false}else if(d.target===h[0]&&d.shiftKey){f.focus(1);return false}}});a(this.element.find(":tabbable").get().concat(b.find(".ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();this._isOpen=true;this._trigger("open");return this}},_createButtons:function(c){var b=this,d=false,f=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),h=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(f);b.uiDialog.find(".ui-dialog-buttonpane").remove();
typeof c==="object"&&c!==null&&a.each(c,function(){return!(d=true)});if(d){a.each(c,function(g,j){j=a.isFunction(j)?{click:j,text:g}:j;var n=a('<button type="button"></button>').attr(j,true).unbind("click").click(function(){j.click.apply(b.element[0],arguments)}).appendTo(h);a.fn.button&&n.button()});f.appendTo(b.uiDialog)}},_makeDraggable:function(){function c(g){return{position:g.position,offset:g.offset}}var b=this,d=b.options,f=a(document),h;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(g,j){h=d.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",g,c(j))},drag:function(g,j){b._trigger("drag",g,c(j))},stop:function(g,j){d.position=[j.position.left-f.scrollLeft(),j.position.top-f.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(h);b._trigger("dragStop",g,c(j));a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function b(g){return{originalPosition:g.originalPosition,
originalSize:g.originalSize,position:g.position,size:g.size}}c=c===i?this.options.resizable:c;var d=this,f=d.options,h=d.uiDialog.css("position");d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:d._minHeight(),handles:typeof c==="string"?c:"n,e,s,w,se,sw,ne,nw",start:function(g,j){a(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",g,b(j))},resize:function(g,j){d._trigger("resize",
g,b(j))},stop:function(g,j){a(this).removeClass("ui-dialog-resizing");f.height=a(this).height();f.width=a(this).width();d._trigger("resizeStop",g,b(j));a.ui.dialog.overlay.resize()}}).css("position",h).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var c=this.options;return c.height==="auto"?c.minHeight:Math.min(c.minHeight,c.height)},_position:function(c){var b=[],d=[0,0],f;if(c){if(typeof c==="string"||typeof c==="object"&&"0"in c){b=c.split?c.split(" "):
[c[0],c[1]];if(b.length===1)b[1]=b[0];a.each(["left","top"],function(h,g){if(+b[h]===b[h]){d[h]=b[h];b[h]=g}});c={my:b.join(" "),at:b.join(" "),offset:d.join(" ")}}c=a.extend({},a.ui.dialog.prototype.options.position,c)}else c=a.ui.dialog.prototype.options.position;(f=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},c));f||this.uiDialog.hide()},_setOptions:function(c){var b=this,d={},f=false;a.each(c,function(h,g){b._setOption(h,g);
if(h in k)f=true;if(h in e)d[h]=g});f&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(c,b){var d=this.uiDialog;switch(c){case "beforeclose":c="beforeClose";break;case "buttons":this._createButtons(b);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":d.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?d.addClass("ui-dialog-disabled"):
d.removeClass("ui-dialog-disabled");break;case "draggable":var f=d.is(":data(draggable)");f&&!b&&d.draggable("destroy");!f&&b&&this._makeDraggable();break;case "position":this._position(b);break;case "resizable":(f=d.is(":data(resizable)"))&&!b&&d.resizable("destroy");f&&typeof b==="string"&&d.resizable("option","handles",b);!f&&b!==false&&this._makeResizable(b);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(b||"&#160;"));break}a.Widget.prototype._setOption.apply(this,arguments)},
_size:function(){var c=this.options,b,d,f=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(c.minWidth>c.width)c.width=c.minWidth;b=this.uiDialog.css({height:"auto",width:c.width}).height();d=Math.max(0,c.minHeight-b);if(c.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();c=this.element.css("height","auto").height();f||this.uiDialog.hide();this.element.height(Math.max(c,d))}else this.element.height(Math.max(c.height-
b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.10",uuid:0,maxZ:0,getTitleId:function(c){c=c.attr("id");if(!c){this.uuid+=1;c=this.uuid}return"ui-dialog-title-"+c},overlay:function(c){this.$el=a.ui.dialog.overlay.create(c)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(c){return c+".dialog-overlay"}).join(" "),
create:function(c){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(d){if(a(d.target).zIndex()<a.ui.dialog.overlay.maxZ)return false})},1);a(document).bind("keydown.dialog-overlay",function(d){if(c.options.closeOnEscape&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE){c.close(d);d.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var b=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});a.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(c){var b=a.inArray(c,this.instances);b!=-1&&this.oldInstances.push(this.instances.splice(b,1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");c.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var c,b;if(a.browser.msie&&a.browser.version<7){c=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);
b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return c<b?a(window).height()+"px":c+"px"}else return a(document).height()+"px"},width:function(){var c,b;if(a.browser.msie&&a.browser.version<7){c=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return c<b?a(window).width()+"px":c+"px"}else return a(document).width()+"px"},resize:function(){var c=a([]);a.each(a.ui.dialog.overlay.instances,
function(){c=c.add(this)});c.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a){function i(){e();a(this).parents(".headmenu").data("submenu").find("a:first").click();return false}function k(){var b=a(this),d=b.data("submenu");if(!d.is(".submenu-valid")){var f=b.offset(),h=b.outerHeight();h=f.top+h;if(d.is(".center")){b=b.outerWidth();f=f.left+b/2-d.outerWidth()/2}else if(d.is(".right")){b=b.outerWidth();f=f.left+b-d.outerWidth()}else f=f.left;d.css({display:"none",position:"absolute",top:h,left:f});a(document.body).append(d);d.addClass(".submenu-valid")}if(d.is(":visible"))e(d);
else{e();d.fadeIn()}return false}function e(b){(b||a(".submenu:visible")).fadeOut()}function c(b){(b||a(".submenu-valid")).each(function(){a(this).removeClass("submenu-valid")})}a.factory("nicemenu",{init:function(){a(".headmenu",this.element).each(function(){var b=a(this),d=b.next(".submenu");b.data("submenu",d);d.data("headmenu",b);a(".default-action",b).click(i);b.click(k)});a(".submenu",this.element).click(function(){e(a(this));a(this).fadeOut()})}});a(document).click(function(){e()}).bind("scroll resize",
function(){e();c()})})(jQuery);
(function(a){a.fn.extend({radiotoggle:function(i){i=a.extend({},{onLabel:"On",offLabel:"Off"},i);return this.each(function(){var k=a(this),e=a('<div class="switch"><span class="on">'+i.onLabel+'</span><span class="off">'+i.offLabel+'</span><span class="slide"></span></div>'),c=a(".slide",e),b=a(".on",e),d=a(".off",e);if(k.is(":checked")){e.addClass("on");var f=true}else{e.find(".off").css("display","block");e.find(".on").hide();c.animate({left:30},300)}e.insertAfter(k);k.hide();e.click(function(){if(f){c.animate({left:30},
300,function(){b.hide();d.css({display:"block"});k.attr("checked",false);e.removeClass("on")});f=false;k.removeAttr("checked")}else{c.animate({left:-3},300,function(){d.hide();b.css({display:"block"});k.attr("checked",true);e.addClass("on")});f=true;k.attr("checked","checked")}k.click()})})}})})(jQuery);
(function(a){a.factory("collapse_module",{init:function(){var i=this;this.$column=a(this.options.column);this.modules=a(this.options.modules,this.element);this.first_module=this.modules.get(0);this.trigger=a(".trigger:first",this.first_module);this.first_section=a(".module-section",this.first_module);this.other_modules=this.modules.slice(1);this.column_offset=this.$column.css("margin-left");this.set_collapsed(this.options.collapsed);this.trigger.click(function(k){return i.toggle(k)})},set_collapsed:function(i){if(this.toggle_state=
i){this.trigger.addClass("collapsed");this.$column.css("margin-left",0);this.first_section.hide();this.other_modules.hide()}else{this.trigger.removeClass("collapsed");this.$column.css("margin-left",this.column_offset);this.first_section.show();this.other_modules.show()}},toggle:function(){var i=this;if(this.toggle_state){this.trigger.removeClass("collapsed");this.$column.animate({marginLeft:this.column_offset},function(){i.first_section.slideDown(function(){i.modules.removeClass("collapsed")});i.other_modules.fadeIn()})}else{this.trigger.addClass("collapsed");
this.other_modules.fadeOut();this.first_section.slideUp(function(){i.$column.animate({marginLeft:0});i.modules.addClass("collapsed")})}this.toggle_state=!this.toggle_state;this.options.toggle_callback&&this.options.toggle_callback.call(this.trigger,this.toggle_state);return false}});a.extend(true,a.collapse_module,{defaults:{collapsed:false,modules:".module",column:"#main-column"}})})(jQuery);
(function(a,i){var k=i.queryeditor={init:function(){CueCard.helper=i.h.ajax_url("lib/cuecard/");CueCard.freebaseServiceUrl=i.acre.freebase.service_url+"/";CueCard.urlPrefix=CueCard.apiProxy.base=i.h.ajax_url("lib/cuecard/");var e=CueCard.parseURLParameters(),c=false,b={toggle_callback:k.toggleHeaders,stylesheet:a("#cuecard-outputPane-stylesheet").attr("href"),initial_tab:e.tab},d={paneldrawer:{element:a("#qe-module"),drawer_height:250,toggle_state:a.localstore("cc_cp")=="1",toggle_callback:k.toggleControlPane,
panel_content:"cuecard-queryEditor-content"},extended:0,costs:a.localstore("cc_cp_costs")=="1"?true:false};queryEditorOptions={focusOnReady:true,onUnauthorizedMqlWrite:function(){if(window.confirm("Query editor needs to be authorized to write data on your behalf. Proceed to authorization?")){saveQuery();var l=document.location.href,m=l.indexOf("#");if(m>0)l=l.substr(0,m);else{m=l.indexOf("?");if(m>0)l=l.substr(0,m)}l="/signin/login?mw_cookie_scope=domain&onsignin="+encodeURIComponent(l);document.location=
l}},codeMirror:{parserfile:[a("#codemirror-js").attr("href")],stylesheet:[a("#codemirror-css").attr("href")]}};if("q"in e||"query"in e){var f="q"in e?e.q:e.query;try{var h=JSON.parse(f);if("query"in h){f=JSON.stringify(h.query);delete h.query;d.env=h}}catch(g){}queryEditorOptions.content=f;queryEditorOptions.cleanUp=true;if("extended"in e)d.extended=e.extended=="1"?1:0;if("as_of_time"in e)d.as_of_time=e.as_of_time;if("env"in e)try{d.env=JSON.parse(e.env)}catch(j){}}else try{h=JSON.parse(a.localstore("qe_initialQuery"));
if(a.trim(h.t).length>0)queryEditorOptions.content=h.t;d.env=h.e}catch(n){}if("autorun"in e)c=true;queryEditorOptions.onReady=function(){a(".cuecard-queryEditor-queryAssist").radiotoggle();a(".nicemenu").nicemenu();a("#links").prependTo("#the-output-pane .cuecard-outputPane-tabs");k.resize();a(window).resize(k.resize);c&&k.cuecard.queryEditor.run(false);setTimeout(function(){a("#qe-module, #the-output-pane").css("visibility","visible")},1)};if(queryEditorOptions.content)b.queryLoaded=true;k.cuecard=
CueCard.createComposition({queryEditorElement:a("#the-query-editor")[0],queryEditorOptions:queryEditorOptions,outputPaneElement:a("#the-output-pane")[0],outputPaneOptions:b,controlPaneElement:a("#the-control-pane")[0],controlPaneOptions:d});k.page_chrome_height=a("#header").outerHeight(true)+a("#footer").outerHeight(true)+(a("#page-content").outerHeight(true)-a("#page-content").height())+a("#page-title").outerHeight(true);a(window).bind("beforeunload",function(){k.store()})},resize:function(){var e=
a(window).height()-k.page_chrome_height;if(e){a("#qe-module").height(e);k.cuecard.outputPane&&k.cuecard.outputPane.layout(e);k.cuecard.queryEditor&&k.cuecard.queryEditor.layout(e)}},toggleControlPane:function(e){a.localstore("cc_cp",e?"1":"0",false)},toggleHeaders:function(e){a("span",this).addClass(e?"remove-icon":"add-icon").removeClass(e?"add-icon":"remove-icon")},getUrlFlags:function(){var e=k.cuecard.controlPane.getQueryEnvelope({},true);if(queryEditorOptions.emql)e.emql=1;if("debug"in queryEditorOptions)e.debug=
queryEditorOptions.debug;if(queryEditorOptions.service!=null)e.service=queryEditorOptions.service;return e},computeMqlReadLink:function(){a(this).attr("href",k.cuecard.queryEditor.getMqlReadURL())},computePermanentLink:function(){var e=k.getUrlFlags();e.q=k.cuecard.queryEditor.content();a(this).attr("href",i.h.fb_url("/queryeditor",e))},computeCompactLink:function(){var e=k.getUrlFlags();e.q=k.cuecard.queryEditor.getUnresolvedQuery();a(this).attr("href",i.h.fb_url("/queryeditor",e))},computeTinyCompactLink:function(){var e=
k.getUrlFlags();e.q=k.cuecard.queryEditor.getUnresolvedQuery();e.autorun=1;e=i.h.fb_url(CueCard.helper+"tinyurl.ajax",e);var c=CueCard.UI.createBlockingContinuations(function(b,d){window.prompt("Tiny URL to copy",d.result.url)});a.post(e,{},c.onDone,"json")},store:function(){var e=CueCard.jsonize({t:k.cuecard.queryEditor.content(),e:k.cuecard.controlPane.getQueryEnvelope({},true,true)},{breakLines:false});a.localstore("qe_initialQuery",e,false)},create:function(){window.alert("TODO: create new saved query")}};
a(k.init())})(jQuery,window.freebase);
