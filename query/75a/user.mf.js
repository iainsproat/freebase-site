
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
(function(b){b.extend({tablesorter:new function(){function a(e,a){c(e+","+((new Date).getTime()-a.getTime())+"ms")}function c(e){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(e):alert(e)}function m(e,a){var g="";if(0!=e.tBodies.length){var d=e.tBodies[0].rows;if(d[0])for(var f=[],o=d[0].cells.length,j=0;j<o;j++){var h=!1;b.metadata&&b(a[j]).metadata()&&b(a[j]).metadata().sorter?h=p(b(a[j]).metadata().sorter):e.config.headers[j]&&e.config.headers[j].sorter&&(h=p(e.config.headers[j].sorter));
if(!h)a:{for(var h=e,k=d,l=-1,m=j,r=q.length,n=!1,s=!1,w=!0;""==s&&w;)l++,k[l]?(n=k[l].cells[m],s=b.trim(z(h.config,n)),h.config.debug&&c("Checking if value was empty on row:"+l)):w=!1;for(k=1;k<r;k++)if(q[k].is(s,h,n)){h=q[k];break a}h=q[0]}e.config.debug&&(g+="column:"+j+" parser:"+h.id+"\n");f.push(h)}e.config.debug&&c(g);return f}}function p(e){for(var a=q.length,b=0;b<a;b++)if(q[b].id.toLowerCase()==e.toLowerCase())return q[b];return!1}function r(e){var i;e.config.debug&&(i=new Date);for(var g=
e.tBodies[0]&&e.tBodies[0].rows.length||0,d=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,f=e.config.parsers,o={row:[],normalized:[]},c=0;c<g;++c){var h=b(e.tBodies[0].rows[c]),k=[];if(h.hasClass(e.config.cssChildRow))o.row[o.row.length-1]=o.row[o.row.length-1].add(h);else{o.row.push(h);for(var l=0;l<d;++l)k.push(f[l].format(z(e.config,h[0].cells[l]),e,h[0].cells[l]));k.push(o.normalized.length);o.normalized.push(k)}}e.config.debug&&a("Building cache for "+g+" rows:",i);return o}function z(e,
a){var g="";if(!a)return"";e.supportsTextContent||(e.supportsTextContent=a.textContent||!1);return g="simple"==e.textExtraction?e.supportsTextContent?a.textContent:a.childNodes[0]&&a.childNodes[0].hasChildNodes()?a.childNodes[0].innerHTML:a.innerHTML:"function"==typeof e.textExtraction?e.textExtraction(a):b(a).text()}function A(e,i){var g;e.config.debug&&(g=new Date);for(var d=i.row,f=i.normalized,c=f.length,j=f[0].length-1,h=b(e.tBodies[0]),k=[],l=0;l<c;l++){var v=f[l][j];k.push(d[v]);if(!e.config.appender)for(var m=
d[v].length,n=0;n<m;n++)h[0].appendChild(d[v][n])}e.config.appender&&e.config.appender(e,k);k=null;e.config.debug&&a("Rebuilt table:",g);B(e);setTimeout(function(){b(e).trigger("sortEnd")},0)}function D(a,b){return a.config.headers[b]&&a.config.headers[b].lockedOrder?a.config.headers[b].lockedOrder:!1}function B(a){for(var b=a.config.widgets,g=b.length,d=0;d<g;d++)E(b[d]).format(a)}function E(a){for(var b=x.length,g=0;g<b;g++)if(x[g].id.toLowerCase()==a.toLowerCase())return x[g]}function F(a,i,g,
d){i.removeClass(d[0]).removeClass(d[1]);var f=[];i.each(function(){this.sortDisabled||(f[this.column]=b(this))});a=g.length;for(i=0;i<a;i++)f[g[i][0]].addClass(d[g[i][1]])}function G(b,i,g){var d,f;b.config.debug&&(d=new Date);var c="var sortWrapper = function(a,b) {",j=i.length;for(f=0;f<j;f++)var h=i[f][0],k=i[f][1],h="text"==b.config.parsers[h].type?0==k?u("text","asc",h):u("text","desc",h):0==k?u("numeric","asc",h):u("numeric","desc",h),l="e"+f,c=c+("var "+l+" = "+h),c=c+("if("+l+") { return "+
l+"; } "),c=c+"else { ";f=g.normalized[0].length-1;c+="return a["+f+"]-b["+f+"];";for(f=0;f<j;f++)c+="}; ";c+="return 0; }; ";b.config.debug&&a("Evaling expression:"+c,new Date);eval(c);g.normalized.sort(sortWrapper);b.config.debug&&a("Sorting on "+i.toString()+" and dir "+k+" time:",d);return g}function u(a,b,g){var d="a["+g+"]",g="b["+g+"]";if("text"==a&&"asc"==b)return"("+d+" == "+g+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+g+" === null ? Number.NEGATIVE_INFINITY : ("+d+" < "+g+") ? -1 : 1 )));";
if("text"==a&&"desc"==b)return"("+d+" == "+g+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+g+" === null ? Number.NEGATIVE_INFINITY : ("+g+" < "+d+") ? -1 : 1 )));";if("numeric"==a&&"asc"==b)return"("+d+" === null && "+g+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+g+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+g+"));";if("numeric"==a&&"desc"==b)return"("+d+" === null && "+g+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+g+" === null ? Number.NEGATIVE_INFINITY : "+
g+" - "+d+"));"}var q=[],x=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=a;this.construct=
function(e){return this.each(function(){if(this.tHead&&this.tBodies){var i,g,d;this.config={};d=b.extend(this.config,b.tablesorter.defaults,e);i=b(this);b.data(this,"tablesorter",d);var f=this,o;f.config.debug&&(o=new Date);for(var j=[],h={},k=f.getElementsByTagName("THEAD")[0].getElementsByTagName("TR"),l=0;l<k.length;l++)for(var q=k[l].cells,p=0;p<q.length;p++){var n=q[p],s=n.parentNode.rowIndex,w=s+"-"+n.cellIndex,x=n.rowSpan||1,n=n.colSpan||1,u;"undefined"==typeof j[s]&&(j[s]=[]);var t;for(t=
0;t<j[s].length+1;t++)if("undefined"==typeof j[s][t]){u=t;break}h[w]=u;for(t=s;t<s+x;t++){"undefined"==typeof j[t]&&(j[t]=[]);for(var w=j[t],C=u;C<u+n;C++)w[C]="x"}}var y=b(f.config.selectorHeaders,f).each(function(a){this.column=h[this.parentNode.rowIndex+"-"+this.cellIndex];this.count=this.order="Number"!=typeof f.config.sortInitialOrder?"desc"==f.config.sortInitialOrder.toLowerCase()?1:0:1==f.config.sortInitialOrder?1:0;if(b.metadata&&!1===b(this).metadata().sorter||f.config.headers[a]&&!1===f.config.headers[a].sorter)this.sortDisabled=
!0;D(f,a)&&(this.order=this.lockedOrder=D(f,a));if(!this.sortDisabled){var e=b(this).addClass(f.config.cssHeader);f.config.onRenderHeader&&f.config.onRenderHeader.apply(e)}f.config.headerList[a]=this});f.config.debug&&(a("Built headers:",o),c(y));this.config.parsers=m(this,y);g=r(this);var H=[d.cssDesc,d.cssAsc];if(this.config.widthFixed){var I=b("<colgroup>");b("tr:first td",this.tBodies[0]).each(function(){I.append(b("<col>").css("width",b(this).width()))});b(this).prepend(I)}y.click(function(a){var e=
i[0].tBodies[0]&&i[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&e>0){i.trigger("sortStart");b(this);e=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(a[d.sortMultiSortKey]){a:{for(var a=d.sortList,c=a.length,f=0;f<c;f++)if(a[f][0]==e){a=true;break a}a=false}if(a)for(a=0;a<d.sortList.length;a++){c=d.sortList[a];f=d.headerList[c[0]];if(c[0]==e){f.count=c[1];f.count++;c[1]=f.count%2}}else d.sortList.push([e,this.order])}else{d.sortList=[];if(d.sortForce!=
null){c=d.sortForce;for(a=0;a<c.length;a++)c[a][0]!=e&&d.sortList.push(c[a])}d.sortList.push([e,this.order])}setTimeout(function(){F(i[0],y,d.sortList,H);A(i[0],G(i[0],d.sortList,g))},1);return false}}).mousedown(function(){if(d.cancelSelection){this.onselectstart=function(){return false};return false}});i.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=m(a,y);g=r(a)},1)}).bind("updateCell",function(a,b){var e=this.config,d=[b.parentNode.rowIndex-1,b.cellIndex];g.normalized[d[0]][d[1]]=
e.parsers[d[1]].format(z(e,b),b)}).bind("sorton",function(a,e){b(this).trigger("sortStart");d.sortList=e;for(var c=d.sortList,f=this.config,i=c.length,h=0;h<i;h++){var j=c[h],k=f.headerList[j[0]];k.count=j[1];k.count++}F(this,y,c,H);A(this,G(this,c,g))}).bind("appendCache",function(){A(this,g)}).bind("applyWidgetId",function(a,b){E(b).format(this)}).bind("applyWidgets",function(){B(this)});b.metadata&&(b(this).metadata()&&b(this).metadata().sortlist)&&(d.sortList=b(this).metadata().sortlist);0<d.sortList.length&&
i.trigger("sorton",[d.sortList]);B(this)}})};this.addParser=function(a){for(var b=q.length,c=!0,d=0;d<b;d++)q[d].id.toLowerCase()==a.id.toLowerCase()&&(c=!1);c&&q.push(a)};this.addWidget=function(a){x.push(a)};this.formatFloat=function(a){a=parseFloat(a);return isNaN(a)?0:a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(a){return/^[-+]?\d*$/.test(b.trim(a.replace(/[,.']/g,"")))};this.clearTableBody=function(a){b.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(a.tBodies[0]):
a.tBodies[0].innerHTML=""}}});b.fn.extend({tablesorter:b.tablesorter.construct});var c=b.tablesorter;c.addParser({id:"text",is:function(){return!0},format:function(a){return b.trim(a.toLocaleLowerCase())},type:"text"});c.addParser({id:"digit",is:function(a,c){return b.tablesorter.isDigit(a,c.config)},format:function(a){return b.tablesorter.formatFloat(a)},type:"numeric"});c.addParser({id:"currency",is:function(a){return/^[\u00a3$\u20ac?.]/.test(a)},format:function(a){return b.tablesorter.formatFloat(a.replace(RegExp(/[\u00a3$\u20ac]/g),
""))},type:"numeric"});c.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){for(var a=a.split("."),c="",m=a.length,p=0;p<m;p++)var r=a[p],c=2==r.length?c+("0"+r):c+r;return b.tablesorter.formatFloat(c)},type:"numeric"});c.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},format:function(a){return jQuery.trim(a.replace(RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});c.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},
format:function(a){return b.tablesorter.formatFloat(""!=a?(new Date(a.replace(RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});c.addParser({id:"percent",is:function(a){return/\%$/.test(b.trim(a))},format:function(a){return b.tablesorter.formatFloat(a.replace(RegExp(/%/g),""))},type:"numeric"});c.addParser({id:"usLongDate",is:function(a){return a.match(RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return b.tablesorter.formatFloat((new Date(a)).getTime())},
type:"numeric"});c.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,c){var m=c.config,a=a.replace(/\-/g,"/");if("us"==m.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if("uk"==m.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if("dd/mm/yy"==m.dateFormat||"dd-mm-yy"==m.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return b.tablesorter.formatFloat((new Date(a)).getTime())},
type:"numeric"});c.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return b.tablesorter.formatFloat((new Date("2000/01/01 "+a)).getTime())},type:"numeric"});c.addParser({id:"metadata",is:function(){return!1},format:function(a,c,m){a=c.config;a=!a.parserMetadataName?"sortValue":a.parserMetadataName;return b(m).metadata()[a]},type:"numeric"});c.addWidget({id:"zebra",format:function(a){var c;a.config.debug&&(c=new Date);
var m,p=-1,r;b("tr:visible",a.tBodies[0]).each(function(){m=b(this);m.hasClass(a.config.cssChildRow)||p++;r=0==p%2;m.removeClass(a.config.widgetZebra.css[r?0:1]).addClass(a.config.widgetZebra.css[r?1:0])});a.config.debug&&b.tablesorter.benchmark("Applying Zebra widget",c)}})})(jQuery);
(function(b){b(function(){b.tablesorter&&(b("<div>"),b.tablesorter.defaults.cssAsc="column-header-asc",b.tablesorter.defaults.cssDesc="column-header-desc",b.tablesorter.defaults.cssHeader="column-header",b.tablesorter.addParser({id:"datetime",is:function(){return!1},format:function(c,a,v){return b("[datetime]:first",v).attr("datetime")},type:"text"}),b.tablesorter.addParser({id:"ignoreCase",is:function(){return!1},format:function(b){return b.toLowerCase()},type:"text"}),b.tablesorter.addParser({id:"string",
is:function(){return!1},format:function(b){return b},type:"text"}),b.tablesorter.addParser({id:"number",is:function(){return!1},format:function(c,a,v){c=b(".number:first",v).attr("data-value");null==c&&(c=Number.MIN_VALUE);return c},type:"numeric"}),b(".table-sortable").each(function(){b(this).tablesorter()}))})})(jQuery);
