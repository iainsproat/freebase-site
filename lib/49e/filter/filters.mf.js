
/*
 * Copyright 2010, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
(function(b){b.factory("collapse_module",{init:function(){var c=this;this.$column=b(this.options.column);this.modules=b(this.options.modules,this.element);this.first_module=this.modules.get(0);this.trigger=b(".trigger:first",this.first_module);this.first_section=b(".module-section",this.first_module);this.other_modules=this.modules.slice(1);this.column_offset=this.$column.css("margin-left");this.set_collapsed(this.options.collapsed);this.trigger.click(function(a){return c.toggle(a)})},set_collapsed:function(c){if(this.toggle_state=
c){this.trigger.addClass("collapsed");this.$column.css("margin-left",0);this.first_section.hide();this.other_modules.hide()}else{this.trigger.removeClass("collapsed");this.$column.css("margin-left",this.column_offset);this.first_section.show();this.other_modules.show()}},toggle:function(){var c=this;if(this.toggle_state){b.localstore("filters_collapsed",0,false);this.trigger.removeClass("collapsed");this.$column.animate({marginLeft:this.column_offset},function(){c.first_section.slideDown(function(){c.modules.removeClass("collapsed")});
c.other_modules.fadeIn()})}else{b.localstore("filters_collapsed",1,false);this.trigger.addClass("collapsed");this.other_modules.fadeOut();this.first_section.slideUp(function(){c.$column.animate({marginLeft:0});c.modules.addClass("collapsed")})}this.toggle_state=!this.toggle_state;this.options.toggle_callback&&this.options.toggle_callback.call(this.trigger,this.toggle_state);return false}});var e=b.localstore("filters_collapsed");b.extend(true,b.collapse_module,{defaults:{collapsed:e===null?true:!!e,
modules:".module",column:"#main-column"}})})(jQuery);
(function(b,e){function c(a){return!b(a).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});b.fn.extend({_focus:b.fn.focus,focus:function(a,d){return typeof a==="number"?this.each(function(){var f=this;setTimeout(function(){b(f).focus();d&&d.call(f)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,
"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(a){if(a!==e)return this.css("zIndex",a);if(this.length){a=b(this[0]);for(var d;a.length&&a[0]!==document;){d=a.css("position");
if(d==="absolute"||d==="relative"||d==="fixed"){d=parseInt(a.css("zIndex"),10);if(!isNaN(d)&&d!==0)return d}a=a.parent()}}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.each(["Width","Height"],function(a,d){function f(i,k,l,m){b.each(g,function(){k-=parseFloat(b.curCSS(i,"padding"+this,true))||0;if(l)k-=parseFloat(b.curCSS(i,
"border"+this+"Width",true))||0;if(m)k-=parseFloat(b.curCSS(i,"margin"+this,true))||0});return k}var g=d==="Width"?["Left","Right"]:["Top","Bottom"],h=d.toLowerCase(),j={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(i){if(i===e)return j["inner"+d].call(this);return this.each(function(){b(this).css(h,f(this,i)+"px")})};b.fn["outer"+d]=function(i,k){if(typeof i!=="number")return j["outer"+d].call(this,i);return this.each(function(){b(this).css(h,
f(this,i,true,k)+"px")})}});b.extend(b.expr[":"],{data:function(a,d,f){return!!b.data(a,f[3])},focusable:function(a){var d=a.nodeName.toLowerCase(),f=b.attr(a,"tabindex");if("area"===d){d=a.parentNode;f=d.name;if(!a.href||!f||d.nodeName.toLowerCase()!=="map")return false;a=b("img[usemap=#"+f+"]")[0];return!!a&&c(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||!isNaN(f):!isNaN(f))&&c(a)},tabbable:function(a){var d=b.attr(a,"tabindex");return(isNaN(d)||d>=0)&&b(a).is(":focusable")}});
b(function(){var a=document.body,d=a.appendChild(d=document.createElement("div"));b.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=d.offsetHeight===100;b.support.selectstart="onselectstart"in d;a.removeChild(d).style.display="none"});b.extend(b.ui,{plugin:{add:function(a,d,f){a=b.ui[a].prototype;for(var g in f){a.plugins[g]=a.plugins[g]||[];a.plugins[g].push([d,f[g]])}},call:function(a,d,f){if((d=a.plugins[d])&&a.element[0].parentNode)for(var g=0;g<d.length;g++)a.options[d[g][0]]&&
d[g][1].apply(a.element,f)}},contains:function(a,d){return document.compareDocumentPosition?a.compareDocumentPosition(d)&16:a!==d&&a.contains(d)},hasScroll:function(a,d){if(b(a).css("overflow")==="hidden")return false;var f=d&&d==="left"?"scrollLeft":"scrollTop",g=false;if(a[f]>0)return true;a[f]=1;g=a[f]>0;a[f]=0;return g},isOverAxis:function(a,d,f){return a>d&&a<d+f},isOver:function(a,d,f,g,h,j){return b.ui.isOverAxis(a,f,h)&&b.ui.isOverAxis(d,g,j)}})}})(jQuery);
(function(b){b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var e=this,c=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");c.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");
this.range=b([]);if(c.range){if(c.range===true){this.range=b("<div></div>");if(!c.values)c.values=[this._valueMin(),this._valueMin()];if(c.values.length&&c.values.length!==2)c.values=[c.values[0],c.values[0]]}else this.range=b("<div></div>");this.range.appendTo(this.element).addClass("ui-slider-range");if(c.range==="min"||c.range==="max")this.range.addClass("ui-slider-range-"+c.range);this.range.addClass("ui-widget-header")}b(".ui-slider-handle",this.element).length===0&&b("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");
if(c.values&&c.values.length)for(;b(".ui-slider-handle",this.element).length<c.values.length;)b("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=b(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){c.disabled||b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).focus(function(){if(c.disabled)b(this).blur();
else{b(".ui-slider .ui-state-focus").removeClass("ui-state-focus");b(this).addClass("ui-state-focus")}}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(a){b(this).data("index.ui-slider-handle",a)});this.handles.keydown(function(a){var d=true,f=b(this).data("index.ui-slider-handle"),g,h,j;if(!e.options.disabled){switch(a.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:d=
false;if(!e._keySliding){e._keySliding=true;b(this).addClass("ui-state-active");g=e._start(a,f);if(g===false)return}break}j=e.options.step;g=e.options.values&&e.options.values.length?(h=e.values(f)):(h=e.value());switch(a.keyCode){case b.ui.keyCode.HOME:h=e._valueMin();break;case b.ui.keyCode.END:h=e._valueMax();break;case b.ui.keyCode.PAGE_UP:h=e._trimAlignValue(g+(e._valueMax()-e._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:h=e._trimAlignValue(g-(e._valueMax()-e._valueMin())/5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(g===
e._valueMax())return;h=e._trimAlignValue(g+j);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(g===e._valueMin())return;h=e._trimAlignValue(g-j);break}e._slide(a,f,h);return d}}).keyup(function(a){var d=b(this).data("index.ui-slider-handle");if(e._keySliding){e._keySliding=false;e._stop(a,d);e._change(a,d);b(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");
this._mouseDestroy();return this},_mouseCapture:function(e){var c=this.options,a,d,f,g,h;if(c.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();a=this._normValueFromMouse({x:e.pageX,y:e.pageY});d=this._valueMax()-this._valueMin()+1;g=this;this.handles.each(function(j){var i=Math.abs(a-g.values(j));if(d>i){d=i;f=b(this);h=j}});if(c.range===true&&this.values(1)===c.min){h+=1;f=b(this.handles[h])}if(this._start(e,
h)===false)return false;this._mouseSliding=true;g._handleIndex=h;f.addClass("ui-state-active").focus();c=f.offset();this._clickOffset=!b(e.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:e.pageX-c.left-f.width()/2,top:e.pageY-c.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(e,h,a);return this._animateOff=true},_mouseStart:function(){return true},
_mouseDrag:function(e){var c=this._normValueFromMouse({x:e.pageX,y:e.pageY});this._slide(e,this._handleIndex,c);return false},_mouseStop:function(e){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var c;
if(this.orientation==="horizontal"){c=this.elementSize.width;e=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{c=this.elementSize.height;e=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}c=e/c;if(c>1)c=1;if(c<0)c=0;if(this.orientation==="vertical")c=1-c;e=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+c*e)},_start:function(e,c){var a={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){a.value=
this.values(c);a.values=this.values()}return this._trigger("start",e,a)},_slide:function(e,c,a){var d;if(this.options.values&&this.options.values.length){d=this.values(c?0:1);if(this.options.values.length===2&&this.options.range===true&&(c===0&&a>d||c===1&&a<d))a=d;if(a!==this.values(c)){d=this.values();d[c]=a;e=this._trigger("slide",e,{handle:this.handles[c],value:a,values:d});this.values(c?0:1);e!==false&&this.values(c,a,true)}}else if(a!==this.value()){e=this._trigger("slide",e,{handle:this.handles[c],
value:a});e!==false&&this.value(a)}},_stop:function(e,c){var a={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(c);a.values=this.values()}this._trigger("stop",e,a)},_change:function(e,c){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(c);a.values=this.values()}this._trigger("change",e,a)}},value:function(e){if(arguments.length){this.options.value=
this._trimAlignValue(e);this._refreshValue();this._change(null,0)}return this._value()},values:function(e,c){var a,d,f;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(c);this._refreshValue();this._change(null,e)}if(arguments.length)if(b.isArray(arguments[0])){a=this.options.values;d=arguments[0];for(f=0;f<a.length;f+=1){a[f]=this._trimAlignValue(d[f]);this._change(null,f)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(e):this.value();
else return this._values()},_setOption:function(e,c){var a,d=0;if(b.isArray(this.options.values))d=this.options.values.length;b.Widget.prototype._setOption.apply(this,arguments);switch(e){case "disabled":if(c){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(a=0;a<d;a+=1)this._change(null,a);this._animateOff=false;break}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var c,a;if(arguments.length){c=this.options.values[e];
return c=this._trimAlignValue(c)}else{c=this.options.values.slice();for(a=0;a<c.length;a+=1)c[a]=this._trimAlignValue(c[a]);return c}},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var c=this.options.step>0?this.options.step:1,a=(e-this._valueMin())%c;alignValue=e-a;if(Math.abs(a)*2>=c)alignValue+=a>0?c:-c;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},
_refreshValue:function(){var e=this.options.range,c=this.options,a=this,d=!this._animateOff?c.animate:false,f,g={},h,j,i,k;if(this.options.values&&this.options.values.length)this.handles.each(function(l){f=(a.values(l)-a._valueMin())/(a._valueMax()-a._valueMin())*100;g[a.orientation==="horizontal"?"left":"bottom"]=f+"%";b(this).stop(1,1)[d?"animate":"css"](g,c.animate);if(a.options.range===true)if(a.orientation==="horizontal"){if(l===0)a.range.stop(1,1)[d?"animate":"css"]({left:f+"%"},c.animate);
if(l===1)a.range[d?"animate":"css"]({width:f-h+"%"},{queue:false,duration:c.animate})}else{if(l===0)a.range.stop(1,1)[d?"animate":"css"]({bottom:f+"%"},c.animate);if(l===1)a.range[d?"animate":"css"]({height:f-h+"%"},{queue:false,duration:c.animate})}h=f});else{j=this.value();i=this._valueMin();k=this._valueMax();f=k!==i?(j-i)/(k-i)*100:0;g[a.orientation==="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[d?"animate":"css"](g,c.animate);if(e==="min"&&this.orientation==="horizontal")this.range.stop(1,
1)[d?"animate":"css"]({width:f+"%"},c.animate);if(e==="max"&&this.orientation==="horizontal")this.range[d?"animate":"css"]({width:100-f+"%"},{queue:false,duration:c.animate});if(e==="min"&&this.orientation==="vertical")this.range.stop(1,1)[d?"animate":"css"]({height:f+"%"},c.animate);if(e==="max"&&this.orientation==="vertical")this.range[d?"animate":"css"]({height:100-f+"%"},{queue:false,duration:c.animate})}}});b.extend(b.ui.slider,{version:"1.8.10"})})(jQuery);
(function(b,e){e.filters={init_domain_type_property_filter:function(c){b(":text[name=domain], :text[name=type], :text[name=property]",c).suggest(e.suggest_options.any("/type/domain","/type/type","/type/property")).bind("fb-select",function(a,d){var f=b(this);f.val(d.id);var g=d["n:type"].id;if(g==="/type/domain")f.attr("name","domain");else if(g==="/type/type")f.attr("name","type");else g==="/type/property"&&f.attr("name","property");this.form.submit()})},init_limit_slider_filter:function(c,a,d,f,
g){var h=b(".limit-slider",c),j=b(".current-limit",c),i=b("input[name=limit]",c),k=parseInt(i.val()||a,10);h.slider({value:k,min:d||1,max:f||100,step:g||10,slide:function(l,m){j.css({color:"#f71"});j.text(m.value)},stop:function(l,m){j.css({color:"#333"});i.val(m.value);m.value!=k&&i[0].form.submit()}})}};b(function(){b(".filter-form-trigger").click(function(){var c=b(this).siblings(".filter-form");c.is(":hidden")?c.slideDown(function(){b(":text:first",c).focus()}):c.slideUp()})})})(jQuery,window.freebase);
