
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
(function(b,g){var l,f,d,a,c,e,j,h,k,r,q,s,B,A,v,x,L,G,H,V,T,W,Z,Y;l=function(i){return new l.prototype.init(i)};if(typeof require!=="undefined"&&typeof exports!=="undefined"&&typeof module!=="undefined")module.exports=l;else b.Globalize=l;l.cultures={};l.prototype={constructor:l,init:function(i){this.cultures=l.cultures;this.cultureSelector=i;return this}};l.prototype.init.prototype=l.prototype;l.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",
numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun",
"Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",
F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};l.cultures["default"].calendar=l.cultures["default"].calendars.standard;l.cultures.en=l.cultures["default"];l.cultureSelector="en";f=/^0x[a-f0-9]+$/i;d=/^[+\-]?infinity$/i;a=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;c=/^\s+|\s+$/g;e=function(i,m){if(i.indexOf)return i.indexOf(m);for(var n=0,p=i.length;n<p;n++)if(i[n]===m)return n;return-1};j=function(i,m){return i.substr(i.length-m.length)===m};h=
function(){var i,m,n,p,t,y=arguments[0]||{},z=1,o=arguments.length,w=false;if(typeof y==="boolean"){w=y;y=arguments[1]||{};z=2}if(typeof y!=="object"&&!r(y))y={};for(;z<o;z++)if((i=arguments[z])!=null)for(m in i){n=y[m];p=i[m];if(y!==p)if(w&&p&&(q(p)||(t=k(p)))){if(t){t=false;n=n&&k(n)?n:[]}else n=n&&q(n)?n:{};y[m]=h(w,n,p)}else if(p!==g)y[m]=p}return y};k=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};r=function(i){return Object.prototype.toString.call(i)===
"[object Function]"};q=function(i){return Object.prototype.toString.call(i)==="[object Object]"};s=function(i,m){return i.indexOf(m)===0};B=function(i){return(i+"").replace(c,"")};A=function(i){if(isNaN(i))return NaN;return Math[i<0?"ceil":"floor"](i)};v=function(i,m,n){var p;for(p=i.length;p<m;p+=1)i=n?"0"+i:i+"0";return i};x=function(i,m){for(var n=0,p=false,t=0,y=i.length;t<y;t++){var z=i.charAt(t);switch(z){case "'":if(p)m.push("'");else n++;p=false;break;case "\\":p&&m.push("\\");p=!p;break;
default:m.push(z);p=false;break}}return n};L=function(i,m){m=m||"F";var n;n=i.patterns;var p=m.length;if(p===1){n=n[m];if(!n)throw"Invalid date format string '"+m+"'.";m=n}else if(p===2&&m.charAt(0)==="%")m=m.charAt(1);return m};G=function(i,m,n){function p(P,O){var Q;Q=P+"";if(O>1&&Q.length<O){Q=E[O-2]+Q;return Q.substr(Q.length-O,O)}else;return Q}function t(){if(F||J)return F;F=S.test(m);J=true;return F}function y(P,O){if(D)return D[O];switch(O){case 0:return P.getFullYear();case 1:return P.getMonth();
case 2:return P.getDate();default:throw"Invalid part value "+O;}}var z=n.calendar,o=z.convert;if(!m||!m.length||m==="i"){if(n&&n.name.length)if(o)n=G(i,z.patterns.F,n);else{n=new Date(i.getTime());var w=T(i,z.eras);n.setFullYear(W(i,z,w));n=n.toLocaleString()}else n=i.toString();return n}w=z.eras;var C=m==="s";m=L(z,m);n=[];var u,E=["0","00","000"],F,J,S=/([^d]|^)(d|dd)([^d]|$)/g,M=0,I=V(),D;if(!C&&o)D=o.fromGregorian(i);for(;;){u=I.lastIndex;o=I.exec(m);u=m.slice(u,o?o.index:m.length);M+=x(u,n);
if(!o)break;if(M%2)n.push(o[0]);else{u=o[0];o=u.length;switch(u){case "ddd":case "dddd":n.push((o===3?z.days.namesAbbr:z.days.names)[i.getDay()]);break;case "d":case "dd":F=true;n.push(p(y(i,2),o));break;case "MMM":case "MMMM":u=y(i,1);n.push(z.monthsGenitive&&t()?z.monthsGenitive[o===3?"namesAbbr":"names"][u]:z.months[o===3?"namesAbbr":"names"][u]);break;case "M":case "MM":n.push(p(y(i,1)+1,o));break;case "y":case "yy":case "yyyy":u=D?D[0]:W(i,z,T(i,w),C);if(o<4)u%=100;n.push(p(u,o));break;case "h":case "hh":u=
i.getHours()%12;if(u===0)u=12;n.push(p(u,o));break;case "H":case "HH":n.push(p(i.getHours(),o));break;case "m":case "mm":n.push(p(i.getMinutes(),o));break;case "s":case "ss":n.push(p(i.getSeconds(),o));break;case "t":case "tt":u=i.getHours()<12?z.AM?z.AM[0]:" ":z.PM?z.PM[0]:" ";n.push(o===1?u.charAt(0):u);break;case "f":case "ff":case "fff":n.push(p(i.getMilliseconds(),3).substr(0,o));break;case "z":case "zz":u=i.getTimezoneOffset()/60;n.push((u<=0?"+":"-")+p(Math.floor(Math.abs(u)),o));break;case "zzz":u=
i.getTimezoneOffset()/60;n.push((u<=0?"+":"-")+p(Math.floor(Math.abs(u)),2)+":"+p(Math.abs(i.getTimezoneOffset()%60),2));break;case "g":case "gg":z.eras&&n.push(z.eras[T(i,w)].name);break;case "/":n.push(z["/"]);break;default:throw"Invalid date format pattern '"+u+"'.";}}}return n.join("")};(function(){var i;i=function(m,n,p){var t=p.groupSizes,y=t[0],z=1,o=Math.pow(10,n),w=Math.round(m*o)/o;isFinite(w)||(w=m);o="";o=(w+"").split(/e/i);w=o.length>1?parseInt(o[1],10):0;m=o[0];o=m.split(".");m=o[0];
o=o.length>1?o[1]:"";if(w>0){o=v(o,w,false);m+=o.slice(0,w);o=o.substr(w)}else if(w<0){w=-w;m=v(m,w+1,true);o=m.slice(-w,m.length)+o;m=m.slice(0,-w)}o=n>0?p["."]+(o.length>n?o.slice(0,n):v(o,n)):"";n=m.length-1;p=p[","];for(w="";n>=0;){if(y===0||y>n)return m.slice(0,n+1)+(w.length?p+w+o:o);w=m.slice(n-y+1,n+1)+(w.length?p+w:"");n-=y;if(z<t.length){y=t[z];z++}}return m.slice(0,n+1)+p+w+o};H=function(m,n,p){if(!isFinite(m)){if(m===Infinity)return p.numberFormat.positiveInfinity;if(m===-Infinity)return p.numberFormat.negativeInfinity;
return p.numberFormat.NaN}if(!n||n==="i")return p.name.length?m.toLocaleString():m.toString();n=n||"D";p=p.numberFormat;var t=Math.abs(m),y=-1;if(n.length>1)y=parseInt(n.slice(1),10);var z=n.charAt(0).toUpperCase(),o;switch(z){case "D":n="n";t=A(t);if(y!==-1)t=v(""+t,y,true);if(m<0)t="-"+t;break;case "N":o=p;case "C":o=o||p.currency;case "P":o=o||p.percent;n=m<0?o.pattern[0]:o.pattern[1]||"n";if(y===-1)y=o.decimals;t=i(t*(z==="P"?100:1),y,o);break;default:throw"Bad number format specifier: "+z;}m=
/n|\$|-|%/g;for(o="";;){y=m.lastIndex;z=m.exec(n);o+=n.slice(y,z?z.index:n.length);if(!z)break;switch(z[0]){case "n":o+=t;break;case "$":o+=p.currency.symbol;break;case "-":if(/[1-9]/.test(t))o+=p["-"];break;case "%":o+=p.percent.symbol;break}}return o}})();V=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};T=function(i,m){if(!m)return 0;for(var n,p=i.getTime(),t=0,y=m.length;t<y;t++){n=m[t].start;if(n===null||p>=n)return t}return 0};W=
function(i,m,n,p){i=i.getFullYear();if(!p&&m.eras)i-=m.eras[n].offset;return i};(function(){var i,m,n,p,t,y,z;i=function(o,w){if(w<100){var C=new Date,u=T(C);C=W(C,o,u);u=o.twoDigitYearMax;u=typeof u==="string"?(new Date).getFullYear()%100+parseInt(u,10):u;w+=C-C%100;if(w>u)w-=100}return w};m=function(o,w,C){var u=o.days,E=o._upperDays;if(!E)o._upperDays=E=[z(u.names),z(u.namesAbbr),z(u.namesShort)];w=y(w);if(C){o=e(E[1],w);if(o===-1)o=e(E[2],w)}else o=e(E[0],w);return o};n=function(o,w,C){var u=
o.months,E=o.monthsGenitive||o.months,F=o._upperMonths,J=o._upperMonthsGen;if(!F){o._upperMonths=F=[z(u.names),z(u.namesAbbr)];o._upperMonthsGen=J=[z(E.names),z(E.namesAbbr)]}w=y(w);o=e(C?F[1]:F[0],w);if(o<0)o=e(C?J[1]:J[0],w);return o};p=function(o,w){var C=o._parseRegExp;if(C){var u=C[w];if(u)return u}else o._parseRegExp=C={};u=L(o,w).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");for(var E=["^"],F=[],J=0,S=0,M=V(),I;(I=M.exec(u))!==null;){var D=u.slice(J,I.index);J=M.lastIndex;S+=x(D,E);if(S%
2)E.push(I[0]);else{D=I[0];var P=D.length;switch(D){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":D="(\\D+)";break;case "tt":case "t":D="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":D="(\\d{"+P+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":D="(\\d\\d?)";break;case "zzz":D="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":D="([+-]?\\d\\d?)";break;case "/":D="(\\/)";break;default:throw"Invalid date format pattern '"+
D+"'.";}D&&E.push(D);F.push(I[0])}}x(u.slice(J),E);E.push("$");u={regExp:E.join("").replace(/\s+/g,"\\s+"),groups:F};return C[w]=u};t=function(o,w,C){return o<w||o>C};y=function(o){return o.split("\u00a0").join(" ").toUpperCase()};z=function(o){for(var w=[],C=0,u=o.length;C<u;C++)w[C]=y(o[C]);return w};Z=function(o,w,C){o=B(o);C=C.calendar;w=p(C,w);var u=(new RegExp(w.regExp)).exec(o);if(u===null)return null;var E=w.groups;var F=w=o=null,J=null,S=null,M=0,I,D=0,P=0,O=0;I=null;for(var Q=false,U=0,
aa=E.length;U<aa;U++){var K=u[U+1];if(K){var N=E[U],X=N.length,R=parseInt(K,10);switch(N){case "dd":case "d":J=R;if(t(J,1,31))return null;break;case "MMM":case "MMMM":F=n(C,K,X===3);if(t(F,0,11))return null;break;case "M":case "MM":F=R-1;if(t(F,0,11))return null;break;case "y":case "yy":case "yyyy":w=X<4?i(C,R):R;if(t(w,0,9999))return null;break;case "h":case "hh":M=R;if(M===12)M=0;if(t(M,0,11))return null;break;case "H":case "HH":M=R;if(t(M,0,23))return null;break;case "m":case "mm":D=R;if(t(D,0,
59))return null;break;case "s":case "ss":P=R;if(t(P,0,59))return null;break;case "tt":case "t":Q=C.PM&&(K===C.PM[0]||K===C.PM[1]||K===C.PM[2]);if(!Q&&(!C.AM||K!==C.AM[0]&&K!==C.AM[1]&&K!==C.AM[2]))return null;break;case "f":case "ff":case "fff":O=R*Math.pow(10,3-X);if(t(O,0,999))return null;break;case "ddd":case "dddd":S=m(C,K,X===3);if(t(S,0,6))return null;break;case "zzz":N=K.split(/:/);if(N.length!==2)return null;I=parseInt(N[0],10);if(t(I,-12,13))return null;N=parseInt(N[1],10);if(t(N,0,59))return null;
I=I*60+(s(K,"-")?-N:N);break;case "z":case "zz":I=R;if(t(I,-12,13))return null;I=I*60;break;case "g":case "gg":K=K;if(!K||!C.eras)return null;K=B(K.toLowerCase());N=0;for(X=C.eras.length;N<X;N++)if(K===C.eras[N].name.toLowerCase()){o=N;break}if(o===null)return null;break}}}u=new Date;E=(U=C.convert)?U.fromGregorian(u)[0]:u.getFullYear();if(w===null)w=E;else if(C.eras)w+=C.eras[o||0].offset;if(F===null)F=0;if(J===null)J=1;if(U){u=U.toGregorian(w,F,J);if(u===null)return null}else{u.setFullYear(w,F,
J);if(u.getDate()!==J)return null;if(S!==null&&u.getDay()!==S)return null}if(Q&&M<12)M+=12;u.setHours(M,D,P,O);if(I!==null){C=u.getMinutes()-(I+u.getTimezoneOffset());u.setHours(u.getHours()+parseInt(C/60,10),C%60)}return u}})();Y=function(i,m,n){var p=m["-"];m=m["+"];var t;switch(n){case "n -":p=" "+p;m=" "+m;case "n-":if(j(i,p))t=["-",i.substr(0,i.length-p.length)];else if(j(i,m))t=["+",i.substr(0,i.length-m.length)];break;case "- n":p+=" ";m+=" ";case "-n":if(s(i,p))t=["-",i.substr(p.length)];
else if(s(i,m))t=["+",i.substr(m.length)];break;case "(n)":if(s(i,"(")&&j(i,")"))t=["-",i.substr(1,i.length-2)];break}return t||["",i]};l.prototype.findClosestCulture=function(i){return l.findClosestCulture.call(this,i)};l.prototype.format=function(i,m,n){return l.format.call(this,i,m,n)};l.prototype.localize=function(i,m){return l.localize.call(this,i,m)};l.prototype.parseInt=function(i,m,n){return l.parseInt.call(this,i,m,n)};l.prototype.parseFloat=function(i,m,n){return l.parseFloat.call(this,
i,m,n)};l.prototype.culture=function(i){return l.culture.call(this,i)};l.addCultureInfo=function(i,m,n){var p={},t=false;if(typeof i!=="string"){n=i;i=this.culture().name;p=this.cultures[i]}else if(typeof m!=="string"){n=m;t=this.cultures[i]==null;p=this.cultures[i]||this.cultures["default"]}else{t=true;p=this.cultures[m]}this.cultures[i]=h(true,{},p,n);if(t)this.cultures[i].calendar=this.cultures[i].calendars.standard};l.findClosestCulture=function(i){var m;if(!i)return this.findClosestCulture(this.cultureSelector)||
this.cultures["default"];if(typeof i==="string")i=i.split(",");if(k(i)){var n,p=this.cultures,t=i,y,z=t.length,o=[];for(y=0;y<z;y++){i=B(t[y]);i=i.split(";");n=B(i[0]);if(i.length===1)i=1;else{i=B(i[1]);if(i.indexOf("q=")===0){i=i.substr(2);i=parseFloat(i);i=isNaN(i)?0:i}else i=1}o.push({lang:n,pri:i})}o.sort(function(C,u){if(C.pri<u.pri)return 1;else if(C.pri>u.pri)return-1;return 0});for(y=0;y<z;y++){n=o[y].lang;if(m=p[n])return m}for(y=0;y<z;y++){n=o[y].lang;do{t=n.lastIndexOf("-");if(t===-1)break;
n=n.substr(0,t);if(m=p[n])return m}while(1)}for(y=0;y<z;y++){n=o[y].lang;for(var w in p){t=p[w];if(t.language==n)return t}}}else if(typeof i==="object")return i;return m||null};l.format=function(i,m,n){n=this.findClosestCulture(n);if(i instanceof Date)i=G(i,m,n);else if(typeof i==="number")i=H(i,m,n);return i};l.localize=function(i,m){return this.findClosestCulture(m).messages[i]||this.cultures["default"].messages[i]};l.parseDate=function(i,m,n){n=this.findClosestCulture(n);var p,t;if(m){if(typeof m===
"string")m=[m];if(m.length){t=0;for(var y=m.length;t<y;t++){var z=m[t];if(z)if(p=Z(i,z,n))break}}}else{m=n.calendar.patterns;for(t in m)if(p=Z(i,m[t],n))break}return p||null};l.parseInt=function(i,m,n){return A(l.parseFloat(i,m,n))};l.parseFloat=function(i,m,n){if(typeof m!=="number"){n=m;m=10}var p=this.findClosestCulture(n);n=NaN;var t=p.numberFormat;if(i.indexOf(p.numberFormat.currency.symbol)>-1){i=i.replace(p.numberFormat.currency.symbol,"");i=i.replace(p.numberFormat.currency["."],p.numberFormat["."])}i=
B(i);if(d.test(i))n=parseFloat(i);else if(!m&&f.test(i))n=parseInt(i,16);else{p=Y(i,t,t.pattern[0]);m=p[0];p=p[1];if(m===""&&t.pattern[0]!=="(n)"){p=Y(i,t,"(n)");m=p[0];p=p[1]}if(m===""&&t.pattern[0]!=="-n"){p=Y(i,t,"-n");m=p[0];p=p[1]}m=m||"+";var y;i=p.indexOf("e");if(i<0)i=p.indexOf("E");if(i<0){y=p;i=null}else{y=p.substr(0,i);i=p.substr(i+1)}var z=t["."],o=y.indexOf(z);if(o<0){p=y;y=null}else{p=y.substr(0,o);y=y.substr(o+z.length)}z=t[","];p=p.split(z).join("");o=z.replace(/\u00A0/g," ");if(z!==
o)p=p.split(o).join("");m=m+p;if(y!==null)m+="."+y;if(i!==null){t=Y(i,t,"-n");m+="e"+(t[0]||"+")+t[1]}if(a.test(m))n=parseFloat(m)}return n};l.culture=function(i){if(typeof i!=="undefined")this.cultureSelector=i;return this.findClosestCulture(i)||this.cultures["default"]}})(this);
if(!("JSON"in window&&window.JSON)){if(!this.JSON)this.JSON={};(function(){function b(h){return h<10?"0"+h:h}function g(h){d.lastIndex=0;return d.test(h)?'"'+h.replace(d,function(k){var r=e[k];return typeof r==="string"?r:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function l(h,k){var r,q,s,B,A=a,v,x=k[h];if(x&&typeof x==="object"&&typeof x.toJSON==="function")x=x.toJSON(h);if(typeof j==="function")x=j.call(k,h,x);switch(typeof x){case "string":return g(x);case "number":return isFinite(x)?
String(x):"null";case "boolean":case "null":return String(x);case "object":if(!x)return"null";a+=c;v=[];if(Object.prototype.toString.apply(x)==="[object Array]"){B=x.length;for(r=0;r<B;r+=1)v[r]=l(r,x)||"null";s=v.length===0?"[]":a?"[\n"+a+v.join(",\n"+a)+"\n"+A+"]":"["+v.join(",")+"]";a=A;return s}if(j&&typeof j==="object"){B=j.length;for(r=0;r<B;r+=1){q=j[r];if(typeof q==="string")if(s=l(q,x))v.push(g(q)+(a?": ":":")+s)}}else for(q in x)if(Object.hasOwnProperty.call(x,q))if(s=l(q,x))v.push(g(q)+
(a?": ":":")+s);s=v.length===0?"{}":a?"{\n"+a+v.join(",\n"+a)+"\n"+A+"}":"{"+v.join(",")+"}";a=A;return s}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,c,e={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof JSON.stringify!=="function")JSON.stringify=function(h,k,r){var q;c=a="";if(typeof r==="number")for(q=0;q<r;q+=1)c+=" ";else if(typeof r==="string")c=r;if((j=k)&&typeof k!=="function"&&(typeof k!=="object"||typeof k.length!=="number"))throw new Error("JSON.stringify");return l("",
{"":h})};if(typeof JSON.parse!=="function")JSON.parse=function(h,k){function r(s,B){var A,v,x=s[B];if(x&&typeof x==="object")for(A in x)if(Object.hasOwnProperty.call(x,A)){v=r(x,A);if(v!==undefined)x[A]=v;else delete x[A]}return k.call(s,B,x)}var q;h=String(h);f.lastIndex=0;if(f.test(h))h=h.replace(f,function(s){return"\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(h.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){q=eval("("+h+")");return typeof k==="function"?r({"":q},""):q}throw new SyntaxError("JSON.parse");}})()}
(function(b){b.factory=function(g,l){if(b.fn[g])throw"$.fn."+g+" plugin already exists";else if(b[g])throw"$."+g+" class already exists";b.fn[g]=function(f){return this.each(function(){var d=b(this),a=d.data("$."+g);a&&a._destroy();a=new b[g](d,f);d.data("$."+g,a)})};b[g]=function(f,d){this.options=b.extend(true,{},b[g].defaults,d);this.element=f;this.init()};b.extend(b[g].prototype,{init:function(){},_destroy:function(){}},l);return b[g]}})(jQuery);
(function(){var b={};$.extend({localstore:function(g,l,f,d){var a=document.location.hostname,c=document.location.protocol;if(typeof l!=="undefined"){var e=JSON.stringify(l);if(!f&&window.globalStorage)if(l===null)delete window.globalStorage[a][c+g];else window.globalStorage[a][c+g]=e;else if(!f&&window.localStorage&&window.localStorage.setItem)l===null?window.localStorage.removeItem(c+g):window.localStorage.setItem(c+g,e);else if(f!==false){f={};f.domain=fb.get_cookie_domain();l===null?$.cookie(g,
null,f):$.cookie(g,e,$.extend(f,d||{expires:14,path:"/"}))}else if(l===null)delete b[g];else b[g]=e;return l}else{if(!f&&window.globalStorage){if(window.globalStorage[a][c+g])l=window.globalStorage[a][c+g].value}else l=!f&&window.localStorage?window.localStorage.getItem(c+g):f!==false?$.cookie(g):b[g];if(l!=""&&l!==null&&l!==undefined)return JSON.parse(l,null)}return null}})})();
(function(b){b.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(g,l){this.defaults.type=g;this.defaults.name=l},get:function(g,l){var f=b.extend({},this.defaults,l);if(!f.single.length)f.single="metadata";var d=b.data(g,f.single);if(d)return d;d="{}";var a=function(j){if(typeof j!="string")return j;return j=eval("("+j+")")};if(f.type=="html5"){var c={};b(g.attributes).each(function(){var j=this.nodeName;if(j.match(/^data-/))j=j.replace(/^data-/,
"");else return true;c[j]=a(this.nodeValue)})}else{if(f.type=="class"){var e=f.cre.exec(g.className);if(e)d=e[1]}else if(f.type=="elem"){if(!g.getElementsByTagName)return;e=g.getElementsByTagName(f.name);if(e.length)d=b.trim(e[0].innerHTML)}else if(g.getAttribute!=undefined)if(e=g.getAttribute(f.name))d=e;c=a(d.indexOf("{")<0?"{"+d+"}":d)}b.data(g,f.single,c);return c}}});b.fn.metadata=function(g){return b.metadata.get(this[0],g)}})(jQuery);
(function(b,g){function l(f){return!b(f).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});b.fn.extend({_focus:b.fn.focus,focus:function(f,d){return typeof f==="number"?this.each(function(){var a=this;setTimeout(function(){b(a).focus();d&&d.call(a)},f)}):this._focus.apply(this,arguments)},scrollParent:function(){var f;f=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,
"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!f.length?b(document):f},zIndex:function(f){if(f!==g)return this.css("zIndex",f);if(this.length){f=b(this[0]);for(var d;f.length&&f[0]!==document;){d=f.css("position");
if(d==="absolute"||d==="relative"||d==="fixed"){d=parseInt(f.css("zIndex"),10);if(!isNaN(d)&&d!==0)return d}f=f.parent()}}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(f){f.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.each(["Width","Height"],function(f,d){function a(h,k,r,q){b.each(c,function(){k-=parseFloat(b.curCSS(h,"padding"+this,true))||0;if(r)k-=parseFloat(b.curCSS(h,
"border"+this+"Width",true))||0;if(q)k-=parseFloat(b.curCSS(h,"margin"+this,true))||0});return k}var c=d==="Width"?["Left","Right"]:["Top","Bottom"],e=d.toLowerCase(),j={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(h){if(h===g)return j["inner"+d].call(this);return this.each(function(){b(this).css(e,a(this,h)+"px")})};b.fn["outer"+d]=function(h,k){if(typeof h!=="number")return j["outer"+d].call(this,h);return this.each(function(){b(this).css(e,
a(this,h,true,k)+"px")})}});b.extend(b.expr[":"],{data:function(f,d,a){return!!b.data(f,a[3])},focusable:function(f){var d=f.nodeName.toLowerCase(),a=b.attr(f,"tabindex");if("area"===d){d=f.parentNode;a=d.name;if(!f.href||!a||d.nodeName.toLowerCase()!=="map")return false;f=b("img[usemap=#"+a+"]")[0];return!!f&&l(f)}return(/input|select|textarea|button|object/.test(d)?!f.disabled:"a"==d?f.href||!isNaN(a):!isNaN(a))&&l(f)},tabbable:function(f){var d=b.attr(f,"tabindex");return(isNaN(d)||d>=0)&&b(f).is(":focusable")}});
b(function(){var f=document.body,d=f.appendChild(d=document.createElement("div"));b.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=d.offsetHeight===100;b.support.selectstart="onselectstart"in d;f.removeChild(d).style.display="none"});b.extend(b.ui,{plugin:{add:function(f,d,a){f=b.ui[f].prototype;for(var c in a){f.plugins[c]=f.plugins[c]||[];f.plugins[c].push([d,a[c]])}},call:function(f,d,a){if((d=f.plugins[d])&&f.element[0].parentNode)for(var c=0;c<d.length;c++)f.options[d[c][0]]&&
d[c][1].apply(f.element,a)}},contains:function(f,d){return document.compareDocumentPosition?f.compareDocumentPosition(d)&16:f!==d&&f.contains(d)},hasScroll:function(f,d){if(b(f).css("overflow")==="hidden")return false;var a=d&&d==="left"?"scrollLeft":"scrollTop",c=false;if(f[a]>0)return true;f[a]=1;c=f[a]>0;f[a]=0;return c},isOverAxis:function(f,d,a){return f>d&&f<d+a},isOver:function(f,d,a,c,e,j){return b.ui.isOverAxis(f,a,e)&&b.ui.isOverAxis(d,c,j)}})}})(jQuery);
(function(b,g){if(b.cleanData){var l=b.cleanData;b.cleanData=function(d){for(var a=0,c;(c=d[a])!=null;a++)b(c).triggerHandler("remove");l(d)}}else{var f=b.fn.remove;b.fn.remove=function(d,a){return this.each(function(){if(!a)if(!d||b.filter(d,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return f.call(b(this),d,a)})}}b.widget=function(d,a,c){var e=d.split(".")[0],j;d=d.split(".")[1];j=e+"-"+d;if(!c){c=a;a=b.Widget}b.expr[":"][j]=function(h){return!!b.data(h,
d)};b[e]=b[e]||{};b[e][d]=function(h,k){arguments.length&&this._createWidget(h,k)};a=new a;a.options=b.extend(true,{},a.options);b[e][d].prototype=b.extend(true,a,{namespace:e,widgetName:d,widgetEventPrefix:b[e][d].prototype.widgetEventPrefix||d,widgetBaseClass:j},c);b.widget.bridge(d,b[e][d])};b.widget.bridge=function(d,a){b.fn[d]=function(c){var e=typeof c==="string",j=Array.prototype.slice.call(arguments,1),h=this;c=!e&&j.length?b.extend.apply(null,[true,c].concat(j)):c;if(e&&c.charAt(0)==="_")return h;
e?this.each(function(){var k=b.data(this,d),r=k&&b.isFunction(k[c])?k[c].apply(k,j):k;if(r!==k&&r!==g){h=r;return false}}):this.each(function(){var k=b.data(this,d);k?k.option(c||{})._init():b.data(this,d,new a(c,this))});return h}};b.Widget=function(d,a){arguments.length&&this._createWidget(d,a)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,a){b.data(a,this.widgetName,this);this.element=b(a);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),d);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(d,a){var c=d;if(arguments.length===0)return b.extend({},this.options);if(typeof d==="string"){if(a===g)return this.options[d];c={};c[d]=a}this._setOptions(c);return this},_setOptions:function(d){var a=this;b.each(d,function(c,e){a._setOption(c,e)});return this},_setOption:function(d,a){this.options[d]=a;if(d==="disabled")this.widget()[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",a);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(d,a,c){var e=this.options[d];a=b.Event(a);a.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();c=c||{};if(a.originalEvent){d=b.event.props.length;for(var j;d;){j=b.event.props[--d];a[j]=a.originalEvent[j]}}this.element.trigger(a,c);return!(b.isFunction(e)&&e.call(this.element[0],a,c)===false||a.isDefaultPrevented())}}})(jQuery);
(function(b){b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var g=this;this.element.bind("mousedown."+this.widgetName,function(l){return g._mouseDown(l)}).bind("click."+this.widgetName,function(l){if(true===b.data(l.target,g.widgetName+".preventClickEvent")){b.removeData(l.target,g.widgetName+".preventClickEvent");l.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(g){g.originalEvent=
g.originalEvent||{};if(!g.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(g);this._mouseDownEvent=g;var l=this,f=g.which==1,d=typeof this.options.cancel=="string"?b(g.target).parents().add(g.target).filter(this.options.cancel).length:false;if(!f||d||!this._mouseCapture(g))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){l.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)){this._mouseStarted=
this._mouseStart(g)!==false;if(!this._mouseStarted){g.preventDefault();return true}}this._mouseMoveDelegate=function(a){return l._mouseMove(a)};this._mouseUpDelegate=function(a){return l._mouseUp(a)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);g.preventDefault();return g.originalEvent.mouseHandled=true}},_mouseMove:function(g){if(b.browser.msie&&!(document.documentMode>=9)&&!g.button)return this._mouseUp(g);if(this._mouseStarted){this._mouseDrag(g);
return g.preventDefault()}if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,g)!==false)?this._mouseDrag(g):this._mouseUp(g);return!this._mouseStarted},_mouseUp:function(g){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;g.target==this._mouseDownEvent.target&&b.data(g.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(g)}return false},_mouseDistanceMet:function(g){return Math.max(Math.abs(this._mouseDownEvent.pageX-g.pageX),Math.abs(this._mouseDownEvent.pageY-g.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(b){b.ui=b.ui||{};var g=/left|center|right/,l=/top|center|bottom/,f=b.fn.position,d=b.fn.offset;b.fn.position=function(a){if(!a||!a.of)return f.apply(this,arguments);a=b.extend({},a);var c=b(a.of),e=c[0],j=(a.collision||"flip").split(" "),h=a.offset?a.offset.split(" "):[0,0],k,r,q;if(e.nodeType===9){k=c.width();r=c.height();q={top:0,left:0}}else if(e.setTimeout){k=c.width();r=c.height();q={top:c.scrollTop(),left:c.scrollLeft()}}else if(e.preventDefault){a.at="left top";k=r=0;q={top:a.of.pageY,
left:a.of.pageX}}else{k=c.outerWidth();r=c.outerHeight();q=c.offset()}b.each(["my","at"],function(){var s=(a[this]||"").split(" ");if(s.length===1)s=g.test(s[0])?s.concat(["center"]):l.test(s[0])?["center"].concat(s):["center","center"];s[0]=g.test(s[0])?s[0]:"center";s[1]=l.test(s[1])?s[1]:"center";a[this]=s});if(j.length===1)j[1]=j[0];h[0]=parseInt(h[0],10)||0;if(h.length===1)h[1]=h[0];h[1]=parseInt(h[1],10)||0;if(a.at[0]==="right")q.left+=k;else if(a.at[0]==="center")q.left+=k/2;if(a.at[1]==="bottom")q.top+=
r;else if(a.at[1]==="center")q.top+=r/2;q.left+=h[0];q.top+=h[1];return this.each(function(){var s=b(this),B=s.outerWidth(),A=s.outerHeight(),v=parseInt(b.curCSS(this,"marginLeft",true))||0,x=parseInt(b.curCSS(this,"marginTop",true))||0,L=B+v+(parseInt(b.curCSS(this,"marginRight",true))||0),G=A+x+(parseInt(b.curCSS(this,"marginBottom",true))||0),H=b.extend({},q),V;if(a.my[0]==="right")H.left-=B;else if(a.my[0]==="center")H.left-=B/2;if(a.my[1]==="bottom")H.top-=A;else if(a.my[1]==="center")H.top-=
A/2;H.left=Math.round(H.left);H.top=Math.round(H.top);V={left:H.left-v,top:H.top-x};b.each(["left","top"],function(T,W){b.ui.position[j[T]]&&b.ui.position[j[T]][W](H,{targetWidth:k,targetHeight:r,elemWidth:B,elemHeight:A,collisionPosition:V,collisionWidth:L,collisionHeight:G,offset:h,my:a.my,at:a.at})});b.fn.bgiframe&&s.bgiframe();s.offset(b.extend(H,{using:a.using}))})};b.ui.position={fit:{left:function(a,c){var e=b(window);e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();a.left=
e>0?a.left-e:Math.max(a.left-c.collisionPosition.left,a.left)},top:function(a,c){var e=b(window);e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();a.top=e>0?a.top-e:Math.max(a.top-c.collisionPosition.top,a.top)}},flip:{left:function(a,c){if(c.at[0]!=="center"){var e=b(window);e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();var j=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,k=-2*c.offset[0];a.left+=
c.collisionPosition.left<0?j+h+k:e>0?j+h+k:0}},top:function(a,c){if(c.at[1]!=="center"){var e=b(window);e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();var j=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,k=-2*c.offset[1];a.top+=c.collisionPosition.top<0?j+h+k:e>0?j+h+k:0}}}};if(!b.offset.setOffset){b.offset.setOffset=function(a,c){if(/static/.test(b.curCSS(a,"position")))a.style.position="relative";var e=b(a),
j=e.offset(),h=parseInt(b.curCSS(a,"top",true),10)||0,k=parseInt(b.curCSS(a,"left",true),10)||0;j={top:c.top-j.top+h,left:c.left-j.left+k};"using"in c?c.using.call(a,j):e.css(j)};b.fn.offset=function(a){var c=this[0];if(!c||!c.ownerDocument)return null;if(a)return this.each(function(){b.offset.setOffset(this,a)});return d.call(this)}}})(jQuery);
(function(b,g){if(!("console"in window)){var l=window.console={};l.log=l.warn=l.error=l.debug=function(){}}b(function(){var a=b("<div>");b(document.body).append(a);var c=setTimeout(function(){if(b.cleanData){var e=b.cleanData;b.cleanData=function(h){for(var k=0,r;(r=h[k])!=null;k++)b(r).triggerHandler("remove");e(h)}}else{var j=b.fn.remove;b.fn.remove=function(h,k){return this.each(function(){if(!k)if(!h||b.filter(h,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});
return j.call(b(this),h,k)})}}},1);a.bind("remove",function(){clearTimeout(c)});a.remove()});var f={key:1,filter:1,spell:1,exact:1,lang:1,scoring:1,prefixed:1,stemmed:1,format:1,mql_output:1};b.suggest=function(a,c){b.fn[a]=function(e){this.length||console.warn("Suggest: invoked on empty element set");return this.each(function(){if(this.nodeName)if(this.nodeName.toUpperCase()==="INPUT")this.type&&this.type.toUpperCase()!=="TEXT"&&console.warn("Suggest: unsupported INPUT type: "+this.type);else console.warn("Suggest: unsupported DOM element: "+
this.nodeName);var j=b.data(this,a);j&&j._destroy();b.data(this,a,new b.suggest[a](this,e))._init()})};b.suggest[a]=function(e,j){var h=this,k=this.options=b.extend(true,{},b.suggest.defaults,b.suggest[a].defaults,j),r=k.css_prefix=k.css_prefix||"",q=k.css;this.name=a;b.each(q,function(v){q[v]=r+q[v]});k.ac_param={};b.each(f,function(v){var x=k[v];x===null||x===""||(k.ac_param[v]=x)});k.flyout_lang=null;if(k.ac_param.lang){var s=k.ac_param.lang;if(b.type(s)==="string")s=s.split(",");if(b.isArray(s)&&
s.length)if(s=b.trim(s[0]))k.flyout_lang=s}this._status={START:"",LOADING:"",SELECT:"",ERROR:""};if(k.status&&k.status instanceof Array&&k.status.length>=3){this._status.START=k.status[0]||"";this._status.LOADING=k.status[1]||"";this._status.SELECT=k.status[2]||"";if(k.status.length===4)this._status.ERROR=k.status[3]||""}s=this.status=b('<div style="display:none;">').addClass(q.status);var B=this.list=b("<ul>").addClass(q.list),A=this.pane=b('<div style="display:none;" class="fbs-reset">').addClass(q.pane);
A.append(s).append(B);if(k.parent)b(k.parent).append(A);else{A.css("position","absolute");k.zIndex&&A.css("z-index",k.zIndex);b(document.body).append(A)}A.bind("mousedown",function(v){h.input.data("dont_hide",true);v.stopPropagation()}).bind("mouseup",function(v){h.input.data("dont_hide")&&h.input.focus();h.input.removeData("dont_hide");v.stopPropagation()}).bind("click",function(v){v.stopPropagation();if(v=h.get_selected()){h.onselect(v,true);h.hide_all()}});B.hover(function(v){h.hoverover_list(v)},
function(v){h.hoverout_list(v)});this.input=b(e).attr("autocomplete","off").unbind(".suggest").bind("remove.suggest",function(){h._destroy()}).bind("keydown.suggest",function(v){h.keydown(v)}).bind("keypress.suggest",function(v){h.keypress(v)}).bind("keyup.suggest",function(v){h.keyup(v)}).bind("blur.suggest",function(v){h.blur(v)}).bind("textchange.suggest",function(){h.textchange()}).bind("focus.suggest",function(v){h.focus(v)}).bind(b.browser.msie?"paste.suggest":"input.suggest",function(){clearTimeout(h.paste_timeout);
h.paste_timeout=setTimeout(function(){h.textchange()},0)});this.onresize=function(){h.invalidate_position();if(A.is(":visible")){h.position();if(k.flyout&&h.flyoutpane&&h.flyoutpane.is(":visible")){var v=h.get_selected();v&&h.flyout_position(v)}}};b(window).bind("resize.suggest",this.onresize).bind("scroll.suggest",this.onresize)};b.suggest[a].prototype=b.extend({},b.suggest.prototype,c)};b.suggest.prototype={_init:function(){},_destroy:function(){this.pane.remove();this.list.remove();this.input.unbind(".suggest");
b(window).unbind("resize.suggest",this.onresize).unbind("scroll.suggest",this.onresize);this.input.removeData("data.suggest")},invalidate_position:function(){self._position=null},status_start:function(){this.hide_all();this.status.siblings().hide();if(this._status.START){this.status.text(this._status.START).show();if(!this.pane.is(":visible")){this.position();this.pane_show()}}this._status.LOADING&&this.status.removeClass("loading")},status_loading:function(){this.status.siblings().show();if(this._status.LOADING){this.status.addClass("loading").text(this._status.LOADING).show();
if(!this.pane.is(":visible")){this.position();this.pane_show()}}else this.status.hide()},status_select:function(){this.status.siblings().show();this._status.SELECT?this.status.text(this._status.SELECT).show():this.status.hide();this._status.LOADING&&this.status.removeClass("loading")},status_error:function(){this.status.siblings().show();this._status.ERROR?this.status.text(this._status.ERROR).show():this.status.hide();this._status.LOADING&&this.status.removeClass("loading")},focus:function(a){this.input.val()===
""?this.status_start():this.focus_hook(a)},focus_hook:function(){if(!this.input.data("data.suggest")&&!this.pane.is(":visible")&&b("."+this.options.css.item,this.list).length){this.position();this.pane_show()}},keydown:function(a){var c=a.keyCode;if(c===9)this.tab(a);else if(c===38||c===40)a.shiftKey||a.preventDefault()},keypress:function(a){var c=a.keyCode;if(c===38||c===40)a.shiftKey||a.preventDefault();else c===13&&this.enter(a)},keyup:function(a){var c=a.keyCode;if(c===38){a.preventDefault();
this.up(a)}else if(c===40){a.preventDefault();this.down(a)}else if(a.ctrlKey&&c===77)b(".fbs-more-link",this.pane).click();else if(b.suggest.is_char(a)){clearTimeout(this.keypress.timeout);var e=this;this.keypress.timeout=setTimeout(function(){e.textchange()},0)}else c===27&&this.escape(a);return true},blur:function(){if(!this.input.data("dont_hide")){this.input.data("data.suggest");this.hide_all()}},tab:function(a){if(!(a.shiftKey||a.metaKey||a.ctrlKey)){a=this.options;a=this.pane.is(":visible")&&
b("."+a.css.item,this.list).length;var c=this.get_selected();if(a&&c){this.onselect(c);this.hide_all()}}},enter:function(a){var c=this.options;if(this.pane.is(":visible"))if(a.shiftKey){this.shift_enter(a);a.preventDefault()}else if(b("."+c.css.item,this.list).length)if(c=this.get_selected()){this.onselect(c);this.hide_all();a.preventDefault()}else{this.input.data("data.suggest");if(b("."+this.options.css.item+":visible",this.list).length){this.updown(false);a.preventDefault()}}},shift_enter:function(){},
escape:function(){this.hide_all()},up:function(a){this.updown(true,a.ctrlKey||a.shiftKey)},down:function(a){this.updown(false,null,a.ctrlKey||a.shiftKey)},updown:function(a,c,e){var j=this.options.css,h=this.list;if(this.pane.is(":visible")){var k=b("."+j.item+":visible",h);if(k.length){h=b(k[0]);k=b(k[k.length-1]);var r=this.get_selected()||[];clearTimeout(this.ignore_mouseover.timeout);this._ignore_mouseover=false;if(a)if(c)this._goto(h);else if(r.length)if(r[0]==h[0]){h.removeClass(j.selected);
this.input.val(this.input.data("original.suggest"));this.hoverout_list()}else this._goto(r.prevAll("."+j.item+":visible:first"));else this._goto(k);else if(e)this._goto(k);else if(r.length)if(r[0]==k[0]){k.removeClass(j.selected);this.input.val(this.input.data("original.suggest"));this.hoverout_list()}else this._goto(r.nextAll("."+j.item+":visible:first"));else this._goto(h)}}else a||this.textchange()},_goto:function(a){a.trigger("mouseover.suggest");var c=a.data("data.suggest");this.input.val(c?
c.name:this.input.data("original.suggest"));this.scroll_to(a)},scroll_to:function(a){var c=this.list,e=c.scrollTop(),j=e+c.innerHeight(),h=a.outerHeight();a=a.prevAll().length*h;h=a+h;if(a<e){this.ignore_mouseover();c.scrollTop(a)}else if(h>j){this.ignore_mouseover();c.scrollTop(e+h-j)}},textchange:function(){this.input.removeData("data.suggest");this.input.trigger("fb-textchange",this);var a=this.input.val();if(a==="")this.status_start();else{this.status_loading();this.request(a)}},request:function(){},
response:function(a){if(a){"cost"in a&&this.trackEvent(this.name,"response","cost",a.cost);if(this.check_response(a)){var c=[];if(b.isArray(a))c=a;else if("result"in a)c=a.result;var e=b.map(arguments,function(q){return q});this.response_hook.apply(this,e);var j=null,h=this,k=this.options;b.each(c,function(q,s){if(!s.id&&s.mid)s.id=s.mid;var B=h.create_item(s,a).bind("mouseover.suggest",function(A){h.mouseover_item(A)});B.data("data.suggest",s);h.list.append(B);if(q===0)j=B});this.input.data("original.suggest",
this.input.val());if(b("."+k.css.item,this.list).length===0&&k.nomatch){c=b('<li class="fbs-nomatch">');if(typeof k.nomatch==="string")c.text(k.nomatch);else{k.nomatch.title&&c.append(b('<em class="fbs-nomatch-text">').text(k.nomatch.title));k.nomatch.heading&&c.append(b("<h3>").text(k.nomatch.heading));if((k=k.nomatch.tips)&&k.length){var r=b('<ul class="fbs-search-tips">');b.each(k,function(q,s){r.append(b("<li>").text(s))});c.append(r)}}c.bind("click.suggest",function(q){q.stopPropagation()});
this.list.append(c)}e.push(j);this.show_hook.apply(this,e);this.position();this.pane_show()}}},pane_show:function(){var a=false;if(b("> li",this.list).length)a=true;a||this.pane.children(":not(."+this.options.css.list+")").each(function(){if(b(this).css("display")!="none"){a=true;return false}});if(a)if(this.options.animate){var c=this;this.pane.slideDown("fast",function(){c.input.trigger("fb-pane-show",c)})}else{this.pane.show();this.input.trigger("fb-pane-show",this)}else{this.pane.hide();this.input.trigger("fb-pane-hide",
this)}},create_item:function(a){var c=this.options.css,e=b("<li>").addClass(c.item);a=b("<label>").text(a.name);e.append(b("<div>").addClass(c.item_name).append(a));return e},mouseover_item:function(a){if(!this._ignore_mouseover){a=a.target;if(a.nodeName.toLowerCase()!=="li")a=b(a).parents("li:first");var c=b(a),e=this.options.css;b("."+e.item,this.list).each(function(){this!==c[0]&&b(this).removeClass(e.selected)});if(!c.hasClass(e.selected)){c.addClass(e.selected);this.mouseover_item_hook(c)}}},
mouseover_item_hook:function(){},hoverover_list:function(){},hoverout_list:function(){},check_response:function(){return true},response_hook:function(){this.list.empty()},show_hook:function(){this.status_select()},position:function(){var a=this.pane,c=this.options;if(!c.parent){if(!self._position){var e=this.input,j=e.offset(),h=e.outerWidth(true),k=e.outerHeight(true);j.top+=k;var r=a.outerWidth(),q=a.outerHeight(),s=j.top+q/2,B=b(window).scrollLeft();e=b(window).scrollTop();var A=b(window).width(),
v=b(window).height()+e,x=true;if("left"==c.align)x=true;else if("right"==c.align)x=false;else if(j.left>B+A/2)x=false;if(!x){x=j.left-(r-h);if(x>B)j.left=x}if(s>v){c=j.top-k-q;if(c>e)j.top=c}this._position=j}a.css({top:this._position.top,left:this._position.left})}},ignore_mouseover:function(){this._ignore_mouseover=true;var a=this;this.ignore_mouseover.timeout=setTimeout(function(){a.ignore_mouseover_reset()},1E3)},ignore_mouseover_reset:function(){this._ignore_mouseover=false},get_selected:function(){var a=
null,c=this.options.css.selected;b("li",this.list).each(function(){var e=b(this);if(e.hasClass(c)&&e.is(":visible")){a=e;return false}});return a},onselect:function(a){var c=a.data("data.suggest");if(c){this.input.val(c.name).data("data.suggest",c).trigger("fb-select",c);this.trackEvent(this.name,"fb-select","index",a.prevAll().length)}},trackEvent:function(a,c,e,j){this.input.trigger("fb-track-event",{category:a,action:c,label:e,value:j})},hide_all:function(){this.pane.hide();this.input.trigger("fb-pane-hide",
this)}};b.extend(b.suggest,{defaults:{status:["Start typing to get suggestions...","Searching...","Select an item from the list:","Sorry, something went wrong. Please try again later"],soft:false,nomatch:"no matches",css:{pane:"fbs-pane",list:"fbs-list",item:"fbs-item",item_name:"fbs-item-name",selected:"fbs-selected",status:"fbs-status"},css_prefix:null,parent:null,animate:false,zIndex:null},strongify:function(a,c){var e,j=a.toLowerCase().indexOf(c.toLowerCase());if(j>=0){var h=c.length;e=document.createTextNode(a.substring(0,
j));var k=b("<strong>").text(a.substring(j,j+h));j=document.createTextNode(a.substring(j+h));e=b("<div>").append(e).append(k).append(j)}else e=b("<div>").text(a);return e},keyCode:{CAPS_LOCK:20,CONTROL:17,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ENTER:108,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,OPTION:18,APPLE:224},is_char:function(a){if(a.type==="keypress")if((a.metaKey||a.ctrlKey)&&a.charCode===118)return true;else{if("isChar"in a)return a.isChar}else{var c=
b.suggest.keyCode.not_char;if(!c){c={};b.each(b.suggest.keyCode,function(e,j){c[""+j]=1});b.suggest.keyCode.not_char=c}return!(""+a.keyCode in c)}},parse_input:function(a){for(var c=/(\S+)\:(?:\"([^\"]+)\"|(\S+))/g,e=a,j=[],h={},k=c.exec(a);k;){if(k[1]in f)h[k[1]]=b.isEmptyObject(k[2])?k[3]:k[2];else j.push(k[0]);e=e.replace(k[0],"");k=c.exec(a)}e=b.trim(e.replace(/\s+/g," "));return[e,j,h]},mqlkey_fast:/^[_A-Za-z0-9][A-Za-z0-9_-]*$/,mqlkey_slow:/^(?:[A-Za-z0-9]|\$[A-F0-9]{4})(?:[A-Za-z0-9_-]|\$[A-F0-9]{4})*$/,
check_mql_key:function(a){if(b.suggest.mqlkey_fast.test(a))return true;else if(b.suggest.mqlkey_slow.test(a))return true;return false},check_mql_id:function(a){if(a.indexOf("/")===0){a=a.split("/");a.shift();if(!(a.length==1&&a[0]===""))for(var c=0,e=a.length;c<e;c++)if(!b.suggest.check_mql_key(a[c]))return false;return true}else return false}});var d={_destroy:b.suggest.prototype._destroy,show_hook:b.suggest.prototype.show_hook};b.suggest("suggest",{_init:function(){var a=this,c=this.options;if(c.flyout_service_url==
null)c.flyout_service_url=c.service_url;this.flyout_url=c.flyout_service_url;if(c.flyout_service_path)this.flyout_url+=c.flyout_service_path;this.flyout_url=this.flyout_url.replace(/\$\{key\}/g,c.key);if(c.flyout_image_service_url==null)c.flyout_image_service_url=c.service_url;this.flyout_image_url=c.flyout_image_service_url;if(c.flyout_image_service_path)this.flyout_image_url+=c.flyout_image_service_path;this.flyout_image_url=this.flyout_image_url.replace(/\$\{key\}/g,c.key);if(!b.suggest.cache)b.suggest.cache=
{};if(c.flyout){this.flyoutpane=b('<div style="display:none;" class="fbs-reset">').addClass(c.css.flyoutpane);if(c.flyout_parent)b(c.flyout_parent).append(this.flyoutpane);else{this.flyoutpane.css("position","absolute");c.zIndex&&this.flyoutpane.css("z-index",c.zIndex);b(document.body).append(this.flyoutpane)}this.flyoutpane.hover(function(e){a.hoverover_list(e)},function(e){a.hoverout_list(e)}).bind("mousedown.suggest",function(e){e.stopPropagation();a.pane.click()});if(!b.suggest.flyout)b.suggest.flyout=
{};if(!b.suggest.flyout.cache)b.suggest.flyout.cache={}}},_destroy:function(){d._destroy.call(this);this.flyoutpane&&this.flyoutpane.remove();this.input.removeData("request.count.suggest");this.input.removeData("flyout.request.count.suggest")},shift_enter:function(){if(this.options.suggest_new){this.suggest_new();this.hide_all()}},hide_all:function(){this.pane.hide();this.flyoutpane&&this.flyoutpane.hide();this.input.trigger("fb-pane-hide",this);this.input.trigger("fb-flyoutpane-hide",this)},request:function(a,
c){var e=this,j=this.options,h=a,k=j.ac_param.filter||[],r=null;if(b.type(k)==="string")k=[k];k=k.slice();if(j.advanced){var q=b.suggest.parse_input(h);h=q[0];q[1].length&&k.push("(all "+q[1].join(" ")+")");r=q[2];if(b.suggest.check_mql_id(h)){k.push('(all mid:"'+h+'")');h=""}}q={};q[j.query_param_name]=h;if(c)q.cursor=c;b.extend(q,j.ac_param,r);if(k.length)q.filter=k;var s=j.service_url+j.service_path+"?"+b.param(q,true);if(h=b.suggest.cache[s])this.response(h,c?c:-1,true);else{clearTimeout(this.request.timeout);
var B={url:j.service_url+j.service_path,data:q,traditional:true,beforeSend:function(){var A=e.input.data("request.count.suggest")||0;A||e.trackEvent(e.name,"start_session");A+=1;e.trackEvent(e.name,"request","count",A);e.input.data("request.count.suggest",A)},success:function(A){b.suggest.cache[s]=A;A.prefix=a;e.response(A,c?c:-1)},error:function(A){e.status_error();e.trackEvent(e.name,"request","error",{url:this.url,response:A?A.responseText:""});e.input.trigger("fb-error",Array.prototype.slice.call(arguments))},
complete:function(A){A&&e.trackEvent(e.name,"request","tid",A.getResponseHeader("X-Metaweb-TID"))},dataType:"jsonp",cache:true};this.request.timeout=setTimeout(function(){b.ajax(B)},j.xhr_delay)}},create_item:function(a,c){var e=this.options.css,j=b("<li>").addClass(e.item),h=b("<label>").append(b.suggest.strongify(a.name||a.id,c.prefix)),k=b("<div>").addClass(e.item_name).append(h);a.under&&b(":first",h).append(b("<small>").text(" ("+a.under+")"));j.append(k);h=a.notable;e=b("<div>").addClass(e.item_type);
if(h&&h.name)e.text(h.name);else this.options.show_id&&a.id&&e.text(a.id);k.prepend(e);return j},mouseover_item_hook:function(a){a=a.data("data.suggest");this.options.flyout&&a&&this.flyout_request(a)},check_response:function(a){return a.prefix===this.input.val()},response_hook:function(a,c){this.flyoutpane&&this.flyoutpane.hide();c>0?b(".fbs-more",this.pane).remove():this.list.empty()},show_hook:function(a,c,e){d.show_hook.apply(this,[a]);var j=this.options,h=this,k=this.pane,r=this.list,q=a.result,
s=b(".fbs-more",k),B=b(".fbs-suggestnew",k);b(".fbs-status",k);var A=a.correction;if(A&&A.length){var v=b('<a class="fbs-spell-link" href="#">').append(A[0]).bind("click.suggest",function(x){x.preventDefault();x.stopPropagation();h.input.val(A[0]).trigger("textchange")});h.status.empty().append("Search instead for ").append(v).show()}if(q&&q.length&&"cursor"in a){if(!s.length){q=b('<a class="fbs-more-link" href="#" title="(Ctrl+m)">view more</a>');s=b('<div class="fbs-more">').append(q);q.bind("click.suggest",
function(x){x.preventDefault();x.stopPropagation();x=b(this).parent(".fbs-more");h.more(x.data("cursor.suggest"))});r.after(s)}s.data("cursor.suggest",a.cursor);s.show()}else s.remove();if(j.suggest_new){if(!B.length){a=b('<button class="fbs-suggestnew-button">');a.text(j.suggest_new);B=b('<div class="fbs-suggestnew">').append('<div class="fbs-suggestnew-description">Your item not in the list?</div>').append(a).append('<span class="fbs-suggestnew-shortcut">(Shift+Enter)</span>').bind("click.suggest",
function(x){x.stopPropagation();h.suggest_new(x)});k.append(B)}B.show()}else B.remove();if(e&&e.length&&c>0){c=e.prevAll().length*e.outerHeight();r.scrollTop();r.animate({scrollTop:c},"slow",function(){e.trigger("mouseover.suggest")})}},suggest_new:function(){var a=this.input.val();if(a!==""){this.input.data("data.suggest",a).trigger("fb-select-new",a);this.trackEvent(this.name,"fb-select-new","index","new");this.hide_all()}},more:function(a){if(a){var c=this.input.data("original.suggest");c!==null&&
this.input.val(c);this.request(this.input.val(),a);this.trackEvent(this.name,"more","cursor",a)}return false},flyout_request:function(a){var c=this,e=this.options,j=this.flyoutpane.data("data.suggest");if(j&&a.id===j.id){if(!this.flyoutpane.is(":visible")){this.flyout_position(this.get_selected());this.flyoutpane.show();this.input.trigger("fb-flyoutpane-show",this)}}else if((j=b.suggest.flyout.cache[a.id])&&j.id&&j.html)this.flyout_response(j);else{var h=a.id,k={url:this.flyout_url.replace(/\$\{id\}/g,
a.id),traditional:true,beforeSend:function(){var r=c.input.data("flyout.request.count.suggest")||0;r+=1;c.trackEvent(c.name,"flyout.request","count",r);c.input.data("flyout.request.count.suggest",r)},success:function(r){r["req:id"]=h;r.html=b.suggest.suggest.create_flyout(r,c.flyout_image_url);b.suggest.flyout.cache[h]=r;c.flyout_response(r)},error:function(r){c.trackEvent(c.name,"flyout","error",{url:this.url,response:r?r.responseText:""})},complete:function(r){r&&c.trackEvent(c.name,"flyout","tid",
r.getResponseHeader("X-Metaweb-TID"))},dataType:"jsonp",cache:true};if(e.flyout_lang)k.data={lang:e.flyout_lang};clearTimeout(this.flyout_request.timeout);this.flyout_request.timeout=setTimeout(function(){b.ajax(k)},e.xhr_delay);this.input.trigger("fb-request-flyout",k)}},flyout_response:function(a){var c=this.pane,e=this.get_selected()||[];if(c.is(":visible")&&e.length)if((c=e.data("data.suggest"))&&a["req:id"]===c.id&&a.html){this.flyoutpane.html(a.html);this.flyout_position(e);this.flyoutpane.show().data("data.suggest",
c);this.input.trigger("fb-flyoutpane-show",this)}},flyout_position:function(a){if(!this.options.flyout_parent){var c=this.pane,e=this.flyoutpane,j=this.options.css,h=g,k={top:parseInt(e.css("top"),10),left:parseInt(e.css("left"),10)},r=c.offset(),q=c.outerWidth(),s=e.outerHeight(),B=e.outerWidth();if(this.options.flyout==="bottom"){h=r;q=this.input.offset();if(r.top<q.top)h.top-=s;else h.top+=c.outerHeight();e.addClass(j.flyoutpane+"-bottom")}else{h=a.offset();a=a.outerHeight();h.left+=q;var A=h.left+
B;c=b(document.body).scrollLeft();var v=b(window).width()+c;h.top=h.top+a-s;if(h.top<r.top)h.top=r.top;if(A>v){r=h.left-(q+B);if(r>c)h.left=r}e.removeClass(j.flyoutpane+"-bottom")}h.top===k.top&&h.left===k.left||e.css({top:h.top,left:h.left})}},hoverout_list:function(){this.flyoutpane&&!this.get_selected()&&this.flyoutpane.hide()}});b.extend(b.suggest.suggest,{defaults:{filter:null,spell:"always",exact:false,scoring:null,lang:null,key:null,prefixed:true,stemmed:null,format:null,advanced:true,show_id:true,
query_param_name:"query",service_url:"https://www.googleapis.com/freebase/v1",service_path:"/search",align:null,flyout:true,flyout_service_url:null,flyout_service_path:"/topic${id}?filter=suggest&limit=3&key=${key}",flyout_image_service_url:null,flyout_image_service_path:"/image${id}?maxwidth=75&key=${key}",flyout_parent:null,suggest_new:null,nomatch:{title:"No suggested matches",heading:"Tips on getting better suggestions:",tips:["Enter more or fewer characters","Add words related to your original search",
"Try alternate spellings","Check your spelling"]},css:{item_type:"fbs-item-type",flyoutpane:"fbs-flyout-pane"},xhr_delay:200},get_values:function(a,c){var e=a.property;return e&&e[c]&&e[c].values?e[c].values:null},get_first_value:function(a,c){var e=b.suggest.suggest.get_values(a,c);if(e&&e.length>0)return e[0];return null},create_flyout:function(a,c){var e=b.suggest.suggest.get_values,j=b.suggest.suggest.get_first_value,h=j(a,"/type/object/name");h=h?h.text:a.id;var k=j(a,"/common/topic/description")||
j(a,"/common/topic/article")||false;if(k)k=k.text;if(j=j(a,"/common/topic/image")||false)j=c.replace(/\$\{id\}/g,a.id);var r=[],q=[a.id],s=e(a,"/common/topic/notable_properties");s&&b.each(s,function(x,L){var G=e(a,L.id);if(G&&G.length){G=b.map(G,function(H){return H.text}).join(", ");r.push([L.text||L.id,G])}});s=e(a,"/common/topic/notable_for");var B=e(a,"/common/topic/notable_types");if(s||B){var A={};q=[];b.each([s,B],function(x,L){L&&L.forEach(function(G){if(G.id&&!A[G.id]){q.push(G.text);A[G.id]=
true}})})}q=q.join(", ");var v=b('<div class="fbs-flyout-content">');v.append(b('<h1 id="fbs-flyout-title">').text(h));b.each(r,function(x,L){v.append(b('<h3 class="fbs-topic-properties">').append(b("<strong>").text(L[0]+": ")).append(document.createTextNode(L[1])))});k&&v.append(b('<p class="fbs-topic-article">').text(k));if(j){v.children().addClass("fbs-flyout-image-true");v.prepend(b('<img id="fbs-topic-image" class="fbs-flyout-image-true" src="'+j+'">'))}h=b('<span class="fbs-flyout-types">').append(q);
h=b('<div class="fbs-attribution">').append(h);return b("<div>").append(v).append(h).html()}});document.createElement("input")})(jQuery);(function(b){window.freebase=window.fb={mwLWTReloading:false};window.SERVER&&typeof window.SERVER==="object"&&b.extend(window.freebase,window.SERVER);b.cookie=window.freebase.cookie})(jQuery);
(function(b,g){if(!g.datelineReloading){if(!window.console)window.console={log:b.noop,info:b.noop,debug:b.noop,warn:b.noop,error:b.noop};g.dispatch=function(d,a,c,e){if(typeof a!=="function")return false;d=b.event.fix(d||window.event);c||(c=[]);e||(e=this);return a.apply(e,[d].concat(c))};g.get_script=function(d,a){var c=g.get_script.cache,e=c[d];if(e)if(e.state===1)e.callbacks.push(a);else e.state===4&&a();else{e=c[d]={state:0,callbacks:[a]};b.ajax({url:d,dataType:"script",beforeSend:function(){e.state=
1},success:function(){e.state=4;b.each(e.callbacks,function(j,h){h()})},error:function(){e.state=-1}})}};g.get_script.cache={};b(window).bind("fb.user.signedin",function(d,a){g.user=a;var c=b("#nav-username");if(c.length){c[0].href+=g.user.id.substring(1);var e=g.h.image_url(a.id,{maxwidth:25,maxheight:25,mode:"fillcropmid"});e=b('<a class="user-thumb" href="'+a.id+'"><img src="'+e+'" /></a>');c.prepend(e)}b("#signedin").show();b(".signedin").show()}).bind("fb.user.signedout",function(){b("#signedout").show();
b(".signedout").show()}).bind("fb.user.unauthorized",function(){window.location.href=g.h.fb_url("/account/signin",{onsignin:window.location.href})}).bind("fb.user.feedback",function(d,a){if(confirm("Uh oh! Something went wrong. Please report this using our feedback tool."))try{userfeedback.api.startFeedback({productId:"68931",disableScrolling:false},a);return false}catch(c){}});var l=b.cookie("fb-account-name");if(l){var f={id:"/user/"+l,name:l};setTimeout(function(){b(window).trigger("fb.user.signedin",
f);var d=g.h.ajax_url("lib/template/refresh_credentials"),a=b("<iframe name='rc'></iframe>").attr("src",d).hide().appendTo("body").load(function(){var c=parseInt(b("body",window.rc.document).text(),10)-(new Date).getTime();c&&c>0&&setTimeout(function(){b(a).attr("src",d)},c)})},0)}else setTimeout(function(){b(window).trigger("fb.user.signedout")},0);g.window_position=function(){var d={};if(typeof window.innerWidth=="number"){d.width=window.outerWidth;d.height=window.outerHeight;d.top=window.screenY;
d.left=window.screenX}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){d.width=document.body.clientWidth;d.height=document.body.clientHeight;d.top=window.screenTop;d.left=window.screenLeft}return d};g.status=function(){function d(){e&&e.slideUp(300);r=null;return false}function a(q,s,B,A){if(e===null){e=b("#page-state");j=b(".status-msg",e);h=b(".close-msg",e);h.click(d)}if(r==="error")console.warn("MessagePanel: Already displaying error. Ignoring: ",
q,s);else{e.hide();b.each(c,function(v,x){e.removeClass(x)});e.addClass(q);j.text(s);r=q;window.clearTimeout(k);if(A){h.show();e.slideDown(300)}else{h.hide();e.slideDown(300);k=window.setTimeout(d,B)}}return false}var c=["notice","info","warning","success","error"],e=null,j=null,h=null,k=null,r=null;return{doing:function(q){return a("notice",q,2E6,false)},info:function(q,s){return a("info",q,4E3,s)},warning:function(q,s){return a("warning",q,4E3,s)},success:function(q,s){return a("success",q,6E3,
s)},error:function(q,s){return a("error",q,6E3,s)},sprintf:function(q,s){var B=Array.prototype.slice.call(arguments).slice(2),A=s.split("%s");if(A.length>1&&B.length>1&&B.length%2==0){for(var v=b("<span>"),x=0,L=A.length;x<L;x++){v.append(document.createTextNode(A[x]));var G=b('<a href="#">');G.text(B.shift());var H=B.shift();b.type(H)==="function"&&G.click(H);v.append(G)}B=a(q,"",null,true);j.empty().append(v);return B}else return a(q,s,null,true)},clear:function(){window.clearTimeout(k);r==="error"?
console.warn("MessagePanel: Displaying error. Ignoring clearing status."):d()}}}();g.popup=function(d,a,c,e){a=a||300;c=c||300;var j=g.window_position(),h=Math.floor((j.width-a)/2)+j.left;j=Math.floor((j.height-c)/2)+j.top;if(/chrome/.test(navigator.userAgent.toLowerCase()))c+=50;a={width:a,height:c,top:j,left:h,directories:"no",location:"no",menubar:"no",resizable:"no",scrollbars:"yes",status:"no",toolbar:"no"};c=[];for(var k in a)c.push(k+"="+a[k]);return window.open(d,e||"",c.join())};g.login_popup=
function(d){d||(d=function(){window.location.reload()});var a=g.popup("/account/signin",900,600,"Freebase");if(a.opener==null)a.opener=self;window.onsignin=d;window.focus&&a.focus();return false};g.logout_popup=function(d){d||(d=function(){window.location.reload()});var a=g.popup("/account/signout",900,600,"Freebase");if(a.opener==null)a.opener=self;window.onsignout=d;window.focus&&a.focus();return false};b(function(){var d=b("#header > #nav-utilities > .language-picker"),a=b(".current-lang",d);b("select",
d).bind("change",function(){var c=b(this).find(":selected").text();a.text(c)})});b(function(){g.suggest_lang={SUPPORTED:{en:1,es:1,fr:1,de:1,it:1,pt:1,zh:1,ja:1,ko:1,ru:1,sv:1,fi:1,da:1,nl:1,el:1,ro:1,tr:1,hu:1},lang:function(d){d=g.h.lang_code(d||g.lang||"/lang/en");if(g.suggest_lang.SUPPORTED[d])if(d!=="en")return d+",en";return"en"}};g.suggest_options={service_defaults:{status:["","Searching...","Select an item from the list:"],service_url:g.h.fb_googleapis_url(),key:g.acre.freebase.api_key,lang:g.suggest_lang.lang()},
filter:{operator:function(){var d=Array.prototype.slice.call(arguments),a=d.shift();if(!(a==="any"||a==="all"||a==="should"))throw"Invalid search operator: "+a;var c=[a];if(a==="should"&&d.length>1){d=["any"].concat(d);c.push(g.suggest_options.filter.operator.apply(null,d))}else c=c.concat(d);return"("+c.join(" ")+")"},any:function(){var d=Array.prototype.slice.call(arguments);d.unshift("any");return g.suggest_options.filter.operator.apply(null,d)},all:function(){var d=Array.prototype.slice.call(arguments);
d.unshift("all");return g.suggest_options.filter.operator.apply(null,d)},should:function(){var d=Array.prototype.slice.call(arguments);d.unshift("should");return g.suggest_options.filter.operator.apply(null,d)}},any:function(){var d=b.extend({},g.suggest_options.service_defaults);d.filter=g.suggest_options.filter.any.apply(null,arguments);return d},all:function(){var d=b.extend({},g.suggest_options.service_defaults);d.filter=g.suggest_options.filter.all.apply(null,arguments);return d},should:function(){var d=
b.extend({},g.suggest_options.service_defaults);d.filter=g.suggest_options.filter.should.apply(null,arguments);return d},search:function(){return b.extend({},g.suggest_options.service_defaults,{status:null,parent:"#site-search-box",align:"right"})},instance:function(d,a,c){var e=["type:"+d];b.each(["user","domain","type"],function(h,k){if(d==="/freebase/"+k+"_profile"){e.push("type:/type/"+k);return false}});d==="/book/book_subject"&&e.push("type:/base/skosbase/skos_concept");var j=null;if(g.h.is_metaweb_system_type(d))j=
g.suggest_options.any.apply(null,e);else{j=g.suggest_options.should.apply(null,e);if(a)j.suggest_new="Create new"}if(c)j.lang=g.suggest_lang.lang(c);return j},cotype:function(){return b.extend({scoring:"schema"},g.suggest_options.all.apply(null,["type:/type/type","(not namespace:/type)","(not namespace:/freebase)","(any (not namespace:/common) (any mid:/m/01c5 mid:/m/02_1_m4 mid:/m/03hc3d_))"]))},included_type:function(){return g.suggest_options.cotype()},expected_type:function(){return b.extend({scoring:"schema"},
g.suggest_options.all.apply(null,["type:/type/type"]))},delegate_property:function(){return b.extend({scoring:"schema"},g.suggest_options.all.apply(null,["type:/type/property","(not namespace:/type/object)"]))}}});b(function(){var d=b("#SearchBox .SearchBox-input,#fb-search-input"),a=b("#fb-search");d.suggest(g.suggest_options.search());var c=b("#site-search-label"),e=b("#site-search-box .fbs-pane");d.bind("fb-select",function(j,h){var k={};b(this).siblings("input[type=hidden]").each(function(){k[this.name]=
this.value});window.location=g.h.fb_url(h.id,k);return false}).bind("fb-pane-show",function(){c.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",function(){b.trim(d.val())===""?c.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):c.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){c.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){if(!c.is(":visible")){b("#site-search-label").slideDown("fast");
a.addClass("active")}}).blur(function(){if(!e.is(":visible")&&c.is(":visible")){b("#site-search-label").slideUp("fast");a.removeClass("active")}});b(".SearchBox-form").submit(function(){return b.trim(b("#fb-search-input").val()).length==0?false:true})});g.disable=function(d){b(d).attr("disabled","disabled").addClass("disabled")};g.enable=function(d){b(d).removeAttr("disabled").removeClass("disabled")};g.lang_select=function(d,a){if(a==="/lang/en"){b(this).removeAttr("name");if(!b(":input[name]",this.form).length){window.location=
b(this.form).attr("action");return}}this.form.submit()};g.devbar={div:b("#devbar"),touch:function(){/\.(freebase|sandbox\-freebase)\.com$/.test(g.acre.request.server_name)?b.ajax({url:g.acre.freebase.googleapis_url?g.h.fb_googleapis_url("/touch"):g.h.fb_api_url("/api/service/touch"),dataType:"jsonp"}):b.ajax({url:"/acre/touch"});return false},txn_ids:[],txn:function(){return g.devbar.view_txn(this.href,g.devbar.txn_ids)},view_txn:function(d,a){if(a&&a.length)window.location=d+"?"+b.param({tid:a},
true);return false},ajaxComplete:function(d){if(d&&d.readyState===4)(d=d.getResponseHeader("x-metaweb-tid"))&&g.devbar.txn_ids.push(d)},init:function(){$nav_user_controls=b(".nav-user-controls");$user_controls=b("#user-controls");b("#signedin .trigger").click(function(){if($user_controls.is(":hidden")){$user_controls.fadeIn();$nav_user_controls.addClass("active")}else{$user_controls.fadeOut();$nav_user_controls.removeClass("active")}return false});b("html").click(function(){if($user_controls.is(":visible")){$user_controls.fadeOut();
$nav_user_controls.removeClass("active")}});$user_controls.click(function(d){d.stopPropagation()});b("#devbar-touch > a").click(g.devbar.touch);g.tid&&g.devbar.txn_ids.push(g.tid);b("#devbar-txn > a").click(g.devbar.txn);b.ajaxSetup({complete:function(){g.devbar.ajaxComplete.apply(null,arguments)},error:function(d){var a=this,c={};b.each(["url","data","dataType","type"],function(e,j){c[j]=a[j]});b.each(["status","statusText","responseText"],function(e,j){c[j]=d[j]});c.responseHeaders=d.getAllResponseHeaders()}})}};
g.devbar.init();g.mqlread=function(d,a,c){var e;if(g.acre.freebase.googleapis_url){e=g.h.fb_googleapis_url("/mqlread");d={query:JSON.stringify(d),key:g.acre.freebase.api_key}}else{e=g.h.fb_api_url("/api/service/mqlread");d={query:JSON.stringify({query:d})}}return b.ajax({url:e,data:d,dataType:"jsonp",success:function(j){a&&a.apply(this,[j.result])},error:function(){c&&c.apply(this,arguments)}})};b(function(){g.hover={pane:"#fb-topic-hover-pane",current_target:null,cache:{},topic_url:g.h.fb_googleapis_url()+
"/topic${id}?filter=suggest&limit=3&key="+g.acre.freebase.api_key+"&lang="+g.h.lang_code(g.lang),image_url:g.h.fb_googleapis_url()+"/image${id}?maxwidth=75&key="+g.acre.freebase.api_key,show:function(){function d(){if(a===g.hover.current_target){b(g.hover.pane).html(g.hover.cache[c]);var e=b(g.hover.pane).height(),j=b(a).height(),h=b(a).offset(),k=h.left;h=h.top;if(h-b(document).scrollTop()+e<b(window).height())h+=j;else h=h-e-j;b(g.hover.pane).css({top:h,left:k}).show()}}var a=this,c=b(a).attr("data-id");
if(c){g.hover.current_target=a;b(a).removeAttr("title");g.hover.cache[c]?d():b.ajax({url:g.hover.topic_url.replace(/\$\{id\}/g,c),success:function(e){e=b.suggest.suggest.create_flyout(e,g.hover.image_url);g.hover.cache[c]=e;d()},dataType:"jsonp",cache:true})}},hide:function(){g.hover.current_target=null;b(g.hover.pane).hide()}};b("#page-content").on("mouseover","a.property-value",g.hover.show).on("mouseout","a.property-value",g.hover.hide)})}})(jQuery,window.freebase);
(function(b,g){var l=g.h={type:b.type||function(){var f={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(d){f["[object "+d+"]"]=d.toLowerCase()});return function(d){return d==null?String(d):f[Object.prototype.toString.call(d)]||"object"}}(),parse_params:function(f){if(b.isArray(f)){var d={};b.each(f,function(a,c){d[c[0]]=c[1]});return d}return f},build_url:function(f){if(f&&f.indexOf("://")===-1)throw"Host must contain scheme: "+f;var d=f||"",a,c;if(arguments.length>
1){a=Array.prototype.slice.call(arguments);a.shift();for(var e=[],j=0,h=a.length;j<h;j++){var k=a[j];if(l.type(k)==="string")e.push(k);else{c={};for(j=j;j<h;j++)c=b.extend(c,l.parse_params(a[j]));break}}a=e.join("")}if(a&&a.indexOf("/")!==0)throw"Path must begin with a '/': "+a;if(a)d+=a;if(d==="")d="/";b.isEmptyObject(c)||(d+="?"+b.param(c,true));return d},fb_url:function(){var f=Array.prototype.slice.call(arguments);f.unshift(null);g.lang&&g.lang!=="/lang/en"&&f.push({lang:l.lang_code(g.lang)});
return l.build_url.apply(null,f)},ajax_url:function(){var f=Array.prototype.slice.call(arguments);f.unshift("/ajax");return l.reentrant_url.apply(null,f)},static_url:function(){var f=Array.prototype.slice.call(arguments);f.unshift("/static");return l.reentrant_url.apply(null,f)},reentrant_url:function(f,d){d=l.resolve_reentrant_path(d);d=d.replace(/^\/\//,f+"/");var a=Array.prototype.slice.call(arguments,2);a.unshift(d);a.unshift(null);return l.build_url.apply(null,a)},resolve_reentrant_path:function(f){f=
f||"";if(f.indexOf("//")==0)return f;if(f.indexOf("lib/")===0)return g.acre.current_script.app.path+f.substring(3);else{if(f&&f[0]!="/")f="/"+f;return g.acre.request.script.app.path+f}},legacy_fb_url:function(){var f=Array.prototype.slice.call(arguments),d=g.acre.freebase.site_host.replace(/^(https?\:\/\/)([^\.]+)\./,"$1www.").replace(":"+g.acre.request.server_port,"");f.unshift(d);return l.build_url.apply(null,f)},fb_api_url:function(){var f=Array.prototype.slice.call(arguments);f.unshift(g.acre.freebase.service_url);
return l.build_url.apply(null,f)},fb_googleapis_url:function(){if(g.acre.freebase.googleapis_url){var f=Array.prototype.slice.call(arguments);f.unshift(g.acre.freebase.googleapis_url);return l.build_url.apply(null,f)}throw"fb.acre.freebase.googleapis_url is not defined";},wiki_url:function(){var f=Array.prototype.slice.call(arguments);f.unshift("http://wiki.freebase.com","/wiki/");return l.build_url.apply(null,f)},lib_base_url:function(f){f=g.acre.metadata.libs[f];return f.base_url+f.version},image_url:function(f,
d){return g.acre.freebase.imgurl(f,d.maxwidth,d.maxheight,d.mode,d.pad,d.errorid)},is_metaweb_system_type:function(f){return f.indexOf("/type/")===0||f.indexOf("/common/")===0&&f!=="/common/topic"||f.indexOf("/freebase/")===0&&f.indexOf("_profile")===f.length-8},id_key:function(f,d){var a=f.split("/"),c=a.pop();if(d){a=a.join("/");if(a==="")a="/";return[a,c]}else return c},lang_code:function(f){return l.id_key(f)},lang_id:function(f){return"/lang/"+l.lang_code(f)}}})(jQuery,window.freebase);
(function(b,g){var l=g.permission={init:function(){if(g.user){var f=g.c;f&&f.id&&b.ajax({url:g.h.ajax_url("lib/permission/has_permission.ajax"),data:{id:f.id,user_id:g.user.id},dataType:"json",success:function(d){l.has_permission=d.result&&d.result[f.id]===true;b(window).trigger("fb.permission.has_permission",l.has_permission)}});check_permissioned_objects(b(".edit-perm"),g.user.id)}}};b(window).bind("fb.user.signedin",l.init);b(window).bind("fb.permission.has_permission",function(f,d){d?b(".edit").show():
b(".no-edit").show()})})(jQuery,window.freebase);function check_permissioned_objects(b,g){if(b.length&&g){var l={},f=[];$.each(b,function(){var d=$(this).metadata().id;if(d&&!l[d]){f.push(d);l[d]=1}});f.length&&$.ajax({url:fb.h.ajax_url("lib/permission/has_permission.ajax"),data:{id:f,user_id:g},traditional:true,dataType:"json",success:function(d){var a=d.result||{};$.each(b,function(){var c=$(this).metadata().id;c&&a[c]===true?$(this).show():$(this).addClass("edit-perm-lock")})}})}}
(function(b,g){var l=g.incompatible_types={overlay_dialog:null,inline_dialog:null,check:function(f,d,a){a=a||{};b.ajax({url:g.h.ajax_url("lib/incompatible_types/incompatible_types.ajax"),data:{id:f,type:d},dataType:"json",beforeSend:function(){g.status.doing("Checking compatibility...")},success:function(c){c=c.result;var e=false;b.isEmptyObject(c)||b.each(c,function(j){if(j!=="included_types"){e=true;return false}});if(e)a.incompatible&&a.incompatible(f,d,c);else a.compatible&&a.compatible(f,d,c)},
error:function(c){g.status.error(c.responseText)},complete:function(){g.status.clear()}})},overlay_suggest_incompatible_callback:function(f,d){if(!l.overlay_dialog)l.overlay_dialog=b(".incompatible-overlay-dialog");if(l.overlay_dialog.length){d=d||{};return function(a,c,e){l.overlay_dialog.removeData("overlay");b(".modal-content",l.overlay_dialog).empty().append(l.description_html(a,c,e));b(".incompatible-topic",l.overlay_dialog).text(f.val());l.overlay_dialog.overlay({close:"button",closeOnClick:false,
load:true,fixed:false,mask:{color:"#000",loadSpeed:200,opacity:0.5},onClose:function(){f.focus().select();b("button",l.overlay_dialog).unbind();d.onClose&&d.onClose()},onLoad:function(){b(".cancel",l.overlay_dialog).focus().click(function(){f.focus().select().trigger("textchange");d.onCancel&&d.onCancel()});b(".save",l.overlay_dialog).click(function(){f.focus().select();d.onConfirm&&d.onConfirm(a,c,e)});d.onLoad&&d.onLoad()}})}}else return l.native_confirm_suggest_incompatible_callback(f,d)},inline_suggest_incompatible_callback:function(f,
d){if(!l.inline_dialog)l.inline_dialog=b(".incompatible-inline-dialog");if(l.inline_dialog.length){d=d||{};return function(a,c,e){b(".modal-content",l.inline_dialog).empty().append(l.description_html(a,c,e));b(".incompatible-topic",l.inline_dialog).text(f.val());b(".save",l.inline_dialog).unbind().click(function(){f.focus().select();d.onConfirm&&d.onConfirm(a,c,e);l.inline_dialog.hide(d.onClose)});b(".cancel",l.inline_dialog).unbind().click(function(){f.focus().select().trigger("textchange");d.onCancel&&
d.onCancel();l.inline_dialog.hide(d.onClose)});var j=f.offsetParent(),h=f.position();j.append(l.inline_dialog);l.inline_dialog.css({top:h.top+f.outerHeight(),left:h.left});l.inline_dialog.show(d.onLoad)}}else return l.native_confirm_suggest_incompatible_callback(f,d)},native_confirm_suggest_incompatible_callback:function(f,d){d=d||{};return function(a,c,e){if(confirm(l.description_text(a,c,e))){f.focus().select();d.onConfirm&&d.onConfirm(a,c,e)}else{f.focus().select().trigger("textchange");d.onCancel&&
d.onCancel()}d.onClose&&d.onClose();f.focus().select()}},description_html:function(f,d,a){var c=b("<div>"),e;if(a[d]){e=b('<div><span class="incompatible-topic"></span> is already typed as <ul class="incompatible-existing"></ul>It\'s unlikely it should also be typed as <b class="incompatible-type"></b>.</div>');b(".incompatible-topic",e).text(f);var j=b(".incompatible-existing",e);b.each(a[d],function(r,q){j.append(b("<li>").append(b("<b>").text(q)))});b(".incompatible-type",e).text(d);c.append(e)}var h=
[d],k=[];a.included_types&&b.each(a.included_types,function(r,q){a[q]?k.push(q):h.push(q)});e=b('<div>If you continue, <span class="incompatible-topic"></span> will be typed as <ul class="incompatible-to-type"></ul></div>');b(".incompatible-topic",e).text(f);j=b(".incompatible-to-type",e);b.each(h,function(r,q){j.append(b("<li>").append(b("<b>").text(q)))});if(k.length){e.append('&nbsp;It will <b>*not*</b> be typed as <ul class="incompatible-not-to-type"></ul>');j=b(".incompatible-not-to-type",e);
b.each(k,function(r,q){j.append(b("<li>").append(b("<b>").text(q)))})}c.append(e);c.append("<p>Are you sure you want to continue?<p>");return c},description_text:function(f,d,a){return l.description_html(f,d,a).text()}}})(jQuery,window.freebase);
(function(b){var g=window.i18n={_get_edit_script:function(l,f){g._get_edit_script.loaded?f():b.getScript(l+"/i18n-edit.mf.js",function(){g._get_edit_script.loaded=1;f()})},text_edit:function(l,f,d,a,c,e){g._get_edit_script(f,function(){g.edit.text_edit_begin(b(l),f,d,a,c,e)});return false}}})(jQuery);
(function(b,g){var l=g.flag={merge:function(f){return l.flag(f,"merge_begin")},split:function(f){return l.flag(f,"split_begin")},"delete":function(f){return l.flag(f,"delete_begin")},offensive:function(f){return l.flag(f,"offensive_begin")},flag:function(f,d){f=b(f);g.get_script(g.h.static_url("lib/flag/flag-edit.mf.js"),function(){l.edit[d](f)});return false},undo:function(f,d){f=b(f);g.get_script(g.h.static_url("lib/flag/flag-edit.mf.js"),function(){l.edit.undo_begin(f,d)});return false}}})(jQuery,
window.freebase);
