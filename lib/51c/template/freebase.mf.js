
/*
 * Copyright 2010, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
if(!("JSON"in window&&window.JSON)){if(!this.JSON)this.JSON={};(function(){function b(i){return i<10?"0"+i:i}function e(i){a.lastIndex=0;return a.test(i)?'"'+i.replace(a,function(k){var l=g[k];return typeof l==="string"?l:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+i+'"'}function h(i,k){var l,m,n,r,q=c,p,o=k[i];if(o&&typeof o==="object"&&typeof o.toJSON==="function")o=o.toJSON(i);if(typeof j==="function")o=j.call(k,i,o);switch(typeof o){case "string":return e(o);case "number":return isFinite(o)?
String(o):"null";case "boolean":case "null":return String(o);case "object":if(!o)return"null";c+=f;p=[];if(Object.prototype.toString.apply(o)==="[object Array]"){r=o.length;for(l=0;l<r;l+=1)p[l]=h(l,o)||"null";n=p.length===0?"[]":c?"[\n"+c+p.join(",\n"+c)+"\n"+q+"]":"["+p.join(",")+"]";c=q;return n}if(j&&typeof j==="object"){r=j.length;for(l=0;l<r;l+=1){m=j[l];if(typeof m==="string")if(n=h(m,o))p.push(e(m)+(c?": ":":")+n)}}else for(m in o)if(Object.hasOwnProperty.call(o,m))if(n=h(m,o))p.push(e(m)+
(c?": ":":")+n);n=p.length===0?"{}":c?"{\n"+c+p.join(",\n"+c)+"\n"+q+"}":"{"+p.join(",")+"}";c=q;return n}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,f,g={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof JSON.stringify!=="function")JSON.stringify=function(i,k,l){var m;f=c="";if(typeof l==="number")for(m=0;m<l;m+=1)f+=" ";else if(typeof l==="string")f=l;if((j=k)&&typeof k!=="function"&&(typeof k!=="object"||typeof k.length!=="number"))throw new Error("JSON.stringify");return h("",
{"":i})};if(typeof JSON.parse!=="function")JSON.parse=function(i,k){function l(n,r){var q,p,o=n[r];if(o&&typeof o==="object")for(q in o)if(Object.hasOwnProperty.call(o,q)){p=l(o,q);if(p!==undefined)o[q]=p;else delete o[q]}return k.call(n,r,o)}var m;i=String(i);d.lastIndex=0;if(d.test(i))i=i.replace(d,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(i.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){m=eval("("+i+")");return typeof k==="function"?l({"":m},""):m}throw new SyntaxError("JSON.parse");}})()}
(function(b){b.factory=function(e,h){if(b.fn[e])throw"$.fn."+e+" plugin already exists";else if(b[e])throw"$."+e+" class already exists";b.fn[e]=function(d){return this.each(function(){var a=b(this),c=a.data("$."+e);c&&c._destroy();c=new b[e](a,d);a.data("$."+e,c)})};b[e]=function(d,a){this.options=b.extend(true,{},b[e].defaults,a);this.element=d;this.init()};b.extend(b[e].prototype,{init:function(){},_destroy:function(){}},h);return b[e]}})(jQuery);
(function(){var b={};$.extend({localstore:function(e,h,d,a){var c=document.location.hostname,f=document.location.protocol;if(typeof h!=="undefined"){var g=JSON.stringify(h);if(!d&&window.globalStorage)if(h===null)delete window.globalStorage[c][f+e];else window.globalStorage[c][f+e]=g;else if(!d&&window.localStorage&&window.localStorage.setItem)h===null?window.localStorage.removeItem(f+e):window.localStorage.setItem(f+e,g);else if(d!==false){d={};d.domain=fb.get_cookie_domain();h===null?$.cookie(e,
null,d):$.cookie(e,g,$.extend(d,a||{expires:14,path:"/"}))}else if(h===null)delete b[e];else b[e]=g;return h}else{if(!d&&window.globalStorage){if(window.globalStorage[c][f+e])h=window.globalStorage[c][f+e].value}else h=!d&&window.localStorage?window.localStorage.getItem(f+e):d!==false?$.cookie(e):b[e];if(h!=""&&h!==null&&h!==undefined)return JSON.parse(h,null)}return null}})})();
(function(b){b.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,h){this.defaults.type=e;this.defaults.name=h},get:function(e,h){var d=b.extend({},this.defaults,h);if(!d.single.length)d.single="metadata";var a=b.data(e,d.single);if(a)return a;a="{}";var c=function(j){if(typeof j!="string")return j;return j=eval("("+j+")")};if(d.type=="html5"){var f={};b(e.attributes).each(function(){var j=this.nodeName;if(j.match(/^data-/))j=j.replace(/^data-/,
"");else return true;f[j]=c(this.nodeValue)})}else{if(d.type=="class"){var g=d.cre.exec(e.className);if(g)a=g[1]}else if(d.type=="elem"){if(!e.getElementsByTagName)return;g=e.getElementsByTagName(d.name);if(g.length)a=b.trim(g[0].innerHTML)}else if(e.getAttribute!=undefined)if(g=e.getAttribute(d.name))a=g;f=c(a.indexOf("{")<0?"{"+a+"}":a)}b.data(e,d.single,f);return f}}});b.fn.metadata=function(e){return b.metadata.get(this[0],e)}})(jQuery);
(function(b){b(function(){if(b.tablesorter){console.log("$.tablesorter");var e=b("<div>");b.tablesorter.defaults.cssAsc="column-header-asc";b.tablesorter.defaults.cssDesc="column-header-desc";b.tablesorter.defaults.cssHeader="column-header";b.tablesorter.addParser({id:"datetime",is:function(){return false},format:function(h){e.html(h);return e.find("time:first").attr("datetime")},type:"text"});b.tablesorter.addParser({id:"ignoreCase",is:function(){return false},format:function(h){e.html(h);return e.text().toLowerCase()},
type:"text"});b.tablesorter.addParser({id:"string",is:function(){return false},format:function(h){e.html(h);return e.text()},type:"text"});b.tablesorter.addParser({id:"number",is:function(){return false},format:function(h){e.html(h);h=e.find(".number:first").attr("data-value");if(h==null)return Number.MAX_VALUE;return h},type:"numeric"});b(".table-sortable").each(function(){b(this).tablesorter()})}})})(jQuery);
(function(b,e){function h(d){return!b(d).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});b.fn.extend({_focus:b.fn.focus,focus:function(d,a){return typeof d==="number"?this.each(function(){var c=this;setTimeout(function(){b(c).focus();a&&a.call(c)},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var d;d=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,
"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!d.length?b(document):d},zIndex:function(d){if(d!==e)return this.css("zIndex",d);if(this.length){d=b(this[0]);for(var a;d.length&&d[0]!==document;){a=d.css("position");
if(a==="absolute"||a==="relative"||a==="fixed"){a=parseInt(d.css("zIndex"),10);if(!isNaN(a)&&a!==0)return a}d=d.parent()}}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(d){d.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.each(["Width","Height"],function(d,a){function c(i,k,l,m){b.each(f,function(){k-=parseFloat(b.curCSS(i,"padding"+this,true))||0;if(l)k-=parseFloat(b.curCSS(i,
"border"+this+"Width",true))||0;if(m)k-=parseFloat(b.curCSS(i,"margin"+this,true))||0});return k}var f=a==="Width"?["Left","Right"]:["Top","Bottom"],g=a.toLowerCase(),j={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+a]=function(i){if(i===e)return j["inner"+a].call(this);return this.each(function(){b(this).css(g,c(this,i)+"px")})};b.fn["outer"+a]=function(i,k){if(typeof i!=="number")return j["outer"+a].call(this,i);return this.each(function(){b(this).css(g,
c(this,i,true,k)+"px")})}});b.extend(b.expr[":"],{data:function(d,a,c){return!!b.data(d,c[3])},focusable:function(d){var a=d.nodeName.toLowerCase(),c=b.attr(d,"tabindex");if("area"===a){a=d.parentNode;c=a.name;if(!d.href||!c||a.nodeName.toLowerCase()!=="map")return false;d=b("img[usemap=#"+c+"]")[0];return!!d&&h(d)}return(/input|select|textarea|button|object/.test(a)?!d.disabled:"a"==a?d.href||!isNaN(c):!isNaN(c))&&h(d)},tabbable:function(d){var a=b.attr(d,"tabindex");return(isNaN(a)||a>=0)&&b(d).is(":focusable")}});
b(function(){var d=document.body,a=d.appendChild(a=document.createElement("div"));b.extend(a.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=a.offsetHeight===100;b.support.selectstart="onselectstart"in a;d.removeChild(a).style.display="none"});b.extend(b.ui,{plugin:{add:function(d,a,c){d=b.ui[d].prototype;for(var f in c){d.plugins[f]=d.plugins[f]||[];d.plugins[f].push([a,c[f]])}},call:function(d,a,c){if((a=d.plugins[a])&&d.element[0].parentNode)for(var f=0;f<a.length;f++)d.options[a[f][0]]&&
a[f][1].apply(d.element,c)}},contains:function(d,a){return document.compareDocumentPosition?d.compareDocumentPosition(a)&16:d!==a&&d.contains(a)},hasScroll:function(d,a){if(b(d).css("overflow")==="hidden")return false;var c=a&&a==="left"?"scrollLeft":"scrollTop",f=false;if(d[c]>0)return true;d[c]=1;f=d[c]>0;d[c]=0;return f},isOverAxis:function(d,a,c){return d>a&&d<a+c},isOver:function(d,a,c,f,g,j){return b.ui.isOverAxis(d,c,g)&&b.ui.isOverAxis(a,f,j)}})}})(jQuery);
(function(b,e){if(b.cleanData){var h=b.cleanData;b.cleanData=function(a){for(var c=0,f;(f=a[c])!=null;c++)b(f).triggerHandler("remove");h(a)}}else{var d=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return d.call(b(this),a,c)})}}b.widget=function(a,c,f){var g=a.split(".")[0],j;a=a.split(".")[1];j=g+"-"+a;if(!f){f=c;c=b.Widget}b.expr[":"][j]=function(i){return!!b.data(i,
a)};b[g]=b[g]||{};b[g][a]=function(i,k){arguments.length&&this._createWidget(i,k)};c=new c;c.options=b.extend(true,{},c.options);b[g][a].prototype=b.extend(true,c,{namespace:g,widgetName:a,widgetEventPrefix:b[g][a].prototype.widgetEventPrefix||a,widgetBaseClass:j},f);b.widget.bridge(a,b[g][a])};b.widget.bridge=function(a,c){b.fn[a]=function(f){var g=typeof f==="string",j=Array.prototype.slice.call(arguments,1),i=this;f=!g&&j.length?b.extend.apply(null,[true,f].concat(j)):f;if(g&&f.charAt(0)==="_")return i;
g?this.each(function(){var k=b.data(this,a),l=k&&b.isFunction(k[f])?k[f].apply(k,j):k;if(l!==k&&l!==e){i=l;return false}}):this.each(function(){var k=b.data(this,a);k?k.option(f||{})._init():b.data(this,a,new c(f,this))});return i}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),a);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(a,c){var f=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===e)return this.options[a];f={};f[a]=c}this._setOptions(f);return this},_setOptions:function(a){var c=this;b.each(a,function(f,g){c._setOption(f,g)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,f){var g=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();f=f||{};if(c.originalEvent){a=b.event.props.length;for(var j;a;){j=b.event.props[--a];c[j]=c.originalEvent[j]}}this.element.trigger(c,f);return!(b.isFunction(g)&&g.call(this.element[0],c,f)===false||c.isDefaultPrevented())}}})(jQuery);
(function(b){b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(h){return e._mouseDown(h)}).bind("click."+this.widgetName,function(h){if(true===b.data(h.target,e.widgetName+".preventClickEvent")){b.removeData(h.target,e.widgetName+".preventClickEvent");h.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){e.originalEvent=
e.originalEvent||{};if(!e.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var h=this,d=e.which==1,a=typeof this.options.cancel=="string"?b(e.target).parents().add(e.target).filter(this.options.cancel).length:false;if(!d||a||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){h.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=
this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}this._mouseMoveDelegate=function(c){return h._mouseMove(c)};this._mouseUpDelegate=function(c){return h._mouseUp(c)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();return e.originalEvent.mouseHandled=true}},_mouseMove:function(e){if(b.browser.msie&&!(document.documentMode>=9)&&!e.button)return this._mouseUp(e);if(this._mouseStarted){this._mouseDrag(e);
return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false)?this._mouseDrag(e):this._mouseUp(e);return!this._mouseStarted},_mouseUp:function(e){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;e.target==this._mouseDownEvent.target&&b.data(e.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(b){b.ui=b.ui||{};var e=/left|center|right/,h=/top|center|bottom/,d=b.fn.position,a=b.fn.offset;b.fn.position=function(c){if(!c||!c.of)return d.apply(this,arguments);c=b.extend({},c);var f=b(c.of),g=f[0],j=(c.collision||"flip").split(" "),i=c.offset?c.offset.split(" "):[0,0],k,l,m;if(g.nodeType===9){k=f.width();l=f.height();m={top:0,left:0}}else if(g.setTimeout){k=f.width();l=f.height();m={top:f.scrollTop(),left:f.scrollLeft()}}else if(g.preventDefault){c.at="left top";k=l=0;m={top:c.of.pageY,
left:c.of.pageX}}else{k=f.outerWidth();l=f.outerHeight();m=f.offset()}b.each(["my","at"],function(){var n=(c[this]||"").split(" ");if(n.length===1)n=e.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"];n[0]=e.test(n[0])?n[0]:"center";n[1]=h.test(n[1])?n[1]:"center";c[this]=n});if(j.length===1)j[1]=j[0];i[0]=parseInt(i[0],10)||0;if(i.length===1)i[1]=i[0];i[1]=parseInt(i[1],10)||0;if(c.at[0]==="right")m.left+=k;else if(c.at[0]==="center")m.left+=k/2;if(c.at[1]==="bottom")m.top+=
l;else if(c.at[1]==="center")m.top+=l/2;m.left+=i[0];m.top+=i[1];return this.each(function(){var n=b(this),r=n.outerWidth(),q=n.outerHeight(),p=parseInt(b.curCSS(this,"marginLeft",true))||0,o=parseInt(b.curCSS(this,"marginTop",true))||0,v=r+p+(parseInt(b.curCSS(this,"marginRight",true))||0),w=q+o+(parseInt(b.curCSS(this,"marginBottom",true))||0),s=b.extend({},m),t;if(c.my[0]==="right")s.left-=r;else if(c.my[0]==="center")s.left-=r/2;if(c.my[1]==="bottom")s.top-=q;else if(c.my[1]==="center")s.top-=
q/2;s.left=Math.round(s.left);s.top=Math.round(s.top);t={left:s.left-p,top:s.top-o};b.each(["left","top"],function(u,x){b.ui.position[j[u]]&&b.ui.position[j[u]][x](s,{targetWidth:k,targetHeight:l,elemWidth:r,elemHeight:q,collisionPosition:t,collisionWidth:v,collisionHeight:w,offset:i,my:c.my,at:c.at})});b.fn.bgiframe&&n.bgiframe();n.offset(b.extend(s,{using:c.using}))})};b.ui.position={fit:{left:function(c,f){var g=b(window);g=f.collisionPosition.left+f.collisionWidth-g.width()-g.scrollLeft();c.left=
g>0?c.left-g:Math.max(c.left-f.collisionPosition.left,c.left)},top:function(c,f){var g=b(window);g=f.collisionPosition.top+f.collisionHeight-g.height()-g.scrollTop();c.top=g>0?c.top-g:Math.max(c.top-f.collisionPosition.top,c.top)}},flip:{left:function(c,f){if(f.at[0]!=="center"){var g=b(window);g=f.collisionPosition.left+f.collisionWidth-g.width()-g.scrollLeft();var j=f.my[0]==="left"?-f.elemWidth:f.my[0]==="right"?f.elemWidth:0,i=f.at[0]==="left"?f.targetWidth:-f.targetWidth,k=-2*f.offset[0];c.left+=
f.collisionPosition.left<0?j+i+k:g>0?j+i+k:0}},top:function(c,f){if(f.at[1]!=="center"){var g=b(window);g=f.collisionPosition.top+f.collisionHeight-g.height()-g.scrollTop();var j=f.my[1]==="top"?-f.elemHeight:f.my[1]==="bottom"?f.elemHeight:0,i=f.at[1]==="top"?f.targetHeight:-f.targetHeight,k=-2*f.offset[1];c.top+=f.collisionPosition.top<0?j+i+k:g>0?j+i+k:0}}}};if(!b.offset.setOffset){b.offset.setOffset=function(c,f){if(/static/.test(b.curCSS(c,"position")))c.style.position="relative";var g=b(c),
j=g.offset(),i=parseInt(b.curCSS(c,"top",true),10)||0,k=parseInt(b.curCSS(c,"left",true),10)||0;j={top:f.top-j.top+i,left:f.left-j.left+k};"using"in f?f.using.call(c,j):g.css(j)};b.fn.offset=function(c){var f=this[0];if(!f||!f.ownerDocument)return null;if(c)return this.each(function(){b.offset.setOffset(this,c)});return a.call(this)}}})(jQuery);
(function(b){window.freebase=window.fb={mwLWTReloading:false};window.SERVER&&typeof window.SERVER==="object"&&b.extend(window.freebase,window.SERVER);b.cookie=window.freebase.cookie})(jQuery);
(function(b,e){if(!e.datelineReloading){if(!window.console)window.console={log:b.noop,info:b.noop,debug:b.noop,warn:b.noop,error:b.noop};e.dispatch=function(a,c,f,g){if(typeof c!=="function")return false;a=b.event.fix(a||window.event);f||(f=[]);g||(g=this);return c.apply(g,[a].concat(f))};e.get_script=function(a,c){var f=e.get_script.cache,g=f[a];if(g)if(g.state===1)g.callbacks.push(c);else g.state===4&&c();else{g=f[a]={state:0,callbacks:[c]};b.ajax({url:a,dataType:"script",beforeSend:function(){g.state=
1},success:function(){g.state=4;b.each(g.callbacks,function(j,i){i()})},error:function(){g.state=-1}})}};e.get_script.cache={};b(window).bind("fb.user.signedin",function(a,c){console.log("fb.user.signedin",c.id);e.user=c;var f=b("#nav-username");if(f.length){console.log(e.user,e.user.id,e.user.name);f[0].href+=e.user.id.substring(1);var g=e.h.image_url(c.id,{maxwidth:25,maxheight:25,mode:"fillcropmid"});g=b('<a class="user-thumb" href="'+c.id+'"><img src="'+g+'" /></a>');f.prepend(g)}b("#signedin").show();
b(".signedin").show()}).bind("fb.user.signedout",function(){console.log("fb.user.signedout");b("#signedout").show();b(".signedout").show()}).bind("fb.user.unauthorized",function(){window.location.href=e.h.fb_url("/account/signin",{onsignin:window.location.href})}).bind("fb.user.feedback",function(a,c){if(confirm("Uh oh! Something went wrong. Please report this using our feedback tool."))try{userfeedback.api.startFeedback({productId:"68931",disableScrolling:false},c);return false}catch(f){}});var h=
b.cookie("fb-account-name");if(h){var d={id:"/user/"+h,name:h};setTimeout(function(){b(window).trigger("fb.user.signedin",d)},0)}else setTimeout(function(){b(window).trigger("fb.user.signedout")},0);e.window_position=function(){var a={};if(typeof window.innerWidth=="number"){a.width=window.outerWidth;a.height=window.outerHeight;a.top=window.screenY;a.left=window.screenX}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){a.width=document.body.clientWidth;
a.height=document.body.clientHeight;a.top=window.screenTop;a.left=window.screenLeft}return a};e.status=function(){function a(j,i,k){if(g&&g==="error")console.error("MessagePanel: Already displaying error. Ignoring: "+j+": "+i);else{b("#page-state").hide().addClass(j).text(i);g=j;window.clearTimeout(c);f=function(){b("#page-state").slideUp(300).empty().removeClass(j);g=f=null};c=window.setTimeout(f,k);b("#page-state").slideDown(300)}}var c,f,g;return{doing:function(j,i){a("notice",j,2E6,i);return""},
info:function(j,i){a("info",j,4E3,i);return""},error:function(j,i){a("error",j,6E3,i);return""},clear:function(){window.clearTimeout(c);f&&f()}}}();e.popup=function(a,c,f,g){c=c||300;f=f||300;var j=e.window_position(),i=Math.floor((j.width-c)/2)+j.left;j=Math.floor((j.height-f)/2)+j.top;if(/chrome/.test(navigator.userAgent.toLowerCase()))f+=50;c={width:c,height:f,top:j,left:i,directories:"no",location:"no",menubar:"no",resizable:"no",scrollbars:"yes",status:"no",toolbar:"no"};f=[];for(var k in c)f.push(k+
"="+c[k]);return window.open(a,g||"",f.join())};e.login_popup=function(a){a||(a=function(){window.location.reload()});var c=e.popup("/account/signin",900,600,"Freebase");if(c.opener==null)c.opener=self;window.onsignin=a;window.focus&&c.focus();return false};e.logout_popup=function(a){a||(a=function(){window.location.reload()});var c=e.popup("/account/signout",900,600,"Freebase");if(c.opener==null)c.opener=self;window.onsignout=a;window.focus&&c.focus();return false};b(function(){var a=b("#header > #nav-utilities > .language-picker"),
c=b(".current-lang",a);b("select",a).bind("change",function(){var f=b(this).find(":selected").text();c.text(f)})});b(function(){e.suggest_lang={SUPPORTED:{en:1,es:1,fr:1,de:1,it:1,pt:1,zh:1,ja:1,ko:1},lang:function(a){a=e.h.lang_code(a||e.lang||"/lang/en");if(e.suggest_lang.SUPPORTED[a])if(a!=="en")return a+",en";return"en"}};e.suggest_options={service_defaults:{status:["","Searching...","Select an item from the list:"],service_url:e.h.suggest_url(),service_path:"",flyout_service_url:"",flyout_service_path:"${id}",
key:e.acre.freebase.api_key,lang:e.suggest_lang.lang()},filter:{operator:function(){var a=Array.prototype.slice.call(arguments),c=a.shift();if(!(c==="any"||c==="all"||c==="should"))throw"Invalid search operator: "+c;var f=[c];if(c==="should"&&a.length>1){a=["any"].concat(a);f.push(e.suggest_options.filter.operator.apply(null,a))}else f=f.concat(a);return"("+f.join(" ")+")"},any:function(){var a=Array.prototype.slice.call(arguments);a.unshift("any");return e.suggest_options.filter.operator.apply(null,
a)},all:function(){var a=Array.prototype.slice.call(arguments);a.unshift("all");return e.suggest_options.filter.operator.apply(null,a)},should:function(){var a=Array.prototype.slice.call(arguments);a.unshift("should");return e.suggest_options.filter.operator.apply(null,a)}},any:function(){var a=b.extend({},e.suggest_options.service_defaults);a.filter=e.suggest_options.filter.any.apply(null,arguments);return a},all:function(){var a=b.extend({},e.suggest_options.service_defaults);a.filter=e.suggest_options.filter.all.apply(null,
arguments);return a},should:function(){var a=b.extend({},e.suggest_options.service_defaults);a.filter=e.suggest_options.filter.should.apply(null,arguments);return a},search:function(){return b.extend({},e.suggest_options.service_defaults,{status:null,parent:"#site-search-box",align:"right",filter:"(all without:fus)"})},instance:function(a,c,f){var g=["type:"+a];b.each(["user","domain","type"],function(k,l){if(a==="/freebase/"+l+"_profile"){g.push("type:/type/"+l);return false}});a==="/book/book_subject"&&
g.push("type:/base/skosbase/skos_concept");var j=null;if(e.h.is_metaweb_system_type(a))j=e.suggest_options.any.apply(null,g);else{var i=e.suggest_options.filter.should.apply(null,g);j=e.suggest_options.all.apply(null,["without:fus","without:inst"]);j.filter=[i,j.filter];if(c)j.suggest_new="Create new"}if(f)j.lang=e.suggest_lang.lang(f);return j},cotype:function(){var a=["type:/type/type","(not namespace:/type)","(not namespace:/freebase)","(any (not namespace:/common) (any mid:/m/01c5 mid:/m/02_1_m4 mid:/m/03hc3d_))"];
e.user?a.push("(any without:hidden source:"+e.user.id+")"):a.push("without:hidden");return e.suggest_options.all.apply(null,a)},included_type:function(){return e.suggest_options.cotype()},expected_type:function(){var a=["type:/type/type"];e.user?a.push("(any without:hidden source:"+e.user.id+")"):a.push("without:hidden");return e.suggest_options.all.apply(null,a)},delegate_property:function(){var a=["type:/type/property","(not namespace:/type/object)"];e.user?a.push("(any without:hidden source:"+
e.user.id+")"):a.push("without:hidden");return e.suggest_options.all.apply(null,a)}}});b(function(){var a=b("#SearchBox .SearchBox-input,#fb-search-input"),c=b("#fb-search");a.suggest(e.suggest_options.search());var f=b("#site-search-label"),g=b("#site-search-box .fbs-pane");a.bind("fb-select",function(j,i){window.location=e.h.fb_url(i.id);return false}).bind("fb-pane-show",function(){f.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",function(){b.trim(a.val())===
""?f.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):f.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){f.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){if(!f.is(":visible")){b("#site-search-label").slideDown("fast");c.addClass("active")}}).blur(function(){if(!g.is(":visible")&&f.is(":visible")){b("#site-search-label").slideUp("fast");c.removeClass("active")}});b(".SearchBox-form").submit(function(){return b.trim(b("#fb-search-input").val()).length==
0?false:true})});e.disable=function(a){b(a).attr("disabled","disabled").addClass("disabled")};e.enable=function(a){b(a).removeAttr("disabled").removeClass("disabled")};e.lang_select=function(a,c){if(c==="/lang/en"){b(this).removeAttr("name");if(!b(":input[name]",this.form).length){window.location=b(this.form).attr("action");return}}this.form.submit()};e.edit_lang_select=function(a,c){setTimeout(function(){b(window).trigger("fb.edit.lang.select",c)},0)};e.devbar={div:b("#devbar"),touch:function(){/\.(freebase|sandbox\-freebase)\.com$/.test(e.acre.request.server_name)?
b.ajax({url:e.acre.freebase.googleapis_url?e.h.fb_googleapis_url("/touch"):e.h.fb_api_url("/api/service/touch"),dataType:"jsonp"}):b.ajax({url:"/acre/touch"});return false},txn_ids:[],txn:function(){return e.devbar.view_txn(this.href,e.devbar.txn_ids)},view_txn:function(a,c){if(c&&c.length)window.location=a+"?"+b.param({tid:c},true);return false},ajaxComplete:function(a){if(a&&a.readyState===4)(a=a.getResponseHeader("x-metaweb-tid"))&&e.devbar.txn_ids.push(a)},init:function(){$nav_user_controls=b(".nav-user-controls");
$user_controls=b("#user-controls");b("#signedin .trigger").click(function(){if($user_controls.is(":hidden")){$user_controls.fadeIn();$nav_user_controls.addClass("active")}else{$user_controls.fadeOut();$nav_user_controls.removeClass("active")}return false});b("html").click(function(){if($user_controls.is(":visible")){$user_controls.fadeOut();$nav_user_controls.removeClass("active")}});$user_controls.click(function(a){a.stopPropagation()});b("#devbar-touch > a").click(e.devbar.touch);e.tid&&e.devbar.txn_ids.push(e.tid);
b("#devbar-txn > a").click(e.devbar.txn);b.ajaxSetup({complete:function(){e.devbar.ajaxComplete.apply(null,arguments)},error:function(a){var c=this,f={};b.each(["url","data","dataType","type"],function(g,j){f[j]=c[j]});b.each(["status","statusText","responseText"],function(g,j){f[j]=a[j]});f.responseHeaders=a.getAllResponseHeaders();b(window).trigger("fb.user.feedback",f)}})}};e.devbar.init();e.mqlread=function(a,c,f){var g;if(e.acre.freebase.googleapis_url){g=e.h.fb_googleapis_url("/mqlread");a=
{query:JSON.stringify(a)}}else{g=e.h.fb_api_url("/api/service/mqlread");a={query:JSON.stringify({query:a})}}return b.ajax({url:g,data:a,dataType:"jsonp",success:function(j){return c(j.result)},error:f})}}})(jQuery,window.freebase);
(function(b,e){var h=e.h={type:b.type||function(){var d={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(a){d["[object "+a+"]"]=a.toLowerCase()});return function(a){return a==null?String(a):d[Object.prototype.toString.call(a)]||"object"}}(),parse_params:function(d){if(b.isArray(d)){var a={};b.each(d,function(c,f){a[f[0]]=f[1]});return a}return d},build_url:function(d){if(d&&d.indexOf("://")===-1)throw"Host must contain scheme: "+d;var a=d||"",c,f;if(arguments.length>
1){c=Array.prototype.slice.call(arguments);c.shift();for(var g=[],j=0,i=c.length;j<i;j++){var k=c[j];if(h.type(k)==="string")g.push(k);else{f={};for(j=j;j<i;j++)f=b.extend(f,h.parse_params(c[j]));break}}c=g.join("")}if(c&&c.indexOf("/")!==0)throw"Path must begin with a '/': "+c;if(c)a+=c;if(a==="")a="/";b.isEmptyObject(f)||(a+="?"+b.param(f,true));return a},fb_url:function(){var d=Array.prototype.slice.call(arguments);d.unshift(null);e.lang&&e.lang!=="/lang/en"&&d.push({lang:h.lang_code(e.lang)});
return h.build_url.apply(null,d)},ajax_url:function(){var d=Array.prototype.slice.call(arguments);d.unshift("/ajax");return h.reentrant_url.apply(null,d)},static_url:function(){var d=Array.prototype.slice.call(arguments);d.unshift("/static");return h.reentrant_url.apply(null,d)},reentrant_url:function(d,a){a=h.resolve_reentrant_path(a);a=a.replace(/^\/\//,d+"/");var c=Array.prototype.slice.call(arguments,2);c.unshift(a);c.unshift(null);return h.build_url.apply(null,c)},resolve_reentrant_path:function(d){d=
d||"";if(d.indexOf("//")==0)return d;if(d.indexOf("lib/")===0)return e.acre.current_script.app.path+d.substring(3);else{if(d&&d[0]!="/")d="/"+d;return e.acre.request.script.app.path+d}},suggest_url:function(){return e.acre.freebase.googleapis_url?h.build_url(e.acre.freebase.googleapis_url,"/search"):h.legacy_fb_url("/private/suggest")},legacy_fb_url:function(){var d=Array.prototype.slice.call(arguments),a=e.acre.freebase.site_host.replace(/^(https?\:\/\/)([^\.]+)\./,"$1www.").replace(":"+e.acre.request.server_port,
"");d.unshift(a);return h.build_url.apply(null,d)},fb_api_url:function(){var d=Array.prototype.slice.call(arguments);d.unshift(e.acre.freebase.service_url);return h.build_url.apply(null,d)},fb_googleapis_url:function(){if(e.acre.freebase.googleapis_url){var d=Array.prototype.slice.call(arguments);d.unshift(e.acre.freebase.googleapis_url);return h.build_url.apply(null,d)}throw"fb.acre.freebase.googleapis_url is not defined";},wiki_url:function(){var d=Array.prototype.slice.call(arguments);d.unshift("http://wiki.freebase.com",
"/wiki/");return h.build_url.apply(null,d)},lib_base_url:function(d){d=e.acre.metadata.libs[d];return d.base_url+d.version},image_url:function(d,a){return e.acre.freebase.imgurl(d,a.maxwidth,a.maxheight,a.mode,a.pad,a.errorid)},is_metaweb_system_type:function(d){return d.indexOf("/type/")===0||d.indexOf("/common/")===0&&d!=="/common/topic"||d.indexOf("/freebase/")===0&&d.indexOf("_profile")===d.length-8},id_key:function(d,a){var c=d.split("/"),f=c.pop();if(a){c=c.join("/");if(c==="")c="/";return[c,
f]}else return f},lang_code:function(d){return h.id_key(d)},lang_id:function(d){return"/lang/"+h.lang_code(d)}}})(jQuery,window.freebase);
(function(b,e){var h=e.permission={init:function(){if(e.user){var d=e.c;d&&d.id&&b.ajax({url:e.h.ajax_url("lib/permission/has_permission.ajax"),data:{id:d.id,user_id:e.user.id},dataType:"json",success:function(a){h.has_permission=a.result&&a.result[d.id]===true;console.log("has_permission",h.has_permission);b(window).trigger("fb.permission.has_permission",h.has_permission)}});check_permissioned_objects(b(".edit-perm"),e.user.id)}}};b(window).bind("fb.user.signedin",h.init);b(window).bind("fb.permission.has_permission",
function(d,a){a?b(".edit").show():b(".no-edit").show()})})(jQuery,window.freebase);
function check_permissioned_objects(b,e){if(b.length&&e){var h={},d=[];$.each(b,function(){var a=$(this).metadata().id;if(a&&!h[a]){d.push(a);h[a]=1}});d.length&&$.ajax({url:fb.h.ajax_url("lib/permission/has_permission.ajax"),data:{id:d,user_id:e},traditional:true,dataType:"json",success:function(a){var c=a.result||{};$.each(b,function(){var f=$(this).metadata().id;f&&c[f]===true?$(this).show():$(this).addClass("edit-perm-lock")})}})}}
(function(b,e){var h=e.incompatible_types={overlay_dialog:null,inline_dialog:null,check:function(d,a,c,f){b.ajax({url:e.h.ajax_url("lib/incompatible_types/incompatible_types.ajax"),data:{id:d,type:a},dataType:"json",success:function(g){g=g.result||[];if(g.length){g=g[0];f(d,g,a)}else c(d,a)}})},overlay_suggest_incompatible_callback:function(d,a){return function(c,f,g){if(!h.overlay_dialog)h.overlay_dialog=b(".incompatible-overlay-dialog");if(h.overlay_dialog.length){b(".incompatible-topic",h.overlay_dialog).text(c);
b(".incompatible-existing",h.overlay_dialog).text(f);b(".incompatible-type",h.overlay_dialog).text(g);d.data("suggest");h.overlay_dialog.overlay({close:"button",closeOnClick:false,load:true,fixed:false,mask:{color:"#000",loadSpeed:200,opacity:0.5},onClose:function(){d.focus().select();b("button",h.overlay_dialog).unbind()},onLoad:function(){b(".cancel",h.overlay_dialog).focus();b(".save",h.overlay_dialog).click(function(){a(c,g)})}})}else{confirm(h.description(c,f,g))&&a(c,g);d.focus().select()}}},
inline_suggest_incompatible_callback:function(d,a){return function(c,f,g){if(!h.inline_dialog)h.inline_dialog=b(".incompatible-inline-dialog");if(h.inline_dialog.length){b(".incompatible-topic",h.inline_dialog).text(c);b(".incompatible-existing",h.inline_dialog).text(f);b(".incompatible-type",h.inline_dialog).text(g);b(".save",h.inline_dialog).click(function(){b("button",h.inline_dialog).unbind();h.inline_dialog.hide();d.focus().select();a(c,g)});b(".cancel",h.inline_dialog).click(function(){b("button",
h.inline_dialog).unbind();h.inline_dialog.hide();d.focus().select()});d.data("suggest");f=d.offsetParent();var j=d.position();f.append(h.inline_dialog);h.inline_dialog.css({top:j.top+d.outerHeight(),left:j.left});h.inline_dialog.show()}else{confirm(h.description(c,f,g))&&a(c,g);d.focus().select()}}},description:function(d,a,c){return"Because "+d+" is already Typed as "+a+", it's unlikely it should also be Typed as "+c+". Are you shure you want to continue"}}})(jQuery,window.freebase);
(function(b,e){e.require("dojo.date.stamp");e.require("dojo.date.locale");e.require("dojo.number");var h,d=false,a={"long":1,"short":1,full:1,medium:1},c=/^\d{4}$/,f=/^\d{4}\-\d{2}$/,g=/L/g,j=window.i18n={normalize_pattern:function(i){return i.replace(g,"M")},ize:function(i){j.ize_datetime(i);j.ize_number(i)},ize_datetime:function(i){i=b("time",i).each(function(){var k=b(this);if(k.attr("data-i18n")!=="off"){var l=k.attr("datetime");if(l){var m=k.attr("data-format");l=j.datetime(l,m);k.text(l)}}});
d&&i.attr("dir","rtl");i.css("visibility","visible")},ize_datetime_input:function(i){i=b(i);var k=i.val();if(k!==""){k=j.datetime(k);i.val(k)}d&&i.attr("dir","rtl")},datetime:function(i,k){var l=e.date.stamp.fromISOString(i),m={selector:"date"};if(k)if(a[k])m.formatLength=k;else m.datePattern=h["dateFormatItem-"+k];else m.datePattern=c.test(i)?h["dateFormatItem-y"]:f.test(i)?h["dateFormatItem-yMMM"]:h["dateFormat-long"];if(m.datePattern)m.datePattern=j.normalize_pattern(m.datePattern);return e.date.locale.format(l,
m)},ize_number:function(i){i=b(".number",i).each(function(){var k=b(this);if(k.attr("data-i18n")!=="off"){var l=k.attr("data-value");if(l!=null){l=j.number(l);k.text(l)}}});d&&i.attr("dir","rtl");i.css("visibility","visible")},ize_number_input:function(i){i=b(i);var k=i.val();if(k!==""){k=j.number(k);i.val(k)}d&&i.attr("dir","rtl")},number:function(i){return e.number.format(i)},_get_edit_script:function(i,k){j._get_edit_script.loaded?k():b.getScript(i+"/i18n-edit.mf.js",function(){j._get_edit_script.loaded=
1;k()})},text_edit:function(i,k,l,m,n){j._get_edit_script(k,function(){j.edit.text_edit_begin(k,l,m,n)});return false}};e.ready(function(){if(e.locale==="ar"||e.locale==="he")d=true;h=e.date.locale._getGregorianBundle();j.ize()})})(jQuery,dojo);
(function(b,e){var h=e.flag={merge:function(d){return h.flag(d,"merge_begin")},split:function(d){return h.flag(d,"split_begin")},"delete":function(d){return h.flag(d,"delete_begin")},offensive:function(d){return h.flag(d,"offensive_begin")},flag:function(d,a){d=b(d);if(d.is(".editing"))return false;d.addClass("editing");e.get_script(e.h.static_url("lib/flag/flag-edit.mf.js"),function(){h.edit[a](d)});return false},undo:function(d,a){d=b(d);if(d.is(".editing"))return false;d.addClass("editing");e.get_script(e.h.static_url("lib/flag/flag-edit.mf.js"),
function(){h.edit.undo_begin(d,a)});return false}}})(jQuery,window.freebase);
