
/*
 * Copyright 2010, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*

 Cookie plugin

 Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html

*/
if(!("JSON"in window&&window.JSON)){if(!this.JSON)this.JSON={};(function(){function a(i){return i<10?"0"+i:i}function e(i){c.lastIndex=0;return c.test(i)?'"'+i.replace(c,function(k){var l=g[k];return typeof l==="string"?l:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+i+'"'}function h(i,k){var l,m,n,r,q=d,p,o=k[i];if(o&&typeof o==="object"&&typeof o.toJSON==="function")o=o.toJSON(i);if(typeof j==="function")o=j.call(k,i,o);switch(typeof o){case "string":return e(o);case "number":return isFinite(o)?
String(o):"null";case "boolean":case "null":return String(o);case "object":if(!o)return"null";d+=f;p=[];if(Object.prototype.toString.apply(o)==="[object Array]"){r=o.length;for(l=0;l<r;l+=1)p[l]=h(l,o)||"null";n=p.length===0?"[]":d?"[\n"+d+p.join(",\n"+d)+"\n"+q+"]":"["+p.join(",")+"]";d=q;return n}if(j&&typeof j==="object"){r=j.length;for(l=0;l<r;l+=1){m=j[l];if(typeof m==="string")if(n=h(m,o))p.push(e(m)+(d?": ":":")+n)}}else for(m in o)if(Object.hasOwnProperty.call(o,m))if(n=h(m,o))p.push(e(m)+
(d?": ":":")+n);n=p.length===0?"{}":d?"{\n"+d+p.join(",\n"+d)+"\n"+q+"}":"{"+p.join(",")+"}";d=q;return n}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,f,g={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof JSON.stringify!=="function")JSON.stringify=function(i,k,l){var m;f=d="";if(typeof l==="number")for(m=0;m<l;m+=1)f+=" ";else if(typeof l==="string")f=l;if((j=k)&&typeof k!=="function"&&(typeof k!=="object"||typeof k.length!=="number"))throw new Error("JSON.stringify");return h("",
{"":i})};if(typeof JSON.parse!=="function")JSON.parse=function(i,k){function l(n,r){var q,p,o=n[r];if(o&&typeof o==="object")for(q in o)if(Object.hasOwnProperty.call(o,q)){p=l(o,q);if(p!==undefined)o[q]=p;else delete o[q]}return k.call(n,r,o)}var m;i=String(i);b.lastIndex=0;if(b.test(i))i=i.replace(b,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(i.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){m=eval("("+i+")");return typeof k==="function"?l({"":m},""):m}throw new SyntaxError("JSON.parse");}})()}
jQuery.cookie=function(a,e,h){if(typeof e!="undefined"){h=h||{};if(e===null){e="";h=$.extend({},h);h.expires=-1}var b="";if(h.expires&&(typeof h.expires=="number"||h.expires.toUTCString)){if(typeof h.expires=="number"){b=new Date;b.setTime(b.getTime()+h.expires*24*60*60*1E3)}else b=h.expires;b="; expires="+b.toUTCString()}var c=h.path?"; path="+h.path:"",d=h.domain?"; domain="+h.domain:"";h=h.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(e),b,c,d,h].join("")}else{e=null;if(document.cookie&&
document.cookie!=""){h=document.cookie.split(";");for(b=0;b<h.length;b++){c=jQuery.trim(h[b]);if(c.substring(0,a.length+1)==a+"="){e=decodeURIComponent(c.substring(a.length+1));break}}}return e}};
(function(){var a={};$.extend({localstore:function(e,h,b,c){var d=document.location.hostname,f=document.location.protocol;if(typeof h!=="undefined"){var g=JSON.stringify(h);if(!b&&window.globalStorage)if(h===null)delete window.globalStorage[d][f+e];else window.globalStorage[d][f+e]=g;else if(!b&&window.localStorage&&window.localStorage.setItem)h===null?window.localStorage.removeItem(f+e):window.localStorage.setItem(f+e,g);else if(b!==false){b={};b.domain=fb.get_cookie_domain();h===null?$.cookie(e,
null,b):$.cookie(e,g,$.extend(b,c||{expires:14,path:"/"}))}else if(h===null)delete a[e];else a[e]=g;return h}else{if(!b&&window.globalStorage){if(window.globalStorage[d][f+e])h=window.globalStorage[d][f+e].value}else h=!b&&window.localStorage?window.localStorage.getItem(f+e):b!==false?$.cookie(e):a[e];if(h!=""&&h!==null&&h!==undefined)return JSON.parse(h,null)}return null}})})();
(function(a){function e(b,c){this.options=a.extend(true,{},c);this.input=a(b);this.placeholder=this.input.attr("placeholder")||"";this.init()}if("placeholder"in document.createElement("input"))a.fn.placeholder=function(){return this};else{var h=a.fn.val;a.fn.val=function(b){if(b===undefined)if(this.hasClass("placeholder"))return"";return h.apply(this,[b])};e.prototype={init:function(){var b=this,c=this.input.val();if(c===""||c===this.placeholder)this.input.val(this.placeholder).addClass("placeholder");
this.input.bind("focus.placeholder",function(d){return b.focus(d)}).bind("blur.placeholder",function(d){return b.blur(d)});this.input[0].form&&a(this.input[0].form).bind("submit",function(d){return b.submit(d)})},destroy:function(){this.input.unbind(".placeholder");this.input[0].form&&a(this.input[0].form).unbind(".placeholder")},focus:function(){this.input.hasClass("placeholder")&&this.input.val("").removeClass("placeholder")},blur:function(){this.input.val()===""&&this.input.val(this.input.attr("placeholder")).addClass("placeholder")},
submit:function(){this.input.hasClass("placeholder")&&this.input.val("")}};a.fn.placeholder=function(b){return this.each(function(){var c=a(this);c.unbind(".placeholder");if(c.is(":text")||c.is("textarea"))if(c.attr("placeholder")){(c=a.data(this,"placeholder"))&&c.destroy();a.data(this,"placeholder",new e(this,b))}})}}})(jQuery);
(function(a){a.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,h){this.defaults.type=e;this.defaults.name=h},get:function(e,h){var b=a.extend({},this.defaults,h);if(!b.single.length)b.single="metadata";var c=a.data(e,b.single);if(c)return c;c="{}";var d=function(j){if(typeof j!="string")return j;return j=eval("("+j+")")};if(b.type=="html5"){var f={};a(e.attributes).each(function(){var j=this.nodeName;if(j.match(/^data-/))j=j.replace(/^data-/,
"");else return true;f[j]=d(this.nodeValue)})}else{if(b.type=="class"){var g=b.cre.exec(e.className);if(g)c=g[1]}else if(b.type=="elem"){if(!e.getElementsByTagName)return;g=e.getElementsByTagName(b.name);if(g.length)c=a.trim(g[0].innerHTML)}else if(e.getAttribute!=undefined)if(g=e.getAttribute(b.name))c=g;f=d(c.indexOf("{")<0?"{"+c+"}":c)}a.data(e,b.single,f);return f}}});a.fn.metadata=function(e){return a.metadata.get(this[0],e)}})(jQuery);
(function(a,e){function h(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus();c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(b){if(b!==e)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var c;b.length&&b[0]!==document;){c=b.css("position");
if(c==="absolute"||c==="relative"||c==="fixed"){c=parseInt(b.css("zIndex"),10);if(!isNaN(c)&&c!==0)return c}b=b.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(b,c){function d(i,k,l,m){a.each(f,function(){k-=parseFloat(a.curCSS(i,"padding"+this,true))||0;if(l)k-=parseFloat(a.curCSS(i,
"border"+this+"Width",true))||0;if(m)k-=parseFloat(a.curCSS(i,"margin"+this,true))||0});return k}var f=c==="Width"?["Left","Right"]:["Top","Bottom"],g=c.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(i){if(i===e)return j["inner"+c].call(this);return this.each(function(){a(this).css(g,d(this,i)+"px")})};a.fn["outer"+c]=function(i,k){if(typeof i!=="number")return j["outer"+c].call(this,i);return this.each(function(){a(this).css(g,
d(this,i,true,k)+"px")})}});a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){var c=b.nodeName.toLowerCase(),d=a.attr(b,"tabindex");if("area"===c){c=b.parentNode;d=c.name;if(!b.href||!d||c.nodeName.toLowerCase()!=="map")return false;b=a("img[usemap=#"+d+"]")[0];return!!b&&h(b)}return(/input|select|textarea|button|object/.test(c)?!b.disabled:"a"==c?b.href||!isNaN(d):!isNaN(d))&&h(b)},tabbable:function(b){var c=a.attr(b,"tabindex");return(isNaN(c)||c>=0)&&a(b).is(":focusable")}});
a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=c.offsetHeight===100;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"});a.extend(a.ui,{plugin:{add:function(b,c,d){b=a.ui[b].prototype;for(var f in d){b.plugins[f]=b.plugins[f]||[];b.plugins[f].push([c,d[f]])}},call:function(b,c,d){if((c=b.plugins[c])&&b.element[0].parentNode)for(var f=0;f<c.length;f++)b.options[c[f][0]]&&
c[f][1].apply(b.element,d)}},contains:function(b,c){return document.compareDocumentPosition?b.compareDocumentPosition(c)&16:b!==c&&b.contains(c)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return false;var d=c&&c==="left"?"scrollLeft":"scrollTop",f=false;if(b[d]>0)return true;b[d]=1;f=b[d]>0;b[d]=0;return f},isOverAxis:function(b,c,d){return b>c&&b<c+d},isOver:function(b,c,d,f,g,j){return a.ui.isOverAxis(b,d,g)&&a.ui.isOverAxis(c,f,j)}})}})(jQuery);
(function(a,e){if(a.cleanData){var h=a.cleanData;a.cleanData=function(c){for(var d=0,f;(f=c[d])!=null;d++)a(f).triggerHandler("remove");h(c)}}else{var b=a.fn.remove;a.fn.remove=function(c,d){return this.each(function(){if(!d)if(!c||a.filter(c,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return b.call(a(this),c,d)})}}a.widget=function(c,d,f){var g=c.split(".")[0],j;c=c.split(".")[1];j=g+"-"+c;if(!f){f=d;d=a.Widget}a.expr[":"][j]=function(i){return!!a.data(i,
c)};a[g]=a[g]||{};a[g][c]=function(i,k){arguments.length&&this._createWidget(i,k)};d=new d;d.options=a.extend(true,{},d.options);a[g][c].prototype=a.extend(true,d,{namespace:g,widgetName:c,widgetEventPrefix:a[g][c].prototype.widgetEventPrefix||c,widgetBaseClass:j},f);a.widget.bridge(c,a[g][c])};a.widget.bridge=function(c,d){a.fn[c]=function(f){var g=typeof f==="string",j=Array.prototype.slice.call(arguments,1),i=this;f=!g&&j.length?a.extend.apply(null,[true,f].concat(j)):f;if(g&&f.charAt(0)==="_")return i;
g?this.each(function(){var k=a.data(this,c),l=k&&a.isFunction(k[f])?k[f].apply(k,j):k;if(l!==k&&l!==e){i=l;return false}}):this.each(function(){var k=a.data(this,c);k?k.option(f||{})._init():a.data(this,c,new d(f,this))});return i}};a.Widget=function(c,d){arguments.length&&this._createWidget(c,d)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(c,d){a.data(d,this.widgetName,this);this.element=a(d);this.options=a.extend(true,{},this.options,
this._getCreateOptions(),c);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(c,d){var f=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c==="string"){if(d===e)return this.options[c];f={};f[c]=d}this._setOptions(f);return this},_setOptions:function(c){var d=this;a.each(c,function(f,g){d._setOption(f,g)});return this},_setOption:function(c,d){this.options[c]=d;if(c==="disabled")this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(c,d,f){var g=this.options[c];d=a.Event(d);d.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();f=f||{};if(d.originalEvent){c=a.event.props.length;for(var j;c;){j=a.event.props[--c];d[j]=d.originalEvent[j]}}this.element.trigger(d,f);return!(a.isFunction(g)&&g.call(this.element[0],d,f)===false||d.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(h){return e._mouseDown(h)}).bind("click."+this.widgetName,function(h){if(true===a.data(h.target,e.widgetName+".preventClickEvent")){a.removeData(h.target,e.widgetName+".preventClickEvent");h.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){e.originalEvent=
e.originalEvent||{};if(!e.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var h=this,b=e.which==1,c=typeof this.options.cancel=="string"?a(e.target).parents().add(e.target).filter(this.options.cancel).length:false;if(!b||c||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){h.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=
this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}this._mouseMoveDelegate=function(d){return h._mouseMove(d)};this._mouseUpDelegate=function(d){return h._mouseUp(d)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();return e.originalEvent.mouseHandled=true}},_mouseMove:function(e){if(a.browser.msie&&!(document.documentMode>=9)&&!e.button)return this._mouseUp(e);if(this._mouseStarted){this._mouseDrag(e);
return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false)?this._mouseDrag(e):this._mouseUp(e);return!this._mouseStarted},_mouseUp:function(e){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;e.target==this._mouseDownEvent.target&&a.data(e.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var e=/left|center|right/,h=/top|center|bottom/,b=a.fn.position,c=a.fn.offset;a.fn.position=function(d){if(!d||!d.of)return b.apply(this,arguments);d=a.extend({},d);var f=a(d.of),g=f[0],j=(d.collision||"flip").split(" "),i=d.offset?d.offset.split(" "):[0,0],k,l,m;if(g.nodeType===9){k=f.width();l=f.height();m={top:0,left:0}}else if(g.setTimeout){k=f.width();l=f.height();m={top:f.scrollTop(),left:f.scrollLeft()}}else if(g.preventDefault){d.at="left top";k=l=0;m={top:d.of.pageY,
left:d.of.pageX}}else{k=f.outerWidth();l=f.outerHeight();m=f.offset()}a.each(["my","at"],function(){var n=(d[this]||"").split(" ");if(n.length===1)n=e.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"];n[0]=e.test(n[0])?n[0]:"center";n[1]=h.test(n[1])?n[1]:"center";d[this]=n});if(j.length===1)j[1]=j[0];i[0]=parseInt(i[0],10)||0;if(i.length===1)i[1]=i[0];i[1]=parseInt(i[1],10)||0;if(d.at[0]==="right")m.left+=k;else if(d.at[0]==="center")m.left+=k/2;if(d.at[1]==="bottom")m.top+=
l;else if(d.at[1]==="center")m.top+=l/2;m.left+=i[0];m.top+=i[1];return this.each(function(){var n=a(this),r=n.outerWidth(),q=n.outerHeight(),p=parseInt(a.curCSS(this,"marginLeft",true))||0,o=parseInt(a.curCSS(this,"marginTop",true))||0,v=r+p+(parseInt(a.curCSS(this,"marginRight",true))||0),w=q+o+(parseInt(a.curCSS(this,"marginBottom",true))||0),s=a.extend({},m),t;if(d.my[0]==="right")s.left-=r;else if(d.my[0]==="center")s.left-=r/2;if(d.my[1]==="bottom")s.top-=q;else if(d.my[1]==="center")s.top-=
q/2;s.left=Math.round(s.left);s.top=Math.round(s.top);t={left:s.left-p,top:s.top-o};a.each(["left","top"],function(u,x){a.ui.position[j[u]]&&a.ui.position[j[u]][x](s,{targetWidth:k,targetHeight:l,elemWidth:r,elemHeight:q,collisionPosition:t,collisionWidth:v,collisionHeight:w,offset:i,my:d.my,at:d.at})});a.fn.bgiframe&&n.bgiframe();n.offset(a.extend(s,{using:d.using}))})};a.ui.position={fit:{left:function(d,f){var g=a(window);g=f.collisionPosition.left+f.collisionWidth-g.width()-g.scrollLeft();d.left=
g>0?d.left-g:Math.max(d.left-f.collisionPosition.left,d.left)},top:function(d,f){var g=a(window);g=f.collisionPosition.top+f.collisionHeight-g.height()-g.scrollTop();d.top=g>0?d.top-g:Math.max(d.top-f.collisionPosition.top,d.top)}},flip:{left:function(d,f){if(f.at[0]!=="center"){var g=a(window);g=f.collisionPosition.left+f.collisionWidth-g.width()-g.scrollLeft();var j=f.my[0]==="left"?-f.elemWidth:f.my[0]==="right"?f.elemWidth:0,i=f.at[0]==="left"?f.targetWidth:-f.targetWidth,k=-2*f.offset[0];d.left+=
f.collisionPosition.left<0?j+i+k:g>0?j+i+k:0}},top:function(d,f){if(f.at[1]!=="center"){var g=a(window);g=f.collisionPosition.top+f.collisionHeight-g.height()-g.scrollTop();var j=f.my[1]==="top"?-f.elemHeight:f.my[1]==="bottom"?f.elemHeight:0,i=f.at[1]==="top"?f.targetHeight:-f.targetHeight,k=-2*f.offset[1];d.top+=f.collisionPosition.top<0?j+i+k:g>0?j+i+k:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(d,f){if(/static/.test(a.curCSS(d,"position")))d.style.position="relative";var g=a(d),
j=g.offset(),i=parseInt(a.curCSS(d,"top",true),10)||0,k=parseInt(a.curCSS(d,"left",true),10)||0;j={top:f.top-j.top+i,left:f.left-j.left+k};"using"in f?f.using.call(d,j):g.css(j)};a.fn.offset=function(d){var f=this[0];if(!f||!f.ownerDocument)return null;if(d)return this.each(function(){a.offset.setOffset(this,d)});return c.call(this)}}})(jQuery);window.freebase=window.fb={mwLWTReloading:false};window.SERVER&&typeof window.SERVER==="object"&&$.each(["acre","ajax"],function(a,e){window.fb[e]=window.SERVER[e]});
(function(a,e){if(a.cookie("mwLWTReloaded"))a.cookie("mwLWTReloaded",null,{path:"/"});else{var h=0,b=0;if(typeof e.acre==="object"&&e.acre&&e.acre.mwLastWriteTime)b=e.acre.mwLastWriteTime||0;if(document.cookie&&document.cookie!="")for(var c=document.cookie.split(";"),d=0,f=c.length;d<f;d++){var g=a.trim(c[d]);if(g.indexOf("mwLastWriteTime=")===0){g=decodeURIComponent(g.substring(16)).split("|");if(g.length)h=g[0]}}c=h?parseInt(h,10):-1;d=b?parseInt(b,10):-1;if(h&&b&&d<c){a.cookie("mwLWTReloaded",
"true",{path:"/"});e.mwLWTReloading=true;window.location.reload(true)}}})(jQuery,window.freebase);
(function(a,e){if(!e.mwLWTReloading){if(!window.console)window.console={log:a.noop,info:a.noop,debug:a.noop,warn:a.noop,error:a.noop};e.dispatch=function(g,j,i,k){if(typeof j!=="function")return false;g=a.event.fix(g||window.event);i||(i=[]);k||(k=this);return j.apply(k,[g].concat(i))};e.get_script=function(g,j){var i=e.get_script.cache,k=i[g];if(k)if(k.state===1)k.callbacks.push(j);else k.state===4&&j();else{k=i[g]={state:0,callbacks:[j]};a.ajax({url:g,dataType:"script",beforeSend:function(){k.state=
1},success:function(){k.state=4;a.each(k.callbacks,function(l,m){m()})},error:function(){k.state=-1}})}};e.get_script.cache={};a(window).bind("fb.user.signedin",function(g,j){console.log("fb.user.signnedin");e.user=j;var i=a("#nav-username a:first");if(i.length){i[0].href+=e.user.id;i.text(e.user.name)}a("#signedin").show()}).bind("fb.user.signedout",function(){console.log("fb.user.signedout");a("#signedout").show()});if(/\.(freebase|sandbox\-freebase)\.com$/.test(e.acre.request.server_name)){var h=
function(g,j){var i=g.indexOf("|"+j+"_");if(i!=-1){i=i+2+j.length;var k=g.indexOf("|",i);if(k!=-1)return decodeURIComponent(g.substr(i,k-i))}return null},b=a.cookie("metaweb-user-info");if(b){var c=h(b,"g"),d=h(b,"u"),f=h(b,"p");f||(f="/user/"+this.name);setTimeout(function(){a(window).trigger("fb.user.signedin",{guid:c,name:d,id:f})},0)}else setTimeout(function(){a(window).trigger("fb.user.signedout")},0)}else a.ajax({url:"/acre/account/user_info",dataType:"json",success:function(g){g&&g.code===
"/api/status/ok"?a(window).trigger("fb.user.signedin",{id:g.id,guid:g.guid,name:g.username}):a(window).trigger("fb.user.signedout")},error:function(){a(window).trigger("fb.user.signedout")}});a(function(){var g=a("#SearchBox .SearchBox-input,#global-search-input"),j=e.acre.freebase.site_host;g.suggest({service_url:e.h.legacy_fb_url(),soft:true,category:"object",parent:"#site-search-box",align:"right",advanced:true,codemirror:{path:"http://freebaselibs.com/static/freebase_site/codemirror/a9a6a3d5a293b55143be441e4196871f/",
codemirrorjs:"codemirror.mf.js",basefiles:[],parserfile:["codemirror-frame.mf.js"],stylesheet:["http://freebaselibs.com/static/freebase_site/codemirror/a9a6a3d5a293b55143be441e4196871f/codemirror-frame.mf.css"]}});a("#site-search-label");a("#site-search-box .fbs-pane");g.bind("fb-select",function(i,k){window.location=j+k.id;return false});a(".SearchBox-form").submit(function(){return a.trim(a("#global-search-input").val()).length==0?false:true});a("input, textarea").placeholder()});e.disable=function(g){a(g).attr("disabled",
"disabled").addClass("disabled")};e.enable=function(g){a(g).removeAttr("disabled").removeClass("disabled")};e.lang_select=function(g,j){setTimeout(function(){a(window).trigger("fb.lang.select",j)},0)};e.devbar={div:a("#devbar"),touch:function(){/\.(freebase|sandbox\-freebase)\.com$/.test(e.acre.request.server_name)?a.ajax({url:e.acre.freebase.service_url+"/api/service/touch",dataType:"jsonp"}):a.ajax({url:"/acre/touch"});return false},txn_ids:[],txn:function(){return e.devbar.view_txn(this.href,e.devbar.txn_ids)},
view_txn:function(g,j){if(j&&j.length)window.location=g+"?"+a.param({tid:j},true);return false},ajaxComplete:function(g){if(g&&g.readyState===4)(g=g.getResponseHeader("x-metaweb-tid"))&&e.devbar.txn_ids.push(g)},init:function(){a("#devbar-touch > a").click(e.devbar.touch);e.acre.tid&&e.devbar.txn_ids.push(e.acre.tid);a("#devbar-txn > a").click(e.devbar.txn);a.ajaxSetup({complete:e.devbar.ajaxComplete})}};e.devbar.init()}})(jQuery,window.freebase);
(function(a,e){var h=e.h={type:a.type||function(){var b={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(c){b["[object "+c+"]"]=c.toLowerCase()});return function(c){return c==null?String(c):b[Object.prototype.toString.call(c)]||"object"}}(),parse_params:function(b){if(a.isArray(b)){var c={};a.each(b,function(d,f){c[f[0]]=f[1]});return c}return b},build_url:function(b){if(b&&b.indexOf("://")===-1)throw"Host must contain scheme: "+b;var c=b||"",d,f;if(arguments.length>
1){d=Array.prototype.slice.call(arguments);d.shift();var g=[];a.each(d,function(j,i){if(h.type(i)==="string")g.push(i);else{f=h.parse_params(i);return false}});d=g.join("")}if(d&&d.indexOf("/")!==0)throw"Path must begin with a '/': "+d;if(d)c+=d;if(c==="")c="/";a.isEmptyObject(f)||(c+="?"+a.param(f,true));return c},fb_url:function(){var b=Array.prototype.slice.call(arguments);b.unshift(null);return h.build_url.apply(null,b)},ajax_url:function(){var b=Array.prototype.slice.call(arguments);b.unshift("/ajax");
return h.reentrant_url.apply(null,b)},reentrant_url:function(b,c){c=h.resolve_reentrant_path(c);c=c.replace(/^\/\//,b+"/");c=c.replace(".svn.freebase-site.googlecode.dev","");var d=Array.prototype.slice.call(arguments,2);d.unshift(c);return h.fb_url.apply(null,d)},resolve_reentrant_path:function(b){b=b||"";if(b.indexOf("//")==0)return b;if(b.indexOf("lib/")===0)return e.acre.current_script.app.path+b.substring(3);else{if(b&&b[0]!="/")b="/"+b;return e.acre.request.script.app.path+b}},legacy_fb_url:function(){var b=
Array.prototype.slice.call(arguments),c=e.acre.freebase.site_host.replace("devel.","www.").replace(":"+e.acre.request.server_port,"");b.unshift(c);return h.build_url.apply(null,b)},fb_api_url:function(){var b=Array.prototype.slice.call(arguments);b.unshift(e.acre.freebase.service_url);return h.build_url.apply(null,b)},wiki_url:function(){var b=Array.prototype.slice.call(arguments);b.unshift("http://wiki.freebase.com","/wiki/");return h.build_url.apply(null,b)}}})(jQuery,window.freebase);
(function(a,e){var h=e.permission={init:function(){if(e.user)if(!(typeof e.acre==="undefined"||typeof e.acre.c==="undefined")){var b=e.acre.c;b&&b.id&&a.ajax({url:e.ajax.lib+"/permission/has_permission",data:{id:b.id,user_id:e.user.id},dataType:"json",success:function(c){h.has_permission=c.result&&c.result.has_permission===true;console.log("has_permission",h.has_permission);a(window).trigger("fb.permission.has_permission",h.has_permission)}})}}};a(window).bind("fb.user.signedin",h.init)})(jQuery,
window.freebase);
