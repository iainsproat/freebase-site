
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
(function(c){c.extend({tablesorter:new function(){function b(c,b){a(c+","+((new Date).getTime()-b.getTime())+"ms")}function a(c){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(c):alert(c)}function e(b,e){var z="";if(0!=b.tBodies.length){var j=b.tBodies[0].rows;if(j[0])for(var d=[],i=j[0].cells.length,k=0;k<i;k++){var n=!1;c.metadata&&c(e[k]).metadata()&&c(e[k]).metadata().sorter?n=g(c(e[k]).metadata().sorter):b.config.headers[k]&&b.config.headers[k].sorter&&(n=g(b.config.headers[k].sorter));
if(!n)a:{for(var n=b,f=j,p=-1,l=k,v=m.length,s=!1,q=!1,t=!0;""==q&&t;)p++,f[p]?(s=f[p].cells[l],q=c.trim(h(n.config,s)),n.config.debug&&a("Checking if value was empty on row:"+p)):t=!1;for(f=1;f<v;f++)if(m[f].is(q,n,s)){n=m[f];break a}n=m[0]}b.config.debug&&(z+="column:"+k+" parser:"+n.id+"\n");d.push(n)}b.config.debug&&a(z);return d}}function g(b){for(var c=m.length,a=0;a<c;a++)if(m[a].id.toLowerCase()==b.toLowerCase())return m[a];return!1}function f(a){var e;a.config.debug&&(e=new Date);for(var f=
a.tBodies[0]&&a.tBodies[0].rows.length||0,j=a.tBodies[0].rows[0]&&a.tBodies[0].rows[0].cells.length||0,d=a.config.parsers,i={row:[],normalized:[]},k=0;k<f;++k){var n=c(a.tBodies[0].rows[k]),g=[];if(n.hasClass(a.config.cssChildRow))i.row[i.row.length-1]=i.row[i.row.length-1].add(n);else{i.row.push(n);for(var p=0;p<j;++p)g.push(d[p].format(h(a.config,n[0].cells[p]),a,n[0].cells[p]));g.push(i.normalized.length);i.normalized.push(g)}}a.config.debug&&b("Building cache for "+f+" rows:",e);return i}function h(b,
a){var e="";if(!a)return"";b.supportsTextContent||(b.supportsTextContent=a.textContent||!1);return e="simple"==b.textExtraction?b.supportsTextContent?a.textContent:a.childNodes[0]&&a.childNodes[0].hasChildNodes()?a.childNodes[0].innerHTML:a.innerHTML:"function"==typeof b.textExtraction?b.textExtraction(a):c(a).text()}function v(a,e){var f;a.config.debug&&(f=new Date);for(var j=e.row,d=e.normalized,i=d.length,k=d[0].length-1,n=c(a.tBodies[0]),g=[],h=0;h<i;h++){var o=d[h][k];g.push(j[o]);if(!a.config.appender)for(var m=
j[o].length,l=0;l<m;l++)n[0].appendChild(j[o][l])}a.config.appender&&a.config.appender(a,g);g=null;a.config.debug&&b("Rebuilt table:",f);A(a);setTimeout(function(){c(a).trigger("sortEnd")},0)}function t(b,c){return b.config.headers[c]&&b.config.headers[c].lockedOrder?b.config.headers[c].lockedOrder:!1}function A(b){for(var c=b.config.widgets,a=c.length,e=0;e<a;e++)w(c[e]).format(b)}function w(b){for(var c=u.length,a=0;a<c;a++)if(u[a].id.toLowerCase()==b.toLowerCase())return u[a]}function B(b,a,e,
f){a.removeClass(f[0]).removeClass(f[1]);var d=[];a.each(function(){this.sortDisabled||(d[this.column]=c(this))});b=e.length;for(a=0;a<b;a++)d[e[a][0]].addClass(f[e[a][1]])}function x(c,a,e){var f,d;c.config.debug&&(f=new Date);var i="var sortWrapper = function(a,b) {",k=a.length;for(d=0;d<k;d++)var g=a[d][0],h=a[d][1],g="text"==c.config.parsers[g].type?0==h?l("text","asc",g):l("text","desc",g):0==h?l("numeric","asc",g):l("numeric","desc",g),o="e"+d,i=i+("var "+o+" = "+g),i=i+("if("+o+") { return "+
o+"; } "),i=i+"else { ";d=e.normalized[0].length-1;i+="return a["+d+"]-b["+d+"];";for(d=0;d<k;d++)i+="}; ";i+="return 0; }; ";c.config.debug&&b("Evaling expression:"+i,new Date);eval(i);e.normalized.sort(sortWrapper);c.config.debug&&b("Sorting on "+a.toString()+" and dir "+h+" time:",f);return e}function l(b,c,a){var e="a["+a+"]",a="b["+a+"]";if("text"==b&&"asc"==c)return"("+e+" == "+a+" ? 0 : ("+e+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+a+") ? -1 : 1 )));";
if("text"==b&&"desc"==c)return"("+e+" == "+a+" ? 0 : ("+e+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+e+") ? -1 : 1 )));";if("numeric"==b&&"asc"==c)return"("+e+" === null && "+a+" === null) ? 0 :("+e+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+a+"));";if("numeric"==b&&"desc"==c)return"("+e+" === null && "+a+" === null) ? 0 :("+e+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : "+
a+" - "+e+"));"}var m=[],u=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=b;this.construct=
function(g){return this.each(function(){if(this.tHead&&this.tBodies){var l,m,j;this.config={};j=c.extend(this.config,c.tablesorter.defaults,g);l=c(this);c.data(this,"tablesorter",j);var d=this,i;d.config.debug&&(i=new Date);for(var k=[],n={},G=d.getElementsByTagName("THEAD")[0].getElementsByTagName("TR"),p=0;p<G.length;p++)for(var u=G[p].cells,D=0;D<u.length;D++){var s=u[D],q=s.parentNode.rowIndex,E=q+"-"+s.cellIndex,L=s.rowSpan||1,s=s.colSpan||1,C;"undefined"==typeof k[q]&&(k[q]=[]);var r;for(r=
0;r<k[q].length+1;r++)if("undefined"==typeof k[q][r]){C=r;break}n[E]=C;for(r=q;r<q+L;r++){"undefined"==typeof k[r]&&(k[r]=[]);for(var E=k[r],F=C;F<C+s;F++)E[F]="x"}}var y=c(d.config.selectorHeaders,d).each(function(b){this.column=n[this.parentNode.rowIndex+"-"+this.cellIndex];this.count=this.order="Number"!=typeof d.config.sortInitialOrder?"desc"==d.config.sortInitialOrder.toLowerCase()?1:0:1==d.config.sortInitialOrder?1:0;if(c.metadata&&!1===c(this).metadata().sorter||d.config.headers[b]&&!1===d.config.headers[b].sorter)this.sortDisabled=
!0;t(d,b)&&(this.order=this.lockedOrder=t(d,b));if(!this.sortDisabled){var a=c(this).addClass(d.config.cssHeader);d.config.onRenderHeader&&d.config.onRenderHeader.apply(a)}d.config.headerList[b]=this});d.config.debug&&(b("Built headers:",i),a(y));this.config.parsers=e(this,y);m=f(this);var H=[j.cssDesc,j.cssAsc];if(this.config.widthFixed){var I=c("<colgroup>");c("tr:first td",this.tBodies[0]).each(function(){I.append(c("<col>").css("width",c(this).width()))});c(this).prepend(I)}y.click(function(d){var b=
l[0].tBodies[0]&&l[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&b>0){l.trigger("sortStart");c(this);b=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(d[j.sortMultiSortKey]){a:{for(var d=j.sortList,a=d.length,i=0;i<a;i++)if(d[i][0]==b){d=true;break a}d=false}if(d)for(d=0;d<j.sortList.length;d++){a=j.sortList[d];i=j.headerList[a[0]];if(a[0]==b){i.count=a[1];i.count++;a[1]=i.count%2}}else j.sortList.push([b,this.order])}else{j.sortList=[];if(j.sortForce!=
null){a=j.sortForce;for(d=0;d<a.length;d++)a[d][0]!=b&&j.sortList.push(a[d])}j.sortList.push([b,this.order])}setTimeout(function(){B(l[0],y,j.sortList,H);v(l[0],x(l[0],j.sortList,m))},1);return false}}).mousedown(function(){if(j.cancelSelection){this.onselectstart=function(){return false};return false}});l.bind("update",function(){var d=this;setTimeout(function(){d.config.parsers=e(d,y);m=f(d)},1)}).bind("updateCell",function(d,b){var a=this.config,c=[b.parentNode.rowIndex-1,b.cellIndex];m.normalized[c[0]][c[1]]=
a.parsers[c[1]].format(h(a,b),b)}).bind("sorton",function(d,b){c(this).trigger("sortStart");j.sortList=b;for(var a=j.sortList,i=this.config,e=a.length,k=0;k<e;k++){var g=a[k],f=i.headerList[g[0]];f.count=g[1];f.count++}B(this,y,a,H);v(this,x(this,a,m))}).bind("appendCache",function(){v(this,m)}).bind("applyWidgetId",function(d,b){w(b).format(this)}).bind("applyWidgets",function(){A(this)});c.metadata&&(c(this).metadata()&&c(this).metadata().sortlist)&&(j.sortList=c(this).metadata().sortlist);0<j.sortList.length&&
l.trigger("sorton",[j.sortList]);A(this)}})};this.addParser=function(b){for(var a=m.length,c=!0,e=0;e<a;e++)m[e].id.toLowerCase()==b.id.toLowerCase()&&(c=!1);c&&m.push(b)};this.addWidget=function(b){u.push(b)};this.formatFloat=function(b){b=parseFloat(b);return isNaN(b)?0:b};this.formatInt=function(b){b=parseInt(b);return isNaN(b)?0:b};this.isDigit=function(b){return/^[-+]?\d*$/.test(c.trim(b.replace(/[,.']/g,"")))};this.clearTableBody=function(b){c.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(b.tBodies[0]):
b.tBodies[0].innerHTML=""}}});c.fn.extend({tablesorter:c.tablesorter.construct});var h=c.tablesorter;h.addParser({id:"text",is:function(){return!0},format:function(b){return c.trim(b.toLocaleLowerCase())},type:"text"});h.addParser({id:"digit",is:function(b,a){return c.tablesorter.isDigit(b,a.config)},format:function(b){return c.tablesorter.formatFloat(b)},type:"numeric"});h.addParser({id:"currency",is:function(b){return/^[\u00a3$\u20ac?.]/.test(b)},format:function(b){return c.tablesorter.formatFloat(b.replace(RegExp(/[\u00a3$\u20ac]/g),
""))},type:"numeric"});h.addParser({id:"ipAddress",is:function(b){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(b)},format:function(b){for(var b=b.split("."),a="",e=b.length,g=0;g<e;g++)var f=b[g],a=2==f.length?a+("0"+f):a+f;return c.tablesorter.formatFloat(a)},type:"numeric"});h.addParser({id:"url",is:function(b){return/^(https?|ftp|file):\/\/$/.test(b)},format:function(b){return jQuery.trim(b.replace(RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});h.addParser({id:"isoDate",is:function(b){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(b)},
format:function(b){return c.tablesorter.formatFloat(""!=b?(new Date(b.replace(RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});h.addParser({id:"percent",is:function(b){return/\%$/.test(c.trim(b))},format:function(b){return c.tablesorter.formatFloat(b.replace(RegExp(/%/g),""))},type:"numeric"});h.addParser({id:"usLongDate",is:function(b){return b.match(RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(b){return c.tablesorter.formatFloat((new Date(b)).getTime())},
type:"numeric"});h.addParser({id:"shortDate",is:function(b){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(b)},format:function(b,a){var e=a.config,b=b.replace(/\-/g,"/");if("us"==e.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if("uk"==e.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if("dd/mm/yy"==e.dateFormat||"dd-mm-yy"==e.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return c.tablesorter.formatFloat((new Date(b)).getTime())},
type:"numeric"});h.addParser({id:"time",is:function(b){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(b)},format:function(b){return c.tablesorter.formatFloat((new Date("2000/01/01 "+b)).getTime())},type:"numeric"});h.addParser({id:"metadata",is:function(){return!1},format:function(b,a,e){b=a.config;b=!b.parserMetadataName?"sortValue":b.parserMetadataName;return c(e).metadata()[b]},type:"numeric"});h.addWidget({id:"zebra",format:function(b){var a;b.config.debug&&(a=new Date);
var e,g=-1,f;c("tr:visible",b.tBodies[0]).each(function(){e=c(this);e.hasClass(b.config.cssChildRow)||g++;f=0==g%2;e.removeClass(b.config.widgetZebra.css[f?0:1]).addClass(b.config.widgetZebra.css[f?1:0])});b.config.debug&&c.tablesorter.benchmark("Applying Zebra widget",a)}})})(jQuery);
(function(c){c(function(){c.tablesorter&&(c("<div>"),c.tablesorter.defaults.cssAsc="column-header-asc",c.tablesorter.defaults.cssDesc="column-header-desc",c.tablesorter.defaults.cssHeader="column-header",c.tablesorter.addParser({id:"datetime",is:function(){return!1},format:function(h,b,a){return c("[datetime]:first",a).attr("datetime")},type:"text"}),c.tablesorter.addParser({id:"ignoreCase",is:function(){return!1},format:function(c){return c.toLowerCase()},type:"text"}),c.tablesorter.addParser({id:"string",
is:function(){return!1},format:function(c){return c},type:"text"}),c.tablesorter.addParser({id:"number",is:function(){return!1},format:function(h,b,a){h=c(".number:first",a).attr("data-value");null==h&&(h=Number.MIN_VALUE);return h},type:"numeric"}),c(".table-sortable").each(function(){c(this).tablesorter()}))})})(jQuery);
(function(c){var h="undefined"!=typeof window.innerWidth?function(){return{w:window.innerWidth,h:window.innerHeight}}:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}:function(){return{w:document.getElementsByTagName("body")[0].clientWidth,h:document.getElementsByTagName("body")[0].clientHeight}};window.kbs=
function(b){c(".kbs.current",b).removeClass("current");var a=c(".domain-section:first",b),e=c(".domain-section:last",b),g=this.scroll_to=function(d){var b=c(document).scrollTop();c(document).height();var a=h().h,a=b+a,e=d.offset().top,d=e+d.height();e<b?c(document).scrollTop(e):d>a&&c(document).scrollTop(b+(d-a))},f=this.get_current=function(){return c(".kbs.current:first",b)},o=this.set_next=function(d,b,a){d=d||f();b.length&&(d.removeClass("current"),b.addClass("current"),a||g(b))},v=this.next_domain=
function(b){var a=f(),c=t(a);c&&(c=c.find(".kbs:first"),o(a,c,b))},t=this._next_domain=function(d){if(!d||!d.length)return c(".domain-section:first",b);d=d.closest(".domain-section");return!d.length||d[0]===e[0]?a:d.next(".domain-section")},A=this.prev_domain=function(){var b=f(),a=w(b);a&&(a=a.find(".kbs:first"),o(b,a))},w=this._prev_domain=function(d){if(!d||!d.length)return c(".domain-section:last",b);var i=d.closest(".domain-section");return d.closest(".property-section").length||d.closest(".type-section").length?
i:!i.length||i[0]===a[0]?e:i.prev(".domain-section")},B=this.next_type=function(){var b=f(),a=x(b);a&&(a=a.find(".kbs:first"),o(b,a))},x=this._next_type=function(d){if(!d||!d.length)return c(".type-section:first",b);var a=d.closest(".domain-section"),d=d.closest(".type-section"),d=d.length?d.next(".type-section"):a.find(".type-section:first");if(!d||!d.length){var e=t(a);if(e)for(;e.get(0)!==a.get(0);){d=e.find(".type-section:first");if(d.length)break;e=t(e)}}return d},l=this.prev_type=function(){var b=
f(),a=m(b);a&&(a=a.find(".kbs:first"),o(b,a))},m=this._prev_type=function(a){if(!a||!a.length)return c(".type-section:last",b);var e=a.closest(".domain-section"),g=a.closest(".type-section");if(a.closest(".property-section").length)return g;var f;g.length&&(f=g.prev(".type-section"));if(!f||!f.length)if(a=w(e))for(;a.get(0)!==e.get(0);){f=a.find(".type-section:last");if(f.length)break;a=w(a)}return f},u=this.next_prop=function(){var b=f(),a=J(b);a&&(a=a.find(".kbs:first"),o(b,a))},J=this._next_prop=
function(a){if(!a||!a.length)return c(".property-section:first",b);var e=a.closest(".domain-section"),f=a.closest(".type-section"),g=a.closest(".property-section"),e=g.length?g.next(".property-section"):f.length?f.find(".property-section:first"):e.find(".property-section:first");if(!e||!e.length)if(a=x(a))for(;a.get(0)!==f.get(0);){e=a.find(".property-section:first");if(e.length)break;null==f.get(0)&&(f=a);a=x(a)}return e},K=this.prev_prop=function(){var a=f(),b=z(a);b&&(b=b.find(".kbs:first"),o(a,
b))},z=this._prev_prop=function(a){if(!a||!a.length)return c(".property-section:last",b);var e=a.closest(".domain-section"),f=a.closest(".type-section"),g=a.closest(".property-section");if(a.closest(".data-section").length)return g;var h;g.length&&(h=g.prev(".property-section"));if(!h||!h.length)if(l=f.length?m(f):m(e))for(;l.get(0)!==f.get(0);){h=l.find(".property-section:last");if(h.length)break;null==f.get(0)&&(f=l);l=m(l)}return h};this.next=function(){var a=f();if(a&&a.length){var e=this._next(a);
if(e){o(a,e);return}}a=c(".kbs:visible:first",b);o(a,a)};this._next=function(d){if(!d||!d.length)return c(".domain-section:first .kbs:first",b);var f=d.closest(".domain-section"),g=d.closest(".type-section"),h=d.closest(".property-section");if(d.closest(".data-section").length){d=d.next(".kbs");if(d.length)return d;d=h.next(".property-section").find(".kbs:first");if(d.length)return d;d=g.next(".type-section").find(".kbs:first")}else if(h.length){d=h.find(".data-section:first .kbs:first");if(d.length)return d;
d=h.next(".property-section").find(".kbs:first");if(d.length)return d;d=g.next(".type-section").find(".kbs:first")}else if(g.length){d=g.find(".property-section:first .kbs:first");if(d.length)return d;d=g.next(".type-section").find(".kbs:first")}else d=f.find(".type-section:first .kbs:first");return d.length?d:f.get(0)===e.get(0)?a.find(".kbs:first"):f.next(".domain-section").find(".kbs:first")};this.prev=function(){var a=f(),b=this._prev(a);b&&o(a,b)};this._prev=function(d){if(!d||!d.length)return d=
c(".data-section:last .kbs:last",b),d.length||(d=c(".property-section:last .kbs:first",b)),d.length||(d=c(".type-section:last .kbs:first",b)),d.length||(d=c(".domain-section:last .kbs:first",b)),d;var f=d.closest(".domain-section"),g=d.closest(".type-section"),h=d.closest(".property-section");return d.closest(".data-section").length?(d=d.prev(".kbs"),d.length?d:h.find(".kbs:first")):h.length?(d=h.prev(".property-section").find(".kbs:last"),d.length?d:g.find(".kbs:first")):g.length?(d=g.prev(".type-section").find(".kbs:last"),
d.length?d:f.find(".kbs:first")):f.get(0)===a.get(0)?e.find(".kbs:last"):f.prev(".domain-section").find(".kbs:last")};this.edit=function(){this.get_current().trigger("edit")};var j=this;c(document).unbind(".kbs").bind("keydown.kbs",function(a){var b=a.target;if(b==document.body||b==document||b==window||b==c("html")[0])b=a.keyCode,68===b?a.shiftKey?A():v():84===b?a.shiftKey?l():B():80===b?a.shiftKey?K():u():74===b?j.next():75===b?j.prev():69===b&&j.edit()})}})(jQuery);
(function(c,h){var b=window.propbox={init:function(a,e){e=c.extend({lang:"/lang/en"},e);if(!e.base_ajax_url)throw Error("base_ajax_url required in propbox options");if(!e.base_static_url)throw Error("base_static_url required in propbox options");if(!e.id)throw Error("topic id required in propbox options");if(!e.lang)throw Error("lang required in propbox options");b.options=e;b.kbs=new h(a);c(".kbs",a).live("click",function(){var a=b.kbs.get_current();b.kbs.set_next(a,c(this),!0)}).live("edit",function(){var a=
c(this).find(".headmenu:first").data("submenu");a&&c("li:first a:first",a).click()});b.init_menus(a)},init_menus:function(a,e){a=c(a||document);e&&c(".nicemenu",a).nicemenu();var g;g=a&&a.is(".hover-row")?a:c(".hover-row",a);g.hover(b.row_menu_hoverover,b.row_menu_hoverout);g.dblclick(function(){var a=c(".nicemenu .default-action",this);a.length||(a=c(".nicemenu:first .submenu:first a:first",this));var b=a.attr("href");b&&("#"==b||0==b.indexOf("javascript:void(0)"))&&c(a).click()});c(".nicemenu .headmenu",
a).add(c(".nicemenu .default-action",a)).click("click",function(){if(b.kbs){var a=b.kbs.get_current();a&&b.kbs.set_next(a,c(this).parents(".kbs:first"),!0)}return!1})},row_menu_hoverover:function(){c(this).addClass("row-hover")},row_menu_hoverout:function(){c(this).removeClass("row-hover")},get_script:function(a,e){var g=b.get_script.cache;g||(g=b.get_script.cache={});var f=g[a];f?1===f.state?f.callbacks.push(e):4===f.state&&e():(f=g[a]={state:0,callbacks:[e]},c.ajax({url:b.options.base_static_url+
a,dataType:"script",cache:!0,beforeSend:function(){f.state=1},success:function(){f.state=4;c.each(f.callbacks,function(a,b){b()})},error:function(){f.state=-1}}))},prop_edit:function(a,e){var g=c(a).parents(".property-section");g.length||(g=c(a).parents(".submenu").data("headmenu").parents(".property-section"));g=g.find(".data-section .data-row:first:visible .nicemenu:first .headmenu:first a");g.length?g.click():b.prop_add(a,e);return!1},prop_add:function(a,e){var g=c(a).parents(".property-section");
g.length||(g=c(a).parents(".submenu").data("headmenu").parents(".property-section"));b.get_script("/propbox-edit.mf.js",function(){b.edit.prop_add_begin(g,e)});return!1},value_edit:function(a){var e=c(a).parents(".submenu").data("headmenu").parents(".data-row:first"),g=e.parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.value_edit_begin(g,e)});return!1},value_delete:function(a){var e=c(a).parents(".submenu").data("headmenu").parents(".data-row:first"),g=e.parents(".property-section");
b.get_script("/propbox-edit.mf.js",function(){b.edit.value_delete_begin(g,e)});return!1},remove_type:function(a){var a=c(a),e=a.parents(".type-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.remove_type_begin(a,e)});return!1},add_type:function(a,e,g){var a=c(a),f=a.parents(".type-section"),h=b.options.incompatible_types;h?h.search(b.options.id,e,g,{compatible:function(){b.add_type_submit(a,f)},incompatible:h.overlay_incompatible_callback({onConfirm:function(){b.add_type_submit(a,f)}})}):
b.add_type_submit(a,f);return!1},add_type_submit:function(a,c){b.get_script("/propbox-edit.mf.js",function(){b.edit.add_type_submit(a,c)})},add_has_no_value:function(a){var e=c(a).parents(".submenu").data("headmenu").parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.add_has_no_value(e)});return!1},add_has_value:function(a){var e=c(a).parents(".submenu").data("headmenu").parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.add_has_value(e)});
return!1},remove_has_no_value:function(a){var e=c(a).parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.remove_has_no_value(e)});return!1},remove_has_value:function(a){var e=c(a).parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.remove_has_value(e)});return!1},more:function(a,e,g){var f=c(a).parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.more(f,e,g)})}}})(jQuery,window.kbs);
(function(c,h,b){h.schema={init_modal_help:function(a){c(".modal-help-toggle",a).click(function(){var a=c(this),b=a.parents().find(".modal-help"),f=a.parents().find(".modal-content");b.is(":hidden")?(b.height(f.height()-5).slideDown(),a.html("[ - ] Hide Help")):(b.slideUp(),a.html("[ + ] Show Help"))})}};c(function(){b.init_menus()})})(jQuery,window.freebase,window.propbox);
(function(c,h){var b=h.schema.domain={init:function(){b.init_tablesorter();b.init_toggle_help_messages()},init_tablesorter:function(){c(".table-sortable").each(function(){var a=c(this);c("> tbody > tr",a).length&&(c("thead th:nth-child(2)",a)[0].count=1,c("thead th:nth-child(3)",a)[0].count=1,c("thead th:nth-child(4)",a)[0].count=1)})},init_toggle_help_messages:function(){c(".table-empty-trigger").click(function(){var a=c(this).parents(".table-empty-msg"),b=a.find(".table-empty-text");b.is(":hidden")?
(a.addClass("active"),b.slideDown()):(a.removeClass("active"),b.slideUp())})},init_edit:function(){var a=c("table.table");a.first().find(".table-empty-msg").addClass("active").find(".table-empty-text").slideDown();0===a.find("tbody > tr").length?c(".table-title > .help-link").hide():c(".table-empty-msg").hide()},add_type:function(a,e,g){var f=c(this).parents("table:first");h.get_script(h.h.static_url("domain-edit.mf.js"),function(){b.edit.add_type_begin(f,e,g)});return!1},edit_type:function(a,e){var g=
c(this).parents(".submenu").data("headmenu").parents(".data-row:first");h.get_script(h.h.static_url("domain-edit.mf.js"),function(){b.edit.edit_type_begin(g,e)});return!1}};c(b.init)})(jQuery,window.freebase);
