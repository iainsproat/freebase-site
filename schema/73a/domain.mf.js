
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
(function(d){d.extend({tablesorter:new function(){function b(d,b){a(d+","+((new Date).getTime()-b.getTime())+"ms")}function a(d){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(d):alert(d)}function e(b,z){var e="";if(0!=b.tBodies.length){var h=b.tBodies[0].rows;if(h[0])for(var c=[],i=h[0].cells.length,l=0;l<i;l++){var k=!1;d.metadata&&d(z[l]).metadata()&&d(z[l]).metadata().sorter?k=f(d(z[l]).metadata().sorter):b.config.headers[l]&&b.config.headers[l].sorter&&(k=f(b.config.headers[l].sorter));
if(!k)a:{for(var k=b,g=h,t=-1,n=l,v=m.length,o=!1,p=!1,r=!0;""==p&&r;)t++,g[t]?(o=g[t].cells[n],p=d.trim(j(k.config,o)),k.config.debug&&a("Checking if value was empty on row:"+t)):r=!1;for(g=1;g<v;g++)if(m[g].is(p,k,o)){k=m[g];break a}k=m[0]}b.config.debug&&(e+="column:"+l+" parser:"+k.id+"\n");c.push(k)}b.config.debug&&a(e);return c}}function f(d){for(var b=m.length,a=0;a<b;a++)if(m[a].id.toLowerCase()==d.toLowerCase())return m[a];return!1}function g(a){var e;a.config.debug&&(e=new Date);for(var B=
a.tBodies[0]&&a.tBodies[0].rows.length||0,h=a.tBodies[0].rows[0]&&a.tBodies[0].rows[0].cells.length||0,c=a.config.parsers,i={row:[],normalized:[]},l=0;l<B;++l){var k=d(a.tBodies[0].rows[l]),g=[];if(k.hasClass(a.config.cssChildRow))i.row[i.row.length-1]=i.row[i.row.length-1].add(k);else{i.row.push(k);for(var f=0;f<h;++f)g.push(c[f].format(j(a.config,k[0].cells[f]),a,k[0].cells[f]));g.push(i.normalized.length);i.normalized.push(g)}}a.config.debug&&b("Building cache for "+B+" rows:",e);return i}function j(b,
a){var e="";if(!a)return"";b.supportsTextContent||(b.supportsTextContent=a.textContent||!1);return e="simple"==b.textExtraction?b.supportsTextContent?a.textContent:a.childNodes[0]&&a.childNodes[0].hasChildNodes()?a.childNodes[0].innerHTML:a.innerHTML:"function"==typeof b.textExtraction?b.textExtraction(a):d(a).text()}function v(a,e){var f;a.config.debug&&(f=new Date);for(var h=e.row,c=e.normalized,i=c.length,l=c[0].length-1,k=d(a.tBodies[0]),g=[],j=0;j<i;j++){var m=c[j][l];g.push(h[m]);if(!a.config.appender)for(var n=
h[m].length,o=0;o<n;o++)k[0].appendChild(h[m][o])}a.config.appender&&a.config.appender(a,g);g=null;a.config.debug&&b("Rebuilt table:",f);A(a);setTimeout(function(){d(a).trigger("sortEnd")},0)}function r(b,d){return b.config.headers[d]&&b.config.headers[d].lockedOrder?b.config.headers[d].lockedOrder:!1}function A(b){for(var d=b.config.widgets,a=d.length,e=0;e<a;e++)w(d[e]).format(b)}function w(b){for(var d=s.length,a=0;a<d;a++)if(s[a].id.toLowerCase()==b.toLowerCase())return s[a]}function C(b,a,e,
h){a.removeClass(h[0]).removeClass(h[1]);var c=[];a.each(function(){this.sortDisabled||(c[this.column]=d(this))});b=e.length;for(a=0;a<b;a++)c[e[a][0]].addClass(h[e[a][1]])}function x(d,a,e){var h,c;d.config.debug&&(h=new Date);var i="var sortWrapper = function(a,b) {",l=a.length;for(c=0;c<l;c++)var k=a[c][0],f=a[c][1],k="text"==d.config.parsers[k].type?0==f?n("text","asc",k):n("text","desc",k):0==f?n("numeric","asc",k):n("numeric","desc",k),g="e"+c,i=i+("var "+g+" = "+k),i=i+("if("+g+") { return "+
g+"; } "),i=i+"else { ";c=e.normalized[0].length-1;i+="return a["+c+"]-b["+c+"];";for(c=0;c<l;c++)i+="}; ";i+="return 0; }; ";d.config.debug&&b("Evaling expression:"+i,new Date);eval(i);e.normalized.sort(sortWrapper);d.config.debug&&b("Sorting on "+a.toString()+" and dir "+f+" time:",h);return e}function n(b,d,a){var e="a["+a+"]",a="b["+a+"]";if("text"==b&&"asc"==d)return"("+e+" == "+a+" ? 0 : ("+e+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+a+") ? -1 : 1 )));";
if("text"==b&&"desc"==d)return"("+e+" == "+a+" ? 0 : ("+e+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+e+") ? -1 : 1 )));";if("numeric"==b&&"asc"==d)return"("+e+" === null && "+a+" === null) ? 0 :("+e+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+a+"));";if("numeric"==b&&"desc"==d)return"("+e+" === null && "+a+" === null) ? 0 :("+e+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : "+
a+" - "+e+"));"}var m=[],s=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=b;this.construct=
function(f){return this.each(function(){if(this.tHead&&this.tBodies){var m,n,h;this.config={};h=d.extend(this.config,d.tablesorter.defaults,f);m=d(this);d.data(this,"tablesorter",h);var c=this,i;c.config.debug&&(i=new Date);for(var l=[],k={},H=c.getElementsByTagName("THEAD")[0].getElementsByTagName("TR"),t=0;t<H.length;t++)for(var s=H[t].cells,E=0;E<s.length;E++){var o=s[E],p=o.parentNode.rowIndex,F=p+"-"+o.cellIndex,L=o.rowSpan||1,o=o.colSpan||1,D;"undefined"==typeof l[p]&&(l[p]=[]);var q;for(q=
0;q<l[p].length+1;q++)if("undefined"==typeof l[p][q]){D=q;break}k[F]=D;for(q=p;q<p+L;q++){"undefined"==typeof l[q]&&(l[q]=[]);for(var F=l[q],G=D;G<D+o;G++)F[G]="x"}}var y=d(c.config.selectorHeaders,c).each(function(b){this.column=k[this.parentNode.rowIndex+"-"+this.cellIndex];this.count=this.order="Number"!=typeof c.config.sortInitialOrder?"desc"==c.config.sortInitialOrder.toLowerCase()?1:0:1==c.config.sortInitialOrder?1:0;if(d.metadata&&!1===d(this).metadata().sorter||c.config.headers[b]&&!1===c.config.headers[b].sorter)this.sortDisabled=
!0;r(c,b)&&(this.order=this.lockedOrder=r(c,b));if(!this.sortDisabled){var a=d(this).addClass(c.config.cssHeader);c.config.onRenderHeader&&c.config.onRenderHeader.apply(a)}c.config.headerList[b]=this});c.config.debug&&(b("Built headers:",i),a(y));this.config.parsers=e(this,y);n=g(this);var I=[h.cssDesc,h.cssAsc];if(this.config.widthFixed){var J=d("<colgroup>");d("tr:first td",this.tBodies[0]).each(function(){J.append(d("<col>").css("width",d(this).width()))});d(this).prepend(J)}y.click(function(c){var b=
m[0].tBodies[0]&&m[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&b>0){m.trigger("sortStart");d(this);b=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(c[h.sortMultiSortKey]){a:{for(var c=h.sortList,a=c.length,i=0;i<a;i++)if(c[i][0]==b){c=true;break a}c=false}if(c)for(c=0;c<h.sortList.length;c++){a=h.sortList[c];i=h.headerList[a[0]];if(a[0]==b){i.count=a[1];i.count++;a[1]=i.count%2}}else h.sortList.push([b,this.order])}else{h.sortList=[];if(h.sortForce!=
null){a=h.sortForce;for(c=0;c<a.length;c++)a[c][0]!=b&&h.sortList.push(a[c])}h.sortList.push([b,this.order])}setTimeout(function(){C(m[0],y,h.sortList,I);v(m[0],x(m[0],h.sortList,n))},1);return false}}).mousedown(function(){if(h.cancelSelection){this.onselectstart=function(){return false};return false}});m.bind("update",function(){var c=this;setTimeout(function(){c.config.parsers=e(c,y);n=g(c)},1)}).bind("updateCell",function(c,b){var a=this.config,d=[b.parentNode.rowIndex-1,b.cellIndex];n.normalized[d[0]][d[1]]=
a.parsers[d[1]].format(j(a,b),b)}).bind("sorton",function(c,b){d(this).trigger("sortStart");h.sortList=b;for(var a=h.sortList,i=this.config,e=a.length,l=0;l<e;l++){var f=a[l],k=i.headerList[f[0]];k.count=f[1];k.count++}C(this,y,a,I);v(this,x(this,a,n))}).bind("appendCache",function(){v(this,n)}).bind("applyWidgetId",function(c,b){w(b).format(this)}).bind("applyWidgets",function(){A(this)});d.metadata&&(d(this).metadata()&&d(this).metadata().sortlist)&&(h.sortList=d(this).metadata().sortlist);0<h.sortList.length&&
m.trigger("sorton",[h.sortList]);A(this)}})};this.addParser=function(b){for(var a=m.length,d=!0,e=0;e<a;e++)m[e].id.toLowerCase()==b.id.toLowerCase()&&(d=!1);d&&m.push(b)};this.addWidget=function(b){s.push(b)};this.formatFloat=function(b){b=parseFloat(b);return isNaN(b)?0:b};this.formatInt=function(b){b=parseInt(b);return isNaN(b)?0:b};this.isDigit=function(b){return/^[-+]?\d*$/.test(d.trim(b.replace(/[,.']/g,"")))};this.clearTableBody=function(b){d.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(b.tBodies[0]):
b.tBodies[0].innerHTML=""}}});d.fn.extend({tablesorter:d.tablesorter.construct});var j=d.tablesorter;j.addParser({id:"text",is:function(){return!0},format:function(b){return d.trim(b.toLocaleLowerCase())},type:"text"});j.addParser({id:"digit",is:function(b,a){return d.tablesorter.isDigit(b,a.config)},format:function(b){return d.tablesorter.formatFloat(b)},type:"numeric"});j.addParser({id:"currency",is:function(b){return/^[\u00a3$\u20ac?.]/.test(b)},format:function(b){return d.tablesorter.formatFloat(b.replace(RegExp(/[\u00a3$\u20ac]/g),
""))},type:"numeric"});j.addParser({id:"ipAddress",is:function(b){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(b)},format:function(b){for(var b=b.split("."),a="",e=b.length,f=0;f<e;f++)var g=b[f],a=2==g.length?a+("0"+g):a+g;return d.tablesorter.formatFloat(a)},type:"numeric"});j.addParser({id:"url",is:function(b){return/^(https?|ftp|file):\/\/$/.test(b)},format:function(b){return jQuery.trim(b.replace(RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});j.addParser({id:"isoDate",is:function(b){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(b)},
format:function(b){return d.tablesorter.formatFloat(""!=b?(new Date(b.replace(RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});j.addParser({id:"percent",is:function(b){return/\%$/.test(d.trim(b))},format:function(b){return d.tablesorter.formatFloat(b.replace(RegExp(/%/g),""))},type:"numeric"});j.addParser({id:"usLongDate",is:function(b){return b.match(RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(b){return d.tablesorter.formatFloat((new Date(b)).getTime())},
type:"numeric"});j.addParser({id:"shortDate",is:function(b){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(b)},format:function(b,a){var e=a.config,b=b.replace(/\-/g,"/");if("us"==e.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if("uk"==e.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if("dd/mm/yy"==e.dateFormat||"dd-mm-yy"==e.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return d.tablesorter.formatFloat((new Date(b)).getTime())},
type:"numeric"});j.addParser({id:"time",is:function(b){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(b)},format:function(b){return d.tablesorter.formatFloat((new Date("2000/01/01 "+b)).getTime())},type:"numeric"});j.addParser({id:"metadata",is:function(){return!1},format:function(b,a,e){b=a.config;b=!b.parserMetadataName?"sortValue":b.parserMetadataName;return d(e).metadata()[b]},type:"numeric"});j.addWidget({id:"zebra",format:function(b){var a;b.config.debug&&(a=new Date);
var e,f=-1,g;d("tr:visible",b.tBodies[0]).each(function(){e=d(this);e.hasClass(b.config.cssChildRow)||f++;g=0==f%2;e.removeClass(b.config.widgetZebra.css[g?0:1]).addClass(b.config.widgetZebra.css[g?1:0])});b.config.debug&&d.tablesorter.benchmark("Applying Zebra widget",a)}})})(jQuery);
(function(d){d(function(){d.tablesorter&&(d("<div>"),d.tablesorter.defaults.cssAsc="column-header-asc",d.tablesorter.defaults.cssDesc="column-header-desc",d.tablesorter.defaults.cssHeader="column-header",d.tablesorter.addParser({id:"datetime",is:function(){return!1},format:function(j,b,a){return d("[datetime]:first",a).attr("datetime")},type:"text"}),d.tablesorter.addParser({id:"ignoreCase",is:function(){return!1},format:function(d){return d.toLowerCase()},type:"text"}),d.tablesorter.addParser({id:"string",
is:function(){return!1},format:function(d){return d},type:"text"}),d.tablesorter.addParser({id:"number",is:function(){return!1},format:function(j,b,a){j=d(".number:first",a).attr("data-value");null==j&&(j=Number.MIN_VALUE);return j},type:"numeric"}),d(".table-sortable").each(function(){d(this).tablesorter()}))})})(jQuery);
(function(d){var j="undefined"!=typeof window.innerWidth?function(){return{w:window.innerWidth,h:window.innerHeight}}:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}:function(){return{w:document.getElementsByTagName("body")[0].clientWidth,h:document.getElementsByTagName("body")[0].clientHeight}};window.kbs=
function(b){d(".kbs.current",b).removeClass("current");var a=d(".domain-section:first",b),e=d(".domain-section:last",b),f=this.scroll_to=function(c){var b=d(document).scrollTop();d(document).height();var a=j().h,a=b+a,e=c.offset().top,c=e+c.height();e<b?d(document).scrollTop(e):c>a&&d(document).scrollTop(b+(c-a))},g=this.get_current=function(){return d(".kbs.current:first",b)},u=this.set_next=function(c,b,a){c=c||g();b.length&&(c.removeClass("current"),b.addClass("current"),a||f(b))},v=this.next_domain=
function(c){var b=g(),a=r(b);a&&(a=a.find(".kbs:first"),u(b,a,c))},r=this._next_domain=function(c){if(!c||!c.length)return d(".domain-section:first",b);c=c.closest(".domain-section");return!c.length||c[0]===e[0]?a:c.next(".domain-section")},A=this.prev_domain=function(){var c=g(),b=w(c);b&&(b=b.find(".kbs:first"),u(c,b))},w=this._prev_domain=function(c){if(!c||!c.length)return d(".domain-section:last",b);var i=c.closest(".domain-section");return c.closest(".property-section").length||c.closest(".type-section").length?
i:!i.length||i[0]===a[0]?e:i.prev(".domain-section")},C=this.next_type=function(){var b=g(),a=x(b);a&&(a=a.find(".kbs:first"),u(b,a))},x=this._next_type=function(c){if(!c||!c.length)return d(".type-section:first",b);var a=c.closest(".domain-section"),c=c.closest(".type-section"),c=c.length?c.next(".type-section"):a.find(".type-section:first");if(!c||!c.length){var e=r(a);if(e)for(;e.get(0)!==a.get(0);){c=e.find(".type-section:first");if(c.length)break;e=r(e)}}return c},n=this.prev_type=function(){var b=
g(),a=m(b);a&&(a=a.find(".kbs:first"),u(b,a))},m=this._prev_type=function(c){if(!c||!c.length)return d(".type-section:last",b);var a=c.closest(".domain-section"),e=c.closest(".type-section");if(c.closest(".property-section").length)return e;var f;e.length&&(f=e.prev(".type-section"));if(!f||!f.length)if(c=w(a))for(;c.get(0)!==a.get(0);){f=c.find(".type-section:last");if(f.length)break;c=w(c)}return f},s=this.next_prop=function(){var b=g(),a=K(b);a&&(a=a.find(".kbs:first"),u(b,a))},K=this._next_prop=
function(c){if(!c||!c.length)return d(".property-section:first",b);var a=c.closest(".domain-section"),e=c.closest(".type-section"),f=c.closest(".property-section"),a=f.length?f.next(".property-section"):e.length?e.find(".property-section:first"):a.find(".property-section:first");if(!a||!a.length)if(c=x(c))for(;c.get(0)!==e.get(0);){a=c.find(".property-section:first");if(a.length)break;null==e.get(0)&&(e=c);c=x(c)}return a},z=this.prev_prop=function(){var b=g(),a=B(b);a&&(a=a.find(".kbs:first"),u(b,
a))},B=this._prev_prop=function(a){if(!a||!a.length)return d(".property-section:last",b);var e=a.closest(".domain-section"),f=a.closest(".type-section"),g=a.closest(".property-section");if(a.closest(".data-section").length)return g;var h;g.length&&(h=g.prev(".property-section"));if(!h||!h.length)if(n=f.length?m(f):m(e))for(;n.get(0)!==f.get(0);){h=n.find(".property-section:last");if(h.length)break;null==f.get(0)&&(f=n);n=m(n)}return h};this.next=function(){var b=g(),a=this._next(b);a&&u(b,a)};this._next=
function(c){if(!c||!c.length)return d(".domain-section:first .kbs:first",b);var f=c.closest(".domain-section"),g=c.closest(".type-section"),h=c.closest(".property-section");if(c.closest(".data-section").length){c=c.next(".kbs");if(c.length)return c;c=h.next(".property-section").find(".kbs:first");if(c.length)return c;c=g.next(".type-section").find(".kbs:first")}else if(h.length){c=h.find(".data-section:first .kbs:first");if(c.length)return c;c=h.next(".property-section").find(".kbs:first");if(c.length)return c;
c=g.next(".type-section").find(".kbs:first")}else if(g.length){c=g.find(".property-section:first .kbs:first");if(c.length)return c;c=g.next(".type-section").find(".kbs:first")}else c=f.find(".type-section:first .kbs:first");return c.length?c:f.get(0)===e.get(0)?a.find(".kbs:first"):f.next(".domain-section").find(".kbs:first")};this.prev=function(){var b=g(),a=this._prev(b);a&&u(b,a)};this._prev=function(c){if(!c||!c.length)return c=d(".data-section:last .kbs:last",b),c.length||(c=d(".property-section:last .kbs:first",
b)),c.length||(c=d(".type-section:last .kbs:first",b)),c.length||(c=d(".domain-section:last .kbs:first",b)),c;var f=c.closest(".domain-section"),g=c.closest(".type-section"),h=c.closest(".property-section");return c.closest(".data-section").length?(c=c.prev(".kbs"),c.length?c:h.find(".kbs:first")):h.length?(c=h.prev(".property-section").find(".kbs:last"),c.length?c:g.find(".kbs:first")):g.length?(c=g.prev(".type-section").find(".kbs:last"),c.length?c:f.find(".kbs:first")):f.get(0)===a.get(0)?e.find(".kbs:last"):
f.prev(".domain-section").find(".kbs:last")};this.edit=function(){this.get_current().trigger("edit")};var h=this;d(document).unbind(".kbs").bind("keydown.kbs",function(b){var a=b.target;if(a==document.body||a==document||a==window||a==d("html")[0])a=b.keyCode,68===a?b.shiftKey?A():v():84===a?b.shiftKey?n():C():80===a?b.shiftKey?z():s():74===a?h.next():75===a?h.prev():69===a&&h.edit()})}})(jQuery);
(function(d,j){var b=window.propbox={init:function(a,e){e=d.extend({lang:"/lang/en"},e);if(!e.base_ajax_url)throw Error("base_ajax_url required in propbox options");if(!e.base_static_url)throw Error("base_static_url required in propbox options");if(!e.id)throw Error("topic id required in propbox options");if(!e.lang)throw Error("lang required in propbox options");b.options=e;b.kbs=new j(a);b.kbs.set_next(b.kbs.get_current(),d(".kbs:visible:first",a,!0));d(".kbs",a).live("click",function(){var a=b.kbs.get_current();
b.kbs.set_next(a,d(this),!0)}).live("edit",function(){var a=d(this).find(".headmenu:first").data("submenu");a&&d("li:first a:first",a).click()});b.init_menus(a)},init_menus:function(a,e){a=d(a||document);e&&d(".nicemenu",a).nicemenu();(a&&a.is(".data-row")?a:d(".data-row",a)).hover(b.row_menu_hoverover,b.row_menu_hoverout);d(".nicemenu .headmenu",a).add(d(".nicemenu .default-action",a)).click("click",function(){if(b.kbs){var a=b.kbs.get_current();a&&b.kbs.set_next(a,d(this).parents(".kbs:first"),
!0)}return!1})},row_menu_hoverover:function(){var a=d(this);b.row_menu_hoverover.timeout=setTimeout(function(){a.addClass("row-hover")},300)},row_menu_hoverout:function(){clearTimeout(b.row_menu_hoverover.timeout);d(this).removeClass("row-hover")},get_script:function(a,e){var f=b.get_script.cache;f||(f=b.get_script.cache={});var g=f[a];g?1===g.state?g.callbacks.push(e):4===g.state&&e():(g=f[a]={state:0,callbacks:[e]},d.ajax({url:b.options.base_static_url+a,dataType:"script",beforeSend:function(){g.state=
1},success:function(){g.state=4;d.each(g.callbacks,function(a,b){b()})},error:function(){g.state=-1}}))},prop_edit:function(a,e){var f=d(a).parents(".submenu").data("headmenu").parents(".property-section").find(".data-section .data-row:first:visible .nicemenu:first .headmenu:first a");f.length?f.click():b.prop_add(a,e);return!1},prop_add:function(a,e){var f=d(a).parents(".submenu").data("headmenu").parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.prop_add_begin(f,
e)});return!1},value_edit:function(a){var e=d(a).parents(".submenu").data("headmenu").parents(".data-row:first"),f=e.parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.value_edit_begin(f,e)});return!1},value_delete:function(a){var e=d(a).parents(".submenu").data("headmenu").parents(".data-row:first"),f=e.parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.value_delete_begin(f,e)});return!1},assert_type:function(){alert("Not yet implemented");
return!1},flags_edit:function(){alert("Not yet implemented");return!1},more:function(a,e,f){var g=d(a).parents(".property-section");b.get_script("/propbox-edit.mf.js",function(){b.edit.more(g,e,f)})}}})(jQuery,window.kbs);
(function(d,j,b){j.schema={init_modal_help:function(a){d(".modal-help-toggle",a).click(function(){var a=d(this),b=a.parents().find(".modal-help"),g=a.parents().find(".modal-content");b.is(":hidden")?(b.height(g.height()-5).slideDown(),a.html("[ - ] Hide Help")):(b.slideUp(),a.html("[ + ] Show Help"))})}};d(function(){b.init_menus()})})(jQuery,window.freebase,window.propbox);
(function(d,j){var b=j.schema.domain={init:function(){b.init_tablesorter();b.init_toggle_help_messages()},init_tablesorter:function(){d(".table-sortable").each(function(){var a=d(this);d("> tbody > tr",a).length&&(d("thead th:nth-child(2)",a)[0].count=1,d("thead th:nth-child(3)",a)[0].count=1,d("thead th:nth-child(4)",a)[0].count=1)})},init_toggle_help_messages:function(){d(".table-empty-trigger").click(function(){var a=d(this).parents(".table-empty-msg"),b=a.find(".table-empty-text");b.is(":hidden")?
(a.addClass("active"),b.slideDown()):(a.removeClass("active"),b.slideUp())})},init_edit:function(){var a=d("table.table");a.first().find(".table-empty-msg").addClass("active").find(".table-empty-text").slideDown();0===a.find("tbody > tr").length?d(".table-title > .help-link").hide():d(".table-empty-msg").hide()},add_type:function(a,e,f){var g=d(this).parents("table:first");j.get_script(j.h.static_url("domain-edit.mf.js"),function(){b.edit.add_type_begin(g,e,f)});return!1},edit_type:function(a,e){var f=
d(this).parents(".submenu").data("headmenu").parents(".data-row:first");j.get_script(j.h.static_url("domain-edit.mf.js"),function(){b.edit.edit_type_begin(f,e)});return!1}};d(b.init)})(jQuery,window.freebase);
