
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*
 
 jQuery Tools @VERSION / Expose - Dim the lights

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/toolbox/expose.html

 Since: Mar 2010
 Date: @DATE 
 
 jQuery Tools @VERSION Overlay - Overlay base. Extend it.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/overlay/

 Since: March 2008
 Date: @DATE 
 
 jQuery Tools @VERSION Tooltip - UI essentials

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tooltip/

 Since: November 2008
 Date: @DATE 
*/
(function(a){function m(){if(a.browser.msie){var h=a(document).height(),n=a(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h-n<20?n:h]}return[a(document).width(),a(document).height()]}function g(h){if(h)return h.call(a.mask)}a.tools=a.tools||{version:"@VERSION"};var i;i=a.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:true,closeOnEsc:true,zIndex:9998,opacity:0.8,startOpacity:0,color:"#fff",onLoad:null,
onClose:null}};var c,d,e,k,l;a.mask={load:function(h,n){if(e)return this;if(typeof h=="string")h={color:h};h=h||k;k=h=a.extend(a.extend({},i.conf),h);c=a("#"+h.maskId);if(!c.length){c=a("<div/>").attr("id",h.maskId);a("body").append(c)}var t=m();c.css({position:"absolute",top:0,left:0,width:t[0],height:t[1],display:"none",opacity:h.startOpacity,zIndex:h.zIndex});h.color&&c.css("backgroundColor",h.color);if(g(h.onBeforeLoad)===false)return this;h.closeOnEsc&&a(document).bind("keydown.mask",function(r){r.keyCode==
27&&a.mask.close(r)});h.closeOnClick&&c.bind("click.mask",function(r){a.mask.close(r)});a(window).bind("resize.mask",function(){a.mask.fit()});if(n&&n.length){l=n.eq(0).css("zIndex");a.each(n,function(){var r=a(this);/relative|absolute|fixed/i.test(r.css("position"))||r.css("position","relative")});d=n.css({zIndex:Math.max(h.zIndex+1,l=="auto"?0:l)})}c.css({display:"block"}).fadeTo(h.loadSpeed,h.opacity,function(){a.mask.fit();g(h.onLoad)});e=true;return this},close:function(){if(e){if(g(k.onBeforeClose)===
false)return this;c.fadeOut(k.closeSpeed,function(){g(k.onClose);d&&d.css({zIndex:l})});a(document).unbind("keydown.mask");c.unbind("click.mask");a(window).unbind("resize.mask");e=false}return this},fit:function(){if(e){var h=m();c.css({width:h[0],height:h[1]})}},getMask:function(){return c},isLoaded:function(){return e},getConf:function(){return k},getExposed:function(){return d}};a.fn.mask=function(h){a.mask.load(h);return this};a.fn.expose=function(h){a.mask.load(h,this);return this}})(jQuery);
(function(a){function m(c,d){var e=this,k=c.add(e),l=a(window),h,n,t,r=a.tools.expose&&(d.mask||d.expose),v=Math.random().toString().slice(10);if(r){if(typeof r=="string")r={color:r};r.closeOnClick=r.closeOnEsc=false}var w=d.target||c.attr("rel");n=w?a(w):c;if(!n.length)throw"Could not find Overlay: "+w;c&&c.index(n)==-1&&c.click(function(p){e.load(p);return p.preventDefault()});a.extend(e,{load:function(p){if(e.isOpened())return e;var x=i[d.effect];if(!x)throw'Overlay: cannot find effect : "'+d.effect+
'"';d.oneInstance&&a.each(g,function(){this.close(p)});p=p||a.Event();p.type="onBeforeLoad";k.trigger(p);if(p.isDefaultPrevented())return e;t=true;r&&a(n).expose(r);var u=d.top,o=d.left,s=n.outerWidth({margin:true}),y=n.outerHeight({margin:true});if(typeof u=="string")u=u=="center"?Math.max((l.height()-y)/2,0):parseInt(u,10)/100*l.height();if(o=="center")o=Math.max((l.width()-s)/2,0);x[0].call(e,{top:u,left:o},function(){if(t){p.type="onLoad";k.trigger(p)}});r&&d.closeOnClick&&a.mask.getMask().one("click",
e.close);d.closeOnClick&&a(document).bind("click."+v,function(b){a(b.target).parents(n).length||e.close(b)});d.closeOnEsc&&a(document).bind("keydown."+v,function(b){b.keyCode==27&&e.close(b)});return e},close:function(p){if(!e.isOpened())return e;p=p||a.Event();p.type="onBeforeClose";k.trigger(p);if(!p.isDefaultPrevented()){t=false;i[d.effect][1].call(e,function(){p.type="onClose";k.trigger(p)});a(document).unbind("click."+v).unbind("keydown."+v);r&&a.mask.close();return e}},getOverlay:function(){return n},
getTrigger:function(){return c},getClosers:function(){return h},isOpened:function(){return t},getConf:function(){return d}});a.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(p,x){a.isFunction(d[x])&&a(e).bind(x,d[x]);e[x]=function(u){a(e).bind(x,u);return e}});h=n.find(d.close||".close");if(!h.length&&!d.close){h=a('<a class="close"></a>');n.prepend(h)}h.click(function(p){e.close(p)});d.load&&e.load()}a.tools=a.tools||{version:"@VERSION"};a.tools.overlay={addEffect:function(c,
d,e){i[c]=[d,e]},conf:{close:null,closeOnClick:true,closeOnEsc:true,closeSpeed:"fast",effect:"default",fixed:!a.browser.msie||a.browser.version>6,left:"center",load:false,mask:null,oneInstance:true,speed:"normal",target:null,top:"10%"}};var g=[],i={};a.tools.overlay.addEffect("default",function(c,d){var e=this.getConf(),k=a(window);if(!e.fixed){c.top+=k.scrollTop();c.left+=k.scrollLeft()}c.position=e.fixed?"fixed":"absolute";this.getOverlay().css(c).fadeIn(e.speed,d)},function(c){this.getOverlay().fadeOut(this.getConf().closeSpeed,
c)});a.fn.overlay=function(c){var d=this.data("overlay");if(d)return d;if(a.isFunction(c))c={onBeforeLoad:c};c=a.extend(true,{},a.tools.overlay.conf,c);this.each(function(){d=new m(a(this),c);g.push(d);a(this).data("overlay",d)});return c.api?d:this}})(jQuery);
(function(a){a.factory("collapse_module",{init:function(){var g=this;this.$column=a(this.options.column);this.modules=a(this.options.modules,this.element);this.first_module=this.modules.get(0);this.trigger=a(".trigger:first",this.first_module);this.first_section=a(".module-section",this.first_module);this.other_modules=this.modules.slice(1);this.column_offset=this.$column.css("margin-left");this.set_collapsed(this.options.collapsed);this.trigger.click(function(i){return g.toggle(i)})},set_collapsed:function(g){if(this.toggle_state=
g){this.trigger.addClass("collapsed");this.$column.css("margin-left",0);this.first_section.hide();this.other_modules.hide()}else{this.trigger.removeClass("collapsed");this.$column.css("margin-left",this.column_offset);this.first_section.show();this.other_modules.show()}},toggle:function(){var g=this;if(this.toggle_state){a.localstore("filters_collapsed",0,false);this.trigger.removeClass("collapsed");this.$column.animate({marginLeft:this.column_offset},function(){g.first_section.slideDown(function(){g.modules.removeClass("collapsed")});
g.other_modules.fadeIn()})}else{a.localstore("filters_collapsed",1,false);this.trigger.addClass("collapsed");this.other_modules.fadeOut();this.first_section.slideUp(function(){g.$column.animate({marginLeft:0});g.modules.addClass("collapsed")})}this.toggle_state=!this.toggle_state;this.options.toggle_callback&&this.options.toggle_callback.call(this.trigger,this.toggle_state);return false}});var m=a("body").is(".embed")||a.localstore("filters_collapsed");a.extend(true,a.collapse_module,{defaults:{collapsed:m===
null?false:!!m,modules:".module",column:"#main-column"}})})(jQuery);
(function(a){function m(c,d,e){var k=e.relative?c.position().top:c.offset().top,l=e.relative?c.position().left:c.offset().left,h=e.position[0];k-=d.outerHeight()-e.offset[0];l+=c.outerWidth()+e.offset[1];var n=d.outerHeight()+c.outerHeight();if(h=="center")k+=n/2;if(h=="bottom")k+=n;h=e.position[1];c=d.outerWidth()+c.outerWidth();if(h=="center")l-=c/2;if(h=="left")l-=c;return{top:k,left:l}}function g(c,d){var e=this,k=c.add(e),l,h=0,n=0,t=c.attr("title"),r=i[d.effect],v,w=c.is(":input"),p=w&&c.is(":checkbox, :radio, select, :button, :submit"),
x=c.attr("type"),u=d.events[x]||d.events[w?p?"widget":"input":"def"];if(!r)throw'Nonexistent effect "'+d.effect+'"';u=u.split(/,\s*/);if(u.length!=2)throw"Tooltip: bad events configuration for "+x;c.bind(u[0],function(o){clearTimeout(h);if(d.predelay)n=setTimeout(function(){e.show(o)},d.predelay);else e.show(o)}).bind(u[1],function(o){clearTimeout(n);if(d.delay)h=setTimeout(function(){e.hide(o)},d.delay);else e.hide(o)});if(t&&d.cancelDefault){c.removeAttr("title");c.data("title",t)}a.extend(e,{show:function(o){if(!l){if(t)l=
a(d.layout).addClass(d.tipClass).appendTo(document.body).hide().append(t);else if(d.tip)l=a(d.tip).eq(0);else{l=c.next();l.length||(l=c.parent().next())}if(!l.length)throw"Cannot find tooltip for "+c;}if(e.isShown())return e;l.stop(true,true);var s=m(c,l,d);o=o||a.Event();o.type="onBeforeShow";k.trigger(o,[s]);if(o.isDefaultPrevented())return e;s=m(c,l,d);l.css({position:"absolute",top:s.top,left:s.left});v=true;r[0].call(e,function(){o.type="onShow";v="full";k.trigger(o)});s=d.events.tooltip.split(/,\s*/);
l.bind(s[0],function(){clearTimeout(h);clearTimeout(n)});s[1]&&!c.is("input:not(:checkbox, :radio), textarea")&&l.bind(s[1],function(y){y.relatedTarget!=c[0]&&c.trigger(u[1].split(" ")[0])});return e},hide:function(o){if(!l||!e.isShown())return e;o=o||a.Event();o.type="onBeforeHide";k.trigger(o);if(!o.isDefaultPrevented()){v=false;i[d.effect][1].call(e,function(){o.type="onHide";v=false;k.trigger(o)});return e}},isShown:function(o){return o?v=="full":v},getConf:function(){return d},getTip:function(){return l},
getTrigger:function(){return c}});a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(o,s){a.isFunction(d[s])&&a(e).bind(s,d[s]);e[s]=function(y){a(e).bind(s,y);return e}})}a.tools=a.tools||{version:"@VERSION"};a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:false,cancelDefault:true,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},
layout:"<div/>",tipClass:"tooltip"},addEffect:function(c,d,e){i[c]=[d,e]}};var i={toggle:[function(c){var d=this.getConf(),e=this.getTip();d=d.opacity;d<1&&e.css({opacity:d});e.show();c.call()},function(c){this.getTip().hide();c.call()}],fade:[function(c){var d=this.getConf();this.getTip().fadeTo(d.fadeInSpeed,d.opacity,c)},function(c){this.getTip().fadeOut(this.getConf().fadeOutSpeed,c)}]};a.fn.tooltip=function(c){var d=this.data("tooltip");if(d)return d;c=a.extend(true,{},a.tools.tooltip.conf,c);
if(typeof c.position=="string")c.position=c.position.split(/,?\s/);this.each(function(){d=new g(a(this),c);a(this).data("tooltip",d)});return c.api?d:this}})(jQuery);
(function(a,m){m.filters={init_domain_type_property_filter:function(g){a(":text[name=domain], :text[name=type], :text[name=property]",g).suggest(a.extend({scoring:"schema",format:null,mql_output:JSON.stringify([{id:null,name:null,type:{id:null,"id|=":["/type/domain","/type/type","/type/property"],limit:1}}])},m.suggest_options.any("type:/type/domain","type:/type/type","type:/type/property"))).bind("fb-select",function(i,c){var d=a(this);d.val(c.id);var e=c.type.id;if(e==="/type/domain")d.attr("name",
"domain");else if(e==="/type/type")d.attr("name","type");else e==="/type/property"&&d.attr("name","property");this.form.submit()}).parents(".filter-form").submit(function(){return false})}};a(function(){a(".filter-form :input").keypress(function(g){g.keyCode===13&&this.form.submit();return true});a(".filter-help-trigger").tooltip({events:{def:"click,mouseout"},position:"top center",effect:"fade",delay:300,offset:[-8,0]});a(".filter-form-trigger").click(function(){var g=a(this).siblings(".filter-form");
g.is(":hidden")?g.slideDown(function(){a(":text:first",g).focus()}):g.slideUp()})})})(jQuery,window.freebase);
(function(a){var m=function(){return typeof window.innerWidth!="undefined"?function(){return{w:window.innerWidth,h:window.innerHeight}}:typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0?function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}:function(){return{w:document.getElementsByTagName("body")[0].clientWidth,h:document.getElementsByTagName("body")[0].clientHeight}}}();
window.kbs=function(g){a(".kbs.current",g).removeClass("current");var i=a(".domain-section:first",g),c=a(".domain-section:last",g),d=this.scroll_to=function(b){var f=a(document).scrollTop();a(document).height();var j=m().h;j=f+j;var q=b.offset().top;b=q+b.height();if(q<f)a(document).scrollTop(q);else b>j&&a(document).scrollTop(f+(b-j))},e=this.get_current=function(){return a(".kbs.current:first",g)},k=this.set_next=function(b,f,j){b=b||e();if(f.length){b.removeClass("current");f.addClass("current");
j||d(f)}},l=this.next_domain=function(b){var f=e(),j=h(f);if(j){j=j.find(".kbs:first");k(f,j,b)}},h=this._next_domain=function(b){if(!(b&&b.length))return a(".domain-section:first",g);b=b.closest(".domain-section");return!b.length||b[0]===c[0]?i:b.next(".domain-section")},n=this.prev_domain=function(){var b=e(),f=t(b);if(f){f=f.find(".kbs:first");k(b,f)}},t=this._prev_domain=function(b){if(!(b&&b.length))return a(".domain-section:last",g);var f=b.closest(".domain-section");if(b.closest(".property-section").length||
b.closest(".type-section").length)return f;return!f.length||f[0]===i[0]?c:f.prev(".domain-section")},r=this.next_type=function(){var b=e(),f=v(b);if(f){f=f.find(".kbs:first");k(b,f)}},v=this._next_type=function(b){if(!(b&&b.length))return a(".type-section:first",g);var f=b.closest(".domain-section");b=b.closest(".type-section");b=b.length?b.next(".type-section"):f.find(".type-section:first");if(!(b&&b.length)){var j=h(f);if(j)for(;j.get(0)!==f.get(0);){b=j.find(".type-section:first");if(b.length)break;
j=h(j)}}return b},w=this.prev_type=function(){var b=e(),f=p(b);if(f){f=f.find(".kbs:first");k(b,f)}},p=this._prev_type=function(b){if(!(b&&b.length))return a(".type-section:last",g);var f=b.closest(".domain-section"),j=b.closest(".type-section");if(b.closest(".property-section").length)return j;var q;if(j.length)q=j.prev(".type-section");if(!(q&&q.length))if(b=t(f))for(;b.get(0)!==f.get(0);){q=b.find(".type-section:last");if(q.length)break;b=t(b)}return q},x=this.next_prop=function(){var b=e(),f=
u(b);if(f){f=f.find(".kbs:first");k(b,f)}},u=this._next_prop=function(b){if(!(b&&b.length))return a(".property-section:first",g);var f=b.closest(".domain-section"),j=b.closest(".type-section"),q=b.closest(".property-section");f=q.length?q.next(".property-section"):j.length?j.find(".property-section:first"):f.find(".property-section:first");if(!(f&&f.length))if(b=v(b))for(;b.get(0)!==j.get(0);){f=b.find(".property-section:first");if(f.length)break;if(j.get(0)==null)j=b;b=v(b)}return f},o=this.prev_prop=
function(){var b=e(),f=s(b);if(f){f=f.find(".kbs:first");k(b,f)}},s=this._prev_prop=function(b){if(!(b&&b.length))return a(".property-section:last",g);var f=b.closest(".domain-section"),j=b.closest(".type-section"),q=b.closest(".property-section");if(b.closest(".data-section").length)return q;var z;if(q.length)z=q.prev(".property-section");if(!(z&&z.length))if(w=j.length?p(j):p(f))for(;w.get(0)!==j.get(0);){z=w.find(".property-section:last");if(z.length)break;if(j.get(0)==null)j=w;w=p(w)}return z};
this.next=function(){var b=e(),f=this._next(b);f&&k(b,f)};this._next=function(b){if(!(b&&b.length))return a(".domain-section:first .kbs:first",g);var f=b.closest(".domain-section"),j=b.closest(".type-section"),q=b.closest(".property-section");if(b.closest(".data-section").length){b=b.next(".kbs");if(b.length)return b;b=q.next(".property-section").find(".kbs:first");if(b.length)return b;b=j.next(".type-section").find(".kbs:first")}else if(q.length){b=q.find(".data-section:first .kbs:first");if(b.length)return b;
b=q.next(".property-section").find(".kbs:first");if(b.length)return b;b=j.next(".type-section").find(".kbs:first")}else if(j.length){b=j.find(".property-section:first .kbs:first");if(b.length)return b;b=j.next(".type-section").find(".kbs:first")}else b=f.find(".type-section:first .kbs:first");if(b.length)return b;return f.get(0)===c.get(0)?i.find(".kbs:first"):f.next(".domain-section").find(".kbs:first")};this.prev=function(){var b=e(),f=this._prev(b);f&&k(b,f)};this._prev=function(b){if(!(b&&b.length)){b=
a(".data-section:last .kbs:last",g);b.length||(b=a(".property-section:last .kbs:first",g));b.length||(b=a(".type-section:last .kbs:first",g));b.length||(b=a(".domain-section:last .kbs:first",g));return b}var f=b.closest(".domain-section"),j=b.closest(".type-section"),q=b.closest(".property-section");if(b.closest(".data-section").length){b=b.prev(".kbs");if(b.length)return b;return q.find(".kbs:first")}else if(q.length){b=q.prev(".property-section").find(".kbs:last");if(b.length)return b;return j.find(".kbs:first")}else if(j.length){b=
j.prev(".type-section").find(".kbs:last");if(b.length)return b;return f.find(".kbs:first")}else return f.get(0)===i.get(0)?c.find(".kbs:last"):f.prev(".domain-section").find(".kbs:last")};this.edit=function(){this.get_current().trigger("edit")};var y=this;a(document).unbind(".kbs").bind("keydown.kbs",function(b){var f=b.target;if(f==document.body||f==document||f==window||f==a("html")[0]){f=b.keyCode;if(f===68)b.shiftKey?n():l();else if(f===84)b.shiftKey?w():r();else if(f===80)b.shiftKey?o():x();else if(f===
74)y.next();else if(f===75)y.prev();else f===69&&y.edit()}})}})(jQuery);
(function(a,m){var g=window.propbox={init:function(i,c){c=a.extend({lang:"/lang/en"},c);if(!c.base_ajax_url)throw new Error("base_ajax_url required in propbox options");if(!c.base_static_url)throw new Error("base_static_url required in propbox options");if(!c.id)throw new Error("topic id required in propbox options");if(!c.lang)throw new Error("lang required in propbox options");g.options=c;g.kbs=new m(i);g.kbs.set_next(g.kbs.get_current(),a(".kbs:visible:first",i,true));a(".kbs",i).live("click",
function(){var d=g.kbs.get_current();g.kbs.set_next(d,a(this),true)}).live("edit",function(){var d=a(this).find(".headmenu:first").data("submenu");d&&a("li:first a:first",d).click()});g.init_menus(i)},init_menus:function(i,c){i=a(i||document);c&&a(".nicemenu",i).nicemenu();(i&&i.is(".data-row")?i:a(".data-row",i)).hover(g.row_menu_hoverover,g.row_menu_hoverout);a(".nicemenu .headmenu",i).add(a(".nicemenu .default-action",i)).click("click",function(){if(g.kbs){var d=g.kbs.get_current();d&&g.kbs.set_next(d,
a(this).parents(".kbs:first"),true)}return false})},row_menu_hoverover:function(){var i=a(this);g.row_menu_hoverover.timeout=setTimeout(function(){i.addClass("row-hover")},300)},row_menu_hoverout:function(){clearTimeout(g.row_menu_hoverover.timeout);a(this).removeClass("row-hover")},get_script:function(i,c){var d=g.get_script.cache;if(!d)d=g.get_script.cache={};var e=d[i];if(e)if(e.state===1)e.callbacks.push(c);else e.state===4&&c();else{e=d[i]={state:0,callbacks:[c]};a.ajax({url:g.options.base_static_url+
i,dataType:"script",beforeSend:function(){e.state=1},success:function(){e.state=4;a.each(e.callbacks,function(k,l){l()})},error:function(){e.state=-1}})}},prop_edit:function(i,c){var d=a(i).parents(".submenu").data("headmenu").parents(".property-section").find(".data-section .data-row:first:visible .nicemenu:first .headmenu:first a");d.length?d.click():g.prop_add(i,c);return false},prop_add:function(i,c){var d=a(i).parents(".submenu").data("headmenu").parents(".property-section");g.get_script("/propbox-edit.mf.js",
function(){g.edit.prop_add_begin(d,c)});return false},value_edit:function(i){var c=a(i).parents(".submenu").data("headmenu").parents(".data-row:first"),d=c.parents(".property-section");g.get_script("/propbox-edit.mf.js",function(){g.edit.value_edit_begin(d,c)});return false},value_delete:function(i){var c=a(i).parents(".submenu").data("headmenu").parents(".data-row:first"),d=c.parents(".property-section");g.get_script("/propbox-edit.mf.js",function(){g.edit.value_delete_begin(d,c)});return false},
close_message:function(i){a(i).parents(".row-msg:first").remove();return false}}})(jQuery,window.kbs);
(function(a,m,g){var i=m.topic={init:function(){g.init("#topic-data",{id:m.c.id,base_ajax_url:m.h.ajax_url("lib/propbox"),base_static_url:m.h.static_url("lib/propbox"),lang:m.lang||"/lang/en",suggest_impl:m.suggest_options,incompatible_types:m.incompatible_types});a(".column.nav").collapse_module({modules:".module",column:".section"});m.filters.init_domain_type_property_filter(".column.nav");a(".toolbar-trigger").click(function(){var c=a(this),d=a(this).closest(".toolbar"),e=a(".manage-types").first().css("overflow",
"hidden"),k=e.outerHeight(),l=a(".topic-types",e).first(),h=a(".topic-type-list",e).first(),n=a("ul",h).children("li").length;if(e.is(":visible")){d.removeClass("active");c.removeClass("active");e.slideUp()}else{c.addClass("active");d.addClass("active");e.slideDown(function(){if(!c.data("initialized")){i.init_manage_types();c.data("initialized",1)}});Modernizr.csscolumns&&n>7&&h.addClass("multicolumn");d=h.position().top;h.height(k-d+"px");l.animate({opacity:1})}return false});a(".keyboard-shortcuts > a").overlay({close:".modal-buttons .button.cancel",
closeOnClick:false,fixed:false,mask:{color:"#000",loadSpeed:200,opacity:0.5}});a("#show-all-domains-link").click(function(){a(":checkbox",".filter-form.all-data-toggle").click();return false})},init_manage_types:function(){a("#add-type-input").suggest(m.suggest_options.cotype()).bind("fb-select",function(c,d){i.add_type(this,d.id)}).focus()},add_type:function(c,d){function e(k,l,h){m.get_script(m.h.static_url("manage-type.mf.js"),function(){i.manage_type.add_type_begin(c,d,h)})}c=a(c);m.incompatible_types.check(m.c.id,
d,{compatible:e,incompatible:m.incompatible_types.overlay_suggest_incompatible_callback(c,{onLoad:function(){a(".incompatible-overlay-dialog .incompatible-topic").text(a(a(".page-title > h1 > span").get(0).firstChild).text())},onCancel:function(){c.focus()},onConfirm:e})});return false},remove_type:function(c,d){c=a(c);m.get_script(m.h.static_url("manage-type.mf.js"),function(){i.manage_type.remove_type_begin(c,d)});return false}};a(i.init)})(jQuery,window.freebase,window.propbox);
