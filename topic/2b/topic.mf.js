
/*
 * Copyright 2010, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*
 
 jQuery Tools @VERSION Tooltip - UI essentials

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tooltip/

 Since: November 2008
 Date: @DATE 
*/
(function(b){b.fn.collapse_module=function(g){var d=b(g);g=b(this);var a=g.get(0),c=b(".trigger:first",a),f=b(".module-section",a),h=g.slice(1),j=d.css("margin-left");c.click(function(){if(c.hasClass("collapsed"))d.animate({marginLeft:j},function(){f.slideDown(function(){c.removeClass("collapsed")});h.fadeIn()});else{h.fadeOut();f.slideUp(function(){d.animate({marginLeft:0});c.addClass("collapsed")})}return false})}})(jQuery);
(function(b){b.fn.collapse_module=function(g){var d=b(g);g=b(this);var a=g.get(0),c=b(".trigger:first",a),f=b(".module-section",a),h=g.slice(1),j=d.css("margin-left");c.click(function(){if(c.hasClass("collapsed"))d.animate({marginLeft:j},function(){f.slideDown(function(){c.removeClass("collapsed")});h.fadeIn()});else{h.fadeOut();f.slideUp(function(){d.animate({marginLeft:0});c.addClass("collapsed")})}return false})}})(jQuery);
(function(b,g){function d(a){return!b(a).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});b.fn.extend({_focus:b.fn.focus,focus:function(a,c){return typeof a==="number"?this.each(function(){var f=this;setTimeout(function(){b(f).focus();c&&c.call(f)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,
"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(a){if(a!==g)return this.css("zIndex",a);if(this.length){a=b(this[0]);for(var c;a.length&&a[0]!==document;){c=a.css("position");
if(c==="absolute"||c==="relative"||c==="fixed"){c=parseInt(a.css("zIndex"),10);if(!isNaN(c)&&c!==0)return c}a=a.parent()}}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.each(["Width","Height"],function(a,c){function f(m,p,q,s){b.each(h,function(){p-=parseFloat(b.curCSS(m,"padding"+this,true))||0;if(q)p-=parseFloat(b.curCSS(m,
"border"+this+"Width",true))||0;if(s)p-=parseFloat(b.curCSS(m,"margin"+this,true))||0});return p}var h=c==="Width"?["Left","Right"]:["Top","Bottom"],j=c.toLowerCase(),k={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+c]=function(m){if(m===g)return k["inner"+c].call(this);return this.each(function(){b(this).css(j,f(this,m)+"px")})};b.fn["outer"+c]=function(m,p){if(typeof m!=="number")return k["outer"+c].call(this,m);return this.each(function(){b(this).css(j,
f(this,m,true,p)+"px")})}});b.extend(b.expr[":"],{data:function(a,c,f){return!!b.data(a,f[3])},focusable:function(a){var c=a.nodeName.toLowerCase(),f=b.attr(a,"tabindex");if("area"===c){c=a.parentNode;f=c.name;if(!a.href||!f||c.nodeName.toLowerCase()!=="map")return false;a=b("img[usemap=#"+f+"]")[0];return!!a&&d(a)}return(/input|select|textarea|button|object/.test(c)?!a.disabled:"a"==c?a.href||!isNaN(f):!isNaN(f))&&d(a)},tabbable:function(a){var c=b.attr(a,"tabindex");return(isNaN(c)||c>=0)&&b(a).is(":focusable")}});
b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=c.offsetHeight===100;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"});b.extend(b.ui,{plugin:{add:function(a,c,f){a=b.ui[a].prototype;for(var h in f){a.plugins[h]=a.plugins[h]||[];a.plugins[h].push([c,f[h]])}},call:function(a,c,f){if((c=a.plugins[c])&&a.element[0].parentNode)for(var h=0;h<c.length;h++)a.options[c[h][0]]&&
c[h][1].apply(a.element,f)}},contains:function(a,c){return document.compareDocumentPosition?a.compareDocumentPosition(c)&16:a!==c&&a.contains(c)},hasScroll:function(a,c){if(b(a).css("overflow")==="hidden")return false;var f=c&&c==="left"?"scrollLeft":"scrollTop",h=false;if(a[f]>0)return true;a[f]=1;h=a[f]>0;a[f]=0;return h},isOverAxis:function(a,c,f){return a>c&&a<c+f},isOver:function(a,c,f,h,j,k){return b.ui.isOverAxis(a,f,j)&&b.ui.isOverAxis(c,h,k)}})}})(jQuery);
(function(b){b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var g=this,d=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");d.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");
this.range=b([]);if(d.range){if(d.range===true){this.range=b("<div></div>");if(!d.values)d.values=[this._valueMin(),this._valueMin()];if(d.values.length&&d.values.length!==2)d.values=[d.values[0],d.values[0]]}else this.range=b("<div></div>");this.range.appendTo(this.element).addClass("ui-slider-range");if(d.range==="min"||d.range==="max")this.range.addClass("ui-slider-range-"+d.range);this.range.addClass("ui-widget-header")}b(".ui-slider-handle",this.element).length===0&&b("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");
if(d.values&&d.values.length)for(;b(".ui-slider-handle",this.element).length<d.values.length;)b("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=b(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).focus(function(){if(d.disabled)b(this).blur();
else{b(".ui-slider .ui-state-focus").removeClass("ui-state-focus");b(this).addClass("ui-state-focus")}}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(a){b(this).data("index.ui-slider-handle",a)});this.handles.keydown(function(a){var c=true,f=b(this).data("index.ui-slider-handle"),h,j,k;if(!g.options.disabled){switch(a.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:c=
false;if(!g._keySliding){g._keySliding=true;b(this).addClass("ui-state-active");h=g._start(a,f);if(h===false)return}break}k=g.options.step;h=g.options.values&&g.options.values.length?(j=g.values(f)):(j=g.value());switch(a.keyCode){case b.ui.keyCode.HOME:j=g._valueMin();break;case b.ui.keyCode.END:j=g._valueMax();break;case b.ui.keyCode.PAGE_UP:j=g._trimAlignValue(h+(g._valueMax()-g._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:j=g._trimAlignValue(h-(g._valueMax()-g._valueMin())/5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(h===
g._valueMax())return;j=g._trimAlignValue(h+k);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(h===g._valueMin())return;j=g._trimAlignValue(h-k);break}g._slide(a,f,j);return c}}).keyup(function(a){var c=b(this).data("index.ui-slider-handle");if(g._keySliding){g._keySliding=false;g._stop(a,c);g._change(a,c);b(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");
this._mouseDestroy();return this},_mouseCapture:function(g){var d=this.options,a,c,f,h,j;if(d.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();a=this._normValueFromMouse({x:g.pageX,y:g.pageY});c=this._valueMax()-this._valueMin()+1;h=this;this.handles.each(function(k){var m=Math.abs(a-h.values(k));if(c>m){c=m;f=b(this);j=k}});if(d.range===true&&this.values(1)===d.min){j+=1;f=b(this.handles[j])}if(this._start(g,
j)===false)return false;this._mouseSliding=true;h._handleIndex=j;f.addClass("ui-state-active").focus();d=f.offset();this._clickOffset=!b(g.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:g.pageX-d.left-f.width()/2,top:g.pageY-d.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(g,j,a);return this._animateOff=true},_mouseStart:function(){return true},
_mouseDrag:function(g){var d=this._normValueFromMouse({x:g.pageX,y:g.pageY});this._slide(g,this._handleIndex,d);return false},_mouseStop:function(g){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(g,this._handleIndex);this._change(g,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(g){var d;
if(this.orientation==="horizontal"){d=this.elementSize.width;g=g.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;g=g.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}d=g/d;if(d>1)d=1;if(d<0)d=0;if(this.orientation==="vertical")d=1-d;g=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+d*g)},_start:function(g,d){var a={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){a.value=
this.values(d);a.values=this.values()}return this._trigger("start",g,a)},_slide:function(g,d,a){var c;if(this.options.values&&this.options.values.length){c=this.values(d?0:1);if(this.options.values.length===2&&this.options.range===true&&(d===0&&a>c||d===1&&a<c))a=c;if(a!==this.values(d)){c=this.values();c[d]=a;g=this._trigger("slide",g,{handle:this.handles[d],value:a,values:c});this.values(d?0:1);g!==false&&this.values(d,a,true)}}else if(a!==this.value()){g=this._trigger("slide",g,{handle:this.handles[d],
value:a});g!==false&&this.value(a)}},_stop:function(g,d){var a={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(d);a.values=this.values()}this._trigger("stop",g,a)},_change:function(g,d){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(d);a.values=this.values()}this._trigger("change",g,a)}},value:function(g){if(arguments.length){this.options.value=
this._trimAlignValue(g);this._refreshValue();this._change(null,0)}return this._value()},values:function(g,d){var a,c,f;if(arguments.length>1){this.options.values[g]=this._trimAlignValue(d);this._refreshValue();this._change(null,g)}if(arguments.length)if(b.isArray(arguments[0])){a=this.options.values;c=arguments[0];for(f=0;f<a.length;f+=1){a[f]=this._trimAlignValue(c[f]);this._change(null,f)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(g):this.value();
else return this._values()},_setOption:function(g,d){var a,c=0;if(b.isArray(this.options.values))c=this.options.values.length;b.Widget.prototype._setOption.apply(this,arguments);switch(g){case "disabled":if(d){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(a=0;a<c;a+=1)this._change(null,a);this._animateOff=false;break}},_value:function(){var g=this.options.value;return g=this._trimAlignValue(g)},_values:function(g){var d,a;if(arguments.length){d=this.options.values[g];
return d=this._trimAlignValue(d)}else{d=this.options.values.slice();for(a=0;a<d.length;a+=1)d[a]=this._trimAlignValue(d[a]);return d}},_trimAlignValue:function(g){if(g<=this._valueMin())return this._valueMin();if(g>=this._valueMax())return this._valueMax();var d=this.options.step>0?this.options.step:1,a=(g-this._valueMin())%d;alignValue=g-a;if(Math.abs(a)*2>=d)alignValue+=a>0?d:-d;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},
_refreshValue:function(){var g=this.options.range,d=this.options,a=this,c=!this._animateOff?d.animate:false,f,h={},j,k,m,p;if(this.options.values&&this.options.values.length)this.handles.each(function(q){f=(a.values(q)-a._valueMin())/(a._valueMax()-a._valueMin())*100;h[a.orientation==="horizontal"?"left":"bottom"]=f+"%";b(this).stop(1,1)[c?"animate":"css"](h,d.animate);if(a.options.range===true)if(a.orientation==="horizontal"){if(q===0)a.range.stop(1,1)[c?"animate":"css"]({left:f+"%"},d.animate);
if(q===1)a.range[c?"animate":"css"]({width:f-j+"%"},{queue:false,duration:d.animate})}else{if(q===0)a.range.stop(1,1)[c?"animate":"css"]({bottom:f+"%"},d.animate);if(q===1)a.range[c?"animate":"css"]({height:f-j+"%"},{queue:false,duration:d.animate})}j=f});else{k=this.value();m=this._valueMin();p=this._valueMax();f=p!==m?(k-m)/(p-m)*100:0;h[a.orientation==="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[c?"animate":"css"](h,d.animate);if(g==="min"&&this.orientation==="horizontal")this.range.stop(1,
1)[c?"animate":"css"]({width:f+"%"},d.animate);if(g==="max"&&this.orientation==="horizontal")this.range[c?"animate":"css"]({width:100-f+"%"},{queue:false,duration:d.animate});if(g==="min"&&this.orientation==="vertical")this.range.stop(1,1)[c?"animate":"css"]({height:f+"%"},d.animate);if(g==="max"&&this.orientation==="vertical")this.range[c?"animate":"css"]({height:100-f+"%"},{queue:false,duration:d.animate})}}});b.extend(b.ui.slider,{version:"1.8.10"})})(jQuery);
(function(b,g){g.filters={init_domain_type_property_filter:function(d){b(":text[name=domain], :text[name=type], :text[name=property]",d).suggest({service_url:g.h.legacy_fb_url(),type:["/type/domain","/type/type","/type/property"],type_strict:"any"}).bind("fb-select",function(a,c){var f=b(this);f.val(c.id);var h=c["n:type"].id;if(h==="/type/domain")f.attr("name","domain");else if(h==="/type/type")f.attr("name","type");else h==="/type/property"&&f.attr("name","property");this.form.submit()})},init_limit_slider_filter:function(d,
a,c,f,h){var j=b(".limit-slider",d),k=b(".current-limit",d),m=b("input[name=limit]",d),p=parseInt(m.val()||a,10);j.slider({value:p,min:c||1,max:f||100,step:h||10,slide:function(q,s){k.css({color:"#f71"});k.text(s.value)},stop:function(q,s){k.css({color:"#333"});m.val(s.value);s.value!=p&&m[0].form.submit()}})}};b(function(){b(".filter-form-trigger").click(function(){var d=b(this).siblings(".filter-form");d.is(":hidden")?d.slideDown(function(){b(":text:first",d).focus()}):d.slideUp()})})})(jQuery,
window.freebase);
(function(b){function g(c,f,h){var j=h.relative?c.position().top:c.offset().top,k=h.relative?c.position().left:c.offset().left,m=h.position[0];j-=f.outerHeight()-h.offset[0];k+=c.outerWidth()+h.offset[1];var p=f.outerHeight()+c.outerHeight();if(m=="center")j+=p/2;if(m=="bottom")j+=p;m=h.position[1];c=f.outerWidth()+c.outerWidth();if(m=="center")k-=c/2;if(m=="left")k-=c;return{top:j,left:k}}function d(c,f){var h=this,j=c.add(h),k,m=0,p=0,q=c.attr("title"),s=a[f.effect],t,u=c.is(":input"),x=u&&c.is(":checkbox, :radio, select, :button, :submit"),
z=c.attr("type"),v=f.events[z]||f.events[u?x?"widget":"input":"def"];if(!s)throw'Nonexistent effect "'+f.effect+'"';v=v.split(/,\s*/);if(v.length!=2)throw"Tooltip: bad events configuration for "+z;c.bind(v[0],function(n){clearTimeout(m);if(f.predelay)p=setTimeout(function(){h.show(n)},f.predelay);else h.show(n)}).bind(v[1],function(n){clearTimeout(p);if(f.delay)m=setTimeout(function(){h.hide(n)},f.delay);else h.hide(n)});if(q&&f.cancelDefault){c.removeAttr("title");c.data("title",q)}b.extend(h,{show:function(n){if(!k){if(q)k=
b(f.layout).addClass(f.tipClass).appendTo(document.body).hide().append(q);else if(f.tip)k=b(f.tip).eq(0);else{k=c.next();k.length||(k=c.parent().next())}if(!k.length)throw"Cannot find tooltip for "+c;}if(h.isShown())return h;k.stop(true,true);var r=g(c,k,f);n=n||b.Event();n.type="onBeforeShow";j.trigger(n,[r]);if(n.isDefaultPrevented())return h;r=g(c,k,f);k.css({position:"absolute",top:r.top,left:r.left});t=true;s[0].call(h,function(){n.type="onShow";t="full";j.trigger(n)});r=f.events.tooltip.split(/,\s*/);
k.bind(r[0],function(){clearTimeout(m);clearTimeout(p)});r[1]&&!c.is("input:not(:checkbox, :radio), textarea")&&k.bind(r[1],function(w){w.relatedTarget!=c[0]&&c.trigger(v[1].split(" ")[0])});return h},hide:function(n){if(!k||!h.isShown())return h;n=n||b.Event();n.type="onBeforeHide";j.trigger(n);if(!n.isDefaultPrevented()){t=false;a[f.effect][1].call(h,function(){n.type="onHide";t=false;j.trigger(n)});return h}},isShown:function(n){return n?t=="full":t},getConf:function(){return f},getTip:function(){return k},
getTrigger:function(){return c}});b.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(n,r){b.isFunction(f[r])&&b(h).bind(r,f[r]);h[r]=function(w){b(h).bind(r,w);return h}})}b.tools=b.tools||{version:"@VERSION"};b.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:false,cancelDefault:true,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},
layout:"<div/>",tipClass:"tooltip"},addEffect:function(c,f,h){a[c]=[f,h]}};var a={toggle:[function(c){var f=this.getConf(),h=this.getTip();f=f.opacity;f<1&&h.css({opacity:f});h.show();c.call()},function(c){this.getTip().hide();c.call()}],fade:[function(c){var f=this.getConf();this.getTip().fadeTo(f.fadeInSpeed,f.opacity,c)},function(c){this.getTip().fadeOut(this.getConf().fadeOutSpeed,c)}]};b.fn.tooltip=function(c){var f=this.data("tooltip");if(f)return f;c=b.extend(true,{},b.tools.tooltip.conf,c);
if(typeof c.position=="string")c.position=c.position.split(/,?\s/);this.each(function(){f=new d(b(this),c);b(this).data("tooltip",f)});return c.api?f:this}})(jQuery);
(function(b){var g=function(){return typeof window.innerWidth!="undefined"?function(){return{w:window.innerWidth,h:window.innerHeight}}:typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0?function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}:function(){return{w:document.getElementsByTagName("body")[0].clientWidth,h:document.getElementsByTagName("body")[0].clientHeight}}}();
window.kbs=function(d){b(".kbs.current",d).removeClass("current");var a=b(".domain-section:first",d),c=b(".domain-section:last",d),f=this.scroll_to=function(e){var i=b(document).scrollTop();b(document).height();var l=g().h;l=i+l;var o=e.offset().top;e=o+e.height();if(o<i)b(document).scrollTop(o);else e>l&&b(document).scrollTop(i+(e-l))},h=this.get_current=function(){return b(".kbs.current:first",d)},j=this.set_next=function(e,i,l){if(i.length){e.removeClass("current");i.addClass("current");l||f(i)}},
k=this.next_domain=function(e){var i=h(),l=m(i);if(l){l=l.find(".kbs:first");j(i,l,e)}},m=this._next_domain=function(e){if(!(e&&e.length))return b(".domain-section:first",d);e=e.closest(".domain-section");return!e.length||e[0]===c[0]?a:e.next(".domain-section")},p=this.prev_domain=function(){var e=h(),i=q(e);if(i){i=i.find(".kbs:first");j(e,i)}},q=this._prev_domain=function(e){if(!(e&&e.length))return b(".domain-section:last",d);var i=e.closest(".domain-section");if(e.closest(".property-section").length||
e.closest(".type-section").length)return i;return!i.length||i[0]===a[0]?c:i.prev(".domain-section")},s=this.next_type=function(){var e=h(),i=t(e);if(i){i=i.find(".kbs:first");j(e,i)}},t=this._next_type=function(e){if(!(e&&e.length))return b(".type-section:first",d);var i=e.closest(".domain-section");e=e.closest(".type-section");e=e.length?e.next(".type-section"):i.find(".type-section:first");if(!(e&&e.length)){var l=m(i);if(l)for(;l.get(0)!==i.get(0);){e=l.find(".type-section:first");if(e.length)break;
l=m(l)}}return e},u=this.prev_type=function(){var e=h(),i=x(e);if(i){i=i.find(".kbs:first");j(e,i)}},x=this._prev_type=function(e){if(!(e&&e.length))return b(".type-section:last",d);var i=e.closest(".domain-section"),l=e.closest(".type-section");if(e.closest(".property-section").length)return l;var o;if(l.length)o=l.prev(".type-section");if(!(o&&o.length))if(e=q(i))for(;e.get(0)!==i.get(0);){o=e.find(".type-section:last");if(o.length)break;e=q(e)}return o},z=this.next_prop=function(){var e=h(),i=
v(e);if(i){i=i.find(".kbs:first");j(e,i)}},v=this._next_prop=function(e){if(!(e&&e.length))return b(".property-section:first",d);var i=e.closest(".domain-section"),l=e.closest(".type-section"),o=e.closest(".property-section");i=o.length?o.next(".property-section"):l.length?l.find(".property-section:first"):i.find(".property-section:first");if(!(i&&i.length))if(e=t(e))for(;e.get(0)!==l.get(0);){i=e.find(".property-section:first");if(i.length)break;if(l.get(0)==null)l=e;e=t(e)}return i},n=this.prev_prop=
function(){var e=h(),i=r(e);if(i){i=i.find(".kbs:first");j(e,i)}},r=this._prev_prop=function(e){if(!(e&&e.length))return b(".property-section:last",d);var i=e.closest(".domain-section"),l=e.closest(".type-section"),o=e.closest(".property-section");if(e.closest(".data-section").length)return o;var y;if(o.length)y=o.prev(".property-section");if(!(y&&y.length))if(u=l.length?x(l):x(i))for(;u.get(0)!==l.get(0);){y=u.find(".property-section:last");if(y.length)break;if(l.get(0)==null)l=u;u=x(u)}return y};
this.next=function(){var e=h(),i=this._next(e);i&&j(e,i)};this._next=function(e){if(!(e&&e.length))return b(".domain-section:first .kbs:first",d);var i=e.closest(".domain-section"),l=e.closest(".type-section"),o=e.closest(".property-section");if(e.closest(".data-section").length){e=e.next(".kbs");if(e.length)return e;e=o.next(".property-section").find(".kbs:first");if(e.length)return e;e=l.next(".type-section").find(".kbs:first")}else if(o.length){e=o.find(".data-section:first .kbs:first");if(e.length)return e;
e=o.next(".property-section").find(".kbs:first");if(e.length)return e;e=l.next(".type-section").find(".kbs:first")}else if(l.length){e=l.find(".property-section:first .kbs:first");if(e.length)return e;e=l.next(".type-section").find(".kbs:first")}else e=i.find(".type-section:first .kbs:first");if(e.length)return e;return i.get(0)===c.get(0)?a.find(".kbs:first"):i.next(".domain-section").find(".kbs:first")};this.prev=function(){var e=h(),i=this._prev(e);i&&j(e,i)};this._prev=function(e){if(!(e&&e.length)){e=
b(".data-section:last .kbs:last",d);e.length||(e=b(".property-section:last .kbs:first",d));e.length||(e=b(".type-section:last .kbs:first",d));e.length||(e=b(".domain-section:last .kbs:first",d));return e}var i=e.closest(".domain-section"),l=e.closest(".type-section"),o=e.closest(".property-section");if(e.closest(".data-section").length){e=e.prev(".kbs");if(e.length)return e;return o.find(".kbs:first")}else if(o.length){e=o.prev(".property-section").find(".kbs:last");if(e.length)return e;return l.find(".kbs:first")}else if(l.length){e=
l.prev(".type-section").find(".kbs:last");if(e.length)return e;return i.find(".kbs:first")}else return i.get(0)===a.get(0)?c.find(".kbs:last"):i.prev(".domain-section").find(".kbs:last")};this.edit=function(){this.get_current().trigger("edit")};var w=this;b(document).unbind(".kbs").bind("keydown.kbs",function(e){var i=e.target;if(i==document.body||i==document||i==window||i==b("html")[0]){i=e.keyCode;if(i===68)e.shiftKey?p():k();else if(i===84)e.shiftKey?u():s();else if(i===80)e.shiftKey?n():z();else if(i===
74)w.next();else if(i===75)w.prev();else i===69&&w.edit()}})}})(jQuery);
(function(b,g){var d=window.propbox={init:function(a,c){c=b.extend({lang:"/lang/en"},c);if(!c.base_url)throw new Error("base_url required in propbox options");if(!c.id)throw new Error("topic id required in propbox options");if(!c.lang)throw new Error("lang required in propbox options");d.options=c;d.kbs=new g(a);d.kbs.next();b(".kbs",a).live("click",function(){var f=d.kbs.get_current();d.kbs.set_next(f,b(this),true)}).live("edit",function(){b(this).find(".row-menu-item:first a").click()}).hover(d.row_menu_hoverover,
d.row_menu_hoverout);d.init_row_menu(a);d.init_combo_menu(a)},init_row_menu:function(a){b(".menu-trigger",a).each(function(){var c=b(".row-menu:first").outerWidth();b(this).tooltip({events:{def:"click,mouseout"},relative:true,position:["bottom","right"],offset:[0,"-"+c],effect:"fade",delay:300})})},init_combo_menu:function(a){b(".combo-menu .default-action",a).live("click",function(){b(this).parents(".data-row:first").trigger("edit")})},row_menu_hoverover:function(){var a=b(this);d.row_menu_hoverover.timeout=
setTimeout(function(){a.addClass("row-hover")},300)},row_menu_hoverout:function(){clearTimeout(d.row_menu_hoverover.timeout);b(this).removeClass("row-hover")},get_script:function(a,c){var f=d.get_script.cache;if(!f)f=d.get_script.cache={};var h=f[a];if(h)if(h.state===1)h.callbacks.push(c);else h.state===4&&c();else{h=f[a]={state:0,callbacks:[c]};b.ajax({url:d.options.base_url+a,dataType:"script",beforeSend:function(){h.state=1},success:function(){h.state=4;b.each(h.callbacks,function(j,k){k()})},
error:function(){h.state=-1}})}},prop_edit:function(a){a=b(a).parents(".row-menu:first").prev(".menu-trigger");a.data("tooltip").hide();a.parents(".property-section").find(".list-section .data-row:first .combo-menu .row-menu-item:first a").click();return false},prop_add:function(a){a=b(a).parents(".row-menu:first").prev(".menu-trigger");a.data("tooltip").hide();var c=a.parents(".property-section");if(c.is(".editing"))return false;c.addClass("editing");d.get_script("/propbox-edit.mf.js",function(){d.edit.prop_add_begin(c)});
return false},value_edit:function(a){a=b(a).parents(".row-menu:first").prev(".menu-trigger");a.data("tooltip").hide();var c=a.parents(".data-row:first"),f=c.parents(".property-section");if(f.is(".editing"))return false;f.addClass("editing");d.get_script("/propbox-edit.mf.js",function(){d.edit.value_edit_begin(f,c)});return false},value_delete:function(a){a=b(a).parents(".row-menu:first").prev(".menu-trigger");a.data("tooltip").hide();a=a.parents(".combo-menu:first").prev(".property-value");var c=
a.parents(".data-row:first");c.is("tr")?console.log("value_edit CVT",c.attr("data-id")):console.log("value_edit",a.attr("data-id")||a.attr("data-value"));if(c.parents(".property-section").is(".editing"))return false;return false}}})(jQuery,window.kbs);
(function(b,g,d){var a=g.topic={init:function(){d.init("#topic-data",{id:g.acre.c.id,base_url:g.h.ajax_url("lib/propbox"),lang:g.acre.lang.primary||"/lang/en",suggest:{service_url:g.h.legacy_fb_url(),service_path:"/private/suggest",flyout_service_url:g.h.legacy_fb_url(),flyout_service_path:"/private/flyout",mqlread_url:g.h.fb_api_url("/api/service/mqlread"),category:"object",type:"/common/topic",status:["","Searching...","Select an item from the list:"]}});b(".column.nav > .module").collapse_module(".section");
g.filters.init_domain_type_property_filter(".column.nav");g.filters.init_limit_slider_filter("#limit-slider",10,1,100,1);b(".toolbar-trigger").click(function(){var c=b(".add-type").first(),f=b(this).closest(".toolbar"),h=b(this);if(c.is(":visible")){f.removeClass("active");h.removeClass("active");c.slideUp()}else{h.addClass("active");f.addClass("active");c.slideDown()}})}};b(a.init)})(jQuery,window.freebase,window.propbox);
