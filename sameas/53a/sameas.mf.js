
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*
 
 jQuery Tools @VERSION Tooltip - UI essentials

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tooltip/

 Since: November 2008
 Date: @DATE 
*/
(function(d){d.factory("collapse_module",{init:function(){var g=this;this.$column=d(this.options.column);this.modules=d(this.options.modules,this.element);this.first_module=this.modules.get(0);this.trigger=d(".trigger:first",this.first_module);this.first_section=d(".module-section",this.first_module);this.other_modules=this.modules.slice(1);this.column_offset=this.$column.css("margin-left");this.set_collapsed(this.options.collapsed);this.trigger.click(function(j){return g.toggle(j)})},set_collapsed:function(g){if(this.toggle_state=
g){this.trigger.addClass("collapsed");this.$column.css("margin-left",0);this.first_section.hide();this.other_modules.hide()}else{this.trigger.removeClass("collapsed");this.$column.css("margin-left",this.column_offset);this.first_section.show();this.other_modules.show()}},toggle:function(){var g=this;if(this.toggle_state){d.localstore("filters_collapsed",0,false);this.trigger.removeClass("collapsed");this.$column.animate({marginLeft:this.column_offset},function(){g.first_section.slideDown(function(){g.modules.removeClass("collapsed")});
g.other_modules.fadeIn()})}else{d.localstore("filters_collapsed",1,false);this.trigger.addClass("collapsed");this.other_modules.fadeOut();this.first_section.slideUp(function(){g.$column.animate({marginLeft:0});g.modules.addClass("collapsed")})}this.toggle_state=!this.toggle_state;this.options.toggle_callback&&this.options.toggle_callback.call(this.trigger,this.toggle_state);return false}});var i=d("body").is(".embed")||d.localstore("filters_collapsed");d.extend(true,d.collapse_module,{defaults:{collapsed:i===
null?false:!!i,modules:".module",column:"#main-column"}})})(jQuery);
(function(d){function i(e,a,c){var f=c.relative?e.position().top:e.offset().top,k=c.relative?e.position().left:e.offset().left,m=c.position[0];f-=a.outerHeight()-c.offset[0];k+=e.outerWidth()+c.offset[1];var q=a.outerHeight()+e.outerHeight();if(m=="center")f+=q/2;if(m=="bottom")f+=q;m=c.position[1];e=a.outerWidth()+e.outerWidth();if(m=="center")k-=e/2;if(m=="left")k-=e;return{top:f,left:k}}function g(e,a){var c=this,f=e.add(c),k,m=0,q=0,t=e.attr("title"),x=j[a.effect],p,r=e.is(":input"),u=r&&e.is(":checkbox, :radio, select, :button, :submit"),
z=e.attr("type"),v=a.events[z]||a.events[r?u?"widget":"input":"def"];if(!x)throw'Nonexistent effect "'+a.effect+'"';v=v.split(/,\s*/);if(v.length!=2)throw"Tooltip: bad events configuration for "+z;e.bind(v[0],function(n){clearTimeout(m);if(a.predelay)q=setTimeout(function(){c.show(n)},a.predelay);else c.show(n)}).bind(v[1],function(n){clearTimeout(q);if(a.delay)m=setTimeout(function(){c.hide(n)},a.delay);else c.hide(n)});if(t&&a.cancelDefault){e.removeAttr("title");e.data("title",t)}d.extend(c,{show:function(n){if(!k){if(t)k=
d(a.layout).addClass(a.tipClass).appendTo(document.body).hide().append(t);else if(a.tip)k=d(a.tip).eq(0);else{k=e.next();k.length||(k=e.parent().next())}if(!k.length)throw"Cannot find tooltip for "+e;}if(c.isShown())return c;k.stop(true,true);var s=i(e,k,a);n=n||d.Event();n.type="onBeforeShow";f.trigger(n,[s]);if(n.isDefaultPrevented())return c;s=i(e,k,a);k.css({position:"absolute",top:s.top,left:s.left});p=true;x[0].call(c,function(){n.type="onShow";p="full";f.trigger(n)});s=a.events.tooltip.split(/,\s*/);
k.bind(s[0],function(){clearTimeout(m);clearTimeout(q)});s[1]&&!e.is("input:not(:checkbox, :radio), textarea")&&k.bind(s[1],function(w){w.relatedTarget!=e[0]&&e.trigger(v[1].split(" ")[0])});return c},hide:function(n){if(!k||!c.isShown())return c;n=n||d.Event();n.type="onBeforeHide";f.trigger(n);if(!n.isDefaultPrevented()){p=false;j[a.effect][1].call(c,function(){n.type="onHide";p=false;f.trigger(n)});return c}},isShown:function(n){return n?p=="full":p},getConf:function(){return a},getTip:function(){return k},
getTrigger:function(){return e}});d.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(n,s){d.isFunction(a[s])&&d(c).bind(s,a[s]);c[s]=function(w){d(c).bind(s,w);return c}})}d.tools=d.tools||{version:"@VERSION"};d.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:false,cancelDefault:true,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},
layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,a,c){j[e]=[a,c]}};var j={toggle:[function(e){var a=this.getConf(),c=this.getTip();a=a.opacity;a<1&&c.css({opacity:a});c.show();e.call()},function(e){this.getTip().hide();e.call()}],fade:[function(e){var a=this.getConf();this.getTip().fadeTo(a.fadeInSpeed,a.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};d.fn.tooltip=function(e){var a=this.data("tooltip");if(a)return a;e=d.extend(true,{},d.tools.tooltip.conf,e);
if(typeof e.position=="string")e.position=e.position.split(/,?\s/);this.each(function(){a=new g(d(this),e);d(this).data("tooltip",a)});return e.api?a:this}})(jQuery);
(function(d,i){i.filters={init_domain_type_property_filter:function(g){d(":text[name=domain], :text[name=type], :text[name=property]",g).suggest(d.extend({scoring:"schema",format:null,mql_output:JSON.stringify([{id:null,name:null,type:{id:null,"id|=":["/type/domain","/type/type","/type/property"],limit:1}}])},i.suggest_options.any("type:/type/domain","type:/type/type","type:/type/property"))).bind("fb-select",function(j,e){var a=d(this);a.val(e.id);var c=e.type.id;if(c==="/type/domain")a.attr("name",
"domain");else if(c==="/type/type")a.attr("name","type");else c==="/type/property"&&a.attr("name","property");this.form.submit()}).parents(".filter-form").submit(function(){return false})}};d(function(){d(".filter-form :input").keypress(function(g){g.keyCode===13&&this.form.submit();return true});d(".filter-help-trigger").tooltip({events:{def:"click,mouseout"},position:"top center",effect:"fade",delay:300,offset:[-8,0]});d(".filter-form-trigger").click(function(){var g=d(this).siblings(".filter-form");
g.is(":hidden")?g.slideDown(function(){d(":text:first",g).focus()}):g.slideUp()})})})(jQuery,window.freebase);
(function(d){var i=function(){return typeof window.innerWidth!="undefined"?function(){return{w:window.innerWidth,h:window.innerHeight}}:typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0?function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}:function(){return{w:document.getElementsByTagName("body")[0].clientWidth,h:document.getElementsByTagName("body")[0].clientHeight}}}();
window.kbs=function(g){d(".kbs.current",g).removeClass("current");var j=d(".domain-section:first",g),e=d(".domain-section:last",g),a=this.scroll_to=function(b){var h=d(document).scrollTop();d(document).height();var l=i().h;l=h+l;var o=b.offset().top;b=o+b.height();if(o<h)d(document).scrollTop(o);else b>l&&d(document).scrollTop(h+(b-l))},c=this.get_current=function(){return d(".kbs.current:first",g)},f=this.set_next=function(b,h,l){b=b||c();if(h.length){b.removeClass("current");h.addClass("current");
l||a(h)}},k=this.next_domain=function(b){var h=c(),l=m(h);if(l){l=l.find(".kbs:first");f(h,l,b)}},m=this._next_domain=function(b){if(!(b&&b.length))return d(".domain-section:first",g);b=b.closest(".domain-section");return!b.length||b[0]===e[0]?j:b.next(".domain-section")},q=this.prev_domain=function(){var b=c(),h=t(b);if(h){h=h.find(".kbs:first");f(b,h)}},t=this._prev_domain=function(b){if(!(b&&b.length))return d(".domain-section:last",g);var h=b.closest(".domain-section");if(b.closest(".property-section").length||
b.closest(".type-section").length)return h;return!h.length||h[0]===j[0]?e:h.prev(".domain-section")},x=this.next_type=function(){var b=c(),h=p(b);if(h){h=h.find(".kbs:first");f(b,h)}},p=this._next_type=function(b){if(!(b&&b.length))return d(".type-section:first",g);var h=b.closest(".domain-section");b=b.closest(".type-section");b=b.length?b.next(".type-section"):h.find(".type-section:first");if(!(b&&b.length)){var l=m(h);if(l)for(;l.get(0)!==h.get(0);){b=l.find(".type-section:first");if(b.length)break;
l=m(l)}}return b},r=this.prev_type=function(){var b=c(),h=u(b);if(h){h=h.find(".kbs:first");f(b,h)}},u=this._prev_type=function(b){if(!(b&&b.length))return d(".type-section:last",g);var h=b.closest(".domain-section"),l=b.closest(".type-section");if(b.closest(".property-section").length)return l;var o;if(l.length)o=l.prev(".type-section");if(!(o&&o.length))if(b=t(h))for(;b.get(0)!==h.get(0);){o=b.find(".type-section:last");if(o.length)break;b=t(b)}return o},z=this.next_prop=function(){var b=c(),h=
v(b);if(h){h=h.find(".kbs:first");f(b,h)}},v=this._next_prop=function(b){if(!(b&&b.length))return d(".property-section:first",g);var h=b.closest(".domain-section"),l=b.closest(".type-section"),o=b.closest(".property-section");h=o.length?o.next(".property-section"):l.length?l.find(".property-section:first"):h.find(".property-section:first");if(!(h&&h.length))if(b=p(b))for(;b.get(0)!==l.get(0);){h=b.find(".property-section:first");if(h.length)break;if(l.get(0)==null)l=b;b=p(b)}return h},n=this.prev_prop=
function(){var b=c(),h=s(b);if(h){h=h.find(".kbs:first");f(b,h)}},s=this._prev_prop=function(b){if(!(b&&b.length))return d(".property-section:last",g);var h=b.closest(".domain-section"),l=b.closest(".type-section"),o=b.closest(".property-section");if(b.closest(".data-section").length)return o;var y;if(o.length)y=o.prev(".property-section");if(!(y&&y.length))if(r=l.length?u(l):u(h))for(;r.get(0)!==l.get(0);){y=r.find(".property-section:last");if(y.length)break;if(l.get(0)==null)l=r;r=u(r)}return y};
this.next=function(){var b=c(),h=this._next(b);h&&f(b,h)};this._next=function(b){if(!(b&&b.length))return d(".domain-section:first .kbs:first",g);var h=b.closest(".domain-section"),l=b.closest(".type-section"),o=b.closest(".property-section");if(b.closest(".data-section").length){b=b.next(".kbs");if(b.length)return b;b=o.next(".property-section").find(".kbs:first");if(b.length)return b;b=l.next(".type-section").find(".kbs:first")}else if(o.length){b=o.find(".data-section:first .kbs:first");if(b.length)return b;
b=o.next(".property-section").find(".kbs:first");if(b.length)return b;b=l.next(".type-section").find(".kbs:first")}else if(l.length){b=l.find(".property-section:first .kbs:first");if(b.length)return b;b=l.next(".type-section").find(".kbs:first")}else b=h.find(".type-section:first .kbs:first");if(b.length)return b;return h.get(0)===e.get(0)?j.find(".kbs:first"):h.next(".domain-section").find(".kbs:first")};this.prev=function(){var b=c(),h=this._prev(b);h&&f(b,h)};this._prev=function(b){if(!(b&&b.length)){b=
d(".data-section:last .kbs:last",g);b.length||(b=d(".property-section:last .kbs:first",g));b.length||(b=d(".type-section:last .kbs:first",g));b.length||(b=d(".domain-section:last .kbs:first",g));return b}var h=b.closest(".domain-section"),l=b.closest(".type-section"),o=b.closest(".property-section");if(b.closest(".data-section").length){b=b.prev(".kbs");if(b.length)return b;return o.find(".kbs:first")}else if(o.length){b=o.prev(".property-section").find(".kbs:last");if(b.length)return b;return l.find(".kbs:first")}else if(l.length){b=
l.prev(".type-section").find(".kbs:last");if(b.length)return b;return h.find(".kbs:first")}else return h.get(0)===j.get(0)?e.find(".kbs:last"):h.prev(".domain-section").find(".kbs:last")};this.edit=function(){this.get_current().trigger("edit")};var w=this;d(document).unbind(".kbs").bind("keydown.kbs",function(b){var h=b.target;if(h==document.body||h==document||h==window||h==d("html")[0]){h=b.keyCode;if(h===68)b.shiftKey?q():k();else if(h===84)b.shiftKey?r():x();else if(h===80)b.shiftKey?n():z();else if(h===
74)w.next();else if(h===75)w.prev();else h===69&&w.edit()}})}})(jQuery);
(function(d,i){var g=window.propbox={init:function(j,e){e=d.extend({lang:"/lang/en"},e);if(!e.base_ajax_url)throw new Error("base_ajax_url required in propbox options");if(!e.base_static_url)throw new Error("base_static_url required in propbox options");if(!e.id)throw new Error("topic id required in propbox options");if(!e.lang)throw new Error("lang required in propbox options");g.options=e;g.kbs=new i(j);g.kbs.set_next(g.kbs.get_current(),d(".kbs:visible:first",j,true));d(".kbs",j).live("click",
function(){var a=g.kbs.get_current();g.kbs.set_next(a,d(this),true)}).live("edit",function(){var a=d(this).find(".headmenu:first").data("submenu");a&&d("li:first a:first",a).click()});g.init_menus(j)},init_menus:function(j,e){j=d(j||document);e&&d(".nicemenu",j).nicemenu();(j&&j.is(".data-row")?j:d(".data-row",j)).hover(g.row_menu_hoverover,g.row_menu_hoverout);d(".nicemenu .headmenu",j).add(d(".nicemenu .default-action",j)).click("click",function(){if(g.kbs){var a=g.kbs.get_current();a&&g.kbs.set_next(a,
d(this).parents(".kbs:first"),true)}return false})},row_menu_hoverover:function(){var j=d(this);g.row_menu_hoverover.timeout=setTimeout(function(){j.addClass("row-hover")},300)},row_menu_hoverout:function(){clearTimeout(g.row_menu_hoverover.timeout);d(this).removeClass("row-hover")},get_script:function(j,e){var a=g.get_script.cache;if(!a)a=g.get_script.cache={};var c=a[j];if(c)if(c.state===1)c.callbacks.push(e);else c.state===4&&e();else{c=a[j]={state:0,callbacks:[e]};d.ajax({url:g.options.base_static_url+
j,dataType:"script",beforeSend:function(){c.state=1},success:function(){c.state=4;d.each(c.callbacks,function(f,k){k()})},error:function(){c.state=-1}})}},prop_edit:function(j,e){var a=d(j).parents(".submenu").data("headmenu").parents(".property-section").find(".data-section .data-row:first:visible .nicemenu:first .headmenu:first a");a.length?a.click():g.prop_add(j,e);return false},prop_add:function(j,e){var a=d(j).parents(".submenu").data("headmenu").parents(".property-section");g.get_script("/propbox-edit.mf.js",
function(){g.edit.prop_add_begin(a,e)});return false},value_edit:function(j){var e=d(j).parents(".submenu").data("headmenu").parents(".data-row:first"),a=e.parents(".property-section");g.get_script("/propbox-edit.mf.js",function(){g.edit.value_edit_begin(a,e)});return false},value_delete:function(j){var e=d(j).parents(".submenu").data("headmenu").parents(".data-row:first"),a=e.parents(".property-section");g.get_script("/propbox-edit.mf.js",function(){g.edit.value_delete_begin(a,e)});return false},
close_message:function(j){d(j).parents(".row-msg:first").remove();return false}}})(jQuery,window.kbs);
(function(d,i,g){i.infinitescroll=function(a,c,f){this.element=i(f);this._create(a,c)};i.infinitescroll.defaults={loading:{finished:g,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"http://www.infinite-scroll.com/loading.gif",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:g},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,currPage:1},callback:g,debug:false,behavior:g,binder:i(d),
nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:g,dataType:"html",appendCallback:true,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:g,path:g};i.infinitescroll.prototype={_binding:function(a){var c=this,f=c.options;if(f.behavior&&this["_binding_"+f.behavior]!==g)this["_binding_"+f.behavior].call(this);else{if(a!=="bind"&&a!=="unbind"){this._debug("Binding value  "+a+" not valid");
return false}a=="unbind"?this.options.binder.unbind("smartscroll.infscr."+c.options.infid):this.options.binder[a]("smartscroll.infscr."+c.options.infid,function(){c.scroll()});this._debug("Binding",a)}},_create:function(a,c){if(!this._validate(a))return false;var f=this.options=i.extend(true,{},i.infinitescroll.defaults,a),k=i(f.nextSelector).attr("href");f.contentSelector=f.contentSelector||this.element;f.loading.selector=f.loading.selector||f.contentSelector;if(k){f.path=this._determinepath(k);
f.loading.msg=i('<div id="infscr-loading"><img alt="Loading..." src="'+f.loading.img+'" /><div>'+f.loading.msgText+"</div></div>");(new Image).src=f.loading.img;f.pixelsFromNavToBottom=i(document).height()-i(f.navSelector).offset().top;f.loading.start=f.loading.start||function(){i(f.navSelector).hide();f.loading.msg.appendTo(f.loading.selector).show(f.loading.speed,function(){beginAjax(f)})};f.loading.finished=f.loading.finished||function(){f.loading.msg.fadeOut("normal")};f.callback=function(m,q){f.behavior&&
m["_callback_"+f.behavior]!==g&&m["_callback_"+f.behavior].call(i(f.contentSelector)[0],q);c&&c.call(i(f.contentSelector)[0],q)};this._setup()}else this._debug("Navigation selector not found")},_debug:function(){if(this.options.debug)return d.console&&console.log.call(console,arguments)},_determinepath:function(a){var c=this.options;if(c.behavior&&this["_determinepath_"+c.behavior]!==g)this["_determinepath_"+c.behavior].call(this,a);else{if(c.pathParse){this._debug("pathParse manual");if(typeof c.pathParse===
"function")return c.pathParse();return c.pathParse}else if(a.match(/^(.*?)\b2\b(.*?$)/))a=a.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(a.match(/^(.*?)2(.*?$)/)){if(a.match(/^(.*?page=)2(\/.*|$)/))return a=a.match(/^(.*?page=)2(\/.*|$)/).slice(1);a=a.match(/^(.*?)2(.*?$)/).slice(1)}else if(a.match(/^(.*?page=)1(\/.*|$)/))return a=a.match(/^(.*?page=)1(\/.*|$)/).slice(1);else{this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");
c.state.isInvalidPage=true}this._debug("determinePath",a);return a}},_error:function(a){var c=this.options;if(c.behavior&&this["_error_"+c.behavior]!==g)this["_error_"+c.behavior].call(this,a);else{if(a!=="destroy"&&a!=="end")a="unknown";this._debug("Error",a);a=="end"&&this._showdonemsg();c.state.isDone=true;c.state.currPage=1;c.state.isPaused=false;this._binding("unbind")}},_loadcallback:function(a,c){var f=this.options,k=this.options.callback,m=f.state.isDone?"done":!f.appendCallback?"no-append":
"append";if(f.behavior&&this["_loadcallback_"+f.behavior]!==g)this["_loadcallback_"+f.behavior].call(this,a,c);else{switch(m){case "done":this._showdonemsg();return false;case "no-append":if(f.dataType=="html"){c="<div>"+c+"</div>";c=i(c).find(f.itemSelector)}break;case "append":var q=a.children();if(q.length==0)return this._error("end");for(m=document.createDocumentFragment();a[0].firstChild;)m.appendChild(a[0].firstChild);this._debug("contentSelector",i(f.contentSelector)[0]);i(f.contentSelector)[0].appendChild(m);
c=q.get();break}f.loading.finished.call(i(f.contentSelector)[0],f);if(f.animate){m=i(d).scrollTop()+i("#infscr-loading").height()+f.extraScrollPx+"px";i("html,body").animate({scrollTop:m},800,function(){f.state.isDuringAjax=false})}if(!f.animate)f.state.isDuringAjax=false;k(this,c)}},_nearbottom:function(){var a=this.options,c=0+i(document).height()-a.binder.scrollTop()-i(d).height();if(a.behavior&&this["_nearbottom_"+a.behavior]!==g)this["_nearbottom_"+a.behavior].call(this);else{this._debug("math:",
c,a.pixelsFromNavToBottom);return c-a.bufferPx<a.pixelsFromNavToBottom}},_pausing:function(a){var c=this.options;if(c.behavior&&this["_pausing_"+c.behavior]!==g)this["_pausing_"+c.behavior].call(this,a);else{a!=="pause"&&a!=="resume"&&a!==null&&this._debug("Invalid argument. Toggling pause value instead");switch(a&&(a=="pause"||a=="resume")?a:"toggle"){case "pause":c.state.isPaused=true;break;case "resume":c.state.isPaused=false;break;case "toggle":c.state.isPaused=!c.state.isPaused;break}this._debug("Paused",
c.state.isPaused);return false}},_setup:function(){var a=this.options;if(a.behavior&&this["_setup_"+a.behavior]!==g)this["_setup_"+a.behavior].call(this);else{this._binding("bind");return false}},_showdonemsg:function(){var a=this.options;if(a.behavior&&this["_showdonemsg_"+a.behavior]!==g)this["_showdonemsg_"+a.behavior].call(this);else{a.loading.msg.find("img").hide().parent().find("div").html(a.loading.finishedMsg).animate({opacity:1},2E3,function(){i(this).parent().fadeOut("normal")});a.errorCallback.call(i(a.contentSelector)[0],
"done")}},_validate:function(a){for(var c in a){if(c.indexOf&&c.indexOf("Selector")>-1&&i(a[c]).length===0){this._debug("Your "+c+" found no elements.");return false}return true}},bind:function(){this._binding("bind")},destroy:function(){this.options.state.isDestroyed=true;return this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},retrieve:function(a){var c=this,f=c.options,k=this._determinepath(k),m,q,t,x;a=a||null;beginAjax=function(p){p.state.currPage++;
c._debug("heading into ajax",k);m=i(p.contentSelector).is("table")?i("<tbody/>"):i("<div/>");q=k.join(p.state.currPage);t=p.dataType=="html"||p.dataType=="json"?p.dataType:"html+callback";if(p.appendCallback&&p.dataType=="html")t+="+callback";switch(t){case "html+callback":c._debug("Using HTML via .load() method");m.load(q+" "+p.itemSelector,null,function(r){c._loadcallback(m,r)});break;case "html":case "json":c._debug("Using "+t.toUpperCase()+" via $.ajax() method");i.ajax({url:q,dataType:p.dataType,
complete:function(r,u){(x=typeof r.isResolved!=="undefined"?r.isResolved():u==="success"||u==="notmodified")?c._loadcallback(m,r.responseText):c._error("end")}});break}};if(f.behavior&&this["retrieve_"+f.behavior]!==g)this["retrieve_"+f.behavior].call(this,a);else{if(f.state.isDestroyed){this._debug("Instance is destroyed");return false}f.state.isDuringAjax=true;f.loading.start.call(i(f.contentSelector)[0],f)}},scroll:function(){var a=this.options,c=a.state;if(a.behavior&&this["scroll_"+a.behavior]!==
g)this["scroll_"+a.behavior].call(this);else c.isDuringAjax||c.isInvalidPage||c.isDone||c.isDestroyed||c.isPaused||this._nearbottom()&&this.retrieve()},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(a){if(i.isPlainObject(a))this.options=i.extend(true,this.options,a)}};i.fn.infinitescroll=function(a,c){switch(typeof a){case "string":var f=Array.prototype.slice.call(arguments,1);this.each(function(){var k=i.data(this,"infinitescroll");if(!k)return false;
if(!i.isFunction(k[a])||a.charAt(0)==="_")return false;k[a].apply(k,f)});break;case "object":this.each(function(){var k=i.data(this,"infinitescroll");k?k.update(a):i.data(this,"infinitescroll",new i.infinitescroll(a,c,this))});break}return this};var j=i.event,e;j.special.smartscroll={setup:function(){i(this).bind("scroll",j.special.smartscroll.handler)},teardown:function(){i(this).unbind("scroll",j.special.smartscroll.handler)},handler:function(a,c){var f=this,k=arguments;a.type="smartscroll";e&&
clearTimeout(e);e=setTimeout(function(){i.event.handle.apply(f,k)},c==="execAsap"?0:100)}};i.fn.smartscroll=function(a){return a?this.bind("smartscroll",a):this.trigger("smartscroll",["execAsap"])}})(window,jQuery);
(function(d,i,g){var j=i.sameas={init:function(){d(".column.nav").collapse_module({modules:".module",column:".section"});d(":text[name=creator]").suggest(i.suggest_options.any("type:/type/user")).bind("fb-select",function(e,a){d(this).val(a.id).parents("form:first").submit()});g.init_menus();d(".infinitescroll > tbody").each(function(){j.init_infinitescroll(d(this))})},infid:0,init_infinitescroll:function(e){if(e.attr("data-next")){var a=e.next("tfoot").find(".infinitescroll-next");e.infinitescroll({loading:{msgText:"Fetching more links",
img:i.h.static_url("lib/template/img/horizontal-loader.gif")},nextSelector:a,navSelector:a,dataType:"json",pathParse:function(){return[a[0].href+"&"+d.param({next:e.attr("data-next")})+"&page=",""]},appendCallback:false,infid:j.infid++},function(c){c=JSON.parse(c);var f=d(c.result.html);if(c=f.attr("data-next")){f=d(">tr",f);e.append(f);f.each(function(){g.init_menus(this,true)});e.attr("data-next",c);c=d(">tr",e).length;f=e.parent("table");var k=f.prev(".table-title").find("[name=infinitescroll-count]");
d(".number",k).attr("data-value",c).text(c);f.trigger("update")}else(c=e.data("infinitescroll"))&&c.unbind()});d(window).trigger("scroll")}else e.next("tfoot").remove()},add_key:function(e,a){var c=d(this);i.get_script(i.h.static_url("sameas-edit.mf.js"),function(){j.edit.add_key_begin(c,a)});return false},edit_key:function(e,a){var c=d(e).parents(".submenu").data("headmenu").parents(".data-row:first");i.get_script(i.h.static_url("sameas-edit.mf.js"),function(){j.edit.edit_key_begin(c,a)});return false},
delete_key:function(e,a){var c=d(e).parents(".submenu").data("headmenu").parents(".data-row:first");i.get_script(i.h.static_url("sameas-edit.mf.js"),function(){j.edit.delete_key_begin(c,a)});return false}};d(j.init)})(jQuery,window.freebase,window.propbox);
