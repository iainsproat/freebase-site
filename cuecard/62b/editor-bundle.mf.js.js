
/*
 * Copyright 2010, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
var CodeMirrorConfig=window.CodeMirrorConfig||{},CodeMirror=function(){function b(e,g){for(var h in g)e.hasOwnProperty(h)||(e[h]=g[h])}function a(e,g){for(var h=0;h<e.length;h++)g(e[h])}function d(e,g){var h=document.createElement("DIV"),l=document.createElement("DIV");h.style.position="absolute";h.style.height="100%";if(h.style.setExpression)try{h.style.setExpression("height","this.previousSibling.offsetHeight + 'px'")}catch(o){}h.style.top="0px";h.style.left="0px";h.style.overflow="hidden";e.appendChild(h);
l.className="CodeMirror-line-numbers";h.appendChild(l);l.innerHTML="<div>"+g+"</div>";return h}function c(e){if(typeof e.parserfile=="string")e.parserfile=[e.parserfile];if(typeof e.basefiles=="string")e.basefiles=[e.basefiles];if(typeof e.stylesheet=="string")e.stylesheet=[e.stylesheet];var g=['<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>'];g.push('<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>');a(e.stylesheet,function(h){g.push('<link rel="stylesheet" type="text/css" href="'+
h+'"/>')});a(e.basefiles.concat(e.parserfile),function(h){/^https?:/.test(h)||(h=e.path+h);g.push('<script type="text/javascript" src="'+h+(e.noScriptCaching?"?nocache="+(new Date).getTime().toString(16):"")+'"><\/script>')});g.push('</head><body style="border-width: 0;" class="editbox" spellcheck="'+(e.disableSpellcheck?"false":"true")+'"></body></html>');return g.join("")}function j(e,g){this.options=g=g||{};b(g,CodeMirrorConfig);if(g.dumbTabs)g.tabMode="spaces";else if(g.normalTab)g.tabMode="default";
var h=this.frame=document.createElement("IFRAME");if(g.iframeClass)h.className=g.iframeClass;h.frameBorder=0;h.style.border="0";h.style.width="100%";h.style.height="100%";h.style.display="block";var l=this.wrapping=document.createElement("DIV");l.style.position="relative";l.className="CodeMirror-wrapping";l.style.width=g.width;l.style.height=g.height=="dynamic"?g.minHeight+"px":g.height;var o=this.textareaHack=document.createElement("TEXTAREA");l.appendChild(o);o.style.position="absolute";o.style.left=
"-10000px";o.style.width="10px";h.CodeMirror=this;if(g.domain&&f){this.html=c(g);h.src="javascript:(function(){document.open();"+(g.domain?'document.domain="'+g.domain+'";':"")+"document.write(window.frameElement.CodeMirror.html);document.close();})()"}else h.src="javascript:;";e.appendChild?e.appendChild(l):e(l);l.appendChild(h);if(g.lineNumbers)this.lineNumbers=d(l,g.firstLineNumber);this.win=h.contentWindow;if(!g.domain||!f){this.win.document.open();this.win.document.write(c(g));this.win.document.close()}}
b(CodeMirrorConfig,{stylesheet:[],path:"",parserfile:[],basefiles:["util.js","stringstream.js","select.js","undo.js","editor.js","tokenize.js"],iframeClass:null,passDelay:200,passTime:50,lineNumberDelay:200,lineNumberTime:50,continuousScanning:false,saveFunction:null,onChange:null,undoDepth:50,undoDelay:800,disableSpellcheck:true,textWrapping:true,readOnly:false,width:"",height:"300px",minHeight:100,autoMatchParens:false,parserConfig:null,tabMode:"indent",enterMode:"indent",electricChars:true,reindentOnLoad:false,
activeTokens:null,cursorActivity:null,lineNumbers:false,firstLineNumber:1,indentUnit:2,domain:null,noScriptCaching:false});var f=document.selection&&window.ActiveXObject&&/MSIE/.test(navigator.userAgent);j.prototype={init:function(){this.options.initCallback&&this.options.initCallback(this);this.options.lineNumbers&&this.activateLineNumbers();this.options.reindentOnLoad&&this.reindent();this.options.height=="dynamic"&&this.setDynamicHeight()},getCode:function(){return this.editor.getCode()},setCode:function(e){this.editor.importCode(e)},
selection:function(){this.focusIfIE();return this.editor.selectedText()},reindent:function(){this.editor.reindent()},reindentSelection:function(){this.focusIfIE();this.editor.reindentSelection(null)},focusIfIE:function(){this.win.select.ie_selection&&this.focus()},focus:function(){this.win.focus();this.editor.selectionSnapshot&&this.win.select.setBookmark(this.win.document.body,this.editor.selectionSnapshot)},replaceSelection:function(e){this.focus();this.editor.replaceSelection(e);return true},replaceChars:function(e,
g,h){this.editor.replaceChars(e,g,h)},getSearchCursor:function(e,g,h){return this.editor.getSearchCursor(e,g,h)},undo:function(){this.editor.history.undo()},redo:function(){this.editor.history.redo()},historySize:function(){return this.editor.history.historySize()},clearHistory:function(){this.editor.history.clear()},grabKeys:function(e,g){this.editor.grabKeys(e,g)},ungrabKeys:function(){this.editor.ungrabKeys()},setParser:function(e,g){this.editor.setParser(e,g)},setSpellcheck:function(e){this.win.document.body.spellcheck=
e},setStylesheet:function(e){if(typeof e==="string")e=[e];for(var g={},h={},l=this.win.document.getElementsByTagName("link"),o=0,p;p=l[o];o++)if(p.rel.indexOf("stylesheet")!==-1)for(var n=0;n<e.length;n++){var k=e[n];if(p.href.substring(p.href.length-k.length)===k){g[p.href]=true;h[k]=true}}for(o=0;p=l[o];o++)if(p.rel.indexOf("stylesheet")!==-1)p.disabled=!(p.href in g);for(n=0;n<e.length;n++){k=e[n];if(!(k in h)){p=this.win.document.createElement("link");p.rel="stylesheet";p.type="text/css";p.href=
k;this.win.document.getElementsByTagName("head")[0].appendChild(p)}}},setTextWrapping:function(e){if(e!=this.options.textWrapping){this.win.document.body.style.whiteSpace=e?"":"nowrap";this.options.textWrapping=e;if(this.lineNumbers){this.setLineNumbers(false);this.setLineNumbers(true)}}},setIndentUnit:function(e){this.win.indentUnit=e},setUndoDepth:function(e){this.editor.history.maxDepth=e},setTabMode:function(e){this.options.tabMode=e},setEnterMode:function(e){this.options.enterMode=e},setLineNumbers:function(e){if(e&&
!this.lineNumbers){this.lineNumbers=d(this.wrapping,this.options.firstLineNumber);this.activateLineNumbers()}else if(!e&&this.lineNumbers){this.wrapping.removeChild(this.lineNumbers);this.wrapping.style.paddingLeft="";this.lineNumbers=null}},cursorPosition:function(e){this.focusIfIE();return this.editor.cursorPosition(e)},firstLine:function(){return this.editor.firstLine()},lastLine:function(){return this.editor.lastLine()},nextLine:function(e){return this.editor.nextLine(e)},prevLine:function(e){return this.editor.prevLine(e)},
lineContent:function(e){return this.editor.lineContent(e)},setLineContent:function(e,g){this.editor.setLineContent(e,g)},removeLine:function(e){this.editor.removeLine(e)},insertIntoLine:function(e,g,h){this.editor.insertIntoLine(e,g,h)},selectLines:function(e,g,h,l){this.win.focus();this.editor.selectLines(e,g,h,l)},nthLine:function(e){for(var g=this.firstLine();e>1&&g!==false;e--)g=this.nextLine(g);return g},lineNumber:function(e){for(var g=0;e!==false;){g++;e=this.prevLine(e)}return g},jumpToLine:function(e){if(typeof e==
"number")e=this.nthLine(e);this.selectLines(e,0);this.win.focus()},currentLine:function(){return this.lineNumber(this.cursorLine())},cursorLine:function(){return this.cursorPosition().line},cursorCoords:function(e){return this.editor.cursorCoords(e)},activateLineNumbers:function(){function e(){if(p.offsetWidth!=0){for(var z=p;z.parentNode;z=z.parentNode);if(!r.parentNode||z!=document||!n.Editor){try{u()}catch(y){}clearInterval(B)}else if(r.offsetWidth!=v){v=r.offsetWidth;p.parentNode.style.paddingLeft=
v+"px"}}}function g(){r.scrollTop=m.scrollTop||k.documentElement.scrollTop||0}function h(z){var y=s.firstChild.offsetHeight;if(y!=0){y=Math.ceil((50+Math.max(m.offsetHeight,Math.max(p.offsetHeight,m.scrollHeight||0)))/y);for(var q=s.childNodes.length;q<=y;q++){var w=document.createElement("DIV");w.appendChild(document.createTextNode(z?String(q+t.options.firstLineNumber):"\u00a0"));s.appendChild(w)}}}function l(){function z(){h(true);g()}t.updateNumbers=z;var y=n.addEventHandler(n,"scroll",g,true),
q=n.addEventHandler(n,"resize",z,true);u=function(){y();q();if(t.updateNumbers==z)t.updateNumbers=null};z()}function o(){function z(D,H){E||(E=s.appendChild(document.createElement("DIV")));K&&K(E,H,D);F.push(E);F.push(D);I=E.offsetHeight+E.offsetTop;E=E.nextSibling}function y(){for(var D=0;D<F.length;D+=2)F[D].innerHTML=F[D+1];F=[]}function q(){if(!(!s.parentNode||s.parentNode!=t.lineNumbers)){for(var D=(new Date).getTime()+t.options.lineNumberTime;A;){for(z(J++,A.previousSibling);A&&!n.isBR(A);A=
A.nextSibling)for(var H=A.offsetTop+A.offsetHeight;s.offsetHeight&&H-3>I;)z("&nbsp;");if(A)A=A.nextSibling;if((new Date).getTime()>D){y();G=setTimeout(q,t.options.lineNumberDelay);return}}for(;E;)z(J++);y();g()}}function w(D){g();h(D);A=m.firstChild;E=s.firstChild;I=0;J=t.options.firstLineNumber;q()}function C(){G&&clearTimeout(G);if(t.editor.allClean())w();else G=setTimeout(C,200)}var A,E,J,I,F=[],K=t.options.styleNumbers;w(true);var G=null;t.updateNumbers=C;var L=n.addEventHandler(n,"scroll",g,
true),M=n.addEventHandler(n,"resize",C,true);u=function(){G&&clearTimeout(G);if(t.updateNumbers==C)t.updateNumbers=null;L();M()}}var p=this.frame,n=p.contentWindow,k=n.document,m=k.body,r=this.lineNumbers,s=r.firstChild,t=this,v=null,u=function(){};e();var B=setInterval(e,500);(this.options.textWrapping||this.options.styleNumbers?o:l)()},setDynamicHeight:function(){function e(){for(var m=0,r=o.lastChild,s;r&&l.isBR(r);){r.hackBR||m++;r=r.previousSibling}if(r){p=r.offsetHeight;s=r.offsetTop+(1+m)*
p}else if(p)s=m*p;if(s)g.wrapping.style.height=Math.max(k+s,g.options.minHeight)+"px"}var g=this,h=g.options.cursorActivity,l=g.win,o=l.document.body,p=null,n=null,k=2*g.frame.offsetTop;o.style.overflowY="hidden";l.document.documentElement.style.overflowY="hidden";this.frame.scrolling="no";setTimeout(e,300);g.options.cursorActivity=function(m){h&&h(m);clearTimeout(n);n=setTimeout(e,100)}}};j.InvalidLineHandle={toString:function(){return"CodeMirror.InvalidLineHandle"}};j.replace=function(e){if(typeof e==
"string")e=document.getElementById(e);return function(g){e.parentNode.replaceChild(g,e)}};j.fromTextArea=function(e,g){if(typeof e=="string")e=document.getElementById(e);g=g||{};if(e.style.width&&g.width==null)g.width=e.style.width;if(e.style.height&&g.height==null)g.height=e.style.height;if(g.content==null)g.content=e.value;if(e.form){var h=function(){e.value=p.getCode()};typeof e.form.addEventListener=="function"?e.form.addEventListener("submit",h,false):e.form.attachEvent("onsubmit",h);var l=e.form.submit,
o=function(){h();e.form.submit=l;e.form.submit();e.form.submit=o};e.form.submit=o}e.style.display="none";var p=new j(function(n){e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n)},g);p.toTextArea=function(){h();e.parentNode.removeChild(p.wrapping);e.style.display="";if(e.form){e.form.submit=l;typeof e.form.removeEventListener=="function"?e.form.removeEventListener("submit",h,false):e.form.detachEvent("onsubmit",h)}};return p};j.isProbablySupported=function(){var e;
return window.opera?Number(window.opera.version())>=9.52:/Apple Computer, Inc/.test(navigator.vendor)&&(e=navigator.userAgent.match(/Version\/(\d+(?:\.\d+)?)\./))?Number(e[1])>=3:document.selection&&window.ActiveXObject&&(e=navigator.userAgent.match(/MSIE (\d+(?:\.\d*)?)\b/))?Number(e[1])>=6:(e=navigator.userAgent.match(/gecko\/(\d{8})/i))?Number(e[1])>=20050901:(e=navigator.userAgent.match(/AppleWebKit\/(\d+)/))?Number(e[1])>=525:null};return j}();
"CueCard"in window||function(){window.CueCard={loaded:false,version:"trunk",loadingScriptsCount:0,error:null,helper:"http://www.freebase.com/cuecard/",apiProxy:{base:"http://www.freebase.com/cuecard/",read:"mqlread?",write:"mqlwrite?"},freebaseServiceUrl:"http://www.freebase.com/",params:{bundle:true,externals:true}};CueCard.findScript=function(a,d){for(var c=a.documentElement.getElementsByTagName("head"),j=0;j<c.length;j++)for(var f=c[j].firstChild;f!=null;){if(f.nodeType==1&&f.tagName.toLowerCase()==
"script"){var e=f.src;if(e.indexOf(d)>=0)return e}f=f.nextSibling}return null};CueCard.parseURLParameters=function(a,d,c){d=d||{};c=c||{};if(typeof a=="undefined")a=location.href;var j=a.indexOf("?");if(j<0)return d;a=(a+"#").slice(j+1,a.indexOf("#"));var f=a.split("&"),e;a={};var g=window.decodeURIComponent||unescape;for(j=0;e=f[j];j++){var h=e.indexOf("="),l=g(e.slice(0,h).replace(/\+/g," ")),o=a[l];if(typeof o=="undefined")o=[];else o instanceof Array||(o=[o]);a[l]=o.concat(g(e.slice(h+1).replace(/\+/g,
" ")))}for(j in a)if(a.hasOwnProperty(j)){f=c[j]||String;e=a[j];e instanceof Array||(e=[e]);d[j]=f===Boolean&&e[0]=="false"?false:f.apply(this,e)}return d};if(typeof CueCard_urlPrefix=="string")CueCard.urlPrefix=CueCard_urlPrefix;else{var b=CueCard.findScript(document,"cuecard-api.js");if(b==null){CueCard.error=new Error("Failed to derive URL prefix for CueCard API code files");return}CueCard.urlPrefix=b.substr(0,b.indexOf("cuecard-api.js"))}CueCard.parseURLParameters(b,CueCard.params,{bundle:Boolean,
externals:Boolean});CueCard.loaded=true}();
CueCard.createComposition=function(b){var a=new CueCard.QueryEditor(b.queryEditorElement,b.queryEditorOptions),d=null,c=null;if("outputPaneElement"in b){d=b.outputPaneOptions||{};d.queryEditor=a;d=new CueCard.OutputPane(b.outputPaneElement,d);a.setOutputPane(d)}if("controlPaneElement"in b){c=b.controlPaneOptions||{};c.queryEditor=a;if(d!=null)c.outputPane=d;c=new CueCard.ControlPane(b.controlPaneElement,c);a.setControlPane(c)}return{queryEditor:a,outputPane:d,controlPane:c}};
CueCard.showDialog=function(b){var a=Array.prototype.slice.call(arguments);a.shift();var d=$("<div id='dialog-"+b+"' class='modal'></div>").acre(fb.acre.apps.cuecard+"/dialogs",b,a);$(document.body).append(d.hide());d.overlay({load:true,mask:{color:"#000",loadSpeed:200,opacity:0.5},close:".modal-buttons .button",closeOnClick:false,onClose:function(){d.remove()}})};CueCard.MqlSyntax={};
CueCard.MqlSyntax.KeywordSuggestions=[{label:"*",hint:"(keyword)",qualifiedProperty:"*",result:"*"},{label:"connect",hint:"(keyword)",qualifiedProperty:"connect",result:"connect"},{label:"create",hint:"(keyword)",qualifiedProperty:"create",result:"create"},{label:"estimate-count",hint:"(keyword)",qualifiedProperty:"estimate-count",result:"estimate-count"},{label:"limit",hint:"(keyword)",qualifiedProperty:"limit",result:"limit"},{label:"optional",hint:"(keyword)",qualifiedProperty:"optional",result:"optional"},
{label:"return",hint:"(keyword)",qualifiedProperty:"return",result:"return"},{label:"sort",hint:"(keyword)",qualifiedProperty:"sort",result:"sort"}];
CueCard.MqlSyntax.KeywordValueHints={"*":{choices:[{label:"null",hint:"return a single value",result:null},{label:"[]",hint:"return a list of values",result:[],offset:1},{label:"{}",hint:"return a single object",result:{},offset:1},{label:"[{}]",hint:"return a list of objects",result:[{}],offset:2}]},connect:{choices:[{label:"insert",hint:"attach a value or object to a non-unique property, or attach the first value or object to a unique property",result:"insert"},{label:"update",hint:"attach a value or object to a unique property replacing any value or object that was previously connected",
result:"update"},{label:"replace",hint:"update unique properties and performs an insert for non-unique properties",result:"replace"},{label:"delete",hint:"detach a value or object from any property",result:"delete"}]},create:{choices:[{label:"unless_exists",hint:"look for a matching object and create it if it doesn't exist",result:"unless_exists"},{label:"unless_connected",hint:"look for a matching object connected to the parent query, and create and connect it if it doesn't exist",result:"unless_connected"},
{label:"unconditional",hint:"create the specified object without looking for a match (dangerous; ues carefully)",result:"unconditional"}]},"estimate-count":{choices:[{label:"null",hint:"(keyword)",result:null}]},limit:{html:'Use a positive integer to limit how many results to return, or <span class="cuecard-code">0</span> for all available results.'},optional:{choices:[{label:"true",hint:"(keyword)",result:true},{label:"false",hint:"(keyword)",result:false},{label:"required",hint:"(keyword)",result:"required"},
{label:"forbidden",hint:"(keyword)",result:"forbidden"}]},"return":{choices:[{label:"count",hint:"(keyword)",result:"count"},{label:"estimate-count",hint:"(keyword)",result:"estimate-count"}]},sort:{html:'Use a property name in the same query node. Prefix it with <span class="cuecard-code">-</span> to sort in descending order. For more complex ordering, see <a href="">this documentation</a>.'}};
CueCard.MqlSyntax.UniqueTopicValueSuggestions=[{label:"null",hint:"returns a single topic ID",result:null},{label:"{}",hint:"returns a single topic object with a default set of properties",result:{},offset:1},{label:'{ "id" : null, "name" : null }',hint:"returns a single topic object with id and name",result:{id:null,name:null}}];
CueCard.MqlSyntax.TopicValueSuggestions=[{label:"[]",hint:"returns a list of topic IDs or topic names",result:[],offset:1},{label:"[{}]",hint:"returns a list of topic objects with a default set of properties",result:[{}],offset:2},{label:'[{ "id" : null, "name" : null, "optional" : true, "limit" : 10 }]',hint:"returns an optional, limited list of topic objects with id and name",result:[{id:null,name:null,optional:true,limit:10}]}];
CueCard.MqlSyntax.SingleValueSuggestions=[{label:"null",hint:"returns a single value",result:null},{label:'{ "value" : null, "type" : null }',hint:"returns a value with type",result:{value:null,type:null}}];CueCard.MqlSyntax.UniqueStringLiteralValueSuggestions=[{label:"null",hint:"returns a single string",result:null},{label:'{ "value" : null, "lang" : null, "optional" : true }',hint:"returns a single string with more options",result:{value:null,lang:null,optional:true}}];
CueCard.MqlSyntax.StringLiteralValueSuggestions=[{label:"[]",hint:"returns a list of strings",result:null},{label:'[{ "value" : null, "lang" : null, "optional" : true }]',hint:"returns a list of strings with more options",result:[{value:null,lang:null,optional:true}]}];CueCard.MqlSyntax.UniqueLiteralValueSuggestions=[{label:"null",hint:"returns a single value",result:null},{label:'{ "value" : null, "optional" : true }',hint:"returns a single value with more options",result:{value:null,optional:true}}];
CueCard.MqlSyntax.LiteralValueSuggestions=[{label:"[]",hint:"returns a list of values",result:null},{label:'[{ "value" : null, "optional" : true }]',hint:"returns a list of values with more options",result:[{value:null,optional:true}]}];CueCard.SerializingContext=function(b){this._parent=b;this._root=b==null?this:b.getRoot();this._properties={}};
CueCard.SerializingContext.prototype={getProperty:function(b){return b in this._properties?this._properties[b]:this._parent!=null?this._parent.getProperty(b):null},setProperty:function(b,a){this._properties[b]=a},getRoot:function(){return this._root},getRootProperty:function(b){return this.getRoot().getProperty(b)},setRootProperty:function(b,a){return this.getRoot().setProperty(b,a)},create:function(){return new SerializingContext(this)}};
CueCard.IndentWriter=function(b){this._context=b;this._stream=b.getProperty("stream")};
CueCard.IndentWriter.prototype={appendLineBreak:function(){this._stream.append("\n")},appendIndent:function(){for(var b=this._context.getRootProperty("indentLevel"),a=this._context.getRootProperty("indentString"),d=0;d<b;d++)this._stream.append(a)},indent:function(){this._context.setRootProperty("indentLevel",this._context.getRootProperty("indentLevel")+1)},unindent:function(){this._context.setRootProperty("indentLevel",this._context.getRootProperty("indentLevel")-1)},append:function(b){this._stream.append(b)}};
(function(){function b(e){return/["\\\x00-\x1f]/.test(e)?e.replace(/([\x00-\x1f\\"])/g,function(g,h){var l=j[h];if(l)return l;l=h.charCodeAt();return"\\u00"+Math.floor(l/16).toString(16)+(l%16).toString(16)}):e}function a(e){return e!=null&&typeof e=="object"&&!(e instanceof Array)&&!("__identifier__"in e)}function d(e){for(var g in e)if(e.hasOwnProperty(g))return true;return false}function c(e){return e.length==0||e.length==1&&a(e[0])&&!d(e[0])}var j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f",
"\r":"\\r",'"':'\\"',"'":"\\'","\\":"\\\\"},f=CueCard.jsonize=function(e,g){g=g?g:{};var h="",l="quoteAllFieldNames"in g?g.quoteAllFieldNames:true,o="variables"in g?g.variables:{},p="resolveVariables"in g?g.resolveVariables:false;if("context"in g)var n=new CueCard.SerializingContext(g.context);else{var k="indentCount"in g?g.indentCount:4,m="";for(n=0;n<k;n++)m+=" ";n=new CueCard.SerializingContext(null);n.setProperty("indentCount",k);n.setProperty("indentString",m);n.setProperty("indentLevel",0);
n.setProperty("stream",{append:function(r){h+=r}})}n.setProperty("omitWhitespace","omitWhitespace"in g?g.omitWhitespace:false);n.setProperty("maxFieldLength","maxFieldLength"in g?g.maxFieldLength:15);n.setProperty("breakLines","breakLines"in g?g.breakLines:true);n.setProperty("alignFieldValues","alignFieldValues"in g?g.alignFieldValues:true);n.setProperty("collapseSingleObjectArray","collapseSingleObjectArray"in g?g.collapseSingleObjectArray:true);n.setProperty("variables",o);n.setProperty("resolveVariables",
p);n.setProperty("encodeJavascriptString","encodeJavascriptString"in g?g.encodeJavascriptString:b);n.setRootProperty("fieldNameEncoder",{_m:{},encode:function(r){if(r in this._m)return this._m[r];else{var s=b(r);return this._m[r]=s=l||/\W/.test(s)?'"'+s+'"':s}}});n.setProperty("path",[]);n.setRootProperty("contextualize","contextualize"in g?g.contextualize:function(r){return r});o=new CueCard.IndentWriter(n);f.converters.anything(e,n,o);return h};f.converters={anything:function(e,g,h){if(e==null)f.converters["null"](e,
g,h);else if(e instanceof Array)f.converters.array(e,g,h);else e instanceof Object?f.converters.object(e,g,h):f.converters[typeof e](e,g,h)},array:function(e,g,h){var l=g.getProperty("omitWhitespace"),o=g.getProperty("breakLines");if(e.length==0)h.append("[]");else{if(e.length==1)if(a(e[0]))if(d(e[0])){if(g.getProperty("collapseSingleObjectArray")){h.append("[");var p=e[0];f.converters.object(p,g,h);h.append("]");return}}else{h.append("[{}]");return}h.append("[");if(o){h.appendLineBreak();h.indent()}else l||
h.append(" ");for(var n=e.length,k=0;k<n;k++){p=e[k];var m=f.converters[p==null?"null":typeof p];if(m){o&&h.appendIndent();m(p,g,h);k<n-1&&h.append(",");if(o)h.appendLineBreak();else l||h.append(" ")}}if(o){h.unindent();h.appendIndent()}h.append("]")}},"boolean":function(e,g,h){h.append(String(e))},"null":function(e,g,h){h.append("null")},undefined:function(e,g,h){h.append("undefined")},number:function(e,g,h){h.append(isFinite(e)?String(e):"null")},object:function(e,g,h){if(e instanceof Array)f.converters.array(e,
g,h);else if("__identifier__"in e){e=e.__identifier__;var l=g.getProperty("resolveVariables"),o=g.getProperty("variables");if(e in o)if(l){l=o[e];f.converters.anything(l,g,h)}else h.append(e);else f.converters.anything(e,g,h)}else{o=g.getRootProperty("contextualize");var p=g.getProperty("path"),n=g.getProperty("omitWhitespace"),k=g.getProperty("breakLines"),m=g.getProperty("alignFieldValues");h.append("{");if(k){h.appendLineBreak();h.indent()}else n||h.append(" ");var r=0,s=0,t=g.getRootProperty("fieldNameEncoder");
for(var v in e)if(e.hasOwnProperty(v)){l=e[v];r++;if(!a(l)&&(!(l!=null&&l instanceof Array)||c(l)))s=Math.max(s,t.encode(v).length)}s=Math.min(s,g.getProperty("maxFieldLength"));for(v in e)if(e.hasOwnProperty(v)){l=e[v];var u=f.converters[l==null?"null":typeof l],B=t.encode(v);k&&h.appendIndent();h.append(B);h.append(n?":":": ");if(!n&&k&&m&&!a(l)&&(!(l!=null&&l instanceof Array)||c(l)))for(B=B.length;B<s;B++)h.append(" ");p.unshift({field:v});u(l,o(g,p),h);p.shift();r--;r>0&&h.append(",");if(k)h.appendLineBreak();
else n||h.append(" ")}if(k){h.unindent();h.appendIndent()}h.append("}")}},string:function(e,g,h){h.append('"'+g.getProperty("encodeJavascriptString")(e)+'"')},"null":function(e,g,h){h.append("null")}}})();CueCard.JsonpQueue={pendingCallIDs:{},callInProgress:0};CueCard.JsonpQueue.cancelAll=function(){CueCard.JsonpQueue.pendingCallIDs={}};
CueCard.JsonpQueue.call=function(b,a,d,c){if(CueCard.JsonpQueue.callInProgress==0)document.body.style.cursor="progress";CueCard.JsonpQueue.callInProgress++;var j=(new Date).getTime()+"x"+Math.floor(Math.random()*1E3),f=document.createElement("script");f.setAttribute("onerror","err"+j+"();");b+=(b.indexOf("?")<0?"?":"&")+"callback=cb"+j;f.setAttribute("src",b);var e=function(){CueCard.JsonpQueue.callInProgress--;if(CueCard.JsonpQueue.callInProgress==0)document.body.style.cursor="auto";c||f.parentNode.removeChild(f);
try{delete window["cb"+j];delete window["err"+j]}catch(g){window["cb"+j]=undefined;window["err"+j]=undefined}if(j in CueCard.JsonpQueue.pendingCallIDs){delete CueCard.JsonpQueue.pendingCallIDs[j];return true}else return false};window["cb"+j]=function(g){if(e())try{a(g)}catch(h){}};window["err"+j]=function(){if(e())if(typeof d=="function")try{d(b)}catch(g){}};CueCard.JsonpQueue.pendingCallIDs[j]=true;document.getElementsByTagName("head")[0].appendChild(f)};
CueCard.JsonpQueue.queryOne=function(b,a,d,c){CueCard.JsonpQueue.queryOneEnvelope({query:b},a,d,c)};CueCard.JsonpQueue.queryOneEnvelope=function(b,a,d,c){b=CueCard.jsonize({q1:b},{breakLines:false});b=CueCard.freebaseServiceUrl+"api/service/mqlread?queries="+encodeURIComponent(b);CueCard.JsonpQueue.call(b,function(j){if(j.q1.code=="/api/status/error")typeof d=="function"&&d(j.q1);else a(j.q1)},function(){typeof d=="function"&&d("Unknown")},c)};CueCard.QueryParser={};
CueCard.QueryParser.parseForContext=function(b,a,d,c){var j=new CueCard.QueryTokenizer(b,a),f=j.token(),e=[],g=CueCard.Token.Types,h=function(){f=e.length==0?j.next():e.shift()},l=function(q){if(q==0)return f;else{for(;q>e.length;)e.push(j.next());return e[q-1]}},o=function(){for(;f!=null&&(f.type==g.whitespace||f.type==g.unrecognized);)h()},p=function(q){return new CueCard.Token(CueCard.Token.Types.phantom,"",q.start,q.start)},n=function(){return f!=null?f:new CueCard.Token(CueCard.Token.Types.phantom,
"",j.index(),j.index())},k=function(){var q=new CueCard.QueryNode(CueCard.QueryNode.TYPE_MISSING);q.startToken=q.endToken=p(n());return q},m=function(q){q=new CueCard.QueryNode(CueCard.QueryNode.TYPE_NONTERMINAL);q.startToken=f;for(f!=null&&f.type==g.delimiter&&f.content=="{"&&h();f!=null;){o();if(f==null)break;var w=null,C=null,A=null;if(f.type==g.identifier){w=f.content;C=f;h();o()}else if(f.type==g.stringLiteral){w=f.content.replace(/^['"]/,"").replace(/['"]$/,"");C=f;h();o()}else C=p(f);if(f!=
null&&f.type==g.delimiter&&(f.content==":"||f.content==";")){h();o()}if(f!=null)A=t(false);if(w!=null||A!=null){w=new CueCard.QueryNodeLink(w!=null?w:"",C);w.value=A!=null?A:k();q.links.push(w)}o();if(f==null||f.type==g.delimiter&&(f.content=="}"||f.content=="]"))break;f.type==g.delimiter&&f.content==","&&h()}if(f!=null&&f.type==g.delimiter&&f.content=="}"){q.endToken=f;h()}if(q.endToken==null)q.endToken=n();return q},r=function(){var q=new CueCard.QueryNode(CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY);
q.startToken=f;q.elements=[];for(f!=null&&f.type==g.delimiter&&f.content=="["&&h();f!=null;){o();if(f==null||f.type==g.delimiter&&f.content=="]")break;q.elements.push(m());o();f!=null&&f.type==g.delimiter&&f.content==","&&h()}if(f!=null&&f.type==g.delimiter&&f.content=="]"){q.endToken=f;h()}if(q.endToken==null)q.endToken=n();return q},s=function(){for(var q=1,w;(w=l(q))!=null&&(w.type==g.whitespace||w.type==g.unrecognized);)q++;if(w!=null)if(w.type==g.delimiter&&w.content=="{")return r();else if(w.type==
g.identifier||w.type==g.stringLiteral){for(q++;(w=l(q))!=null&&(w.type==g.whitespace||w.type==g.unrecognized);)q++;if(w!=null&&w.type==g.delimiter&&w.content==":")return r()}q=new CueCard.QueryNode(CueCard.QueryNode.TYPE_TERMINAL);q.startToken=f;q.isArray=true;q.value=[];for(f!=null&&f.type==g.delimiter&&f.content=="["&&h();f!=null;){o();if(f==null||f.type==g.delimiter&&f.content=="]")break;w=t(false);if(w==null)break;q.value.push(w);o();f!=null&&f.type==g.delimiter&&f.content==","&&h()}if(f!=null&&
f.type==g.delimiter&&f.content=="]"){q.endToken=f;h()}if(q.endToken==null)q.endToken=n();return q},t=function(q){o();if(f==null)q=k();else{if(f.type==g.delimiter)q=f.content=="["?s():f.content=="{"?m():k();else{if(q)q=r();else a:{q=new CueCard.QueryNode(CueCard.QueryNode.TYPE_TERMINAL);q.startToken=q.endToken=f;q.isArray=false;if(f.type==g.numberLiteral)q.value=parseFloat(f.content);else if(f.type==g.stringLiteral)q.value=f.content.replace(/^['"]/,"").replace(/['"]$/,"");else if(f.type==g.booleanLiteral)q.value=
f.content=="true"||f.content=="True";else if(f.type==g.nullLiteral)q.value=null;else if(f.type==g.delimiter){q=null;break a}else q.value=f.content;h();q=q}q=q}q=q}return q},v=function(q){return d<q.start.line||d==q.start.line&&c<=q.start.col},u=function(q){return d>q.start.line||d==q.start.line&&c>=q.start.col},B=function(q){return d<q.end.line||d==q.end.line&&c<=q.end.col};v=function(q){return d<q.start.line||d==q.start.line&&c<=q.start.col};var z=function(q){return q.startToken==q.endToken?u(q.startToken)&&
B(q.startToken):u(q.startToken)&&v(q.endToken)},y=function(q,w){if(q.type==CueCard.QueryNode.TYPE_TERMINAL)if(q.isArray){for(var C=0;C<q.value.length;C++){var A=q.value[C];if(v(A.startToken)){w.push({child:C,relative:"before",node:q});return}else if(z(A)){w.push({child:C,relative:"inside",node:q});y(A,w);return}}w.push({child:q.value.length,relative:"before",node:q})}else w.push({token:q.startToken,node:q,offset:c-q.startToken.start.col});else if(q.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY){for(C=
0;C<q.elements.length;C++){A=q.elements[C];if(v(A.startToken)){w.push({child:C,relative:"before",node:q});return}else if(z(A)){w.push({child:C,relative:"inside",node:q});y(A,w);return}}w.push({child:q.elements.length,relative:"before",node:q})}else if(q.type==CueCard.QueryNode.TYPE_NONTERMINAL){for(C=0;C<q.links.length;C++){A=q.links[C];if(v(A.token)){w.push({child:C,relative:"before",node:q});return}else if(B(A.token)){w.push({child:C,relative:"path",node:q,offset:c-A.token.start.col});return}else if(u(A.value.startToken)){if(B(A.value.endToken)){w.push({child:C,
relative:"inside",node:q});y(A.value,w);return}}else{w.push({child:C,relative:"space",node:q});return}}w.push({child:q.links.length,relative:"before",node:q})}else w.push({token:q.startToken,node:q})};o();b={model:t(true),context:[]};y(b.model,b.context);return b};CueCard.QueryTokenizer=function(b,a){this._text=b+" ";this._maxIndex=b.length;this._index=a;this._col=this._line=0;this.next()};CueCard.QueryTokenizer.prototype.token=function(){return this._token};
CueCard.QueryTokenizer.prototype.index=function(){return this._index};CueCard.QueryTokenizer._whitespaces=" \t\r\n";
CueCard.QueryTokenizer.prototype.next=function(){this._token=null;if(this._index<this._maxIndex){var b=this._text.charAt(this._index),a=this._text.charAt(this._index+1),d=this,c=function(){d._index++;d._col++},j=function(){return new CueCard.TokenPos(d._index,d._line,d._col)},f=function(){var p=j();c();return p},e=function(p,n,k){var m=j();d._pos=m;d._token=new CueCard.Token(p,k||d._text.substring(n.offset,m.offset),n,m)},g=function(){for(var p=j();d._index<d._maxIndex;){var n=d._text.charAt(d._index);
if(CueCard.QueryTokenizer._whitespaces.indexOf(n)<0)break;if(n=="\n"){d._line++;d._col=0}else d._col++;d._index++}e(CueCard.Token.Types.whitespace,p)},h=function(p){var n=j();b=="u"&&c();c();for(var k="";d._index<d._maxIndex;){b=d._text.charAt(d._index);if(b==p){c();break}else if(b=="\r"||b=="\n")break;if(b=="\\"){c();k+=d._text.charAt(d._index)}else k+=b;c()}e(CueCard.Token.Types.stringLiteral,n,k)},l=function(){var p=j();if(b=="+")c();else b=="-"&&c();for(;d._index<d._maxIndex&&CueCard.QueryTokenizer._isDigit(d._text.charAt(d._index));)c();
if(d._index<d._maxIndex&&d._text.charAt(d._index)==".")for(c();d._index<d._maxIndex&&CueCard.QueryTokenizer._isDigit(d._text.charAt(d._index));)c();if(d._index<d._maxIndex&&d._text.charAt(d._index)=="e"){c();b=d._text.charAt(d._index);if(b=="+"||b=="-")c();for(;d._index<d._maxIndex&&CueCard.QueryTokenizer._isDigit(d._text.charAt(d._index));)c()}e(CueCard.Token.Types.numberLiteral,p)},o=function(){for(var p=j();d._index<d._maxIndex&&CueCard.QueryTokenizer._identifierPrefix.indexOf(d._text.charAt(d._index))>=
0;)c();var n=false;if(d._index<d._maxIndex-2){var k=d._text.substr(d._index,2);if(k==">="||k=="<="||k=="~="){c();c();n=true}}if(!n&&d._index<d._maxIndex-1){k=d._text.substr(d._index,1);if(k==">"||k=="<")c()}n=j();k=d._text.substring(p.offset,n.offset);d._pos=n;d._token=k=="null"||k=="None"?new CueCard.Token(CueCard.Token.Types.nullLiteral,k,p,n):k=="true"||k=="True"||k=="false"||k=="False"?new CueCard.Token(CueCard.Token.Types.booleanLiteral,k,p,n):new CueCard.Token(CueCard.Token.Types.identifier,
k,p,n)};if(CueCard.QueryTokenizer._whitespaces.indexOf(b)>=0)g();else if("[{}],:".indexOf(b)>=0)e(CueCard.Token.Types.delimiter,f());else if(b=='"'||b=="'")h(b);else if(b=="u"&&(a=='"'||a=="'"))h(a);else if(b=="-"||b=="+"||CueCard.QueryTokenizer._isDigit(b))l();else if(b=="*")e(CueCard.Token.Types.identifier,f());else CueCard.QueryTokenizer._identifierPrefix.indexOf(b)>=0?o():e(CueCard.Token.Types.unrecognized,f())}return this._token};
CueCard.QueryTokenizer._isDigit=function(b){return"0123456789".indexOf(b)>=0};CueCard.QueryTokenizer._identifierPrefix="#!/_-abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";CueCard.TokenPos=function(b,a,d){this.offset=b;this.line=a;this.col=d};CueCard.Token=function(b,a,d,c){this.type=b;this.content=a;this.start=d;this.end=c};CueCard.Token.Types={unrecognized:-1,phantom:0,whitespace:1,delimiter:2,nullLiteral:3,numberLiteral:4,stringLiteral:5,booleanLiteral:6,identifier:7};
CueCard.QueryNode=function(b){this.type=b;this.value=null;this.isArray=false;this.endToken=this.startToken=null;this.links=[]};CueCard.QueryNode.TYPE_MISSING=-1;CueCard.QueryNode.TYPE_TERMINAL=0;CueCard.QueryNode.TYPE_NONTERMINAL=1;CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY=2;CueCard.QueryNode.prototype.toQueryJson=function(b){b=b||{};if(!("qualifyAllProperties"in b))b.qualifyAllProperties=false;if(!("excludeChild"in b))b.excludeChild=-1;return this._toQueryJson(b)};
CueCard.QueryNode.prototype._toQueryJson=function(b){var a={qualifyAllProperties:b.qualifyAllProperties,excludeChild:-1};if(this.type==CueCard.QueryNode.TYPE_TERMINAL)if(this.isArray){b=[];for(var d=0;d<this.value.length;d++){var c=this.value[d];b.push(c!=null?c._toQueryJson(a):null)}return b}else return this.startToken.type==CueCard.Token.Types.identifier?{__identifier__:this.value}:this.value;else if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY){b=[];for(d=0;d<this.elements.length;d++)b.push(this.elements[d]._toQueryJson(a));
return b}else if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL){c={};var j=false,f=0;for(d=0;d<this.links.length;d++)if(d!=b.excludeChild){var e=this.links[d];if(e.path.length>0){var g=e.getPath(b.qualifyAllProperties);if(g in c&&e.namespace.length==0)for(;g in c;){e.namespace="ns"+f++ +":";g=e.getPath(b.qualifyAllProperties)}var h=e.value!=null?e.value._toQueryJson(a):null;c[g]=h;if(e.getUnnamespacedQualifiedPath()=="/type/object/type"&&h!=null&&(!(h instanceof Array)||h.length>0))j=true}}if(!j&&
"expectedTypes"in b&&b.expectedTypes.length>0){a=[];for(d=0;d<b.expectedTypes.length;d++){j=b.expectedTypes[d];j!="/type/object"&&j!="/common/topic"&&a.push(j)}if(a.length==1)c.type=a[0];else if(a.length>1)c["type|="]=a}return c}else return null};CueCard.QueryNode.isMqlKeyword=function(b){switch(b){case "limit":case "sort":case "*":case "return":case "count":case "estimate-count":case "optional":case "create":case "connect":return true}return false};
CueCard.QueryNode.prototype.getDeclaredTypes=function(b){var a=null;if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL)a=this.links;else if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY)a=this.elements[0].links;if(a!=null)for(var d=0;d<a.length;d++){var c=a[d];c.qualifiedProperty=="/type/object/type"&&!c.reverse&&c.getValuesOfType(b,"string")}};
CueCard.QueryNode.prototype.getDeclaredIDs=function(b){var a=null;if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL)a=this.links;else if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY)a=this.elements[0].links;if(a!=null)for(var d=0;d<a.length;d++){var c=a[d];c.qualifiedProperty=="/type/object/id"&&!c.reverse&&c.getValuesOfType(b,"string")}};
CueCard.QueryNode.prototype.getDeclaredGUIDs=function(b){var a=null;if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL)a=this.links;else if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY)a=this.elements[0].links;if(a!=null)for(var d=0;d<a.length;d++){var c=a[d];c.qualifiedProperty=="/type/object/guid"&&!c.reverse&&c.getValuesOfType(b,"string")}};CueCard.QueryNode.prototype.qualifyAllProperties=function(b){this._qualifyAllProperties([],{},b)};
CueCard.QueryNode.prototype._qualifyAllProperties=function(b,a,d){if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL){for(var c=[],j=false,f=[],e=[],g=[],h=0;h<this.links.length;h++){var l=this.links[h];if(l.value.type==CueCard.QueryNode.TYPE_NONTERMINAL||l.value.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY||l.value.type==CueCard.QueryNode.TYPE_MISSING)c.push(l);if(l.qualifiedProperty=="/type/object/type"&&!l.reverse)l.getValuesOfType(f,"string");else if(l.qualifiedProperty=="/type/object/id"&&!l.reverse)l.getValuesOfType(e,
"string");else if(l.qualifiedProperty=="/type/object/guid"&&!l.reverse)l.getValuesOfType(g,"string");else if(l.qualifiedProperty!=null&&l.qualifiedProperty.length>0){var o=l.qualifiedProperty.lastIndexOf("/");o>0&&f.push(l.qualifiedProperty.substr(0,o))}else CueCard.QueryNode.isMqlKeyword(l.property)||(j=true)}f=f.concat(b);l={};for(h=f.length-1;h>=0;h--)l[f[h]]=true;f=[];for(var p in l)f.push(p);if(!j&&c.length==0)d.onDone(a);else{var n=this;j=[];f.length>0&&j.push("t="+encodeURIComponent(f.join(",")));
e.length>0&&j.push("i="+encodeURIComponent(e.join(",")));g.length>0&&j.push("g="+encodeURIComponent(g.join(",")));f=CueCard.helper+"qualify-properties?"+j.join("&");CueCard.JsonpQueue.call(f,function(m){var r=m.properties;m=m.qualifications;for(var s=0;s<n.links.length;s++){var t=n.links[s];if(t.qualifiedProperty.length==0&&!CueCard.QueryNode.isMqlKeyword(t.property))t.qualifiedProperty=m[t.property]||t.property}for(var v in r)a[v]=r[v];(function(){if(c.length==0)d.onDone(a);else{var u=c.shift(),
B=[];if(u.qualifiedProperty in r)for(var z=r[u.qualifiedProperty].expectedTypes,y=0;y<z.length;y++)B.push(z[y].id);B.push("/common/topic");B.push("/type/object");if(u.value.type==CueCard.QueryNode.TYPE_NONTERMINAL)u.value.expectedTypes=B;else if(u.value.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY){z=u.value.elements;for(y=0;y<z.length;y++)z[y].expectedTypes=B}u.value._qualifyAllProperties(B,a,{onDone:arguments.callee,onError:d.onError})}})()},d.onError)}}else if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY){h=
0;var k=this.elements;(function(){h<k.length?k[h++]._qualifyAllProperties(b,a,{onDone:arguments.callee,onError:d.onError}):d.onDone(a)})()}else d.onDone()};CueCard.QueryNode.prototype.getCursorFromContext=function(b){return this._getCursorFromContext(b,0)};
CueCard.QueryNode.prototype._getCursorFromContext=function(b,a){var d=b[a];if(this.type==CueCard.QueryNode.TYPE_MISSING){var c=this.startToken;return{line:c.start.line,col:c.start.col}}else if(this.type==CueCard.QueryNode.TYPE_TERMINAL)if(this.isArray)if(d.relative=="inside")if(d.child<this.value.length)return this.value[d.child]._getCursorFromContext(b,a+1);else{c=this.endToken;return{line:c.start.line,col:c.start.col}}else if(d.child<this.value.length){d=this.value[d.child];c=d.startToken;return{line:c.start.line,
col:c.start.col}}else{c=this.startToken;return{line:c.end.line,col:c.end.col}}else{c=this.startToken;return{line:c.start.line,col:c.start.col+("offset"in d?d.offset:0)}}else if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY)if(d.relative=="inside")if(d.child<this.elements.length)return this.elements[d.child]._getCursorFromContext(b,a+1);else{c=this.endToken;return{line:c.start.line,col:c.start.col}}else if(d.child<this.elements.length){d=this.elements[d.child];c=d.startToken;return{line:c.start.line,
col:c.start.col}}else{c=this.startToken;return{line:c.end.line,col:c.end.col}}else if(d.relative=="inside")if(d.child<this.links.length)return this.links[d.child].value._getCursorFromContext(b,a+1);else{c=this.endToken;return{line:c.start.line,col:c.start.col}}else if(d.relative=="before")if(d.child<this.links.length){d=this.links[d.child].value;c=d.startToken;return{line:c.start.line,col:c.start.col}}else{c=this.startToken;return{line:c.end.line,col:c.end.col}}else if(d.child<this.links.length)if(d.relative==
"path"){c=this.links[d.child].token;return{line:c.start.line,col:c.start.col+("offset"in d?d.offset:0)}}else{c=this.links[d.child].value.startToken;return{line:c.start.line,col:c.start.col}}else{c=this.endToken;return{line:c.end.line,col:c.end.col}}};CueCard.QueryNode.prototype.toInsideOutQueryJson=function(b,a){var d=this;this.qualifyAllProperties({onDone:function(){a.onDone(d._toInsideOutQueryJson(b,0,null,null))},onError:a.onError})};
CueCard.QueryNode.prototype._toInsideOutQueryJson=function(b,a,d,c){if(d!=null&&!(c instanceof Array))c=[c];if(a<b.length){var j=b[a];if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL){if("child"in j&&j.relative=="inside"){var f=j.child;if(f<this.links.length){j=this.links[f];if(j.value.type==CueCard.QueryNode.TYPE_NONTERMINAL||j.value.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY){var e=j.getInverseQualifiedPath();f=this.toQueryJson({excludeChild:f});if(d!=null)if(f instanceof Array)f[0][d]=c;else f[d]=
c;return j.value._toInsideOutQueryJson(b,a+1,e,f)}}}}else if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY)if("child"in j&&j.relative=="inside"){f=j.child;if(this.elements.length>1)throw new Error("Cannot turn a query inside out if a query node has siblings");else if(f==0){b=this.elements[f]._toInsideOutQueryJson(b,a+1,d,c);return b instanceof Array?b:[b]}else return null}}b=this.toQueryJson({expectedTypes:"expectedTypes"in this?this.expectedTypes:[]});if(d!=null)if(typeof b==Array)b[0][d]=
c;else b[d]=c;return b};CueCard.QueryNode.prototype.locateInnerMostNonTerminal=function(b,a){var d=this;this.qualifyAllProperties({onDone:function(){var c=d._locateInnerMostNonTerminal(b,0);a.onDone(c!=null?c:{node:d,property:null,reverse:false})},onError:a.onError})};
CueCard.QueryNode.prototype._locateInnerMostNonTerminal=function(b,a){if(a<b.length){var d=b[a];if(this.type==CueCard.QueryNode.TYPE_NONTERMINAL){if("child"in d&&d.relative=="inside"){d=d.child;if(d<this.links.length){var c=this.links[d];if(c.value.type==CueCard.QueryNode.TYPE_NONTERMINAL||c.value.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY){d=c.value._locateInnerMostNonTerminal(b,a+1);if(d==null)d={node:c.value};if(!("property"in d)){d.property=c.qualifiedProperty;d.reverse=c.reverse}return d}}}}else if(this.type==
CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY)if("child"in d&&d.relative=="inside"){d=d.child;if(d<this.elements.length){c=this.elements[d];d=c._locateInnerMostNonTerminal(b,a+1);if(d==null)d={node:c};return d}}}return null};
CueCard.QueryNodeLink=function(b,a){this.path=b;this.token=a;this.reverse=false;this.suffix=this.qualifiedProperty=this.originalProperty=this.property=this.namespace="";this.value=null;if(b.length>0)if(b.charAt(0)=="!"){this.reverse=true;b=b.substr(1)}if(b.length>0){var d=b.indexOf(":");if(d>=0){this.namespace=b.substr(0,d+1);b=b.substr(d+1);if(b.length>0&&b.charAt(0)=="!"){this.reverse=true;b=b.substr(1)}}}if(b.length>=2){d=b.substr(b.length-2);if(d==">="||d=="<="||d=="~="){this.suffix=d;b=b.substr(0,
b.length-2)}}if(b.length>1&&this.suffix==""){d=b.substr(b.length-1);if(d=="<"||d==">"){this.suffix=d;b=b.substr(0,b.length-1)}}this.originalProperty=b;if(b.length>0)if(b.charAt(0)=="/"){this.qualifiedProperty=b;d=b.lastIndexOf("/");this.property=b.substr(d+1)}else this.property=b;if(this.qualifiedProperty=="")if(this.property=="type")this.qualifiedProperty="/type/object/type";else if(this.property=="id")this.qualifiedProperty="/type/object/id";else if(this.property=="guid")this.qualifiedProperty=
"/type/object/guid";else if(this.property=="name")this.qualifiedProperty="/type/object/name";else if(this.property=="lang")this.qualifiedProperty="/type/text/lang";else if(CueCard.QueryNode.isMqlKeyword(this.property))this.qualifiedProperty=this.property};CueCard.QueryNodeLink.prototype.getQualifiedPath=function(){return(this.reverse?"!":"")+this.namespace+this.qualifiedProperty+this.suffix};
CueCard.QueryNodeLink.prototype.getInverseQualifiedPath=function(){return(this.reverse?"":"!")+this.namespace+this.qualifiedProperty+this.suffix};CueCard.QueryNodeLink.prototype.getUnnamespacedQualifiedPath=function(){return(this.reverse?"!":"")+this.qualifiedProperty+this.suffix};CueCard.QueryNodeLink.prototype.getPath=function(b){return(this.reverse?"!":"")+this.namespace+(b&&this.qualifiedProperty.length>0?this.qualifiedProperty:this.originalProperty)+this.suffix};
CueCard.QueryNodeLink.prototype.getValuesOfType=function(b,a){var d=function(e){if(e.isArray){e=e.value;for(var g=0;g<e.length;g++){var h=e[g];h.type==CueCard.QueryNode.TYPE_TERMINAL&&h.value!=null&&typeof h.value==a&&b.push(h.value)}}else e.value!=null&&typeof e.value==a&&b.push(e.value)},c=this.value;if(c.type==CueCard.QueryNode.TYPE_TERMINAL)d(c);else if(c.type==CueCard.QueryNode.TYPE_NONTERMINAL||c.type==CueCard.QueryNode.TYPE_NONTERMINAL_ARRAY){c=c.type==CueCard.QueryNode.TYPE_NONTERMINAL?c.links:
c.elements[0].links;for(var j=0;j<c.length;j++){var f=c[j];f.qualifiedProperty=="/type/value/value"&&f.value.type==CueCard.QueryNode.TYPE_TERMINAL&&d(f.value)}}};CueCard.UI={};CueCard.UI.reportError=function(b){try{console.log(b)}catch(a){alert(b)}};CueCard.UI.createBlockingContinuations=function(b,a){return new CueCard.UI.Cont(b,a)};
CueCard.UI.Cont=function(b,a){var d=this;this._onDone=b;this._onError=a||CueCard.UI.reportError;this._progressUI=null;this._cleanedUp=this._canceled=false;this.cleanUp=function(){if(!d._cleanedUp){d._cleanedUp=true;if(d._progressUI!=null){d._progressUI.remove();d._progressUI=null}}};this.cancel=function(){if(!d._canceled){d._canceled=true;d.cleanUp()}};this.onError=function(){d.cleanUp();d._onError()};this.onDone=function(){var c=false;if(!d._canceled){c=[d];for(var j=0;j<arguments.length;j++)c.push(arguments[j]);
c=d._onDone.apply(null,c)}c||d.cleanUp()};window.setTimeout(function(){if(!d._cleanedUp)d._progressUI=$('<div class="cuecard-progress">Working...</div>').appendTo($(document.body))},300)};CueCard.UI.Cont.prototype.isCanceled=function(){return this._canceled};CueCard.UI.Cont.prototype.extend=function(b,a){this._onDone=b;this._onError=a||this._onError;return this};
CueCard.Popup=function(b,a,d,c,j){this._left=b;this._top=a;this._height=d;this._windows=c;this._handlers=j||{};this._pendingContinuations=[];this.elmt=$('<div class="cuecard-popup-container"></div>').css("top",this._top+this._height+"px").css("left",this._left+"px").appendTo("body");this._addEventHandlers()};CueCard.Popup.prototype.addPendingContinuation=function(b){this._pendingContinuations.push(b)};
CueCard.Popup.prototype.reposition=function(){var b=this.elmt.height(),a=this.elmt.width();this._top+this._height+b>=$(window).height()?this.elmt.css("top",this._top-b-5+"px"):this.elmt.css("top",this._top+this._height+"px");this._left+a>=$(window).width()?this.elmt.css("left",$(window).width()-a-25+"px"):this.elmt.css("left",this._left+"px")};CueCard.Popup.prototype.close=function(){this._remove();this._pendingContinuations=null};
CueCard.Popup.prototype.cancel=function(){if(this.elmt!=null){this._remove();this._cancelPendingContinuations();this._pendingContinuations=null}};CueCard.Popup.prototype._remove=function(){this._removeEventHandlers();this.elmt.remove();this.elmt=null};CueCard.Popup.prototype._cancelPendingContinuations=function(){for(var b=0;b<this._pendingContinuations.length;b++)try{this._pendingContinuations[b].cancel()}catch(a){}this._pendingContinuations=[]};
CueCard.Popup.prototype._addEventHandlers=function(){var b=this;this._handleKeyDown=function(j){return b._onKeyDown(j)};this._handleMouseDown=function(j){return b._onMouseDown(j)};for(var a=0;a<this._windows.length;a++){var d=this._windows[a];try{$(d.document).keydown(this._handleKeyDown).mousedown(this._handleMouseDown)}catch(c){alert("Unable to install keyup handler on codemirror window")}}};
CueCard.Popup.prototype._removeEventHandlers=function(){for(var b=0;b<this._windows.length;b++){var a=this._windows[b];try{$(a.document).unbind("keydown",this._handleKeyDown).unbind("mousedown",this._handleMouseDown)}catch(d){alert("Unable to install keyup handler on codemirror window")}}};CueCard.Popup.prototype._onKeyDown=function(b){if(b.keyCode==27){this.cancel();"onCancel"in this._handlers&&this._handlers.onCancel("key")}};
CueCard.Popup.prototype._onMouseDown=function(b){if(this.mouseEventOutsidePopup(b)){this.cancel();"onCancel"in this._handlers&&this._handlers.onCancel("mouse")}};CueCard.Popup.prototype.mouseEventOutsidePopup=function(b){if(b.currentTarget!=this.elmt[0].ownerDocument)return true;else{var a=this.elmt.offset();if(b.pageX<a.left||b.pageX>a.left+this.elmt.width()||b.pageY<a.top||b.pageY>a.top+this.elmt.height())return true}return false};
CueCard.TypeBasedTopicSuggestor=function(b,a,d,c,j){this._popup=b;this._defaultSuggestions=a;this._expectedTypes=d;this._desiredProperty=c;this._onCommit=j;this._popup.elmt.addClass("cuecard-popup-container-wide")};
CueCard.TypeBasedTopicSuggestor.prototype.getSuggestions=function(b,a){b=b.toLowerCase();if(b.length==0){for(var d=[],c=0;c<this._defaultSuggestions.length;c++)d.push(this._defaultSuggestions[c]);a(d)}else{var j=this;d=CueCard.UI.createBlockingContinuations(function(f,e){for(var g=[],h=0;h<e.result.length;h++){var l=e.result[h],o=null;if("/common/topic/image"in l&&l["/common/topic/image"]!=null&&l["/common/topic/image"].length>0)o=CueCard.freebaseServiceUrl+"api/trans/image_thumb"+l["/common/topic/image"][0].id+
"?mode=fillcrop&maxwidth=40&maxheight=40";g.push({result:l[j._desiredProperty],elmt:$('<a class="cuecard-suggestion-entry" href="javascript:{}"><table cellpadding="0" cellspacing="0"><tr valign="top"><td valign="top">'+(o==null?'<div class="cuecard-suggestion-thumbnail-empty"> </div>':'<img src="'+o+'" />')+'</td><td valign="top">'+l.name+'<div class="cuecard-suggestion-id">'+l[j._desiredProperty]+"</div></td></tr></table></a>")})}a(g)});this._popup.addPendingContinuation(d);c=CueCard.helper+"suggest-values-of-types?t="+
encodeURIComponent(this._expectedTypes.join(","))+"&q="+encodeURIComponent(b);CueCard.JsonpQueue.call(c,d.onDone,d.onError)}};CueCard.TypeBasedTopicSuggestor.prototype.commit=function(b){this._onCommit(b)};CueCard.StaticChoicesSuggestor=function(b,a){this._defaultSuggestions=b;this._onCommit=a};
CueCard.StaticChoicesSuggestor.prototype.getSuggestions=function(b,a){b=b.toLowerCase();for(var d=[],c=0;c<this._defaultSuggestions.length;c++){var j=this._defaultSuggestions[c];if(b.length==0||j.label.toLowerCase().indexOf(b)>=0)d.push(j)}a(d)};CueCard.StaticChoicesSuggestor.prototype.commit=function(b){this._onCommit(b)};CueCard.PropertySuggestor=function(b,a,d,c){this._popup=b;this._defaultSuggestions=a;this._entries=d;this._onCommit=c};
CueCard.PropertySuggestor.prototype.getSuggestions=function(b,a){b=b.toLowerCase();for(var d=[],c={},j=0;j<this._entries.length;j++){var f=this._entries[j];if(b.length==0)d.push(f);else if(f.label.toLowerCase().indexOf(b)>=0)d.push(f);else for(var e=0;e<f.expectedTypes.length;e++){var g=f.expectedTypes[e];if(g.name.toLowerCase().indexOf(b)>=0){d.push({label:f.label,hint:f.hint+" &rarr; type "+g.id,qualifiedProperty:f.qualifiedProperty,result:f.result,offset:f.offset,extent:f.extent});c[f.qualifiedProperty]=
true;break}}}for(j=0;j<this._defaultSuggestions.length;j++){f=this._defaultSuggestions[j];if(b.length==0||f.label.toLowerCase().indexOf(b)>=0)d.push(f)}if(b.length<3&&d.length>3)a(d);else{j=CueCard.UI.createBlockingContinuations(function(h,l){for(var o=0;o<l.result.length;o++){var p=l.result[o];if(!(p.id in c)&&"/type/property/schema"in p&&p["/type/property/schema"]!=null&&p["/type/property/schema"].length>0&&"key"in p&&p.key!=null&&p.key.length>0){var n="/type/property/expected_type"in p&&p["/type/property/expected_type"]!=
null?p["/type/property/expected_type"]:[],k={label:p.key[0],hint:"of type "+p["/type/property/schema"][0].id,qualifiedProperty:p.id,expectedTypes:n};CueCard.QueryEditor.setPropertySuggestionSuffix(n.length>0?n[0]:"",k,k["/type/property/unique"],'"'+p.id+'" : ');d.push(k)}}a(d)});this._popup.addPendingContinuation(j);f=CueCard.helper+"suggest-arbitrary-properties?q="+encodeURIComponent(b);CueCard.JsonpQueue.call(f,j.onDone,j.onError)}};CueCard.PropertySuggestor.prototype.commit=function(b){this._onCommit(b)};
CueCard.TypeSuggestor=function(){};CueCard.TypeSuggestor.prototype.getSuggestions=function(){};
CueCard.SuggestionController=function(b,a,d,c){this._popup=b;this._suggestor=d;this._lastText=c;this._selectedIndex=-1;this._suggestions=[];this._input=$('<input value="'+c+'" />');this._suggestionContainer=$('<div class="cuecard-suggestion-container"></div>');$(a).append($('<div class="cuecard-suggestion-input-container"></div>').append(this._input)).append(this._suggestionContainer);var j=this;this._onKeyUp=function(f){if(!f.shiftKey&&!f.metaKey&&!f.ctrlKey){if(f.keyCode==36||f.keyCode==38||f.keyCode==
40)return j._cancelEvent(f);f=j._input[0].value;if(f!=j._lastText){j._lastText=f;j._updateSuggestions()}}};this._onKeyDown=function(f){for(;!f.shiftKey&&!f.metaKey&&!f.ctrlKey;){if(f.keyCode==13||f.keyCode==9)j._commitSelectedSuggestion();else if(f.keyCode==36)j._suggestions.length>0&&j._selectSuggestion(0,true);else if(f.keyCode==38)j._selectedIndex>0&&j._selectSuggestion(j._selectedIndex-1,true);else if(f.keyCode==40)j._selectedIndex<j._suggestions.length-1&&j._selectSuggestion(j._selectedIndex+
1,true);else break;return j._cancelEvent(f)}if("onKeyDown"in j._suggestor)return j._suggestor.onKeyDown(f,j._input[0].value)};this._input.keyup(this._onKeyUp).keydown(this._onKeyDown);b=this._input[0];if(b.setSelectionRange){b.focus();b.setSelectionRange(c.length,c.length)}else if(b.createTextRange){b=b.createTextRange();b.collapse(true);b.moveEnd("character",c.length);b.moveStart("character",c.length);b.select()}this._input[0].focus();this._updateSuggestions()};
CueCard.SuggestionController.prototype._updateSuggestions=function(){this._suggestionContainer.empty();this._suggestionContainer.html('<div class="cuecard-suggestion-progress">Please wait...</div>');this._selectedIndex=-1;this._suggestions.length=0;var b=this;this._suggestor.getSuggestions(this._lastText,function(a){b._renderSuggestions(a,b._lastText)})};
CueCard.SuggestionController.prototype._renderSuggestions=function(b){var a=this._suggestionContainer;a.empty();var d=this,c=function(f,e){("elmt"in f?f.elmt:$('<a class="cuecard-suggestion-entry" href="javascript:{}">'+f.label+("hint"in f?' <span class="cuecard-suggestion-hint">'+f.hint+"</span>":"")+"</a>")).mouseover(function(){d._selectSuggestion(e,false)}).click(function(){d._commitSelectedSuggestion()}).appendTo(a)};this._suggestions=b;for(var j=0;j<b.length;j++)c(b[j],j);this._suggestions.length>
0?this._selectSuggestion(0,false):$('<div class="cuecard-suggestion-noEntryMessage">No suggestion available.<br/>Press Enter to keep what you have typed,<br/>ESC to discard it.</div>').appendTo(a);this._popup.reposition()};
CueCard.SuggestionController.prototype._selectSuggestion=function(b,a){this._selectedIndex>=0&&this._getSuggestion(this._selectedIndex).removeClass("cuecard-suggestion-selected");this._selectedIndex=b;this._getSuggestion(this._selectedIndex).addClass("cuecard-suggestion-selected");a&&this._getSuggestion(this._selectedIndex)[0].scrollIntoView(false)};
CueCard.SuggestionController.prototype._commitSelectedSuggestion=function(){this._selectedIndex>=0?this._suggestor.commit(this._suggestions[this._selectedIndex]):this._suggestor.commit(this._input[0].value)};CueCard.SuggestionController.prototype._getSuggestion=function(b){return $(this._suggestionContainer.children()[b])};CueCard.SuggestionController.prototype._cancelEvent=function(b){b.returnValue=false;b.cancelBubble=true;"preventDefault"in b&&b.preventDefault();return false};
CueCard.QueryEditor=function(b,a){this._container=b;this._options=a;this._controlPane=this._outputPane=null;this._assistKeyComboDetected=this._warnWrites=false;this._popup=null;var d=this,c="[{\n  \n}]",j=1,f=2;if("content"in a){c=a.content;f=j=0}c={basefiles:[],parserfile:[fb.acre.libs.codemirror],stylesheet:[fb.acre.libs.codemirror_css],parserConfig:{json:true},height:"100%",autoMatchParens:true,textWrapping:false,highlightActiveLine:true,readOnly:"readOnly"in a?a.readOnly:false,content:c,passDelay:100,
undoDelay:250,initCallback:function(){d._onReady();try{var e=d._editor.nthLine(j+1);d._editor.selectLines(e,f,e,f)}catch(g){}"onReady"in a&&a.onReady();a.focusOnReady&&d.focus()}};if("onChange"in a)c.onChange=a.onChange;a.codeMirror&&$.extend(c,a.codeMirror);this._overflowInput=$("<input></input>").css("position","absolute").css("left","-500px").css("top","0px").appendTo(document.body);$(this._container).acre(fb.acre.apps.cuecard+"/query-editor","query_editor",[this,c])};
CueCard.QueryEditor.nativeTypes={"/type/int":true,"/type/float":true,"/type/boolean":true,"/type/rawstring":true,"/type/uri":true,"/type/datetime":true,"/type/bytestring":true,"/type/value":true,"/type/text":true,"/type/enumeration":true};
CueCard.QueryEditor.prototype.dispose=function(){this._cancelPopup();$(this._editor._top_element).remove();this._overflowInput.remove();this._controlTopContainer.remove();this._controlBottomContainer.remove();this._iframeContainer.remove();this._iframeContainer=this._controlBottomContainer=this._controlTopContainer=this._overflowInput=this._editor=null};CueCard.QueryEditor.prototype._addCodemirror=function(b,a){this._editor=new CodeMirror(function(d){b.append(d)},a)};
CueCard.QueryEditor.prototype.setOutputPane=function(b){this._outputPane=b};CueCard.QueryEditor.prototype.getOutputPane=function(){return this._outputPane};CueCard.QueryEditor.prototype.setControlPane=function(b){this._controlPane=b};CueCard.QueryEditor.prototype.getControlPane=function(){return this._controlPane};CueCard.QueryEditor.prototype.focus=function(){this._editor.focus();return this};
CueCard.QueryEditor.prototype.content=function(b){if(b==undefined)return this._editor.getCode();else{if(this._editor.getCode()!=b){var a=this._editor.editor;a.history.push(null,null,this._editor.win.fixSpaces(b.replace(/\t/g,"  ").replace(/\u00a0/g," ")).replace(/\r\n?/g,"\n").split("\n"));a.addDirtyNode();a.scheduleHighlight();a.history.onChange&&a.history.onChange()}return this}};
CueCard.QueryEditor.prototype.getUnresolvedQuery=function(){var b=this.getQueryModelAndContext().model.toQueryJson();return CueCard.jsonize(b,this.getJsonizingSettings({breakLines:false,omitWhitespace:true,variables:this._getVariables(),resolveVariables:false}))};CueCard.QueryEditor.prototype.getResolvedQueryEnvelope=function(b){return this._getResolvedQueryEnvelope(false,b)};
CueCard.QueryEditor.prototype.getJsonizingSettings=function(b){if(this._controlPane)return this._controlPane.getJsonizingSettings(b);else{b=b||{};if(!("indentCount"in b))b.indentCount=2;return b}};CueCard.QueryEditor.prototype._getVariables=function(){return this._controlPane?this._controlPane.getVariables():{}};CueCard.QueryEditor.prototype._getQueryEnvelope=function(){return this._controlPane?this._controlPane.getQueryEnvelope():{}};
CueCard.QueryEditor.prototype._getResolvedQueryEnvelope=function(b,a){a=a||{};var d=this.getQueryModelAndContext(),c=d.model.toQueryJson();a.isWriteQuery=this._isWriteQuery(c);var j=this._getQueryEnvelope(),f=this._getVariables();if(b){this.content(CueCard.jsonize(c,this.getJsonizingSettings({variables:f,resolveVariables:false})));try{var e=this.getQueryModelAndContext().model.getCursorFromContext(d.context);this._editor.selectLines(this._editor.nthLine(e.line+1),e.col)}catch(g){}}j.query=c;return CueCard.jsonize(j,
this.getJsonizingSettings({breakLines:false,variables:f,resolveVariables:true}))};CueCard.QueryEditor.prototype._isWriteQuery=function(b){var a=function(d){if(d!=null)if(d instanceof Array){if(d.length>0&&typeof d[0]=="object")for(var c=0;c<d.length;c++)if(a(d[c]))return true}else if(typeof d=="object")for(c in d)if(c=="connect"||c=="create"||a(d[c]))return true;return false};return a(b)};
CueCard.QueryEditor.prototype._confirmWriteQuery=function(b){return b.isWriteQuery&&!this._warnWrites&&CueCard.apiProxy.base.indexOf("sandbox")<0};CueCard.QueryEditor.prototype.getMqlReadURL=function(){var b={},a=this.getResolvedQueryEnvelope(b);b=CueCard.freebaseServiceUrl+"api/service/"+(b.isWriteQuery?"mqlwrite":"mqlread");if("service"in this._options&&this._options.service!=null)b=this._options.service;return b+"?query="+encodeURIComponent(a)};
CueCard.QueryEditor.prototype.run=function(b){if(this._outputPane!=null){var a={};b=this._getResolvedQueryEnvelope(b||this._controlPane&&this._controlPane.getSetting("cleanup"),a);if(this._confirmWriteQuery(a))if(window.confirm("Your query will write data into Freebase.\nAre you sure you want to do that?"))this._warnWrites=true;else return;var d=CueCard.apiProxy.base+CueCard.apiProxy[a.isWriteQuery?"write":"read"]+("emql"in this._options&&this._options.emql?"emql=1&":"")+("debug"in this._options?
"debug="+this._options.debug+"&":"")+("service"in this._options&&this._options.service!=null?"service="+encodeURIComponent(this._options.service)+"&":""),c=this,j=function(e){if(e.error=="unauthorized"){c._outputPane.setStatus("Query editor is not authorized to write on your behalf.");c._options.onUnauthorizedMqlWrite()}else{c._outputPane.renderResponseHeaders(e.headers);var g={};if(c._controlPane!=null&&c._controlPane.getSetting("multilineErrorMessages")&&"code"in e.body&&e.body.code=="/api/status/error"&&
"messages"in e.body&&e.body.messages!=null)g.encodeJavascriptString=function(h){return h};c._outputPane.setJSONContent(e.body,c.getJsonizingSettings(g))}},f=function(e){alert(e)};this._outputPane.setStatus("Querying...");a.isWriteQuery||b.length>1024?$.post(d,{query:b},j,"json"):CueCard.JsonpQueue.call(d+"query="+encodeURIComponent(b),j,f)}"onRun"in this._options&&this._options.onRun()};
CueCard.QueryEditor.prototype.getQueryModelAndContext=function(){var b=this._editor.cursorPosition(false),a=this._editor.lineNumber(b.line)-1;b=b.character;return CueCard.QueryParser.parseForContext(this._editor.getCode(),0,a,b)};
CueCard.QueryEditor.prototype._onReady=function(){var b=this;try{$(this._editor.win.document).keyup(function(d){return b._onEditorKeyUp(d)}).keydown(function(d){return b._onEditorKeyDown(d)}).mousedown(function(d){return b._onEditorMouseDown(d)})}catch(a){alert("Unable to install keyup handler on codemirror window")}if("cleanUp"in this._options&&this._options.cleanUp){this._editor.getCode();this._onCleanUp()}};CueCard.QueryEditor.prototype._onRun=function(b){this.run(b)};
CueCard.QueryEditor.prototype._onCleanUp=function(){var b=this.getQueryModelAndContext().model.toQueryJson(),a=this._getVariables();this.content(CueCard.jsonize(b,this.getJsonizingSettings({variables:a,resolveVariables:false})))};CueCard.QueryEditor.prototype._onEditorMouseDown=function(){};
CueCard.QueryEditor.prototype._onEditorKeyDown=function(b){if(b.keyCode==9||b.keyCode==32&&(b.ctrlKey||b.metaKey||b.altKey)){this._assistKeyComboDetected=true;b.preventDefault();return false}else{this._assistKeyComboDetected=false;if((b.metaKey||b.ctrlKey)&&b.keyCode==13)this._onRun(b.shiftKey)}};CueCard.QueryEditor.prototype._onEditorKeyUp=function(b){if(this._assistKeyComboDetected){this._assistKeyComboDetected=false;this.startAssistAtCursor();b.preventDefault();return false}};
CueCard.QueryEditor.prototype.startAssistAtCursor=function(){var b=this._editor.cursorPosition(false),a=this._editor.lineNumber(b.line)-1,d=b.character;this._editor.lineContent(b.line);var c=this._editor.win.document.body.firstChild;c=b.line||c;for(var j=c.nextSibling,f=d;f>0&&j!=null&&j.tagName.toLowerCase()!="br"&&j.firstChild!=null&&j.firstChild.nodeValue.length>=f;){f-=j.firstChild.nodeValue.length;c=j;j=j.nextSibling}if(j==null||j.tagName.toLowerCase()=="br"){if(j!=null){b=$(j).offset();if($.browser.msie&&
c!=null&&c.tagName.toLowerCase()!="br"){f=c.offsetWidth;c=c.offsetHeight}else{f=b.left;c=j.offsetHeight}}else{b=$(c).offset();var e=c.firstChild?c.firstChild.nodeValue.length:0;f=b.left+(e==0?0:f*c.offsetWidth/e);c=c.offsetHeight}this._startAssist(a,d,{left:f,top:b.top,height:c})}else{b=$(j).offset();e=j.firstChild?j.firstChild.nodeValue.length:0;this._startAssist(a,d,{left:b.left+(e==0?0:f*j.offsetWidth/e),top:b.top,height:j.offsetHeight})}};
CueCard.QueryEditor.prototype._startAssist=function(b,a,d){this._cancelPopup();if(d!=null){var c=$(this._iframeContainer).offset();c.left-=this._editor.win.document.body.scrollLeft+document.body.scrollLeft;c.top-=this._editor.win.document.body.scrollTop+document.body.scrollTop;var j=this;this._popup=new CueCard.Popup(Math.round(c.left+d.left),Math.round(c.top+d.top),Math.round(d.height),[window,this._editor.win],{onCancel:function(g){g=="key"&&j.focus()}});this._popup.elmt.html('<div class="cuecard-popup-message">Please wait...</div>');
d=this.getQueryModelAndContext();if(d.context.length>0){c=d.context[d.context.length-1];if("relative"in c)if(c.node.type==CueCard.QueryNode.TYPE_NONTERMINAL)if(c.relative=="path"||c.relative=="before"){this._startSuggestProperties(b,a,d,c);return}else{if(c.relative=="space"){var f=c.node.links[c.child];this._startSuggestValues(b,a,d,c,f);return}}else{if(c.node.type==CueCard.QueryNode.TYPE_TERMINAL){f=null;if(d.context.length>1){var e=d.context[d.context.length-2];f=e.node.links[e.child]}this._startSuggestValues(b,
a,d,c,f);return}}else{f=null;if(d.context.length>1){e=d.context[d.context.length-2];if(e.node.type==CueCard.QueryNode.TYPE_NONTERMINAL)f=e.node.links[e.child];else if(d.context.length>2){e=d.context[d.context.length-3];f=e.node.links[e.child]}}this._startSuggestValues(b,a,d,c,f);return}}}this._popup.elmt.html('<div class="cuecard-popup-message">Sorry, we don\'t know how to assist you here. Send us a link to this exact query using the links at the upper right corner and we will investigate. Thank you!</div>')};
CueCard.QueryEditor.prototype._cancelPopup=function(){if(this._popup!=null){this._popup.cancel();this._popup=null}};
CueCard.QueryEditor.prototype._startSuggestProperties=function(b,a,d,c){var j=this;c=c.relative=="path"?c.node.links[c.child].token:null;this._startBufferInput();this._prepareQueryForSuggestions(d,b,a,c,function(f,e,g){var h=function(l,o){j._suggestProperties(d,o,e+j._stopBufferInput(),g)};d.model.locateInnerMostNonTerminal(d.context,f.extend(function(l,o){var p=[],n=[],k=[];o.node.getDeclaredTypes(p);o.node.getDeclaredIDs(n);o.node.getDeclaredGUIDs(k);var m=[];p.length>0&&m.push("t="+encodeURIComponent(p.join(",")));
n.length>0&&m.push("i="+encodeURIComponent(n.join(",")));k.length>0&&m.push("g="+encodeURIComponent(k.join(",")));if(o.property!=null){m.push("p="+encodeURIComponent(o.property));m.push("r="+o.reverse)}p=CueCard.helper+"suggest-properties?"+m.join("&");CueCard.JsonpQueue.call(p,l.extend(h).onDone,f.onError);return true}));return true})};CueCard.QueryEditor.prototype._startBufferInput=function(){this._overflowInput[0].value="";this._overflowInput[0].focus()};
CueCard.QueryEditor.prototype._stopBufferInput=function(){return this._overflowInput[0].value};
CueCard.QueryEditor.prototype._suggestProperties=function(b,a,d,c){this._popup.elmt.empty();this._popup.elmt.html("<div></div>");b=[];for(var j in a.properties){var f=a.properties[j],e=j.lastIndexOf("/"),g=j.substr(e+1);e=j.substr(0,e);var h=f.explicit;if("parentProperty"in f){h='"'+f.parentProperty+'" : [{ "'+g+'" : ';var l=f.unique?"null":"[]";b.push({label:g,hint:"of type "+e+" (through "+f.parentProperty+")",qualifiedProperty:j,result:h+l+" }]",offset:h.length,extent:l.length,expectedTypes:f.expectedTypes})}else{e=
{label:g,hint:"of type "+e,qualifiedProperty:j,expectedTypes:f.expectedTypes};CueCard.QueryEditor.setPropertySuggestionSuffix(f.expectedTypes.length>0?f.expectedTypes[0].id:"",e,f.unique,'"'+(h?g:j)+'" : ');b.push(e)}}a=new CueCard.PropertySuggestor(this._popup,CueCard.MqlSyntax.KeywordSuggestions,b,c);new CueCard.SuggestionController(this._popup,this._popup.elmt[0].firstChild,a,d)};
CueCard.QueryEditor.setPropertySuggestionSuffix=function(b,a,d,c){var j=null;if(b=="/common/image"||b=="/common/document"){j='{ "id" : null, "optional" : true, "limit" : 3 }';d||(j="["+j+"]")}else if(b=="/measurement_unit/dated_integer"){j='{ "number" : null, "date" : null }';if(d)j="["+j+"]"}else if(b=="/measurement_unit/dated_money_value"){j='{ "amount" : null, "valid_date" : null, "currency" : null }';if(d)j="["+j+"]"}else j=b.indexOf("/type/")==0?d?"null":"[]":d?"{}":"[{}]";a.result=c+j;a.offset=
c.length;a.extent=j.length};
CueCard.QueryEditor.prototype._startSuggestValues=function(b,a,d,c,j){var f=this,e="token"in c?c.token:null;this._startBufferInput();this._prepareQueryForSuggestions(d,b,a,e,function(g,h,l,o){h+=f._stopBufferInput();if(j!=null&&!j.reverse&&CueCard.QueryNode.isMqlKeyword(j.path))f._suggestValuesForKeyword(b,a,d,c,j.path,h,l);else{var p=function(){f._popup.elmt.empty();f._popup.elmt.html('<div></div><div class="cuecard-suggestion-hint-message">Keep typing to search for topics of types fitting this point in the query.</div>')},n=
j.qualifiedProperty,k=j.reverse;if(!k&&(n=="/type/object/id"||n=="/type/object/guid"||n=="/type/object/name")){d.model.locateInnerMostNonTerminal(d.context,g.extend(function(s,t){p();var v=[];t.node.getDeclaredTypes(v);if("property"in t&&t.property!=null){var u=t.property;if(k)v.push(u.substr(0,u.lastIndexOf("/")));else if(u in o){u=o[u].expectedTypes;for(var B=0;B<u.length;B++)v.push(u[B].id)}}v=new CueCard.TypeBasedTopicSuggestor(f._popup,CueCard.MqlSyntax.SingleValueSuggestions,v,j.property,l);
new CueCard.SuggestionController(f._popup,f._popup.elmt[0].firstChild,v,h)}));return true}else{p();var m=false;if(k)g=[n.substr(0,n.lastIndexOf("/"))];else if(n=="/type/object/type")g=["/type/type"];else if(n in o){m=o[n].unique;g=[];n=o[n].expectedTypes;for(var r=0;r<n.length;r++)g.push(n[r].id)}else g=n=="/type/text/lang"?["/type/lang"]:[];n=g.length==1?g[0]:null;g=n!==null&&n in CueCard.QueryEditor.nativeTypes?new CueCard.StaticChoicesSuggestor(CueCard.MqlSyntax[n=="/type/text"?m?"UniqueStringLiteralValueSuggestions":
"StringLiteralValueSuggestions":m?"UniqueLiteralValueSuggestions":"LiteralValueSuggestions"],l):new CueCard.TypeBasedTopicSuggestor(f._popup,CueCard.MqlSyntax[m?"UniqueTopicValueSuggestions":"TopicValueSuggestions"],g,"id",l);new CueCard.SuggestionController(f._popup,f._popup.elmt[0].firstChild,g,h)}}})};
CueCard.QueryEditor.prototype._suggestValuesForKeyword=function(b,a,d,c,j,f,e){this._popup.elmt.empty();b=CueCard.MqlSyntax.KeywordValueHints[j];if("html"in b){this._popup.elmt.html('<div class="cuecard-suggestion-hint-message">'+b.html+"</div>");this.focus()}else{this._popup.elmt.html("<div></div>");e=new CueCard.StaticChoicesSuggestor(b.choices,e);new CueCard.SuggestionController(this._popup,this._popup.elmt[0].firstChild,e,f)}};
CueCard.QueryEditor.prototype._prepareQueryForSuggestions=function(b,a,d,c,j){var f=this,e="",g,h=function(k,m,r,s,t){r=s===undefined||typeof r!=="string"?CueCard.jsonize(r,{breakLines:false}):r;m=m+(typeof s=="number"?s:r.length);t=m+(typeof t=="number"?t:0);f._editor.editor.replaceSelection(r);k=f._editor.nthLine(k+1);f._editor.selectLines(k,m,k,t)};if(c!=null){a=0;var l=c.start.col;if(/^['"]/.test(c.content))a=1;e=c.content.substring(a,d-l).replace(/['"]$/,"");g=function(k,m,r){var s=f._editor.nthLine(c.start.line+
1);f._editor.selectLines(s,c.start.col,s,c.end.col);h(c.start.line,c.start.col,k,m,r)}}else{d=this._editor.cursorPosition(true);var o=this._editor.lineNumber(d.line)-1,p=d.character;g=function(k,m,r){var s=f._editor.nthLine(o+1);f._editor.selectLines(s,p,s,p);h(o,p,k,m,r)}}var n=function(k){f._popup.close();typeof k=="string"?g(k):g(k.result,k.offset,k.extent)};d=CueCard.UI.createBlockingContinuations(function(k,m){return j(k,e,n,m||{})});this._popup.addPendingContinuation(d);b.model.qualifyAllProperties(d)};
CueCard.QueryEditor.prototype._showExamples=function(){var b=this;CueCard.showDialog("examples",{onDone:function(a){b.content(a);b._onRun(false)}})};CueCard.OutputPane=function(b,a){this._elmt=$(b);this._options=a||{};this._jsonResult=null;this._lastJsonOutputMode=$.cookie("cc_op_mode")=="text"?"text":"tree";this._treeConstructed=false;this._constructUI()};CueCard.OutputPane.prototype.dispose=function(){};
CueCard.OutputPane.prototype._constructUI=function(){var b=this,a=this._idPrefix="t"+Math.floor(1E6*Math.random());this._elmt.acre(fb.acre.apps.cuecard+"/output-pane","tabs",[a,this]);var d=$("#"+a+" > .section-tabset");d.tabs("#"+a+" > .tabbed-content > .cuecard-outputPane-tabBody",{initialIndex:this._lastJsonOutputMode=="tree"?0:1,onBeforeClick:function(c,j){window.__cc_tree_disposePopup();if(j==0){b._lastJsonOutputMode="tree";b._jsonResult!=null&&!b._treeConstructed&&b._constructTree()}else if(j==
1)b._lastJsonOutputMode="text";$.cookie("cc_op_mode",b._lastJsonOutputMode,{expires:365})}});this._tabs=d.data("tabs");this._tree=this._getTab("tree").find("div");this._textarea=this._getTab("text").find("textarea");this._status=this._getTab("status").find("div")};CueCard.OutputPane.prototype._getTab=function(b){return $("#"+this._idPrefix+"-"+b)};
CueCard.OutputPane.prototype.setJSONContent=function(b,a){this._jsonResult=b;this._textarea[0].value=CueCard.jsonize(b,a||{indentCount:2});var d;if(this._lastJsonOutputMode=="tree"){this._constructTree();d=0}else{this._tree.empty();this._treeConstructed=false;d=1}var c=this;window.setTimeout(function(){c._tabs.click(d)},100)};
CueCard.OutputPane.prototype.setStatus=function(b){this._tabs.click(2);this._status.html(b);this._jsonResult=null;this._textarea.val("");this._tree.empty();this._treeConstructed=false};CueCard.OutputPane.prototype.getJson=function(){return this._jsonResult};CueCard.OutputPane.prototype.renderResponseHeaders=function(b){this.setStatus($.acre(fb.acre.apps.cuecard+"/output-pane","status",[b]))};
CueCard.OutputPane.prototype._constructTree=function(){this._treeConstructed=true;var b=[],a=function(g,h){return'<img class="cuecard-outputPane-tree-toggle" onclick="__cc_tree_toggle(this);" src="'+CueCard.urlPrefix+g+'" '+(h?"":' style="display: none;"')+"/>"},d=function(g){b.push(g)},c=function(g){return"<a class='cuecard-outputPane-tree-explore' target='_blank' href='"+CueCard.freebaseServiceUrl+"tools/explore"+g+"'>xp</a>"},j=function(g,h,l){if(g=="image"||g=="/common/topic/image")d("<a target='_blank' class='cuecard-outputPane-tree-dataLink' href='"+
CueCard.freebaseServiceUrl+"view"+h+"' onmouseover='__cc_tree_mouseOverImage(this)' onmouseout='__cc_tree_mouseOutImage(this)' fbid='"+h+"'>"+l+"</a>"+c(h));else g=="article"||g=="/common/topic/article"?d("<a target='_blank' class='cuecard-outputPane-tree-dataLink' href='"+CueCard.freebaseServiceUrl+"view"+h+"' onmouseover='__cc_tree_mouseOverArticle(this)' onmouseout='__cc_tree_mouseOutArticle(this)' fbid='"+h+"'>"+l+"</a>"+c(h)):d("<a target='_blank' class='cuecard-outputPane-tree-dataLink' href='"+
CueCard.freebaseServiceUrl+"view"+h+"' onmouseover='__cc_tree_mouseOverTopic(this)' onmouseout='__cc_tree_mouseOutTopic(this)' fbid='"+h+"'>"+l+"</a>"+c(h))},f=function(g,h){return g.length>h.length&&g.substr(0,h.length)==h},e=function(g,h,l){if(g==null){h.startBody(false);d("<span>"+JSON.stringify(g)+"</span>");h.endBody(false)}else if(typeof g!="object"){h.startBody(false);var o=l[0];l=l.length>1?l[1]:"";if(o=="id"||o=="/type/object/id")j(l,g,JSON.stringify(g));else if(o=="guid"||o=="/type/object/guid")j(l,
"/guid/"+g.substr(1),JSON.stringify(g));else if(o=="type"||o=="/type/object/type")d("<a target='_blank' href='"+CueCard.freebaseServiceUrl+"type/schema"+g+"'>"+JSON.stringify(g)+"</a>"+c(g));else if(typeof g=="string"&&(f(g,"http://")||f(g,"https://")||f(g,"ftp://")))f(g,"http://chart.apis.google.com/chart?")?d("<a target='_blank' class='cuecard-outputPane-tree-dataLink' href='"+g+"' onmouseover='__cc_tree_mouseOverImage(this)' onmouseout='__cc_tree_mouseOutImage(this)'>"+JSON.stringify(g)+"</a>"):
d("<a target='_blank' href='"+g+"'>"+JSON.stringify(g)+"</a>");else d("<span>"+JSON.stringify(g)+"</span>");h.endBody(false)}else if(g instanceof Array)if(g.length==0){h.startBody(false);d("<span>[]</span>");h.endBody(false)}else{o=g.length>1&&typeof g[0]=="object"?"":' style="display: none;"';h.startBody(true,'<span cc:mode="normal">[ <a href="javascript:{}" class="cuecard-outputPane-tree-all" onclick="__cc_tree_expandAll(this);"'+o+'>expand all</a><span class="cuecard-outputPane-tree-toggles"'+
o+'> &bull; </span><a href="javascript:{}" class="cuecard-outputPane-tree-all" onclick="__cc_tree_collapseAll(this);"'+o+'>collapse all</a><span class="cuecard-outputPane-tree-toggles"'+o+'> &bull; </span><a href="javascript:{}" class="cuecard-outputPane-tree-all" onclick="__cc_tree_flip(this);"'+o+">1-by-1</a></span>",'<span style="display: none;">[ '+(g.length>1?g.length+" elements":"1 element")+" ]</span>");d('<div class="cuecard-outputPane-tree-arrayBody cuecard-outputPane-tree-normalMode">');
o=function(n,k,m){return{startBody:function(r,s,t){r?d('<div class="cuecard-outputPane-tree-arrayElement">'+a("expanded.png",true)+a("collapsed.png",false)+'<span class="cuecard-outputPane-tree-memberName">'+n+":</span> "+s+t+"<span>"+(k?'<a href="javascript:{}" class="cuecard-outputPane-tree-flipControl" onclick="__cc_tree_flipPrevious(this);">previous</a> ':"")+(m?'<a href="javascript:{}" class="cuecard-outputPane-tree-flipControl" onclick="__cc_tree_flipNext(this);">next</a>':"")+"</span>"):d('<div class="cuecard-outputPane-tree-arrayElement"><span class="cuecard-outputPane-tree-memberName">'+
n+":</span> ")},endBody:function(){d("</div>")}}};for(var p=0;p<g.length;p++)e(g[p],o(p,p>0,p<g.length-1),l);d("</div>");h.endBody(true)}else{h.startBody(true,"<span>{</span>",'<span style="display: none;">{...}</span>');d('<div class="cuecard-outputPane-tree-objectBody cuecard-outputPane-tree-normalMode">');o=function(n){return{startBody:function(k,m,r){k?d('<div class="cuecard-outputPane-tree-objectField">'+a("expanded.png",true)+a("collapsed.png",false)+'<span class="cuecard-outputPane-tree-memberName">'+
n+":</span> "+m+r+"<span></span>"):d('<div class="cuecard-outputPane-tree-objectField"><span class="cuecard-outputPane-tree-memberName">'+n+":</span> ")},endBody:function(){d("</div>")}}};for(p in g)e(g[p],o(p),[p].concat(l));d("</div>");h.endBody(true)}};e(this._jsonResult,{startBody:function(){},endBody:function(){}},["__root__"]);this._tree.html(b.join(""))};window.__cc_tree_toggle=function(b){var a=b.src.indexOf("expanded.png")>0;b=b.parentNode;a?window.__cc_tree_collapse(b):window.__cc_tree_expand(b)};
window.__cc_tree_expand=function(b){if(b.firstChild.tagName.toLowerCase()=="img"){var a=b.lastChild;a.style.display="block";b.childNodes[0].style.display="inline";b.childNodes[1].style.display="none";b=a.previousSibling.previousSibling;b.previousSibling.style.display="inline";b.style.display="none"}};
window.__cc_tree_collapse=function(b){if(b.firstChild.tagName.toLowerCase()=="img"){var a=b.lastChild;a.style.display="none";b.childNodes[0].style.display="none";b.childNodes[1].style.display="inline";b=a.previousSibling.previousSibling;b.previousSibling.style.display="none";b.style.display="inline"}};
(function(){var b=function(a){var d=a.parentNode.getAttribute("cc:mode"),c=a.parentNode.nextSibling.nextSibling.nextSibling;if(d=="flip"){for(d=0;d<c.childNodes.length;d++)c.childNodes[d].style.display="block";a.parentNode.setAttribute("cc:mode","normal");$(a.parentNode.parentNode).find("> div.cuecard-outputPane-tree-arrayBody").addClass("cuecard-outputPane-tree-normalMode").removeClass("cuecard-outputPane-tree-flipMode")}};window.__cc_tree_expandAll=function(a){b(a);a=a.parentNode.nextSibling.nextSibling.nextSibling;
for(var d=0;d<a.childNodes.length;d++)__cc_tree_expand(a.childNodes[d])};window.__cc_tree_collapseAll=function(a){b(a);a=a.parentNode.nextSibling.nextSibling.nextSibling;for(var d=0;d<a.childNodes.length;d++)__cc_tree_collapse(a.childNodes[d])};window.__cc_tree_flip=function(a){var d=a.parentNode.getAttribute("cc:mode"),c=a.parentNode.nextSibling.nextSibling.nextSibling;if(d=="normal"){for(d=0;d<c.childNodes.length;d++){var j=c.childNodes[d];j.style.display=d==0?"block":"none";__cc_tree_expand(j)}a.parentNode.setAttribute("cc:mode",
"flip");$(a.parentNode.parentNode).find("> div.cuecard-outputPane-tree-arrayBody").removeClass("cuecard-outputPane-tree-normalMode").addClass("cuecard-outputPane-tree-flipMode")}};window.__cc_tree_flipPrevious=function(a){a=a.parentNode.parentNode;a.style.display="none";a.previousSibling.style.display="block"};window.__cc_tree_flipNext=function(a){a=a.parentNode.parentNode;a.style.display="none";a.nextSibling.style.display="block"};window.__cc_tree_mouseOverTopic=function(a){var d=a.getAttribute("fbid");
$.getJSON("http://hotshot.dfhuynh.user.dev.freebaseapps.com/html?id="+d+"&callback=?",function(c){var j=__cc_tree_createPopup(a);$(j).addClass("cuecard-outputPane-tree-popup-topic").html(c)})};window.__cc_tree_mouseOutTopic=function(){__cc_tree_disposePopup()};window.__cc_tree_mouseOverImage=function(a){var d=a.getAttribute("fbid");d=d!=null&&d.length>0?CueCard.freebaseServiceUrl+"api/trans/image_thumb"+d+"?mode=fillcrop&amp;maxwidth=100&amp;maxheight=100":a.href;__cc_tree_createPopup(a).innerHTML=
"<img src='"+d+"' />"};window.__cc_tree_mouseOutImage=function(){__cc_tree_disposePopup()};window.__cc_tree_mouseOverArticle=function(a){var d=a.getAttribute("fbid");$.getJSON(CueCard.freebaseServiceUrl+"api/trans/blurb"+d+"?callback=?",function(c){c=c.result.body;var j=__cc_tree_createPopup(a);$(j).addClass("cuecard-outputPane-tree-popup-article").html(c)})};window.__cc_tree_mouseOutArticle=function(){__cc_tree_disposePopup()};window.__cc_tree_createPopup=function(a){var d=document.getElementById("cuecard-outputPane-tree-popup");
if(d==null){d=document.createElement("div");d.id="cuecard-outputPane-tree-popup";d.className="cuecard-outputPane-tree-popup";d.onmouseover=window.__cc_tree_disposePopup;document.body.appendChild(d)}var c=$(a).offset();d.style.top=c.top+a.offsetHeight+10+"px";d.style.left=c.left+"px";return d};window.__cc_tree_disposePopup=function(){var a=document.getElementById("cuecard-outputPane-tree-popup");a!=null&&a.parentNode.removeChild(a)}})();
CueCard.ControlPane=function(b,a){this._elmt=$(b);this._options=a||{};this._constructUI()};CueCard.ControlPane.prototype.dispose=function(){};CueCard.ControlPane.prototype._constructUI=function(){var b=this._idPrefix="t"+Math.floor(1E6*Math.random());this._elmt.acre(fb.acre.apps.cuecard+"/control-pane","tabs",[b,this]);$("#"+b+" > .section-tabset").tabs("#"+b+" > .tabbed-content > .cuecard-controlPane-tabBody",{initialIndex:0})};
CueCard.ControlPane.prototype._getDefaults=function(){var b=this._options,a=b.env||{},d={};d.extended=b.extended||a.extended;d.extended=d.extended===1?true:false;d.as_of_time=b.as_of_time||a.as_of_time||null;d.use_permission_of=b.use_permission_of||a.use_permission_of||null;delete a.extended;delete a.as_of_time;delete a.use_permission_of;return d};CueCard.ControlPane.prototype._getTab=function(b){return $("#"+this._idPrefix+"-"+b)};
CueCard.ControlPane.prototype._redangle=function(){var b=this,a=this._options.queryEditor.getQueryModelAndContext();a.model.toInsideOutQueryJson(a.context,CueCard.UI.createBlockingContinuations(function(d,c){b._setOutputJSON(c)}))};CueCard.ControlPane.prototype._qualify=function(){var b=this,a=this._options.queryEditor.getQueryModelAndContext().model;a.qualifyAllProperties(CueCard.UI.createBlockingContinuations(function(){b._setOutputJSON(a.toQueryJson({qualifyAllProperties:true}))}))};
CueCard.ControlPane.prototype._generateCode=function(){var b=this._options.queryEditor.getQueryModelAndContext().model.toQueryJson();b=CueCard.CodeGeneration.generate(b,CueCard.CodeGeneration.serializers["acre-template"],{variables:this.getVariables()});CueCard.showDialog("acre_template",b)};
CueCard.ControlPane.prototype._oneLiner=function(){var b=this._options.queryEditor.getQueryModelAndContext().model.toQueryJson(),a=this.getJsonizingSettings({variables:this.getVariables(),resolveVariables:false});a.breakLines=false;this._options.queryEditor.content(CueCard.jsonize(b,a))};
CueCard.ControlPane.prototype._setOutputJSON=function(b){switch(this._getTab("tools").find("input[name='tools-result']:checked").val()){case "replace":this._options.queryEditor.content(CueCard.jsonize(b,this.getJsonizingSettings()));break;case "output":this._options.outputPane.setJSONContent(b,this.getJsonizingSettings());break}};
CueCard.ControlPane.prototype._runPage=function(b){var a=this._getTab("envelope").find("input[name='page']"),d=a.val();d=parseInt(d)||1;d+=b;if(d<1)a.val("1");else{a.val(d);this._options.queryEditor!=null&&this._options.queryEditor.run()}};
CueCard.ControlPane.prototype._runCursor=function(b){if(this._options.outputPane!=null){var a=this._options.outputPane.getJson();if(a!==undefined&&a!==null&&"cursor"in a){this._getTab("envelope").find("input[name='cursor']").val(a.cursor);this._getTab("envelope").find("input[name='cursor-opt'][value='custom']").attr("checked","checked");this._options.queryEditor!=null&&b&&this._options.queryEditor.run()}}};
CueCard.ControlPane.prototype.getQueryEnvelopeSetting=function(b){switch(b){case "extended":return this._getTab("envelope").find("input[name='extended']").attr("checked")?1:0;case "as_of_time":b=this._getTab("envelope").find("input[name='as_of_time']").val();if(b.length>0)return b;break}return null};
CueCard.ControlPane.prototype.getQueryEnvelope=function(b,a){b=b||{};if(this.getSetting("extended")==1)b.extended=1;var d=this._getTab("envelope").find("input[name='as_of_time']").val();if(d.length>0)b.as_of_time=d;d=this._getTab("envelope").find("input[name='use_permission_of']").val();if(d.length>0)b.use_permission_of=d;var c=this._getTab("envelope").find("select");d=function(e){return c[e].options[c[e].selectedIndex].value};var j=d(0);if(j.length>0)b.lang=j;j=d(1);if(j.length>0)b.escape=j=="false"?
false:j;d=d(2);if(d.length>0)b.uniqueness_failure=d;if(!a){d=this._getTab("envelope").find("input[name='page']").val();if(d.length>0)try{b.page=parseInt(d)}catch(f){}switch(this._getTab("envelope").find("input[name='cursor-opt']:checked").val()){case "true":b.cursor=true;break;case "custom":b.cursor=this._getTab("envelope").find("input[name='cursor']").val();break}}this.getCustomEnvelope(b);return b};
CueCard.ControlPane.prototype.getCustomEnvelope=function(b){b=b||{};for(var a=this._getTab("customEnvelope").find("table")[0],d=1;d<a.rows.length;d++){var c=a.rows[d],j=c.cells[0].firstChild.value;c=c.cells[1].firstChild.value;if(j.length>0){try{c=JSON.parse(c)}catch(f){}b[j]=c}}return b};
CueCard.ControlPane.prototype.getSetting=function(b){var a=this._getTab("settings").find("input");switch(b){case "cleanup":b=a[0].checked;$.cookie("cc_cp_clean",b?"1":"0",{expires:365});return b;case "alignJSONPropertyValues":b=a[1].checked;$.cookie("cc_cp_align",b?"1":"0",{expires:365});return b;case "liveQuery":b=a[2].checked;$.cookie("cc_cp_live",b?"1":"0",{expires:365});return b;case "multilineErrorMessages":b=a[3].checked;$.cookie("cc_cp_multi",b?"1":"0",{expires:365});return b;case "extended":b=
this._getTab("envelope").find("input[name='extended']").attr("checked")?1:0;$.cookie("cc_cp_extended",b,{expires:365});return b}return false};CueCard.ControlPane.prototype.getJsonizingSettings=function(b){b=b||{};b.indentCount=2;b.alignFieldValues=this.getSetting("alignJSONPropertyValues");return b};
CueCard.ControlPane.prototype.getVariables=function(){for(var b={},a=this._getTab("variables").find("table")[0],d=1;d<a.rows.length;d++){var c=a.rows[d],j=c.cells[0].firstChild.value;c=c.cells[1].firstChild.value;try{c=JSON.parse(c)}catch(f){}b[j]=c}return b};CueCard.CodeGeneration={serializers:{}};
CueCard.CodeGeneration.generate=function(b,a,d){var c="",j={_variables:{},createVariable:function(o){if(o in this._variables)return o+this._variables[o]++;else{this._variables[o]=1;return o}}},f=j.createVariable("q"),e=j.createVariable("o"),g=new CueCard.SerializingContext(null);g.setProperty("indentString","indentString"in d?d.indentString:"  ");g.setProperty("indentLevel","indentLevel"in d?d.indentLevel:0);g.setProperty("stream",{append:function(o){c+=o}});a.prepareRootContext(g,d);var h=new CueCard.IndentWriter(g),
l=a.generateQueryCall(g,h,j,b,d.variables,f,e);g.setProperty("start",function(){return l});g.setProperty("stop",function(){});CueCard.CodeGeneration._processNode(b,a,g,h,j);return c};
CueCard.CodeGeneration._deriveElementName=function(b,a){if(b==null){var d=a.getProperty("path");if(d!=null)if(d.charAt(0)=="!"){d=d.substr(Math.max(d.indexOf(":")+1,1)).split("/");return d[Math.max(0,d.length-2)]}else{d=d.substr(d.indexOf(":")+1).split("/");return d[d.length-1]}}else{d=b.split("/");return d[d.length-1]}return"entry"};CueCard.CodeGeneration._isImagePath=function(b){if(b.charAt(0)=="!")return false;b=b.substr(b.indexOf(":")+1);return b=="/common/topic/image"||b=="image"};
CueCard.CodeGeneration._isImageNode=function(b){if(b==null||typeof b!="object")return false;if(b instanceof Array)if(b.length==1&&typeof b[0]=="object")b=b[0];else return false;for(var a in b)if(a!="id"&&a!="guid"&&!CueCard.QueryNode.isMqlKeyword(a))return false;return true};
CueCard.CodeGeneration._processNode=function(b,a,d,c,j){if(b==null){var f=d.getProperty("start")(true,false);a.outputSimpleFieldValue(f,d,c);d.getProperty("stop")(true,false)}else if(typeof b=="object")if(b instanceof Array)if(b.length==0){f=CueCard.CodeGeneration._deriveElementName(null,d);var e=j.createVariable(f),g=j.createVariable(f.charAt(0));f=d.getProperty("start")(false,false);a.openNodeArray(d,c,j,f,e,g,"values");a.outputSimpleFieldValue(e,d,c);a.closeNodeArray(d,c,j,f,e,g,"values");d.getProperty("stop")(false,
false)}else{if(!(b.length>1||typeof b[0]!="object"||"__identifier__"in b)){e=new CueCard.SerializingContext(d);e.setProperty("in-array",true);arguments.callee(b[0],a,e,c,j)}}else if(b.optional!="forbidden"){e=null;f=0;for(g in b)if(b.hasOwnProperty(g)&&g!="*"&&!CueCard.QueryNode.isMqlKeyword(g)){f++;var h=b[g];if(g.charAt(0)!="!"){var l=g.substr(g.indexOf(":")+1);if(l=="type"||l=="/type/object/type")if(h!=null&&typeof h=="string")e=h}}CueCard.CodeGeneration._processTypedObjectNode(b,e,f,a,d,c,j)}};
CueCard.CodeGeneration._processTypedObjectNode=function(b,a,d,c,j,f,e){function g(){var t=CueCard.CodeGeneration._deriveElementName(a,j);l=e.createVariable(t);if(j.getProperty("in-array"))o=e.createVariable(t.charAt(0))}var h=null,l=null,o=null,p,n,k="optional"in b&&b.optional===true;if(j.getProperty("in-array")){var m=d>0&&!("*"in b);p=function(){if(h==null){h=j.getProperty("start")(false,k);g();c.openNodeArray(j,f,e,h,l,o,m?"fields":"object")}return l};n=function(){if(h!=null){c.closeNodeArray(j,
f,e,h,l,o,m?"fields":"object");j.getProperty("stop")(false,k)}}}else{p=function(){if(h==null){h=j.getProperty("start")(false,k);g();c.openNode(j,f,e,h,l)}return l};n=function(){if(h!=null){c.closeNode(j,f,e,h,l);j.getProperty("stop")(false,k)}}}if(d==0||"*"in b)c.generateEmptyObjectNode(j,f,e,p());else{for(var r in b)if(b.hasOwnProperty(r)&&r!="*"&&!CueCard.QueryNode.isMqlKeyword(r)){d=b[r];if(CueCard.CodeGeneration._isImagePath(r)&&CueCard.CodeGeneration._isImageNode(d))c.generateImageField(j,f,
e,r,d,p);else{var s=c.createFieldContext(j,f,e,r,p);s.setProperty("path",r);CueCard.CodeGeneration._processNode(d,c,s,f,e)}}if("*"in b){d=b["*"];s=c.openWildcardField(j,f,e,p,d);CueCard.CodeGeneration._processNode(d,c,s,f,e);c.closeWildcardField(j,f,e,p,d)}}n()};
CueCard.CodeGeneration.serializers["acre-template"]={prepareRootContext:function(){},generateQueryCall:function(b,a,d,c,j,f,e){a.appendIndent();a.append("<acre:script>");a.appendLineBreak();a.indent();a.appendIndent();a.append("var "+f+" = ");CueCard.jsonize(c,{context:b,variables:j,resolveVariables:false});a.append(";");a.appendLineBreak();a.appendIndent();a.appendLineBreak();a.appendIndent();a.append("var "+e+" = acre.freebase.mqlread("+f+");");a.appendLineBreak();a.unindent();a.appendIndent();
a.append("</acre:script>");a.appendLineBreak();return e+".result"},outputSimpleFieldValue:function(b,a,d){d.append("${"+b+"}")},openNodeArray:function(b,a,d,c,j,f,e){a.appendLineBreak();a.appendIndent();a.append('<ul acre:if="'+c+'.length != 0">');a.appendLineBreak();a.indent();a.appendIndent();a.append('<li acre:for="'+f+", "+j+" in "+c+'">');e=="fields"&&a.append("<table>");if(e=="fields"||e=="object"){a.appendLineBreak();a.indent()}},closeNodeArray:function(b,a,d,c,j,f,e){if(e=="fields"||e=="object"){a.unindent();
a.appendIndent()}e=="fields"&&a.append("</table>");a.append("</li>");a.appendLineBreak();a.unindent();a.appendIndent();a.append("</ul>");a.appendLineBreak();a.appendIndent();a.append('<div acre:else=""><ins>[no element]</ins></div>');a.appendLineBreak();a.appendLineBreak()},openNode:function(b,a,d,c,j){a.appendIndent();a.append("<acre:script>var "+j+" = "+c+";</acre:script>");a.appendLineBreak();a.appendIndent();a.append("<table>");a.appendLineBreak();a.indent()},closeNode:function(b,a){a.unindent();
a.appendIndent();a.append("</table>");a.appendLineBreak()},createFieldContext:function(b,a,d,c,j){b=new CueCard.SerializingContext(b);b.setProperty("in-array",false);b.setProperty("start",function(f,e){var g=j();a.appendIndent();a.append("<tr><th>"+c+":</th>");a.appendLineBreak();a.indent();a.appendIndent();a.append("<td"+(e?" acre:if=\"'"+c+"' in "+g+" && "+g+"['"+c+"'] != null\"":"")+">");if(!f){a.appendLineBreak();a.indent()}return g+"['"+c+"']"});b.setProperty("stop",function(f,e){if(!f){a.unindent();
a.appendIndent()}a.append("</td>");a.appendLineBreak();if(e){a.appendIndent();a.append('<td acre:else=""><ins>[no value]</ins></td>');a.appendLineBreak()}a.unindent();a.appendIndent();a.append("</tr>");a.appendLineBreak()});return b},generateImageField:function(b,a,d,c,j,f){f=f();b=f+"['"+c+"']";a.appendIndent();a.append("<tr><th>"+c+":</th>");a.appendLineBreak();a.indent();a.appendIndent();a.append("<td acre:if=\"'"+c+"' in "+f+" && "+b+' != null">');a.appendLineBreak();a.indent();c=j instanceof
Array;a.appendIndent();if(c){j=j[0];c=d.createVariable("image");d=d.createVariable("i");a.append('<img acre:for="'+d+", "+c+" in "+b+'" src="${acre.environ.freebase_service_url}/api/trans/image_thumb'+("guid"in j?"/guid/${"+c+".guid.substr(1)}":"${"+c+".id}")+'?mode=fillcrop&amp;maxwidth=100&amp;maxheight=100" /></td>')}else a.append('<img src="${acre.environ.freebase_service_url}/api/trans/image_thumb'+("guid"in j?"/guid/${"+b+".guid.substr(1)}":"${"+b+".id}")+'?mode=fillcrop&amp;maxwidth=100&amp;maxheight=100" /></td>');
a.appendLineBreak();a.unindent();a.appendIndent();a.append('<td acre:else=""><ins>[no image]</ins></td>');a.appendLineBreak();a.unindent();a.appendIndent();a.append("</tr>");a.appendLineBreak()},openWildcardField:function(b,a,d,c){c=c();var j=d.createVariable("field"),f=d.createVariable("value");a.appendIndent();a.append('<tr acre:for="'+j+", "+f+" in "+c+'"><td>${'+j+"}:</td>");a.appendLineBreak();a.indent();b=new CueCard.SerializingContext(b);b.setProperty("in-array",false);b.setProperty("start",
function(e){a.appendIndent();a.append("<td>");if(!e){a.appendLineBreak();a.indent()}return f});b.setProperty("stop",function(e){if(!e){a.unindent();a.appendIndent()}a.append("</td>");a.appendLineBreak()});return b},closeWildcardField:function(b,a){a.unindent();a.appendIndent();a.append("</tr>");a.appendLineBreak()},generateEmptyObjectNode:function(b,a,d,c){b=d.createVariable("field");d=d.createVariable("value");a.appendIndent();a.append("<table>");a.appendLineBreak();a.indent();a.appendIndent();a.append('<tr acre:for="'+
b+", "+d+" in "+c+'"><th>${'+b+"}:</th>");a.appendLineBreak();a.indent();a.appendIndent();a.append('<td acre:if="'+d+' instanceof Array">${'+d+".join(', ')}</td>");a.appendLineBreak();a.appendIndent();a.append('<td acre:else="">${'+d+"}</td>");a.appendLineBreak();a.unindent();a.appendIndent();a.append("</tr>");a.appendLineBreak();a.unindent();a.appendIndent();a.append("</table>");a.appendLineBreak()}};
CueCard.ExampleTechniques=["all","basic","sorting","text search","range constraint","date query","multiple constraints on same property","limiting number of results","geographic location","compound value type (CVT)","schema inspection","attribution","adding data"];
CueCard.Examples=[{name:"Vietnamese restaurants in Aspen, Colorado",query:[{"/business/business_location/address":{citytown:"Aspen",state_province_region:"Colorado"},cuisine:"Vietnamese",name:null,id:null,type:"/dining/restaurant"}],techniques:["basic","geographic location"]},{name:"Properties of /music/artist",query:[{id:"/music/artist",properties:[{}],type:"/type/type"}],techniques:["schema inspection"]},{name:"All types created by the user jamie",query:[{creator:"/user/jamie",name:null,id:null,
type:"/type/type"}],techniques:["attribution"]},{name:"Cloud classifications sorted by name",query:[{clouds:[],name:null,id:null,sort:"name",type:"/meteorology/cloud_classification"}],techniques:["basic","sorting"]},{name:"U.S. states containing cities whose names start with 'Blue' or 'Red'",query:[{"a:contains":[{name:null,id:null,"name~=":"^Red",type:"/location/citytown"}],"b:contains":[{name:null,id:null,"name~=":"^Blue",type:"/location/citytown"}],"b:type":"/location/us_state",name:null,id:null,
type:"/location/location"}],techniques:["text search","multiple constraints on same property"]},{name:"2 of The Police's albums and their tracks",query:{album:[{id:null,limit:2,name:null,track:[]}],id:null,name:"The Police",type:"/music/artist"},techniques:["basic","limiting number of results"]},{name:"25 Songs with the word 'love' in their titles, with release date, album and artist",query:[{album:{artist:[],name:null,id:null,release_date:null},limit:25,name:null,"name~=":"Love*",type:"/music/track"}],
techniques:["text search","limiting number of results","date query"]},{name:"Films starring both Joe Pesci and Robert de Niro, showing their full cast",query:[{"a:starring":[{actor:"Joe Pesci"}],"b:starring":[{actor:"Robert de Niro"}],name:null,id:null,starring:[{actor:null}],type:"/film/film"}],techniques:["multiple constraints on same property","compound value type (CVT)"]},{name:"32 actors born in the 1960s, with two films of each actor",query:[{"/people/person/date_of_birth":null,"/people/person/date_of_birth<":"1970",
"/people/person/date_of_birth>=":"1960",film:[{film:null,id:null,limit:2}],limit:35,name:null,id:null,type:"/film/actor"}],techniques:["multiple constraints on same property","date query","limiting number of results","range constraint"]},{name:"Directors who have directed both Parker Posey and any actor named Robert (in possibly different films)",query:[{"a:film":[{name:null,id:null,starring:{actor:"Parker Posey"}}],"b:film":[{name:null,id:null,starring:{actor:null,"actor~=":"Robert*"}}],name:null,
id:null,type:"/film/director"}],techniques:["multiple constraints on same property","text search","compound value type (CVT)"]},{name:"Music artists with albums containing a track called 'One Tree Hill'",query:[{album:[{name:null,id:null,track:[{length:null,name:"One Tree Hill"}]}],name:null,id:null,type:"/music/artist"}],techniques:["compound value type (CVT)","basic"]},{name:"Everything about 'Jimi Hendrix'",query:{"*":null,name:"Jimi Hendrix",type:"/music/artist"},techniques:["basic"]},{name:"Kevin Bacon's films, with cast, producers, music, etc.",
query:[{film:[{film:{imdb_id:[],music:[],name:null,id:null,produced_by:[],starring:[{actor:[{}]}],type:[]}}],name:"Kevin Bacon",type:"/film/actor"}],techniques:["basic","compound value type (CVT)"]},{name:"When 'Star Wars Episode IV' was added to the database, and by whom",query:[{creator:null,id:"/wikipedia/en/Star_Wars_Episode_IV",name:null,timestamp:null,type:"/film/film"}],techniques:["attribution"]},{name:"Tracks on Synchronicity longer than 300 seconds",query:[{artist:"The Police",name:"Synchronicity",
track:[{length:null,"length>":300,name:null}],type:"/music/album"}],techniques:["range constraint"]},{name:"Properties of a particular type (/government/politician)",query:{id:"/government/politician",properties:[],type:"/type/type"},techniques:["schema inspection"]},{name:"Properties of a particular property (/type/object/name)",query:{"*":null,id:"/type/object/name",type:"/type/property"},techniques:["schema inspection"]},{name:"Types in a particular domain (/music)",query:{id:"/music",type:"/type/domain",
types:[]},techniques:["schema inspection"]},{name:"Creating a new topic given a name and a type",query:{create:"unless_exists",name:"Test Object 1",type:"/base/mqlexamples/testobject",id:null,guid:null},techniques:["adding data"]},{name:"Setting a basic unique property to a topic",query:{name:"Test Object 1",type:"/base/mqlexamples/testobject",id:null,basic_property:{value:42,connect:"update"}},techniques:["adding data"]},{name:"Connecting one topic to another",query:{name:"Test Object 1",type:"/base/mqlexamples/testobject",
id:null,link_to_topic:{name:"Test Object 2",type:"/base/mqlexamples/testobject",id:null,connect:"insert"}},techniques:["adding data"]},{name:"Deleting a link between two topics",query:{name:"Test Object 1",type:"/base/mqlexamples/testobject",id:null,link_to_topic:{name:"Test Object 2",type:"/base/mqlexamples/testobject",id:null,connect:"delete"}},techniques:["adding data"]}];CueCard.ExampleTechniqueMap={all:[]};
for(var i=0;i<CueCard.Examples.length;i++){var example=CueCard.Examples[i];CueCard.ExampleTechniqueMap.all.push(i);for(var x=0;x<example.techniques.length;x++){var technique=example.techniques[x];if(technique in CueCard.ExampleTechniqueMap)CueCard.ExampleTechniqueMap[technique].push(i);else CueCard.ExampleTechniqueMap[technique]=[i]}}
CueCard.Languages=[{name:"Afrikaans",id:"/lang/af"},{name:"Akkadian",id:"/lang/kk"},{name:"Albanian",id:"/lang/sq"},{name:"Amharic",id:"/lang/am"},{name:"Arabic",id:"/lang/ar"},{name:"Armenian",id:"/lang/hy"},{name:"Artificial",id:"/lang/art"},{name:"Asturian",id:"/lang/ast"},{name:"Australian languages",id:"/lang/aus"},{name:"Azerbaijani",id:"/lang/az"},{name:"Balinese",id:"/lang/ban"},{name:"Bambara",id:"/lang/bm"},{name:"Bantu",id:"/lang/bnt"},{name:"Basque",id:"/lang/eu"},{name:"Batak",id:"/lang/btk"},
{name:"Belarusian",id:"/lang/be"},{name:"Bengali",id:"/lang/bn"},{name:"Bhojpuri",id:"/lang/bho"},{name:"Bosnian",id:"/lang/bs"},{name:"Breton",id:"/lang/br"},{name:"Bulgarian",id:"/lang/bg"},{name:"Buriat",id:"/lang/bua"},{name:"Catalan",id:"/lang/ca"},{name:"Cebuano",id:"/lang/ceb"},{name:"Cherokee",id:"/lang/chr"},{name:"Chichewa",id:"/lang/ny"},{name:"Chinese",id:"/lang/zh"},{name:"Cornish",id:"/lang/kw"},{name:"Corsican",id:"/lang/co"},{name:"Cree",id:"/lang/cr"},{name:"Creoles",id:"/lang/cpf"},
{name:"Croatian",id:"/lang/hr"},{name:"Czech",id:"/lang/cs"},{name:"Danish",id:"/lang/da"},{name:"Duala",id:"/lang/dua"},{name:"Dutch",id:"/lang/nl"},{name:"English",id:"/lang/en"},{name:"Esperanto",id:"/lang/eo"},{name:"Estonian",id:"/lang/et"},{name:"Faroese",id:"/lang/fo"},{name:"Filipino",id:"/lang/fil"},{name:"Finnish",id:"/lang/fi"},{name:"French",id:"/lang/fr"},{name:"Frisian",id:"/lang/fy"},{name:"Friulian",id:"/lang/fur"},{name:"Fulah",id:"/lang/ff"},{name:"Ga",id:"/lang/gaa"},{name:"Gaelic",
id:"/lang/gd"},{name:"Gallegan",id:"/lang/gl"},{name:"Georgian",id:"/lang/ka"},{name:"German",id:"/lang/de"},{name:"Germanic",id:"/lang/gem"},{name:"Greek",id:"/lang/el"},{name:"Guarani",id:"/lang/gn"},{name:"Haitian",id:"/lang/ht"},{name:"Hausa",id:"/lang/ha"},{name:"Hawaiian",id:"/lang/haw"},{name:"Hebrew",id:"/lang/he"},{name:"Hindi",id:"/lang/hi"},{name:"Hungarian",id:"/lang/hu"},{name:"Icelandic",id:"/lang/is"},{name:"Indonesian",id:"/lang/id"},{name:"Inuktitut",id:"/lang/ku"},{name:"Inuktitut",
id:"/lang/iu"},{name:"Irish",id:"/lang/ga"},{name:"Italian",id:"/lang/it"},{name:"Japanese",id:"/lang/ja"},{name:"Judeo-Arabic",id:"/lang/jrb"},{name:"Kalaallisut",id:"/lang/kl"},{name:"Khmer",id:"/lang/km"},{name:"Kinyarwanda",id:"/lang/rw"},{name:"Klingon",id:"/lang/tlh"},{name:"Kongo",id:"/lang/kg"},{name:"Korean",id:"/lang/ko"},{name:"Ladino",id:"/lang/lad"},{name:"Latin",id:"/lang/la"},{name:"Latvian",id:"/lang/lv"},{name:"Limburgan",id:"/lang/li"},{name:"Lingala",id:"/lang/ln"},{name:"Lithuanian",
id:"/lang/lt"},{name:"Low German",id:"/lang/nds"},{name:"Luxembourgish",id:"/lang/lb"},{name:"Macedonian",id:"/lang/mk"},{name:"Malagasy",id:"/lang/mg"},{name:"Malay",id:"/lang/ms"},{name:"Malayalam",id:"/lang/ml"},{name:"Maltese",id:"/lang/mt"},{name:"Mandingo",id:"/lang/man"},{name:"Manx",id:"/lang/gv"},{name:"Maori",id:"/lang/mi"},{name:"Marathi",id:"/lang/mr"},{name:"Mohawk",id:"/lang/moh"},{name:"Moldavian",id:"/lang/mo"},{name:"Mongolian",id:"/lang/mn"},{name:"Nahuatl",id:"/lang/nah"},{name:"Navajo",
id:"/lang/nv"},{name:"Neapolitan",id:"/lang/nap"},{name:"Nepali",id:"/lang/ne"},{name:"Norse,",id:"/lang/non"},{name:"Northern Sami",id:"/lang/se"},{name:"Norwegian",id:"/lang/no"},{name:"Norwegian Nynorsk",id:"/lang/nn"},{name:"Occitan",id:"/lang/oc"},{name:"Panjabi",id:"/lang/pa"},{name:"Papiamento",id:"/lang/pap"},{name:"Persian",id:"/lang/fa"},{name:"Polish",id:"/lang/pl"},{name:"Portuguese",id:"/lang/pt"},{name:"Pushto",id:"/lang/ps"},{name:"Quechua",id:"/lang/qu"},{name:"Raeto-Romance",id:"/lang/rm"},
{name:"Romanian",id:"/lang/ro"},{name:"Romany",id:"/lang/rom"},{name:"Russian",id:"/lang/ru"},{name:"Sakha",id:"/lang/sah"},{name:"Sanskrit",id:"/lang/sa"},{name:"Sardinian",id:"/lang/sc"},{name:"Scots",id:"/lang/sco"},{name:"Serbian",id:"/lang/sr"},{name:"Shona",id:"/lang/sn"},{name:"Sicilian",id:"/lang/scn"},{name:"Slovak",id:"/lang/sk"},{name:"Slovenian",id:"/lang/sl"},{name:"Songhai",id:"/lang/son"},{name:"Spanish",id:"/lang/es"},{name:"Sundanese",id:"/lang/su"},{name:"Swahili",id:"/lang/sw"},
{name:"Swedish",id:"/lang/sv"},{name:"Syriac",id:"/lang/syr"},{name:"Tagalog",id:"/lang/tl"},{name:"Tahitian",id:"/lang/ty"},{name:"Tajik",id:"/lang/tg"},{name:"Tamashek",id:"/lang/tmh"},{name:"Tamil",id:"/lang/ta"},{name:"Telugu",id:"/lang/te"},{name:"Thai",id:"/lang/th"},{name:"Tibetan",id:"/lang/bo"},{name:"Tonga",id:"/lang/to"},{name:"Turkish",id:"/lang/tr"},{name:"Turkmen",id:"/lang/tk"},{name:"Tuvinian",id:"/lang/tyv"},{name:"Ukrainian",id:"/lang/uk"},{name:"Urdu",id:"/lang/ur"},{name:"Uzbek",
id:"/lang/uz"},{name:"Vietnamese",id:"/lang/vi"},{name:"Welsh",id:"/lang/cy"},{name:"Wolof",id:"/lang/wo"},{name:"Xhosa",id:"/lang/xh"},{name:"Yiddish",id:"/lang/yi"},{name:"Yoruba",id:"/lang/yo"},{name:"Zulu",id:"/lang/zu"}];
CueCard.XMetawebCosts={tu:{meaning:"time/user",subsystem:"graphd"},ts:{meaning:"time/system",subsystem:"graphd"},tr:{meaning:"time/real",subsystem:"graphd"},te:{meaning:"time/overall",subsystem:"graphd"},pr:{meaning:"page reclaims",subsystem:"graphd"},pf:{meaning:"page faults",subsystem:"graphd"},dw:{meaning:"primitive data writes",subsystem:"graphd"},dr:{meaning:"primitive data reads",subsystem:"graphd"},"in":{meaning:"index size reads",subsystem:"graphd"},ir:{meaning:"index element reads",subsystem:"graphd"},
iw:{meaning:"index element write",subsystem:"graphd"},va:{meaning:"value allocation",subsystem:"graphd"},dt:{meaning:"total time spent in the session",subsystem:"client/me"},mr:{meaning:"number of mql requests (independent of caches)",subsystem:"client/me"},ch:{meaning:"cache/hit (memcache, not Squid)",subsystem:"client/me",important:true},cm:{meaning:"cache/miss (memcache, not Squid)",subsystem:"client/me"},cr:{meaning:"cache/read (memcache, not Squid)",subsystem:"client/me"},cs:{meaning:"cache skip (browser shift+reload skips memcache)",
subsystem:"client/me"},lh:{meaning:"lojson-cache/hit",subsystem:"client/me"},lm:{meaning:"lojson-cache/miss",subsystem:"client/me"},lr:{meaning:"lojson-cache/read",subsystem:"client/me"},nreqs:{meaning:"graph requests",subsystem:"client/me",important:true},tf:{meaning:"time/formatted",subsystem:"client/me"},tg:{meaning:"time/graph",subsystem:"client/me",important:true},rt:{meaning:"relevance/time",subsystem:"client/me"},cc:{meaning:"cpu time (utime + stime)",subsystem:"client/me"},mcu:{meaning:"mql user time",
subsystem:"client/me"},mcs:{meaning:"mql system time",subsystem:"client/me"},tm:{meaning:"mql real time",subsystem:"client/me",important:true},utime:{meaning:"time in user mode (float)",subsystem:"client/me"},stime:{meaning:"time in system mode (float)",subsystem:"client/me"},maxrss:{meaning:"maximum resident set size",subsystem:"client/me"},ixrss:{meaning:"shared memory size",subsystem:"client/me"},idrss:{meaning:"unshared memory size",subsystem:"client/me"},isrss:{meaning:"unshared stack size",
subsystem:"client/me"},minflt:{meaning:"page faults not requiring I/O",subsystem:"client/me"},majflt:{meaning:"page faults requiring I/O",subsystem:"client/me"},nswap:{meaning:"number of swap outs",subsystem:"client/me"},inblock:{meaning:"block input operations",subsystem:"client/me"},oublock:{meaning:"block output operations",subsystem:"client/me"},msgsnd:{meaning:"messages sent",subsystem:"client/me"},msgrcv:{meaning:"messages received",subsystem:"client/me"},nsignals:{meaning:"signals received",
subsystem:"client/me"},nvcsw:{meaning:"voluntary context switches",subsystem:"client/me"},nivcsw:{meaning:"involuntary context switches",subsystem:"client/me"},br:{meaning:"number of blob requests",subsystem:"client/me"},bctn:{meaning:"cdb thumbnail time - from blobclient POV",subsystem:"client/me"},rt:{meaning:"relevance/time (FIX: same name, different semantics?)",subsystem:"gix"},pt:{meaning:"postgres time",subsystem:"gix"},qt:{meaning:"actual postgres query time",subsystem:"gix"},ct:{meaning:"postgres connect time",
subsystem:"gix"},mt:{meaning:"MQL time",subsystem:"gix"},tt:{meaning:"total time",subsystem:"other"},mt:{meaning:"total MQL time: mql_output + mql_filter",subsystem:"other"},mft:{meaning:"MQL filter time (total time, ie. not per invocation)",subsystem:"other"},mfc:{meaning:"number of mql_filter invocations",subsystem:"other"},sh:{meaning:"squid/hit",subsystem:"cache"},st:{meaning:"squid/total time",subsystem:"cache"},so:{meaning:"squid/origin server time",subsystem:"cache"}};
jQuery&&jQuery(window).trigger("acre.template.register",{pkgid:"//62b.cuecard.site.tags.svn.freebase-site.googlecode.dev/dialogs",source:{def:function(){var b=function(){var a=this.tpackage,d=this.exports,c=a._template_fragments,j=a.runtime.new_markuplist(),f=0;j[f++]=c[0];var e=function(g){var h=a.runtime.new_markuplist(),l=0;h[l++]=c[1];h[l++]=g;h[l++]=c[2];return h};e=a.runtime.tfunc_factory("acre_template(t)",e,a,undefined,false);d.acre_template=e;e.source_microdata=null;j[f++]=c[3];f=function(g){var h=
a.runtime.new_markuplist(),l=0;h[l++]=c[4];var o=function(n){var k=a.runtime.new_markuplist(),m=0;k[m++]=c[5];a.runtime.foreach(this,CueCard.ExampleTechniques,function(r,s){for(var t=1;t;){k[m++]=c[6];k[m++]=a.runtime.make_attr_safe(s===n?"cuecard-examples-technique-selected":"cuecard-examples-technique");k[m++]=c[7];k[m++]=a.runtime.make_attr_safe(s);k[m++]=c[8];k[m++]=s;k[m++]=c[9];k[m++]=CueCard.ExampleTechniqueMap[s].length;k[m++]=c[10];t--}return t?a.runtime._break_token:a.runtime._continue_token});
k[m++]=c[11];return k};o=a.runtime.tfunc_factory("list_techniques(selected_technique)",o,a,undefined,false);o.source_microdata=null;h[l++]=c[12];var p=function(n){var k=a.runtime.new_markuplist(),m=0;k[m++]=c[13];a.runtime.foreach(this,CueCard.Examples,function(r,s){for(var t=1;t;){if(n!=="all"?s.techniques.indexOf(n)!==-1:true){k[m++]=c[14];k[m++]=a.runtime.make_attr_safe(r);k[m++]=c[15];k[m++]=a.runtime.make_attr_safe(r);k[m++]=c[16];k[m++]=s.name;k[m++]=c[17]}t--}return t?a.runtime._break_token:
a.runtime._continue_token});k[m++]=c[18];return k};p=a.runtime.tfunc_factory("list_examples(technique)",p,a,undefined,false);p.source_microdata=null;h[l++]=c[19];a.runtime.ondomready(function(){var n=$("#dialog-examples").height()-$("#dialog-examples .modal-title").height()-$("#dialog-examples .modal-buttons").height();$("#cuecard-examples-dialog").height(n-50);selectTechnique=function(k){k=k||"all";$(".cuecard-examples-dialog-columnBody.cuecard-examples-dialog-column-0").acre(o(k));$(".cuecard-examples-dialog-columnBody.cuecard-examples-dialog-column-1").acre(p(k));
return false};selectExample=function(k){$(".cuecard-examples-example").removeClass("cuecard-examples-example-selected");$("#cuecard-example-"+k).addClass("cuecard-examples-example-selected");$("#cuecard-examples-dialog").find("textarea").val(CueCard.jsonize(CueCard.Examples[k].query,{indentCount:2}));return false};selectTechnique();$("#examples-submit").click(function(){var k=$("#cuecard-examples-dialog").find("textarea").val();g.onDone(k)})},this);h[l++]=c[20];return h};f=a.runtime.tfunc_factory("examples(opts)",
f,a,undefined,false);d.examples=f;f.source_microdata=null;return j};b.source_microdata=null;return b}(),info:{file:"//62b.cuecard.site.tags.svn.freebase-site.googlecode.dev/dialogs",stringtable:["",'\n  <div class="modal-inner">\n    <h1 class="modal-title">\n      <span>Generated Acre Template</span>\n    </h1>\n    <div class="modal-content">\n      <textarea id="template-code" wrap="off">','</textarea>\n    </div>\n  </div>\n  <div class="modal-buttons">\n    <button class="button button-cancel">OK</button>\n  </div>',
"","","",'\n    <a class="','" href="javascript:selectTechnique(\'',"')\">\n      "," (",")\n    </a>","","","",'\n    <a class="cuecard-examples-example" href="javascript:selectExample(\'','\')" id="cuecard-example-','">\n      ',"\n    </a>","",'\n\n  <div class="modal-inner">\n    <h1 class="modal-title">\n      <span>Examples</span>\n    </h1>\n    <div class="modal-content" id="cuecard-examples-dialog">\n      <div class="cuecard-examples-dialog-columnHeader cuecard-examples-dialog-column-0">Techniques</div>\n      <div class="cuecard-examples-dialog-columnHeader cuecard-examples-dialog-column-1">Examples</div>\n      <div class="cuecard-examples-dialog-columnHeader cuecard-examples-dialog-column-2">Query</div>\n      <div class="cuecard-examples-dialog-columnBody cuecard-examples-dialog-column-0"></div>\n      <div class="cuecard-examples-dialog-columnBody cuecard-examples-dialog-column-1"></div>\n      <textarea class="cuecard-examples-dialog-columnBody cuecard-examples-dialog-column-2 cuecard-examples-query" readonly="true" wrap="off">\n    </textarea></div>\n  </div>\n  \n  <div class="modal-buttons">\n    <button class="button button-submit" id="examples-submit" type="submit">Paste &amp; Run</button>\n    <button class="button button-cancel">Cancel</button>\n  </div>',
""],debug_locs:[1,1,1,1,1,1,6,6,6,6,12,12,12,12,12,12,12,12,18,18,18,18,18,18,18,18,18,18,18,20,20,20,20,22,22,22,22,24,24,24,24,24,24,24,24,24,25,25,25,25,25,26,26,26,26,26,26,27,27,27,27,27,29,29,29,29,31,31,31,31,31,31,31,31,31,31,32,32,32,33,33,33,33,33,33,33,34,34,34,34,34,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,81,81,81,81,81,81,81,81],output_mode:"html"}}});
jQuery&&jQuery(window).trigger("acre.template.register",{pkgid:"//62b.cuecard.site.tags.svn.freebase-site.googlecode.dev/query-editor",source:{def:function(){var b=function(){var a=this.tpackage,d=this.exports,c=a._template_fragments,j=a.runtime.new_markuplist(),f=0;j[f++]=c[0];f=function(e,g){var h=a.runtime.new_markuplist(),l=0;h[l++]=c[1];var o=a.runtime.uniqueid("onclick");mjt._eventcb[o]=function(){e._showExamples()};h[l++]=c[2];h[l++]=a.runtime.make_attr_safe(o);h[l++]=c[3];o=a.runtime.uniqueid("onclick");
mjt._eventcb[o]=function(){e._editor.editor.history.undo()};h[l++]=c[4];h[l++]=a.runtime.make_attr_safe(o);h[l++]=c[5];o=a.runtime.uniqueid("onclick");mjt._eventcb[o]=function(){e._editor.editor.history.redo()};h[l++]=c[6];h[l++]=a.runtime.make_attr_safe(o);h[l++]=c[7];o=a.runtime.uniqueid("onclick");mjt._eventcb[o]=function(){e.content("");e.focus()};h[l++]=c[8];h[l++]=a.runtime.make_attr_safe(o);h[l++]=c[9];o=a.runtime.uniqueid("onclick");mjt._eventcb[o]=function(){e.startAssistAtCursor()};h[l++]=
c[10];h[l++]=a.runtime.make_attr_safe(o);h[l++]=c[11];o=a.runtime.uniqueid("onclick");mjt._eventcb[o]=function(){e._onCleanUp()};h[l++]=c[12];h[l++]=a.runtime.make_attr_safe(o);h[l++]=c[13];o=a.runtime.uniqueid("onclick");mjt._eventcb[o]=function(){e._onRun(false)};h[l++]=c[14];h[l++]=a.runtime.make_attr_safe(o);h[l++]=c[15];a.runtime.ondomready(function(){var p=$(e._container);e._controlTopContainer=p.find(".cuecard-queryEditor-controls-top");e._iframeContainer=p.find(".cuecard-queryEditor-content");
e._controlBottomContainer=p.find(".cuecard-queryEditor-controls-bottom");e._addCodemirror(p.find(".cuecard-queryEditor-content"),g);e.layout=function(){var n=p.height()-e._controlTopContainer[0].offsetHeight-e._controlBottomContainer[0].offsetHeight;e._iframeContainer.height(n).css("top",e._controlTopContainer[0].offsetHeight)};e.layout()},this);h[l++]=c[16];return h};f=a.runtime.tfunc_factory("query_editor(queryEditor, codeMirrorOptions)",f,a,undefined,false);d.query_editor=f;f.source_microdata=
null;return j};b.source_microdata=null;return b}(),info:{file:"//62b.cuecard.site.tags.svn.freebase-site.googlecode.dev/query-editor",stringtable:["",'\n\n  <div class="cuecard-queryEditor-inner">\n    <div class="cuecard-queryEditor-controls-top">\n      <table cellpadding="0" cellspacing="0" width="100%"><tr>\n        <td class="cuecard-queryEditor-controls-leftAligned">','\n          <button class="button cuecard-queryEditor-examples" onclick="return mjt._eventcb.','.apply(this, [event])">\n            Examples...\n          </button>\n        </td>\n        <td class="cuecard-queryEditor-controls-leftAligned">\n          <span>\n            <a href="http://www.freebase.com/docs/data" target="_blank">MQL\u00a0Tutorial</a>\u00a0\u2022\u00a0<a href="http://www.freebase.com/docs/mql" target="_blank">MQL\u00a0Reference</a>\n          </span>\n        </td>\n        <td width="99%"></td>\n        <td class="cuecard-queryEditor-controls-rightAligned">',
'\n          <button class="button cuecard-queryEditor-undo" onclick="return mjt._eventcb.','.apply(this, [event])">\n            Undo\n          </button>\n        </td>\n        <td class="cuecard-queryEditor-controls-rightAligned">','\n          <button class="button cuecard-queryEditor-redo" onclick="return mjt._eventcb.','.apply(this, [event])">\n            Redo\n          </button>\n        </td>\n        <td class="cuecard-queryEditor-controls-rightAligned">','\n          <button class="button cuecard-queryEditor-redo" onclick="return mjt._eventcb.',
'.apply(this, [event])">\n            Clear\n          </button>\n        </td>\n      </tr></table>\n    </div>\n    <div class="cuecard-queryEditor-content"></div>\n    <div class="cuecard-queryEditor-controls-bottom">\n      <table cellpadding="0" cellspacing="0" width="100%"><tr>\n        <td class="cuecard-queryEditor-controls-leftAligned">','\n          <button class="button button-primary cuecard-queryEditor-queryAssist" onclick="return mjt._eventcb.','.apply(this, [event])">\n            Query\u00a0Assist\n          </button>\n          <span class="cuecard-queryEditor-buttonHint">Tab</span>\n        </td>\n        <td width="90%"></td>\n        <td class="cuecard-queryEditor-controls-rightAligned">',
'\n          <button class="button cuecard-queryEditor-cleanUp" onclick="return mjt._eventcb.','.apply(this, [event])">\n            Clean\u00a0Up\n          </button>\n        </td>\n        <td class="cuecard-queryEditor-controls-rightAligned">','\n          <button class="button button-primary cuecard-queryEditor-run" onclick="return mjt._eventcb.','.apply(this, [event])">\n            Run\n          </button>\n          <span class="cuecard-queryEditor-buttonHint">Ctrl-Enter</span>\n        </td>\n      </tr></table>\n    </div>\n  </div>',
""],debug_locs:[1,1,1,1,1,1,7,7,7,7,14,14,14,14,14,14,14,14,14,14,14,14,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,32,32,32,32,32,32,32,32,32,32,32,38,38,38,38,38,38,38,38,38,38,38,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,57,57,57,57,57,57,57,57,57,57,57,57,57,63,63,63,63,63,63,63,63,63,63,63,72,72,72,72,72,72,72,72,72,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,90,90,90,90,90,90,90,90,90],output_mode:"html"}}});
jQuery&&jQuery(window).trigger("acre.template.register",{pkgid:"//62b.cuecard.site.tags.svn.freebase-site.googlecode.dev/control-pane",source:{def:function(){var b=function(){var a=this.tpackage,d=this.exports,c=a._template_fragments,j=a.runtime.new_markuplist(),f=0;j[f++]=c[0];var e=function(n,k){var m=a.runtime.new_markuplist(),r=0;m[r++]=c[1];var s=[{name:"Tools",template:g,key:"tools"},{name:"Variables",template:h,key:"variables"},{name:"Envelope",template:l,key:"envelope"},{name:"Custom Envelope",
template:o,key:"customEnvelope"},{name:"Settings",template:p,key:"settings"}];m[r++]=c[2];m[r++]=a.runtime.make_attr_safe(n);m[r++]=c[3];a.runtime.foreach(this,s,function(t,v){for(var u=1;u;){m[r++]=c[4];m[r++]=a.runtime.make_attr_safe(n);m[r++]=c[5];m[r++]=a.runtime.make_attr_safe(v.key);m[r++]=c[6];m[r++]=v.name;m[r++]=c[7];u--}return u?a.runtime._break_token:a.runtime._continue_token});m[r++]=c[8];a.runtime.foreach(this,s,function(t,v){for(var u=1;u;){m[r++]=c[9];m[r++]=a.runtime.make_attr_safe(n);
m[r++]=c[10];m[r++]=a.runtime.make_attr_safe(v.key);m[r++]=c[11];m[r++]=v.template(k);m[r++]=c[12];u--}return u?a.runtime._break_token:a.runtime._continue_token});m[r++]=c[13];a.runtime.ondomready(function(){k.layout=function(){var t=this._elmt,v=t.find(".section-tabs").innerHeight()-t.find(".section-tabset").outerHeight();t.find(".cuecard-controlPane-tabBody").css("height",v)};k.layout()},this);m[r++]=c[14];return m};e=a.runtime.tfunc_factory("tabs(id, controlPane)",e,a,undefined,false);d.tabs=e;
e.source_microdata=null;j[f++]=c[15];var g=function(n){var k=a.runtime.new_markuplist(),m=0;k[m++]=c[16];k[m++]=c[17];a.runtime.foreach(this,[{label:"Qualify All Properties",command:"_qualify",hint:'Expand all properties to their full IDs (e.g., "id" \u2192 "/type/object/id").'},{label:"Turn Inside Out",command:"_redangle",hint:"Take the inner most query node {...} that contains the text cursor and make it the outermost query node."},{label:"Generate Acre Template",command:"_generateCode",hint:"Generate an ACRE template that can render the result of this query."},
{label:"One-liner",command:"_oneLiner",hint:"Reformat query into a one-liner."}],function(r,s){for(var t=1;t;){k[m++]=c[18];var v=a.runtime.uniqueid("onclick");mjt._eventcb[v]=function(){n[s.command]()};k[m++]=c[19];k[m++]=a.runtime.make_attr_safe(s.label);k[m++]=c[20];k[m++]=a.runtime.make_attr_safe(v);k[m++]=c[21];k[m++]=s.hint;k[m++]=c[22];t--}return t?a.runtime._break_token:a.runtime._continue_token});k[m++]=c[23];return k};g=a.runtime.tfunc_factory("tools(controlPane)",g,a,undefined,false);d.tools=
g;g.source_microdata=null;j[f++]=c[24];var h=function(n){var k=a.runtime.new_markuplist(),m=0;k[m++]=c[25];var r=function(){var t=a.runtime.new_markuplist(),v=0;t[v++]=c[26];if(this.subst_id)t[v++]=a.runtime.bless(' id="'+this.subst_id+'"');t[v++]=c[27];var u=a.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){$(this).closest(".cuecard-controlPane-variables-row").remove()};t[v++]=c[28];t[v++]=a.runtime.make_attr_safe(u);t[v++]=c[29];return t};r=a.runtime.tfunc_factory("add_row()",r,a,undefined,
false);r.source_microdata=null;k[m++]=c[30];k[m++]=r();k[m++]=c[31];var s=a.runtime.uniqueid("onclick");mjt._eventcb[s]=function(){n._getTab("variables").find(".cuecard-controlPane-variables").append($.acre(r()))};k[m++]=c[32];k[m++]=a.runtime.make_attr_safe(s);k[m++]=c[33];return k};h=a.runtime.tfunc_factory("variables(controlPane)",h,a,undefined,false);d.variables=h;h.source_microdata=null;j[f++]=c[34];var l=function(n){var k=a.runtime.new_markuplist(),m=0;k[m++]=c[35];var r=n._getDefaults();k[m++]=
c[36];a.runtime.foreach(this,[{name:"extended",hint:"Enable MQL extensions"},{name:"as_of_time",hint:"Resolve the query based on data in Freebase as of the given time in ISO8601 format, e.g., 2009-02-28, 2009-03-13T22:16:40"},{name:"use_permission_of",hint:'Specify the id of an object (typically a user, domain or type) whose permission you want to copy (<a href="http://freebaseapps.com/docs/mql/ch06.html#id2972357" target="_blank">more details</a>).'},{name:"page",hint:'Page number starting from 1 if there is a "limit" property in the top level query node.'},
{name:"cursor",hint:""},{name:"lang",hint:"Return text values in the given language (specified with the language's Freebase ID)"},{name:"escape",hint:""},{name:"uniqueness_failure",hint:""}],function(s,t){for(var v=1;v;){k[m++]=c[37];k[m++]=t.name;k[m++]=c[38];switch(t.name){case "extended":k[m++]=c[39];var u=r.extended?{checked:""}:{};"name"in u||(k[m++]=c[40]);"type"in u||(k[m++]=c[41]);for(var B in u){k[m++]=" "+B;k[m++]=a.runtime.bless('="');k[m++]=a.runtime.htmlencode(""+u[B]);k[m++]=a.runtime.bless('"')}k[m++]=
c[42];break;case "as_of_time":k[m++]=c[43];k[m++]=a.runtime.make_attr_safe(r.as_of_time||"");k[m++]=c[44];break;case "use_permission_of":k[m++]=c[45];k[m++]=a.runtime.make_attr_safe(r.use_permission_of||"");k[m++]=c[46];break;case "page":k[m++]=c[47];u=a.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){n._runPage(-1)};k[m++]=c[48];k[m++]=a.runtime.make_attr_safe(u);k[m++]=c[49];u=a.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){n._runPage(1)};k[m++]=c[50];k[m++]=a.runtime.make_attr_safe(u);
k[m++]=c[51];break;case "cursor":k[m++]=c[52];u=a.runtime.uniqueid("onchange");mjt._eventcb[u]=function(){n._getTab("envelope").find("input[name='cursor'][value='custom']").attr("checked","checked")};k[m++]=c[53];k[m++]=a.runtime.make_attr_safe(u);k[m++]=c[54];u=a.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){n._runCursor(false)};k[m++]=c[55];k[m++]=a.runtime.make_attr_safe(u);k[m++]=c[56];u=a.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){n._runCursor(true)};k[m++]=c[57];k[m++]=
a.runtime.make_attr_safe(u);k[m++]=c[58];break;case "lang":k[m++]=c[59];a.runtime.foreach(this,CueCard.Languages,function(z,y){for(var q=1;q;){k[m++]=c[60];k[m++]=a.runtime.make_attr_safe(y.id);k[m++]=c[61];k[m++]=y.name;k[m++]=c[62];k[m++]=y.id;k[m++]=c[63];q--}return q?a.runtime._break_token:a.runtime._continue_token});k[m++]=c[64];break;case "escape":k[m++]=c[65];break;case "uniqueness_failure":k[m++]=c[66];break}k[m++]=c[67];if(t.hint.length>0){k[m++]=c[68];k[m++]=mjt.bless(t.hint);k[m++]=c[69]}k[m++]=
c[70];v--}return v?a.runtime._break_token:a.runtime._continue_token});k[m++]=c[71];return k};l=a.runtime.tfunc_factory("envelope(controlPane)",l,a,undefined,false);d.envelope=l;l.source_microdata=null;j[f++]=c[72];var o=function(n){var k=a.runtime.new_markuplist(),m=0;k[m++]=c[73];var r="env"in n._options?n._options.env:{},s=false;k[m++]=c[74];var t=function(v,u,B){var z=a.runtime.new_markuplist(),y=0;z[y++]=c[75];if(this.subst_id)z[y++]=a.runtime.bless(' id="'+this.subst_id+'"');z[y++]=c[76];z[y++]=
a.runtime.make_attr_safe(u||"");z[y++]=c[77];z[y++]=a.runtime.make_attr_safe(B||"");z[y++]=c[78];u=a.runtime.uniqueid("onclick");mjt._eventcb[u]=function(){$(this).closest(".cuecard-controlPane-customEnvelope-row").remove()};z[y++]=c[79];z[y++]=a.runtime.make_attr_safe(u);z[y++]=c[80];v||a.runtime.ondomready(function(){},this);z[y++]=c[81];return z};t=a.runtime.tfunc_factory("add_row(dontFocus, name, value)",t,a,undefined,false);t.source_microdata=null;k[m++]=c[82];a.runtime.foreach(this,r,function(v,
u){for(var B=1;B;){k[m++]=c[83];s=true;k[m++]=c[84];k[m++]=t(true,v,JSON.stringify(u));k[m++]=c[85];B--}return B?a.runtime._break_token:a.runtime._continue_token});k[m++]=c[86];if(!s){k[m++]=c[87];k[m++]=t(true);k[m++]=c[88]}k[m++]=c[89];r=a.runtime.uniqueid("onclick");mjt._eventcb[r]=function(){n._getTab("customEnvelope").find(".cuecard-controlPane-customEnvelope").append($.acre(t()))};k[m++]=c[90];k[m++]=a.runtime.make_attr_safe(r);k[m++]=c[91];return k};o=a.runtime.tfunc_factory("custom_envelope(controlPane)",
o,a,undefined,false);d.custom_envelope=o;o.source_microdata=null;j[f++]=c[92];var p=function(){var n=a.runtime.new_markuplist(),k=0;n[k++]=c[93];var m=$.cookie("cc_cp_clean")=="1"?{checked:""}:{};"type"in m||(n[k++]=c[94]);for(var r in m){n[k++]=" "+r;n[k++]=a.runtime.bless('="');n[k++]=a.runtime.htmlencode(""+m[r]);n[k++]=a.runtime.bless('"')}n[k++]=c[95];m=$.cookie("cc_cp_align")=="1"?{checked:""}:{};"type"in m||(n[k++]=c[96]);for(var s in m){n[k++]=" "+s;n[k++]=a.runtime.bless('="');n[k++]=a.runtime.htmlencode(""+
m[s]);n[k++]=a.runtime.bless('"')}n[k++]=c[97];s=$.cookie("cc_cp_multi")=="1"?{checked:""}:{};"type"in s||(n[k++]=c[98]);for(var t in s){n[k++]=" "+t;n[k++]=a.runtime.bless('="');n[k++]=a.runtime.htmlencode(""+s[t]);n[k++]=a.runtime.bless('"')}n[k++]=c[99];return n};p=a.runtime.tfunc_factory("settings(controlPane)",p,a,undefined,false);d.settings=p;p.source_microdata=null;j[f++]=c[100];return j};b.source_microdata=null;return b}(),info:{file:"//62b.cuecard.site.tags.svn.freebase-site.googlecode.dev/control-pane",
stringtable:["","",'\n\n  <div class="cuecard-controlPane section-tabs">\n    <div id="','">\n      <ul class="section-tabset clear">','\n        <li class="section-tab tab">\n          <a href="#',"-",'"><span>',"</span></a>\n        </li>",'\n      </ul>\n      <div class="tabbed-content">','\n        <div class="cuecard-controlPane-tabBody" id="',"-",'">\n          ',"\n        </div>","\n      </div>\n    </div>\n  </div>","","","",'\n\n  <div class="cuecard-controlPane-section">\n    <table><tr valign="top">\n      <td>',
'\n        <div class="cuecard-controlPane-powerTool">','\n          <input class="button" type="submit" value="','" onclick="return mjt._eventcb.','.apply(this, [event])">\n          <div class="cuecard-controlPane-powerTool-hint">',"</div>\n        </div>",'\n      </td>\n      <td width="40%">\n        Results of tools<br>\n        <input checked="true" name="tools-result" type="radio" value="replace"> replace query (undo-able)<br>\n        <input name="tools-result" type="radio" value="output"> go into output pane\n      </td>\n    </tr></table>\n  </div>',
"",'\n  <table class="cuecard-controlPane-variables">\n    <tr>\n      <th width="30%">name</th>\n      <th width="50%">value</th>\n      <th></th>\n    </tr>','<tr class="cuecard-controlPane-variables-row"',">\n      <td><input></td>\n      <td><input></td>\n      <td>",'\n        <input class="button" type="submit" value="Remove" onclick="return mjt._eventcb.','.apply(this, [event])">\n      </td>\n    </tr>',"\n    ","\n  </table>\n  <div>",'\n    <input class="button" type="submit" value="Add" onclick="return mjt._eventcb.',
'.apply(this, [event])">\n  </div>',"","",'\n  \n  <div class="cuecard-controlPane-explanation">\n    The query envelope contains directives to the query engine, specifying how to execute the query or how to return the results.\n  </div>\n  <table class="cuecard-controlPane-configurations">',"\n    <tr>\n      <td>","</td>\n      <td>","<input",' name="extended"',' type="checkbox"',">",'<input name="as_of_time" value="','">','<input name="use_permission_of" value="','">','<div class="cuecard-controlPane-configurations-page">\n            <input name="page" type="text">',
'\n            <input class="button" type="submit" value="Previous" onclick="return mjt._eventcb.','.apply(this, [event])">','\n            <input class="button" type="submit" value="Next" onclick="return mjt._eventcb.','.apply(this, [event])">\n          </div>','\n            <div>\n              <input checked="" name="cursor-opt" type="radio" value="">\n              unspecified (return all results, possibly time-out)\n            </div>\n            <div>\n              <input name="cursor-opt" type="radio" value="true">\n              true (start pagination with page size equal "limit" option in query)\n            </div>\n            <div>\n              <input name="cursor-opt" type="radio" value="custom">\n              continue from cursor: \n              <div class="cuecard-controlPane-configurations-cursor">',
'\n                <input name="cursor" type="text" onchange="return mjt._eventcb.','.apply(this, [event])">','\n                <input class="button" type="submit" value="Paste from Last Result" onclick="return mjt._eventcb.','.apply(this, [event])"> ','\n                <input class="button" type="submit" value="Paste &amp; Run" onclick="return mjt._eventcb.','.apply(this, [event])">\n              </div>\n            </div>','<select class="cuecard-controlPane-configurations-languages">\n            <option value="">--</option>',
'\n            <option value="','">'," (",")</option>","\n          </select>",'<select>\n            <option value="">--</option>\n            <option value="html">html</option>\n            <option value="false">false</option>\n          </select>','<select>\n            <option value="">--</option>\n            <option value="soft">soft</option>\n          </select>',"",'\n        <div class="cuecard-controlPane-hint">',"</div>","\n      </td>\n    </tr>","\n  </table>","","",'\n  \n  <table class="cuecard-controlPane-customEnvelope">\n    <tr>\n      <th width="30%">name</th>\n      <th width="50%">value</th>\n      <th></th>\n    </tr>',
'<tr class="cuecard-controlPane-customEnvelope-row"','>\n      <td><input value="','"></td>\n      <td><input value="','"></td>\n      <td>','\n        <input class="button" type="submit" value="Remove" onclick="return mjt._eventcb.','.apply(this, [event])">\n      </td>',"\n    </tr>","","","\n      ","","","\n      ","","\n  </table>\n  <div>",'\n    <input class="button" type="submit" value="Add" onclick="return mjt._eventcb.','.apply(this, [event])">\n  </div>',"","\n  <div>\n    <input",' type="checkbox"',
">\n    Always clean up query before running\n  </div>\n  <div>\n    <input",' type="checkbox"','>\n    Align JSON property values with spaces\n  </div>\n  <div style="display: none;">\n    <input type="checkbox">\n    Try running query as you edit\n  </div>\n  <div>\n    <input',' type="checkbox"',">\n    Show error messages with multiple lines on multiple lines\n  </div>",""],debug_locs:[1,1,1,1,1,1,7,7,7,7,9,9,10,11,12,13,14,15,16,17,20,20,20,20,20,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,
24,24,24,24,27,27,27,27,27,27,27,27,27,27,27,28,28,28,29,29,29,29,29,29,34,34,34,34,34,34,35,36,37,38,39,40,41,42,44,44,44,44,44,44,46,46,46,46,48,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,76,76,76,76,76,76,76,76,77,77,77,77,77,77,77,77,77,77,78,78,78,79,79,79,79,79,79,89,89,89,89,89,89,89,89,89,89,89,89,89,89,92,92,92,92,99,99,99,99,99,99,99,99,99,99,99,99,104,104,104,104,104,104,104,104,104,104,106,106,106,106,106,106,106,107,107,107,111,111,111,111,111,111,111,111,
111,113,113,113,113,113,113,113,116,116,116,116,118,118,119,120,121,122,123,124,125,126,127,128,129,130,131,137,137,137,137,137,137,137,137,137,138,138,138,138,140,140,140,140,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,144,144,144,144,144,146,146,146,146,146,150,150,150,150,150,150,150,150,151,151,151,151,151,151,151,152,152,152,152,167,167,167,167,167,167,167,167,167,167,167,167,167,167,167,167,167,167,167,168,168,168,168,168,168,168,169,169,169,169,169,169,169,172,172,172,172,
172,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,177,177,177,177,183,183,183,183,183,183,183,188,188,188,188,188,188,191,191,191,191,191,191,191,193,193,193,193,193,193,193,196,196,196,196,196,196,196,199,199,199,199,200,200,201,202,203,211,211,211,211,211,211,211,211,211,211,211,211,211,212,212,212,213,213,213,216,216,216,216,216,216,216,216,218,218,218,218,218,219,220,221,221,222,222,222,222,222,222,222,222,222,222,223,223,225,225,225,226,226,226,226,226,226,226,227,227,227,
228,228,232,232,232,232,232,232,232,232,232,234,234,234,234,234,234,234,237,237,237,237,239,239,239,239,239,239,239,239,239,239,239,239,239,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,251,251,251,251,251,251,251,251,251,251,251,251,251,251,251,251,251,251,251,254,254,254,254,254,254,254,254,255,255,255,255],output_mode:"html"}}});
jQuery&&jQuery(window).trigger("acre.template.register",{pkgid:"//62b.cuecard.site.tags.svn.freebase-site.googlecode.dev/output-pane",source:{def:function(){var b=function(){var a=this.tpackage,d=this.exports,c=a._template_fragments,j=a.runtime.new_markuplist(),f=0;j[f++]=c[0];var e=function(g,h){var l=a.runtime.new_markuplist(),o=0;l[o++]=c[1];var p=[{name:"Tree",key:"tree"},{name:"Text",key:"text"},{name:"Status",key:"status"}];l[o++]=c[2];l[o++]=a.runtime.make_attr_safe(g);l[o++]=c[3];a.runtime.foreach(this,
p,function(n,k){for(var m=1;m;){l[o++]=c[4];l[o++]=a.runtime.make_attr_safe(g);l[o++]=c[5];l[o++]=a.runtime.make_attr_safe(k.key);l[o++]=c[6];l[o++]=k.name;l[o++]=c[7];m--}return m?a.runtime._break_token:a.runtime._continue_token});l[o++]=c[8];a.runtime.foreach(this,p,function(n,k){for(var m=1;m;){l[o++]=c[9];l[o++]=a.runtime.make_attr_safe(g);l[o++]=c[10];l[o++]=a.runtime.make_attr_safe(k.key);l[o++]=c[11];switch(k.key){case "tree":l[o++]=c[12];break;case "text":l[o++]=c[13];break;case "status":l[o++]=
c[14];break}l[o++]=c[15];m--}return m?a.runtime._break_token:a.runtime._continue_token});l[o++]=c[16];a.runtime.ondomready(function(){h.layout=function(){var n=this._elmt,k=n.innerHeight()-n.find(".section-tab").outerHeight()-(h._options.verticalPadding||12),m=n.find(".section-tabs").innerWidth()-(h._options.horizontalPadding||0),r=k-20,s=m-20;n.find(".cuecard-outputPane-tabBody, .cuecard-outputPane-textarea").height(k).width(m);n.find(".cuecard-outputPane-status, .cuecard-outputPane-tree").css("padding",
10).height(r).width(s)};h.layout()},this);l[o++]=c[17];return l};e=a.runtime.tfunc_factory("tabs(id, outputPane)",e,a,undefined,false);d.tabs=e;e.source_microdata=null;j[f++]=c[18];e=function(g){var h=a.runtime.new_markuplist(),l=0;h[l++]=c[19];if(g["x-metaweb-tid"]){h[l++]=c[20];var o=g["x-metaweb-tid"];h[l++]=c[21];h[l++]=a.runtime.make_attr_safe(encodeURIComponent(o));h[l++]=c[22];h[l++]=o;h[l++]=c[23]}h[l++]=c[24];if(g["x-metaweb-cost"]){h[l++]=c[25];o=g["x-metaweb-cost"].split(",");var p=true;
h[l++]=c[26];a.runtime.foreach(this,o,function(n,k){for(var m=1;m;){h[l++]=c[27];var r=k.split("=");r[0]=r[0].replace(/^\s+/,"").replace(/\s+$/,"");var s=CueCard.XMetawebCosts[r[0]],t=(n%2?"cuecard-outputPane-odd":"cuecard-outputPane-even")+(s!==undefined&&"important"in s&&s.important?" cuecard-outputPane-cost-important":"");h[l++]=c[28];h[l++]=a.runtime.make_attr_safe(t);h[l++]=c[29];h[l++]=r[0];h[l++]=c[30];h[l++]=r[1];h[l++]=c[31];if(s!==undefined){h[l++]=c[32];h[l++]=s.meaning;h[l++]=c[33]}else h[l++]=
c[34];h[l++]=c[35];if(s!==undefined){h[l++]=c[36];h[l++]=s.subsystem;h[l++]=c[37]}else h[l++]=c[38];h[l++]=c[39];m--}return m?a.runtime._break_token:a.runtime._continue_token});h[l++]=c[40]}h[l++]=c[41];p=true;h[l++]=c[42];a.runtime.foreach(this,g,function(n,k){for(var m=1;m;){if(n!="x-metaweb-cost"&&n!="x-metaweb-tid"){h[l++]=c[43];var r=p?{"class":"cuecard-outputPane-odd"}:{"class":"cuecard-outputPane-even"};for(var s in r){h[l++]=" "+s;h[l++]=a.runtime.bless('="');h[l++]=a.runtime.htmlencode(""+
r[s]);h[l++]=a.runtime.bless('"')}h[l++]=c[44];h[l++]=n;h[l++]=c[45];h[l++]=k;h[l++]=c[46];p=!p;h[l++]=c[47]}m--}return m?a.runtime._break_token:a.runtime._continue_token});h[l++]=c[48];return h};e=a.runtime.tfunc_factory("status(headers)",e,a,undefined,false);d.status=e;e.source_microdata=null;j[f++]=c[49];return j};b.source_microdata=null;return b}(),info:{file:"//62b.cuecard.site.tags.svn.freebase-site.googlecode.dev/output-pane",stringtable:["","",'\n  \n  <div class="cuecard-outputPane section-tabs">\n    <div id="',
'">\n      <ul class="section-tabset clear">','\n        <li class="section-tab tab">\n          <a href="#',"-",'"><span>',"</span></a>\n        </li>",'\n      </ul>\n      <div class="tabbed-content">','\n        <div class="cuecard-outputPane-tabBody" id="',"-",'">','<div class="cuecard-outputPane-tree"></div>','<textarea class="cuecard-outputPane-textarea" readonly="true" wrap="off"></textarea>','<div class="cuecard-outputPane-status"></div>',"\n        </div>","\n      </div>\n    </div>\n  </div>",
"","",'\n  <div class="cuecard-outputPane-responseHeaders">',"",'\n      <h3>x-metaweb-tid (transaction ID)</h3>\n      <div>\n        <a href="http://stats.metaweb.com/query/transaction?tid=','" target="_blank">\n          ',"\n        </a>\n      </div>","","","\n      <h3>x-metaweb-cost header components</h3>\n      <table>\n        <tr><th>code</th><th>value</th><th>meaning</th><th>subsystem</th></tr>","",'\n          <tr class="','">\n            <td>',"</td>\n            <td>","</td>","\n            <td>",
"</td>","<td>--</td>","","\n            <td>","</td>","<td>--</td>","\n          </tr>","\n      </table>","\n\n    <h3>response headers</h3>\n    <table>","","\n        <tr",">\n          <td>","</td>\n          <td>","</td>\n        </tr>","","\n    </table>\n\n  </div>",""],debug_locs:[1,1,1,1,1,1,6,6,6,6,8,8,9,10,11,12,13,14,17,17,17,17,17,19,19,19,19,19,20,20,20,20,20,20,20,20,21,21,21,21,21,21,24,24,24,24,24,24,24,24,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,29,29,29,35,35,35,35,
35,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,52,52,52,52,52,54,54,54,54,57,57,57,58,58,61,61,61,61,61,62,62,62,65,65,65,65,67,67,68,68,69,70,71,75,75,75,75,75,75,75,76,76,77,78,79,80,81,82,82,82,83,83,83,84,84,84,85,85,85,85,85,85,85,85,85,85,86,86,86,86,86,86,86,86,86,86,88,88,88,88,88,88,90,90,90,94,94,94,94,94,95,95,95,95,95,96,96,96,96,96,96,96,96,96,96,97,97,97,98,98,98,100,100,100,102,102,102,102,102,102,106,106,106,106,106,106,106,106,106,107,107,107,107],output_mode:"html"}}});
