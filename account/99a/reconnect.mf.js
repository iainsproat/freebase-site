
/*
 * Copyright 2012, Google Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Additional Licenses for Third Party components can be found here:
 * http://wiki.freebase.com/wiki/Freebase_Site_License
 *
 */
/*
 
 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE 
*/
(function(c){function h(e,b,f){var d=this,g=e.add(this),i=e.find(f.tabs),h=b.jquery?b:e.children(b),l;i.length||(i=e.children());h.length||(h=e.parent().find(b));h.length||(h=c(b));c.extend(this,{click:function(b,e){var h=i.eq(b);"string"==typeof b&&b.replace("#","")&&(b=b.replace(/([\"\#\$\%\&\'\(\)\*\+\,\.\/\:\;\<\=\>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1"),h=i.filter("[href*="+b.replace("#","")+"]"),b=Math.max(i.index(h),0));if(f.rotate){var r=i.length-1;if(0>b)return d.click(r,e);if(b>r)return d.click(0,
e)}if(!h.length){if(0<=l)return d;b=f.initialIndex;h=i.eq(b)}if(b===l)return d;e=e||c.Event();e.type="onBeforeClick";g.trigger(e,[b]);if(!e.isDefaultPrevented())return a[f.effect].call(d,b,function(){e.type="onClick";g.trigger(e,[b])}),l=b,i.removeClass(f.current),h.addClass(f.current),d},getConf:function(){return f},getTabs:function(){return i},getPanes:function(){return h},getCurrentPane:function(){return h.eq(l)},getCurrentTab:function(){return i.eq(l)},getIndex:function(){return l},next:function(){return d.click(l+
1)},prev:function(){return d.click(l-1)},destroy:function(){i.unbind(f.event).removeClass(f.current);h.find("a[href^=#]").unbind("click.T");return d}});c.each(["onBeforeClick","onClick"],function(b,a){c.isFunction(f[a])&&c(d).bind(a,f[a]);d[a]=function(b){c(d).bind(a,b);return d}});f.history&&c.fn.history&&(c.tools.history.init(i),f.event="history");i.each(function(b){c(this).bind(f.event,function(a){d.click(b,a);return a.preventDefault()})});h.find("a[href^=#]").bind("click.T",function(a){d.click(c(this).attr("href"),
a)});location.hash?d.click(location.hash):(0===f.initialIndex||0<f.initialIndex)&&d.click(f.initialIndex)}c.tools=c.tools||{version:"@VERSION"};c.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,history:!1},addEffect:function(c,b){a[c]=b}};var a={"default":function(a,b){this.getPanes().hide().eq(a).show();b.call()},fade:function(a,b){var c=this.getConf(),d=c.fadeOutSpeed,g=this.getPanes();d?g.fadeOut(d):g.hide();g.eq(a).fadeIn(c.fadeInSpeed,
b)},slide:function(a,b){this.getPanes().slideUp(200);this.getPanes().eq(a).slideDown(400,b)},ajax:function(a,b){this.getPanes().eq(0).load(this.getTabs().eq(a).attr("href"),b)}},g;c.tools.tabs.addEffect("horizontal",function(a,b){g||(g=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){c(this).hide()});this.getPanes().eq(a).animate({width:g},function(){c(this).show();b.call()})});c.fn.tabs=function(a,b){var f=this.data("tabs");f&&(f.destroy(),this.removeData("tabs"));
c.isFunction(b)&&(b={onBeforeClick:b});b=c.extend({},c.tools.tabs.conf,b);this.each(function(){f=new h(c(this),a,b);c(this).data("tabs",f)});return b.api?f:this}})(jQuery);
(function(c){function h(){if(c.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}c.fn.ajaxSubmit=function(a){function g(){function b(){var a=i.attr("target"),h=i.attr("action");e.setAttribute("target",g);"POST"!=e.getAttribute("method")&&e.setAttribute("method","POST");e.getAttribute("action")!=d.url&&e.setAttribute("action",d.url);d.skipEncodingOverride||
i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});d.timeout&&setTimeout(function(){s=!0;f()},d.timeout);var m=[];try{if(d.extraData)for(var j in d.extraData)m.push(c('<input type="hidden" name="'+j+'" value="'+d.extraData[j]+'" />').appendTo(e)[0]);k.appendTo("body");k.data("form-plugin-onload",f);e.submit()}finally{e.setAttribute("action",h),a?e.setAttribute("target",a):i.removeAttr("target"),c(m).remove()}}function f(){if(!t){k.removeData("form-plugin-onload");var a=!0;try{if(s)throw"timeout";
n=l.contentWindow?l.contentWindow.document:l.contentDocument?l.contentDocument:l.document;var b="xml"==d.dataType||n.XMLDocument||c.isXMLDoc(n);h("isXml="+b);if(!b&&(window.opera&&(null==n.body||""==n.body.innerHTML))&&--v){h("requeing onLoad callback, DOM not available");setTimeout(f,250);return}t=!0;j.responseText=n.documentElement?n.documentElement.innerHTML:null;j.responseXML=n.XMLDocument?n.XMLDocument:n;j.getResponseHeader=function(a){return{"content-type":d.dataType}[a]};var e=/(json|script)/.test(d.dataType);
if(e||d.textarea){var g=n.getElementsByTagName("textarea")[0];if(g)j.responseText=g.value;else if(e){var i=n.getElementsByTagName("pre")[0];i&&(j.responseText=i.innerHTML)}}else if("xml"==d.dataType&&!j.responseXML&&null!=j.responseText){var b=j,m=j.responseText,e=void 0;window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(m)):e=(new DOMParser).parseFromString(m,"text/xml");b.responseXML=e&&e.documentElement&&"parsererror"!=e.documentElement.tagName?e:null}u=c.httpData(j,
d.dataType)}catch(o){h("error caught:",o),a=!1,j.error=o,c.handleError(d,j,"error",o)}a&&(d.success.call(d.context,u,"success",j),p&&c.event.trigger("ajaxSuccess",[j,d]));p&&c.event.trigger("ajaxComplete",[j,d]);p&&!--c.active&&c.event.trigger("ajaxStop");d.complete&&d.complete.call(d.context,j,a?"success":"error");setTimeout(function(){k.removeData("form-plugin-onload");k.remove();j.responseXML=null},100)}}var e=i[0];if(c(":input[name=submit],:input[id=submit]",e).length)alert('Error: Form elements must not have name or id of "submit".');
else{var d=c.extend(!0,{},c.ajaxSettings,a);d.context=d.context||d;var g="jqFormIO"+(new Date).getTime(),m="_"+g;window[m]=function(){var a=k.data("form-plugin-onload");if(a){a();window[m]=void 0;try{delete window[m]}catch(b){}}};var k=c('<iframe id="'+g+'" name="'+g+'" src="'+d.iframeSrc+'" onload="window[\'_\'+this.id]()" />'),l=k[0];k.css({position:"absolute",top:"-1000px",left:"-1000px"});var j={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},
getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;k.attr("src",d.iframeSrc)}},p=d.global;p&&!c.active++&&c.event.trigger("ajaxStart");p&&c.event.trigger("ajaxSend",[j,d]);if(d.beforeSend&&!1===d.beforeSend.call(d.context,j,d))d.global&&c.active--;else if(!j.aborted){var t=!1,s=0,o=e.clk;if(o){var q=o.name;q&&!o.disabled&&(d.extraData=d.extraData||{},d.extraData[q]=o.value,"image"==o.type&&(d.extraData[q+".x"]=e.clk_x,d.extraData[q+".y"]=e.clk_y))}d.forceSync?
b():setTimeout(b,10);var u,n,v=50}}}if(!this.length)return h("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof a&&(a={success:a});var e=c.trim(this.attr("action"));e&&(e=(e.match(/^([^#]+)/)||[])[1]);e=e||window.location.href||"";a=c.extend(!0,{url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);e={};this.trigger("form-pre-serialize",[this,a,e]);if(e.veto)return h("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),
this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return h("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var b,f,d=this.formToArray(a.semantic);if(a.data)for(b in a.extraData=a.data,a.data)if(a.data[b]instanceof Array)for(var m in a.data[b])d.push({name:b,value:a.data[b][m]});else f=a.data[b],f=c.isFunction(f)?f():f,d.push({name:b,value:f});if(a.beforeSubmit&&!1===a.beforeSubmit(d,this,a))return h("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",
[d,this,a,e]);if(e.veto)return h("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;b=c.param(d);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+b,a.data=null):a.data=b;var i=this,k=[];a.resetForm&&k.push(function(){i.resetForm()});a.clearForm&&k.push(function(){i.clearForm()});if(!a.dataType&&a.target){var l=a.success||function(){};k.push(function(b){var d=a.replaceTarget?"replaceWith":"html";c(a.target)[d](b).each(l,arguments)})}else a.success&&k.push(a.success);
a.success=function(b,c,d){for(var e=a.context||a,f=0,g=k.length;f<g;f++)k[f].apply(e,[b,c,d||i,i])};b=0<c("input:file",this).length;m="multipart/form-data"==i.attr("enctype")||"multipart/form-data"==i.attr("encoding");!1!==a.iframe&&(b||a.iframe||m)?a.closeKeepAlive?c.get(a.closeKeepAlive,g):g():c.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};c.fn.ajaxForm=function(a){if(0===this.length){var g=this.selector,e=this.context;if(!c.isReady&&g)return h("DOM not ready, queuing ajaxForm"),
c(function(){c(g,e).ajaxForm(a)}),this;h("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.isDefaultPrevented()||(b.preventDefault(),c(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var e=a.target,d=c(e);if(!d.is(":submit,input:image")){e=d.closest(":submit");if(0==e.length)return;e=e[0]}var g=this;g.clk=e;"image"==e.type&&(void 0!=a.offsetX?(g.clk_x=a.offsetX,g.clk_y=a.offsetY):
"function"==typeof c.fn.offset?(d=d.offset(),g.clk_x=a.pageX-d.left,g.clk_y=a.pageY-d.top):(g.clk_x=a.pageX-e.offsetLeft,g.clk_y=a.pageY-e.offsetTop));setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)})};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=function(a){var g=[];if(0===this.length)return g;var e=this[0],b=a?e.getElementsByTagName("*"):e.elements;if(!b)return g;var f,d,h,i;f=0;for(max=b.length;f<max;f++)if(d=b[f],h=d.name)if(a&&
e.clk&&"image"==d.type)!d.disabled&&e.clk==d&&(g.push({name:h,value:c(d).val()}),g.push({name:h+".x",value:e.clk_x},{name:h+".y",value:e.clk_y}));else if((i=c.fieldValue(d,!0))&&i.constructor==Array){d=0;for(jmax=i.length;d<jmax;d++)g.push({name:h,value:i[d]})}else null!==i&&"undefined"!=typeof i&&g.push({name:h,value:i});if(!a&&e.clk&&(a=c(e.clk),b=a[0],(h=b.name)&&!b.disabled&&"image"==b.type))g.push({name:h,value:a.val()}),g.push({name:h+".x",value:e.clk_x},{name:h+".y",value:e.clk_y});return g};
c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(a){var g=[];this.each(function(){var e=this.name;if(e){var b=c.fieldValue(this,a);if(b&&b.constructor==Array)for(var f=0,d=b.length;f<d;f++)g.push({name:e,value:b[f]});else null!==b&&"undefined"!=typeof b&&g.push({name:this.name,value:b})}});return c.param(g)};c.fn.fieldValue=function(a){for(var g=[],e=0,b=this.length;e<b;e++){var f=c.fieldValue(this[e],a);null===f||("undefined"==typeof f||f.constructor==
Array&&!f.length)||(f.constructor==Array?c.merge(g,f):g.push(f))}return g};c.fieldValue=function(a,g){var e=a.name,b=a.type,f=a.tagName.toLowerCase();void 0===g&&(g=!0);if(g&&(!e||a.disabled||"reset"==b||"button"==b||("checkbox"==b||"radio"==b)&&!a.checked||("submit"==b||"image"==b)&&a.form&&a.form.clk!=a||"select"==f&&-1==a.selectedIndex))return null;if("select"==f){var d=a.selectedIndex;if(0>d)return null;for(var e=[],f=a.options,h=(b="select-one"==b)?d+1:f.length,d=b?d:0;d<h;d++){var i=f[d];if(i.selected){var k=
i.value;k||(k=i.attributes&&i.attributes.value&&!i.attributes.value.specified?i.text:i.value);if(b)return k;e.push(k)}}return e}return c(a).val()};c.fn.clearForm=function(){return this.each(function(){c("input,select,textarea",this).clearFields()})};c.fn.clearFields=c.fn.clearInputs=function(){return this.each(function(){var a=this.type,c=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==c?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==c&&(this.selectedIndex=-1)})};
c.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};c.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};c.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var g=this.type;"checkbox"==g||"radio"==g?this.checked=a:"option"==this.tagName.toLowerCase()&&(g=c(this).parent("select"),a&&(g[0]&&"select-one"==g[0].type)&&g.find("option").selected(!1),
this.selected=a)})}})(jQuery);
(function(c,h){h.register={};h.register.display_form_errors=function(a,g){c.each(g.messages,function(c,b){var f=b.code.match(/^\/api\/status\/error\/invalid\/(.*)(\/.*)?/);f?(f=a.find("input[name="+f[1]+"]:first"),f.length&&(f.addClass("error"),f.siblings(".input-help:first").hide(),f=f.siblings(".input-error:first"),f.length&&(f.text(b.message),f.show()))):"/api/status/error/input/validation"===b.code?h.status.error("Username invalid. Please try a different username.",!0):h.status.error(JSON.stringify(b),
!0)})};h.register.init=function(){c("#register-accordion").tabs("#register-accordion div.pane",{tabs:"h2",effect:"slide",initialIndex:null});c("form").each(function(a,g){var e=c(g);e.ajaxForm({dataType:"json",beforeSubmit:function(){h.status.info("Creating account...",!0);h.disable(c("button.submit"))},success:function(a){c("#registration").html(a.result.html);h.status.clear()},error:function(a){a=JSON.parse(a.responseText);h.status.clear();h.enable(c("button.submit"));h.register.display_form_errors(e,
a)}})});c("form input").change(function(){var a=c(this);a.removeClass("error");a.siblings(".input-error:first").hide();a.siblings(".input-help:first").show()})};setTimeout(h.register.init,0)})(jQuery,window.freebase);(function(c){c(function(){c("#fb-signin-link").attr("href",c("#reconnect-signin").attr("href"))})})(jQuery);
